;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/atlassian/highlight-actions-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){AJS.toInit(function(){if(RW.confluenceVersion>=5.4&&A("#main-content").length>0){var F;var L;Confluence.HighlightAction.WORKING_AREA={MAINCONTENT_AND_COMMENT:function(N){L=L||A("#main-content, .comment-content");return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(L,N)},MAINCONTENT_ONLY:function(N){F=F||A("#main-content");return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(F,N)},COMMENT_ONLY:function(N){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(A(".comment-content"),N)}};if(RW.confluenceVersion>=5.7){var G=Confluence.HighlightAction.RangeHelper.computeSearchTextObject;Confluence.HighlightAction.RangeHelper.computeSearchTextObject=function(O,N){if(O.hasClass("rw_custom_section")||O.parent().hasClass("rw_custom_section")){return G(F,N)}else{return G(O,N)}}}}if(Confluence.HighlightAction){var I=Confluence.HighlightAction.getButtonHandler("com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment");I.shouldDisplay=Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY}var H="#main-content";var J="com.atlassian.confluence.plugins.confluence-jira-content:create-JIRA-issue-summary";var C=function(N){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(A(H),N)};if(Confluence.CreateJiraContent){if(Confluence.CreateJiraContent.InlineDialog){var K;var E;var D=function(N){if(K){K.remove()}K=Confluence.CreateJiraContent.InlineDialog.openCreateIssueDialog(N);K.show();Confluence.CreateJiraContent.displayDialog=K;Confluence.CreateJiraContent.Analytics.sendAnalyticsForDialogOpen()};var B=function(N){if(E){E.remove()}E=Confluence.CreateJiraContent.InlineDialog.openFeatureDiscoveryDialog(N,D);E.show()};var M=function(N){N.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(A(H),N.range);if(Confluence.CreateJiraContent.FeatureDiscoveryDialog.shouldShowFeatureDiscovery()){B(N)}else{D(N)}};Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(J,{onClick:M,shouldDisplay:C})}else{Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(J,{onClick:function(N){N.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(A(H),N.range);if(Confluence.CreateJiraContent.FeatureDiscovery.shouldShowFeatureDiscovery()){Confluence.CreateJiraContent.Dialogs.showFeatureDiscoveryDialog(N)}else{Confluence.CreateJiraContent.Dialogs.showCreateIssueDialog(N)}},shouldDisplay:C})}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/underscore-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(){var U=RW;var Q=U._;var I=Array.prototype,X=Object.prototype,a=Function.prototype;var H=I.push,T=I.slice,E=I.concat,V=X.toString,N=X.hasOwnProperty;var C=Array.isArray,W=Object.keys,J=a.bind;var Z=function(d){if(d instanceof Z){return d}if(!(this instanceof Z)){return new Z(d)}this._wrapped=d};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=Z}exports._=Z}else{U._=Z}Z.VERSION="1.7.0";var F=function(e,d,f){if(d===void 0){return e}switch(f==null?3:f){case 1:return function(g){return e.call(d,g)};case 2:return function(h,g){return e.call(d,h,g)};case 3:return function(h,g,i){return e.call(d,h,g,i)};case 4:return function(g,i,h,j){return e.call(d,g,i,h,j)}}return function(){return e.apply(d,arguments)}};Z.iteratee=function(e,d,f){if(e==null){return Z.identity}if(Z.isFunction(e)){return F(e,d,f)}if(Z.isObject(e)){return Z.matches(e)}return Z.property(e)};Z.each=Z.forEach=function(h,j,e){if(h==null){return h}j=F(j,e);var d,g=h.length;if(g===+g){for(d=0;d<g;d++){j(h[d],d,h)}}else{var f=Z.keys(h);for(d=0,g=f.length;d<g;d++){j(h[f[d]],f[d],h)}}return h};Z.map=Z.collect=function(i,k,f){if(i==null){return[]}k=Z.iteratee(k,f);var h=i.length!==+i.length&&Z.keys(i),g=(h||i).length,e=Array(g),j;for(var d=0;d<g;d++){j=h?h[d]:d;e[d]=k(i[j],j,i)}return e};var R="Reduce of empty array with no initial value";Z.reduce=Z.foldl=Z.inject=function(i,k,d,f){if(i==null){i=[]}k=F(k,f,4);var h=i.length!==+i.length&&Z.keys(i),g=(h||i).length,e=0,j;if(arguments.length<3){if(!g){throw new TypeError(R)}d=i[h?h[e++]:e++]}for(;e<g;e++){j=h?h[e]:e;d=k(d,i[j],j,i)}return d};Z.reduceRight=Z.foldr=function(h,j,d,f){if(h==null){h=[]}j=F(j,f,4);var g=h.length!==+h.length&&Z.keys(h),e=(g||h).length,i;if(arguments.length<3){if(!e){throw new TypeError(R)}d=h[g?g[--e]:--e]}while(e--){i=g?g[e]:e;d=j(d,h[i],i,h)}return d};Z.find=Z.detect=function(g,e,f){var d;e=Z.iteratee(e,f);Z.some(g,function(j,h,i){if(e(j,h,i)){d=j;return true}});return d};Z.filter=Z.select=function(g,d,f){var e=[];if(g==null){return e}d=Z.iteratee(d,f);Z.each(g,function(j,h,i){if(d(j,h,i)){e.push(j)}});return e};Z.reject=function(f,d,e){return Z.filter(f,Z.negate(Z.iteratee(d)),e)};Z.every=Z.all=function(i,d,f){if(i==null){return true}d=Z.iteratee(d,f);var h=i.length!==+i.length&&Z.keys(i),g=(h||i).length,e,j;for(e=0;e<g;e++){j=h?h[e]:e;if(!d(i[j],j,i)){return false}}return true};Z.some=Z.any=function(i,d,f){if(i==null){return false}d=Z.iteratee(d,f);var h=i.length!==+i.length&&Z.keys(i),g=(h||i).length,e,j;for(e=0;e<g;e++){j=h?h[e]:e;if(d(i[j],j,i)){return true}}return false};Z.contains=Z.include=function(e,d){if(e==null){return false}if(e.length!==+e.length){e=Z.values(e)}return Z.indexOf(e,d)>=0};Z.invoke=function(f,g){var d=T.call(arguments,2);var e=Z.isFunction(g);return Z.map(f,function(h){return(e?g:h[g]).apply(h,d)})};Z.pluck=function(e,d){return Z.map(e,Z.property(d))};Z.where=function(e,d){return Z.filter(e,Z.matches(d))};Z.findWhere=function(e,d){return Z.find(e,Z.matches(d))};Z.max=function(g,j,d){var m=-Infinity,k=-Infinity,l,f;if(j==null&&g!=null){g=g.length===+g.length?g:Z.values(g);for(var h=0,e=g.length;h<e;h++){l=g[h];if(l>m){m=l}}}else{j=Z.iteratee(j,d);Z.each(g,function(o,i,n){f=j(o,i,n);if(f>k||f===-Infinity&&m===-Infinity){m=o;k=f}})}return m};Z.min=function(g,j,d){var m=Infinity,k=Infinity,l,f;if(j==null&&g!=null){g=g.length===+g.length?g:Z.values(g);for(var h=0,e=g.length;h<e;h++){l=g[h];if(l<m){m=l}}}else{j=Z.iteratee(j,d);Z.each(g,function(o,i,n){f=j(o,i,n);if(f<k||f===Infinity&&m===Infinity){m=o;k=f}})}return m};Z.shuffle=function(h){var i=h&&h.length===+h.length?h:Z.values(h);var g=i.length;var d=Array(g);for(var e=0,f;e<g;e++){f=Z.random(0,e);if(f!==e){d[e]=d[f]}d[f]=i[e]}return d};Z.sample=function(e,f,d){if(f==null||d){if(e.length!==+e.length){e=Z.values(e)}return e[Z.random(e.length-1)]}return Z.shuffle(e).slice(0,Math.max(0,f))};Z.sortBy=function(e,f,d){f=Z.iteratee(f,d);return Z.pluck(Z.map(e,function(i,g,h){return{value:i,index:g,criteria:f(i,g,h)}}).sort(function(j,i){var h=j.criteria;var g=i.criteria;if(h!==g){if(h>g||h===void 0){return 1}if(h<g||g===void 0){return -1}}return j.index-i.index}),"value")};var K=function(d){return function(g,h,f){var e={};h=Z.iteratee(h,f);Z.each(g,function(k,i){var j=h(k,i,g);d(e,k,j)});return e}};Z.groupBy=K(function(d,f,e){if(Z.has(d,e)){d[e].push(f)}else{d[e]=[f]}});Z.indexBy=K(function(d,f,e){d[e]=f});Z.countBy=K(function(d,f,e){if(Z.has(d,e)){d[e]++}else{d[e]=1}});Z.sortedIndex=function(k,i,j,f){j=Z.iteratee(j,f,1);var h=j(i);var d=0,g=k.length;while(d<g){var e=d+g>>>1;if(j(k[e])<h){d=e+1}else{g=e}}return d};Z.toArray=function(d){if(!d){return[]}if(Z.isArray(d)){return T.call(d)}if(d.length===+d.length){return Z.map(d,Z.identity)}return Z.values(d)};Z.size=function(d){if(d==null){return 0}return d.length===+d.length?d.length:Z.keys(d).length};Z.partition=function(h,d,f){d=Z.iteratee(d,f);var g=[],e=[];Z.each(h,function(j,i,k){(d(j,i,k)?g:e).push(j)});return[g,e]};Z.first=Z.head=Z.take=function(f,e,d){if(f==null){return void 0}if(e==null||d){return f[0]}if(e<0){return[]}return T.call(f,0,e)};Z.initial=function(f,e,d){return T.call(f,0,Math.max(0,f.length-(e==null||d?1:e)))};Z.last=function(f,e,d){if(f==null){return void 0}if(e==null||d){return f[f.length-1]}return T.call(f,Math.max(f.length-e,0))};Z.rest=Z.tail=Z.drop=function(f,e,d){return T.call(f,e==null||d?1:e)};Z.compact=function(d){return Z.filter(d,Z.identity)};var c=function(f,k,d,e){if(k&&Z.every(f,Z.isArray)){return E.apply(e,f)}for(var g=0,h=f.length;g<h;g++){var j=f[g];if(!Z.isArray(j)&&!Z.isArguments(j)){if(!d){e.push(j)}}else{if(k){H.apply(e,j)}else{c(j,k,d,e)}}}return e};Z.flatten=function(e,d){return c(e,d,false,[])};Z.without=function(d){return Z.difference(d,T.call(arguments,1))};Z.uniq=Z.unique=function(l,g,k,e){if(l==null){return[]}if(!Z.isBoolean(g)){e=k;k=g;g=false}if(k!=null){k=Z.iteratee(k,e)}var n=[];var d=[];for(var j=0,f=l.length;j<f;j++){var m=l[j];if(g){if(!j||d!==m){n.push(m)}d=m}else{if(k){var h=k(m,j,l);if(Z.indexOf(d,h)<0){d.push(h);n.push(m)}}else{if(Z.indexOf(n,m)<0){n.push(m)}}}}return n};Z.union=function(){return Z.uniq(c(arguments,true,true,[]))};Z.intersection=function(l){if(l==null){return[]}var d=[];var k=arguments.length;for(var f=0,h=l.length;f<h;f++){var g=l[f];if(Z.contains(d,g)){continue}for(var e=1;e<k;e++){if(!Z.contains(arguments[e],g)){break}}if(e===k){d.push(g)}}return d};Z.difference=function(e){var d=c(T.call(arguments,1),true,true,[]);return Z.filter(e,function(f){return !Z.contains(d,f)})};Z.zip=function(g){if(g==null){return[]}var f=Z.max(arguments,"length").length;var e=Array(f);for(var d=0;d<f;d++){e[d]=Z.pluck(arguments,d)}return e};Z.object=function(h,e){if(h==null){return{}}var d={};for(var f=0,g=h.length;f<g;f++){if(e){d[h[f]]=e[f]}else{d[h[f][0]]=h[f][1]}}return d};Z.indexOf=function(h,f,g){if(h==null){return -1}var d=0,e=h.length;if(g){if(typeof g=="number"){d=g<0?Math.max(0,e+g):g}else{d=Z.sortedIndex(h,f);return h[d]===f?d:-1}}for(;d<e;d++){if(h[d]===f){return d}}return -1};Z.lastIndexOf=function(g,e,f){if(g==null){return -1}var d=g.length;if(typeof f=="number"){d=f<0?d+f+1:Math.min(d,f+1)}while(--d>=0){if(g[d]===e){return d}}return -1};Z.range=function(i,f,h){if(arguments.length<=1){f=i||0;i=0}h=h||1;var g=Math.max(Math.ceil((f-i)/h),0);var e=Array(g);for(var d=0;d<g;d++,i+=h){e[d]=i}return e};var O=function(){};Z.bind=function(g,e){var d,f;if(J&&g.bind===J){return J.apply(g,T.call(arguments,1))}if(!Z.isFunction(g)){throw new TypeError("Bind must be called on a function")}d=T.call(arguments,2);f=function(){if(!(this instanceof f)){return g.apply(e,d.concat(T.call(arguments)))}O.prototype=g.prototype;var i=new O;O.prototype=null;var h=g.apply(i,d.concat(T.call(arguments)));if(Z.isObject(h)){return h}return i};return f};Z.partial=function(d){var e=T.call(arguments,1);return function(){var f=0;var g=e.slice();for(var h=0,j=g.length;h<j;h++){if(g[h]===Z){g[h]=arguments[f++]}}while(f<arguments.length){g.push(arguments[f++])}return d.apply(this,g)}};Z.bindAll=function(g){var e,f=arguments.length,d;if(f<=1){throw new Error("bindAll must be passed function names")}for(e=1;e<f;e++){d=arguments[e];g[d]=Z.bind(g[d],g)}return g};Z.memoize=function(e,d){var f=function(i){var h=f.cache;var g=d?d.apply(this,arguments):i;if(!Z.has(h,g)){h[g]=e.apply(this,arguments)}return h[g]};f.cache={};return f};Z.delay=function(e,f){var d=T.call(arguments,2);return setTimeout(function(){return e.apply(null,d)},f)};Z.defer=function(d){return Z.delay.apply(Z,[d,1].concat(T.call(arguments,1)))};Z.throttle=function(e,g,k){var d,i,l;var j=null;var h=0;if(!k){k={}}var f=function(){h=k.leading===false?0:Z.now();j=null;l=e.apply(d,i);if(!j){d=i=null}};return function(){var m=Z.now();if(!h&&k.leading===false){h=m}var n=g-(m-h);d=this;i=arguments;if(n<=0||n>g){clearTimeout(j);j=null;h=m;l=e.apply(d,i);if(!j){d=i=null}}else{if(!j&&k.trailing!==false){j=setTimeout(f,n)}}return l}};Z.debounce=function(f,h,e){var k,j,d,i,l;var g=function(){var m=Z.now()-i;if(m<h&&m>0){k=setTimeout(g,h-m)}else{k=null;if(!e){l=f.apply(d,j);if(!k){d=j=null}}}};return function(){d=this;j=arguments;i=Z.now();var m=e&&!k;if(!k){k=setTimeout(g,h)}if(m){l=f.apply(d,j);d=j=null}return l}};Z.wrap=function(d,e){return Z.partial(e,d)};Z.negate=function(d){return function(){return !d.apply(this,arguments)}};Z.compose=function(){var d=arguments;var e=d.length-1;return function(){var g=e;var f=d[e].apply(this,arguments);while(g--){f=d[g].call(this,f)}return f}};Z.after=function(e,d){return function(){if(--e<1){return d.apply(this,arguments)}}};Z.before=function(f,e){var d;return function(){if(--f>0){d=e.apply(this,arguments)}else{e=null}return d}};Z.once=Z.partial(Z.before,2);Z.keys=function(f){if(!Z.isObject(f)){return[]}if(W){return W(f)}var e=[];for(var d in f){if(Z.has(f,d)){e.push(d)}}return e};Z.values=function(h){var g=Z.keys(h);var f=g.length;var d=Array(f);for(var e=0;e<f;e++){d[e]=h[g[e]]}return d};Z.pairs=function(h){var f=Z.keys(h);var e=f.length;var g=Array(e);for(var d=0;d<e;d++){g[d]=[f[d],h[f[d]]]}return g};Z.invert=function(h){var d={};var g=Z.keys(h);for(var e=0,f=g.length;e<f;e++){d[h[g[e]]]=g[e]}return d};Z.functions=Z.methods=function(f){var e=[];for(var d in f){if(Z.isFunction(f[d])){e.push(d)}}return e.sort()};Z.extend=function(g){if(!Z.isObject(g)){return g}var f,h;for(var d=1,e=arguments.length;d<e;d++){f=arguments[d];for(h in f){if(N.call(f,h)){g[h]=f[h]}}}return g};Z.pick=function(f,h,d){var m={},k;if(f==null){return m}if(Z.isFunction(h)){h=F(h,d);for(k in f){var j=f[k];if(h(j,k,f)){m[k]=j}}}else{var l=E.apply([],T.call(arguments,1));f=new Object(f);for(var g=0,e=l.length;g<e;g++){k=l[g];if(k in f){m[k]=f[k]}}}return m};Z.omit=function(f,g,d){if(Z.isFunction(g)){g=Z.negate(g)}else{var e=Z.map(E.apply([],T.call(arguments,1)),String);g=function(i,h){return !Z.contains(e,h)}}return Z.pick(f,g,d)};Z.defaults=function(g){if(!Z.isObject(g)){return g}for(var d=1,e=arguments.length;d<e;d++){var f=arguments[d];for(var h in f){if(g[h]===void 0){g[h]=f[h]}}}return g};Z.clone=function(d){if(!Z.isObject(d)){return d}return Z.isArray(d)?d.slice():Z.extend({},d)};Z.tap=function(e,d){d(e);return e};var Y=function(k,j,e,f){if(k===j){return k!==0||1/k===1/j}if(k==null||j==null){return k===j}if(k instanceof Z){k=k._wrapped}if(j instanceof Z){j=j._wrapped}var h=V.call(k);if(h!==V.call(j)){return false}switch(h){case"[object RegExp]":case"[object String]":return""+k===""+j;case"[object Number]":if(+k!==+k){return +j!==+j}return +k===0?1/+k===1/j:+k===+j;case"[object Date]":case"[object Boolean]":return +k===+j}if(typeof k!="object"||typeof j!="object"){return false}var d=e.length;while(d--){if(e[d]===k){return f[d]===j}}var i=k.constructor,g=j.constructor;if(i!==g&&"constructor" in k&&"constructor" in j&&!(Z.isFunction(i)&&i instanceof i&&Z.isFunction(g)&&g instanceof g)){return false}e.push(k);f.push(j);var o,n;if(h==="[object Array]"){o=k.length;n=o===j.length;if(n){while(o--){if(!(n=Y(k[o],j[o],e,f))){break}}}}else{var m=Z.keys(k),l;o=m.length;n=Z.keys(j).length===o;if(n){while(o--){l=m[o];if(!(n=Z.has(j,l)&&Y(k[l],j[l],e,f))){break}}}}e.pop();f.pop();return n};Z.isEqual=function(e,d){return Y(e,d,[],[])};Z.isEmpty=function(e){if(e==null){return true}if(Z.isArray(e)||Z.isString(e)||Z.isArguments(e)){return e.length===0}for(var d in e){if(Z.has(e,d)){return false}}return true};Z.isElement=function(d){return !!(d&&d.nodeType===1)};Z.isArray=C||function(d){return V.call(d)==="[object Array]"};Z.isObject=function(e){var d=typeof e;return d==="function"||d==="object"&&!!e};Z.each(["Arguments","Function","String","Number","Date","RegExp"],function(d){Z["is"+d]=function(e){return V.call(e)==="[object "+d+"]"}});if(!Z.isArguments(arguments)){Z.isArguments=function(d){return Z.has(d,"callee")}}if(typeof /./!=="function"){Z.isFunction=function(d){return typeof d=="function"||false}}Z.isFinite=function(d){return isFinite(d)&&!isNaN(parseFloat(d))};Z.isNaN=function(d){return Z.isNumber(d)&&d!==+d};Z.isBoolean=function(d){return d===true||d===false||V.call(d)==="[object Boolean]"};Z.isNull=function(d){return d===null};Z.isUndefined=function(d){return d===void 0};Z.has=function(e,d){return e!=null&&N.call(e,d)};Z.noConflict=function(){U._=Q;return this};Z.identity=function(d){return d};Z.constant=function(d){return function(){return d}};Z.noop=function(){};Z.property=function(d){return function(e){return e[d]}};Z.matches=function(d){var f=Z.pairs(d),e=f.length;return function(j){if(j==null){return !e}j=new Object(j);for(var h=0;h<e;h++){var k=f[h],g=k[0];if(k[1]!==j[g]||!(g in j)){return false}}return true}};Z.times=function(h,g,f){var d=Array(Math.max(0,h));g=F(g,f,1);for(var e=0;e<h;e++){d[e]=g(e)}return d};Z.random=function(e,d){if(d==null){d=e;e=0}return e+Math.floor(Math.random()*(d-e+1))};Z.now=Date.now||function(){return new Date().getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var D=Z.invert(G);var P=function(h){var e=function(i){return h[i]};var g="(?:"+Z.keys(h).join("|")+")";var f=RegExp(g);var d=RegExp(g,"g");return function(i){i=i==null?"":""+i;return f.test(i)?i.replace(d,e):i}};Z.escape=P(G);Z.unescape=P(D);Z.result=function(d,f){if(d==null){return void 0}var e=d[f];return Z.isFunction(e)?d[f]():e};var L=0;Z.uniqueId=function(d){var e=++L+"";return d?d+e:e};Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var S=/(.)^/;var A={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var B=/\\|'|\r|\n|\u2028|\u2029/g;var b=function(d){return"\\"+A[d]};Z.template=function(n,h,k){if(!h&&k){h=k}h=Z.defaults({},h,Z.templateSettings);var i=RegExp([(h.escape||S).source,(h.interpolate||S).source,(h.evaluate||S).source].join("|")+"|$","g");var j=0;var d="__p+='";n.replace(i,function(o,p,e,r,q){d+=n.slice(j,q).replace(B,b);j=q+o.length;if(p){d+="'+\n((__t=("+p+"))==null?'':_.escape(__t))+\n'"}else{if(e){d+="'+\n((__t=("+e+"))==null?'':__t)+\n'"}else{if(r){d+="';\n"+r+"\n__p+='"}}}return o});d+="';\n";if(!h.variable){d="with(obj||{}){\n"+d+"}\n"}d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{var g=new Function(h.variable||"obj","_",d)}catch(l){l.source=d;throw l}var m=function(e){return g.call(this,e,Z)};var f=h.variable||"obj";m.source="function("+f+"){\n"+d+"}";return m};Z.chain=function(e){var d=Z(e);d._chain=true;return d};var M=function(d){return this._chain?Z(d).chain():d};Z.mixin=function(d){Z.each(Z.functions(d),function(e){var f=Z[e]=d[e];Z.prototype[e]=function(){var g=[this._wrapped];H.apply(g,arguments);return M.call(this,f.apply(Z,g))}})};Z.mixin(Z);Z.each(["pop","push","reverse","shift","sort","splice","unshift"],function(d){var e=I[d];Z.prototype[d]=function(){var f=this._wrapped;e.apply(f,arguments);if((d==="shift"||d==="splice")&&f.length===0){delete f[0]}return M.call(this,f)}});Z.each(["concat","join","slice"],function(d){var e=I[d];Z.prototype[d]=function(){return M.call(this,e.apply(this._wrapped,arguments))}});Z.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return Z})}}.call(this));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/backbone-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(){var Q=this;var O=Q.Backbone;var P=Array.prototype.slice;var Y=Array.prototype.splice;var C;if(typeof exports!=="undefined"){C=exports}else{C=RW.Backbone={}}C.VERSION="0.9.2";var a=RW._;if(!a&&(typeof require!=="undefined")){a=require("underscore")}var G=Q.jQuery||Q.Zepto||Q.ender;C.setDomLibrary=function(c){G=c};C.noConflict=function(){Q.Backbone=O;return this};C.emulateHTTP=false;C.emulateJSON=false;var A=/\s+/;var N=C.Events={on:function(f,j,e){var d,h,g,c,i;if(!j){return this}f=f.split(A);d=this._callbacks||(this._callbacks={});while(h=f.shift()){i=d[h];g=i?i.tail:{};g.next=c={};g.context=e;g.callback=j;d[h]={tail:c,next:i?i.next:g}}return this},off:function(j,h,d){var c,k,e,g,f,i;if(!(k=this._callbacks)){return }if(!(j||h||d)){delete this._callbacks;return this}j=j?j.split(A):a.keys(k);while(c=j.shift()){e=k[c];delete k[c];if(!e||!(h||d)){continue}g=e.tail;while((e=e.next)!==g){f=e.callback;i=e.context;if((h&&f!==h)||(d&&i!==d)){this.on(c,f,i)}}}return this},trigger:function(f){var j,i,e,d,c,h,g;if(!(e=this._callbacks)){return this}h=e.all;f=f.split(A);g=P.call(arguments,1);while(j=f.shift()){if(i=e[j]){d=i.tail;while((i=i.next)!==d){i.callback.apply(i.context||this,g)}}if(i=h){d=i.tail;c=[j].concat(g);while((i=i.next)!==d){i.callback.apply(i.context||this,c)}}}return this}};N.bind=N.on;N.unbind=N.off;var K=C.Model=function(c,d){var e;c||(c={});if(d&&d.parse){c=this.parse(c)}if(e=D(this,"defaults")){c=a.extend({},e,c)}if(d&&d.collection){this.collection=d.collection}this.attributes={};this._escapedAttributes={};this.cid=a.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(c,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=a.clone(this.attributes);this.initialize.apply(this,arguments)};a.extend(K.prototype,N,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(c){return a.clone(this.attributes)},get:function(c){return this.attributes[c]},escape:function(c){var d;if(d=this._escapedAttributes[c]){return d}var e=this.get(c);return this._escapedAttributes[c]=a.escape(e==null?"":""+e)},has:function(c){return this.get(c)!=null},set:function(j,i,l){var k,g,e;if(a.isObject(j)||j==null){k=j;l=i}else{k={};k[j]=i}l||(l={});if(!k){return this}if(k instanceof K){k=k.attributes}if(l.unset){for(g in k){k[g]=void 0}}if(!this._validate(k,l)){return false}if(this.idAttribute in k){this.id=k[this.idAttribute]}var h=l.changes={};var d=this.attributes;var c=this._escapedAttributes;var f=this._previousAttributes||{};for(g in k){e=k[g];if(!a.isEqual(d[g],e)||(l.unset&&a.has(d,g))){delete c[g];(l.silent?this._silent:h)[g]=true}l.unset?delete d[g]:d[g]=e;if(!a.isEqual(f[g],e)||(a.has(d,g)!=a.has(f,g))){this.changed[g]=e;if(!l.silent){this._pending[g]=true}}else{delete this.changed[g];delete this._pending[g]}}if(!l.silent){this.change(l)}return this},unset:function(c,d){(d||(d={})).unset=true;return this.set(c,null,d)},clear:function(c){(c||(c={})).unset=true;return this.set(a.clone(this.attributes),c)},fetch:function(d){d=d?a.clone(d):{};var c=this;var e=d.success;d.success=function(h,f,g){if(!c.set(c.parse(h,g),d)){return false}if(e){e(c,h)}};d.error=C.wrapError(d.error,c,d);return(this.sync||C.sync).call(this,"read",this,d)},save:function(h,g,l){var i,f;if(a.isObject(h)||h==null){i=h;l=g}else{i={};i[h]=g}l=l?a.clone(l):{};if(l.wait){if(!this._validate(i,l)){return false}f=a.clone(this.attributes)}var d=a.extend({},l,{silent:true});if(i&&!this.set(i,l.wait?d:l)){return false}var e=this;var j=l.success;l.success=function(p,m,o){var n=e.parse(p,o);if(l.wait){delete l.wait;n=a.extend(i||{},n)}if(!e.set(n,l)){return false}if(j){j(e,p)}else{e.trigger("sync",e,p,l)}};l.error=C.wrapError(l.error,e,l);var c=this.isNew()?"create":"update";var k=(this.sync||C.sync).call(this,c,this,l);if(l.wait){this.set(f,d)}return k},destroy:function(d){d=d?a.clone(d):{};var c=this;var g=d.success;var f=function(){c.trigger("destroy",c,c.collection,d)};if(this.isNew()){f();return false}d.success=function(h){if(d.wait){f()}if(g){g(c,h)}else{c.trigger("sync",c,h,d)}};d.error=C.wrapError(d.error,c,d);var e=(this.sync||C.sync).call(this,"delete",this,d);if(!d.wait){f()}return e},url:function(){var c=D(this,"urlRoot")||D(this.collection,"url")||T();if(this.isNew()){return c}return c+(c.charAt(c.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(d,c){return d},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(d){d||(d={});var f=this._changing;this._changing=true;for(var c in this._silent){this._pending[c]=true}var e=a.extend({},d.changes,this._silent);this._silent={};for(var c in e){this.trigger("change:"+c,this,this.get(c),d)}if(f){return this}while(!a.isEmpty(this._pending)){this._pending={};this.trigger("change",this,d);for(var c in this.changed){if(this._pending[c]||this._silent[c]){continue}delete this.changed[c]}this._previousAttributes=a.clone(this.attributes)}this._changing=false;return this},hasChanged:function(c){if(!arguments.length){return !a.isEmpty(this.changed)}return a.has(this.changed,c)},changedAttributes:function(e){if(!e){return this.hasChanged()?a.clone(this.changed):false}var g,f=false,d=this._previousAttributes;for(var c in e){if(a.isEqual(d[c],(g=e[c]))){continue}(f||(f={}))[c]=g}return f},previous:function(c){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[c]},previousAttributes:function(){return a.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},_validate:function(e,d){if(d.silent||!this.validate){return true}e=a.extend({},this.attributes,e);var c=this.validate(e,d);if(!c){return true}if(d&&d.error){d.error(this,c,d)}else{this.trigger("error",this,c,d)}return false}});var b=C.Collection=function(d,c){c||(c={});if(c.model){this.model=c.model}if(c.comparator){this.comparator=c.comparator}this._reset();this.initialize.apply(this,arguments);if(d){this.reset(d,{silent:true,parse:c.parse})}};a.extend(b.prototype,N,{model:K,initialize:function(){},toJSON:function(c){return this.map(function(d){return d.toJSON(c)})},add:function(d,n){var j,l,f,k,m,e,g={},c={},h=[];n||(n={});d=a.isArray(d)?d.slice():[d];for(j=0,f=d.length;j<f;j++){if(!(k=d[j]=this._prepareModel(d[j],n))){throw new Error("Can't add an invalid model to a collection")}m=k.cid;e=k.id;if(g[m]||this._byCid[m]||((e!=null)&&(c[e]||this._byId[e]))){h.push(j);continue}g[m]=c[e]=k}j=h.length;while(j--){d.splice(h[j],1)}for(j=0,f=d.length;j<f;j++){(k=d[j]).on("all",this._onModelEvent,this);this._byCid[k.cid]=k;if(k.id!=null){this._byId[k.id]=k}}this.length+=f;l=n.at!=null?n.at:this.models.length;Y.apply(this.models,[l,0].concat(d));if(this.comparator){this.sort({silent:true})}if(n.silent){return this}for(j=0,f=this.models.length;j<f;j++){if(!g[(k=this.models[j]).cid]){continue}n.index=j;k.trigger("add",k,this,n)}return this},remove:function(h,f){var g,c,e,d;f||(f={});h=a.isArray(h)?h.slice():[h];for(g=0,c=h.length;g<c;g++){d=this.getByCid(h[g])||this.get(h[g]);if(!d){continue}delete this._byId[d.id];delete this._byCid[d.cid];e=this.indexOf(d);this.models.splice(e,1);this.length--;if(!f.silent){f.index=e;d.trigger("remove",d,this,f)}this._removeReference(d)}return this},push:function(d,c){d=this._prepareModel(d,c);this.add(d,c);return d},pop:function(d){var c=this.at(this.length-1);this.remove(c,d);return c},unshift:function(d,c){d=this._prepareModel(d,c);this.add(d,a.extend({at:0},c));return d},shift:function(d){var c=this.at(0);this.remove(c,d);return c},get:function(c){if(c==null){return void 0}return this._byId[c.id!=null?c.id:c]},getByCid:function(c){return c&&this._byCid[c.cid||c]},at:function(c){return this.models[c]},where:function(c){if(a.isEmpty(c)){return[]}return this.filter(function(d){for(var e in c){if(c[e]!==d.get(e)){return false}}return true})},sort:function(d){d||(d={});if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var c=a.bind(this.comparator,this);if(this.comparator.length==1){this.models=this.sortBy(c)}else{this.models.sort(c)}if(!d.silent){this.trigger("reset",this,d)}return this},pluck:function(c){return a.map(this.models,function(d){return d.get(c)})},reset:function(f,d){f||(f=[]);d||(d={});for(var e=0,c=this.models.length;e<c;e++){this._removeReference(this.models[e])}this._reset();this.add(f,a.extend({silent:true},d));if(!d.silent){this.trigger("reset",this,d)}return this},fetch:function(c){c=c?a.clone(c):{};if(c.parse===undefined){c.parse=true}var e=this;var d=c.success;c.success=function(h,f,g){e[c.add?"add":"reset"](e.parse(h,g),c);if(d){d(e,h)}};c.error=C.wrapError(c.error,e,c);return(this.sync||C.sync).call(this,"read",this,c)},create:function(d,c){var e=this;c=c?a.clone(c):{};d=this._prepareModel(d,c);if(!d){return false}if(!c.wait){e.add(d,c)}var f=c.success;c.success=function(g,i,h){if(c.wait){e.add(g,c)}if(f){f(g,i)}else{g.trigger("sync",d,i,c)}};d.save(null,c);return d},parse:function(d,c){return d},chain:function(){return a(this.models).chain()},_reset:function(c){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(e,d){d||(d={});if(!(e instanceof K)){var c=e;d.collection=this;e=new this.model(c,d);if(!e._validate(e.attributes,d)){e=false}}else{if(!e.collection){e.collection=this}}return e},_removeReference:function(c){if(this==c.collection){delete c.collection}c.off("all",this._onModelEvent,this)},_onModelEvent:function(e,d,f,c){if((e=="add"||e=="remove")&&f!=this){return }if(e=="destroy"){this.remove(d,c)}if(d&&e==="change:"+d.idAttribute){delete this._byId[d.previous(d.idAttribute)];this._byId[d.id]=d}this.trigger.apply(this,arguments)}});var W=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];a.each(W,function(c){b.prototype[c]=function(){return a[c].apply(a,[this.models].concat(a.toArray(arguments)))}});var Z=C.Router=function(c){c||(c={});if(c.routes){this.routes=c.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var I=/:\w+/g;var X=/\*\w+/g;var E=/[-[\]{}()+?.,\\^$|#\s]/g;a.extend(Z.prototype,N,{initialize:function(){},route:function(c,d,e){C.history||(C.history=new B);if(!a.isRegExp(c)){c=this._routeToRegExp(c)}if(!e){e=this[d]}C.history.route(c,a.bind(function(g){var f=this._extractParameters(c,g);e&&e.apply(this,f);this.trigger.apply(this,["route:"+d].concat(f));C.history.trigger("route",this,d,f)},this));return this},navigate:function(d,c){C.history.navigate(d,c)},_bindRoutes:function(){if(!this.routes){return }var d=[];for(var e in this.routes){d.unshift([e,this.routes[e]])}for(var f=0,c=d.length;f<c;f++){this.route(d[f][0],d[f][1],this[d[f][1]])}},_routeToRegExp:function(c){c=c.replace(E,"\\$&").replace(I,"([^/]+)").replace(X,"(.*?)");return new RegExp("^"+c+"$")},_extractParameters:function(c,d){return c.exec(d).slice(1)}});var B=C.History=function(){this.handlers=[];a.bindAll(this,"checkUrl")};var M=/^[#\/]/;var J=/msie [\w.]+/;B.started=false;a.extend(B.prototype,N,{interval:50,getHash:function(e){var d=e?e.location:window.location;var c=d.href.match(/#(.*)$/);return c?c[1]:""},getFragment:function(d,c){if(d==null){if(this._hasPushState||c){d=window.location.pathname;var e=window.location.search;if(e){d+=e}}else{d=this.getHash()}}if(!d.indexOf(this.options.root)){d=d.substr(this.options.root.length)}return d.replace(M,"")},start:function(e){if(B.started){throw new Error("Backbone.history has already been started")}B.started=true;this.options=a.extend({},{root:"/"},this.options,e);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var d=this.getFragment();var c=document.documentMode;var g=(J.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7));if(g){this.iframe=G('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(d)}if(this._hasPushState){G(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!g){G(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=d;var h=window.location;var f=h.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&f&&h.hash){this.fragment=this.getHash().replace(M,"");window.history.replaceState({},document.title,h.protocol+"//"+h.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){G(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);B.started=false},route:function(c,d){this.handlers.unshift({route:c,callback:d})},checkUrl:function(d){var c=this.getFragment();if(c==this.fragment&&this.iframe){c=this.getFragment(this.getHash(this.iframe))}if(c==this.fragment){return false}if(this.iframe){this.navigate(c)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var d=this.fragment=this.getFragment(e);var c=a.any(this.handlers,function(f){if(f.route.test(d)){f.callback(d);return true}});return c},navigate:function(d,c){if(!B.started){return false}if(!c||c===true){c={trigger:c}}var e=(d||"").replace(M,"");if(this.fragment==e){return }if(this._hasPushState){if(e.indexOf(this.options.root)!=0){e=this.options.root+e}this.fragment=e;window.history[c.replace?"replaceState":"pushState"]({},document.title,e)}else{if(this._wantsHashChange){this.fragment=e;this._updateHash(window.location,e,c.replace);if(this.iframe&&(e!=this.getFragment(this.getHash(this.iframe)))){if(!c.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,e,c.replace)}}else{window.location.assign(this.options.root+d)}}if(c.trigger){this.loadUrl(d)}},_updateHash:function(c,d,e){if(e){c.replace(c.toString().replace(/(javascript:|#).*$/,"")+"#"+d)}else{c.hash=d}}});var S=C.View=function(c){this.cid=a.uniqueId("view");this._configure(c||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var F=/^(\S+)\s*(.*)$/;var U=["model","collection","el","id","attributes","className","tagName"];a.extend(S.prototype,N,{tagName:"div",$:function(c){return this.$el.find(c)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(d,c,f){var e=document.createElement(d);if(c){G(e).attr(c)}if(f){G(e).html(f)}return e},setElement:function(c,d){if(this.$el){this.undelegateEvents()}this.$el=(c instanceof G)?c:G(c);this.el=this.$el[0];if(d!==false){this.delegateEvents()}return this},delegateEvents:function(g){if(!(g||(g=D(this,"events")))){return }this.undelegateEvents();for(var f in g){var h=g[f];if(!a.isFunction(h)){h=this[g[f]]}if(!h){throw new Error('Method "'+g[f]+'" does not exist')}var e=f.match(F);var d=e[1],c=e[2];h=a.bind(h,this);d+=".delegateEvents"+this.cid;if(c===""){this.$el.bind(d,h)}else{this.$el.delegate(c,d,h)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){if(this.options){e=a.extend({},this.options,e)}for(var f=0,d=U.length;f<d;f++){var c=U[f];if(e[c]){this[c]=e[c]}}this.options=e},_ensureElement:function(){if(!this.el){var c=D(this,"attributes")||{};if(this.id){c.id=this.id}if(this.className){c["class"]=this.className}this.setElement(this.make(this.tagName,c),false)}else{this.setElement(this.el,false)}}});var V=function(c,d){var e=L(this,c,d);e.extend=this.extend;return e};K.extend=b.extend=Z.extend=S.extend=V;var R={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};C.sync=function(g,d,c){var e=R[g];c||(c={});var f={type:e,dataType:"json"};if(!c.url){f.url=D(d,"url")||T()}if(!c.data&&d&&(g=="create"||g=="update")){f.contentType="application/json";f.data=JSON.stringify(d.toJSON())}if(C.emulateJSON){f.contentType="application/x-www-form-urlencoded";f.data=f.data?{model:f.data}:{}}if(C.emulateHTTP){if(e==="PUT"||e==="DELETE"){if(C.emulateJSON){f.data._method=e}f.type="POST";f.beforeSend=function(h){h.setRequestHeader("X-HTTP-Method-Override",e)}}}if(f.type!=="GET"&&!C.emulateJSON){f.processData=false}return G.ajax(a.extend(f,c))};C.wrapError=function(d,e,c){return function(f,g){g=f===e?g:f;if(d){d(e,g,c)}else{e.trigger("error",e,g,c)}}};var H=function(){};var L=function(d,c,e){var f;if(c&&c.hasOwnProperty("constructor")){f=c.constructor}else{f=function(){d.apply(this,arguments)}}a.extend(f,d);H.prototype=d.prototype;f.prototype=new H();if(c){a.extend(f.prototype,c)}if(e){a.extend(f,e)}f.prototype.constructor=f;f.__super__=d.prototype;return f};var D=function(c,d){if(!(c&&c[d])){return null}return a.isFunction(c[d])?c[d]():c[d]};var T=function(){throw new Error('A "url" property or function must be specified')}}).call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/brace/backbone-brace-min.js' */
/*
 *  RW.Backbone Brace - 2014-06-27
 *  Copyright 2014 Atlassian Software Systems Pty Ltd
 *  Licensed under the Apache License, Version 2.0
 */
if(typeof RW==="undefined"){var RW={}}(function(C,D){var B="Brace";var E=C[B];var A=function(){C[B]=E;return this};if(typeof define==="function"&&define.amd){define(["underscore","backbone"],D)}else{if(typeof exports==="object"){module.exports=D(require("underscore"),require("backbone"))}else{var F=D(RW._,RW.Backbone);F.noConflict=A;C[B]=F;RW.Brace=F}}}(this,function(O,M){var K={};function F(R){if(O.isArray(R)){return O.reduce(R,function(S,T){S[T]=null;return S},{})}return R}function B(R,S){if(!R||S==null){return S}if(R===String&&O.isString(S)){return S}if(R===Number&&O.isNumber(S)){return S}if(R===Boolean&&O.isBoolean(S)){return S}if(typeof R==="string"||R instanceof String){if(typeof S!==""+R){throw"The typeof "+S+" is "+typeof S+" but expected it to be "+R}return S}if(O.isArray(R)||R===Array){if(!L(S)){throw"Array type expected, but nonnull, non-Array value provided."}return R===Array||!R[0]?S:O.map(S,O.bind(B,null,R[0]))}if(typeof R!=="function"){throw"Invalid expected type "+R+". Should be falsy, String, Array, Backbone.Collection constructor, or function."}if(S instanceof R){return S}if(H(R)){return new R(B([R.model],S))}return new R(S)}function H(S,R){return S&&(S.__super__ instanceof (R||M.Collection)||S.__super__===(R||M.Collection).prototype||S===(R||M.Collection))}function L(R){return O.has(R,"length")&&!(R instanceof String||O.has({string:1,"function":1},typeof R)||R instanceof M.Collection)}function N(T,S){var R={};O.each(T,function(V,U){if(!S[U]||P(V,S[U])){R[U]=V}else{if(!V||P(S[U],V)){return }else{throw U+" has conflicted type descriptors."}}});return R}function P(S,R){if(!R||R===S){return true}if(!S||typeof S==="string"){return false}if(S instanceof Array){return R===Array||(R instanceof Array&&P(S[0],R[0]))}if(typeof R!=="function"){return false}if(H(R)){return H(S,R)}return S.prototype instanceof R}function E(R){if(O.isObject(R)){return O.reduce(R,function(S,U,T){if(U&&O.isFunction(U.toJSON)){S[T]=U.toJSON()}else{if(O.isArray(U)){S[T]=O.map(U,function(V){if(V&&O.isFunction(V.toJSON)){return V.toJSON()}else{return V}})}}return S},R)}else{return R}}function A(S){return function R(){var T=S.call(this);return E(T)}}K.Mixins={createMethodName:function(R,S){return R+S.charAt(0).toUpperCase()+S.substr(1)},applyMixin:function(S,R){O.forEach(O.keys(R),function(a){var X=S.prototype;if("initialize"===a){var Z=X.initialize;X.initialize=function(){if(Z){Z.apply(this,arguments)}R.initialize.apply(this,arguments)};return }if("validate"===a){var T=X.validate;X.validate=function(){if(T){var c=T.apply(this,arguments);if(c){return c}}return R.validate.apply(this,arguments)};return }if("defaults"===a){var W=X.defaults||(X.defaults={});var Y=R[a];for(var V in Y){if(W.hasOwnProperty(V)){throw"Mixin error: class already has default '"+V+"' defined"}W[V]=Y[V]}return }if("namedAttributes"===a){var U=F(X.namedAttributes)||{};var b=F(R[a]);X.namedAttributes=O.extend(U,N(b,U));return }if("namedEvents"===a){if(!O.isArray(R[a])){throw"Expects events member on mixin to be an array"}if(!X.namedEvents){X.namedEvents=[]}X.namedEvents=O.uniq(X.namedEvents.concat(R[a]));return }if(X.hasOwnProperty(a)){throw"Mixin error: class already has property '"+a+"' defined"}X[a]=R[a]},this)}};K.AttributesMixinCreator={create:function(S,T){var R={};if(!S){S={}}if(!O.has(S,"id")){S.id=null}O.each(S,function(Y,X){var Z=K.Mixins.createMethodName("set",X);R[Z]=function(b,a){return this.set(X,b,a)};var W=K.Mixins.createMethodName("get",X);R[W]=function(){return this.get(X)}});if(typeof T==="string"&&typeof S[T]!=="undefined"&&T!=="id"){S.id=S[T];var V=K.Mixins.createMethodName("get",T);var U=K.Mixins.createMethodName("set",T);R.getId=function(){return this[V]()};R.setId=function(X,W){return this[U](X,W)}}return R},ensureType:B};K.EventsMixinCreator={create:function(S){var R={};var T=function(V){var U=K.Mixins.createMethodName("on",V);R[U]=function(){return this.on.apply(this,[V].concat(O.toArray(arguments)))};var W=K.Mixins.createMethodName("trigger",V);R[W]=function(){return this.trigger.apply(this,[V].concat(O.toArray(arguments)))}};O.each(S,O.bind(T,this));return R}};function D(S){return function R(V,W){var X;var U=O.extend({},V);var T;if(V&&V.mixins){T=V.mixins;delete U.mixins}X=S.call(this,U,W);if(this.prototype.namedEvents){K.Mixins.applyMixin(X,{namedEvents:this.prototype.namedEvents})}if(this.prototype.namedAttributes){K.Mixins.applyMixin(X,{namedAttributes:this.prototype.namedAttributes})}if(T){O.each(V.mixins,function(Y){K.Mixins.applyMixin(X,Y)})}if(X.prototype.namedEvents){K.Mixins.applyMixin(X,K.EventsMixinCreator.create(X.prototype.namedEvents))}if(X.prototype.namedAttributes){X.prototype.namedAttributes=F(X.prototype.namedAttributes);K.Mixins.applyMixin(X,K.AttributesMixinCreator.create(X.prototype.namedAttributes,X.prototype.idAttribute))}if(X.prototype.toJSON){X.prototype.toJSON=A(X.prototype.toJSON)}X.extend=R;return X}}function G(V,T){var U=V.prototype;var R=T.prototype;var S=U.set;R.set=function(b,c,a){var Z,Y=this.namedAttributes;if(!Y||b==null){return S.apply(this,arguments)}if(O.isObject(b)){Z=O.clone(b);a=c}else{Z={};Z[b]=c}for(var X in Z){if(!O.has(Z,X)){continue}if(!O.has(Y,X)){throw"Attribute '"+X+"' does not exist"}Z[X]=B(Y[X],Z[X])}return S.call(this,Z,a)};var W=U.get;R.get=function(X){if(this.namedAttributes&&!O.has(this.namedAttributes,X)){throw"Attribute '"+X+"' does not exist"}return W.apply(this,arguments)}}function I(V,S){var U=V.prototype;var R=S.prototype;var T=U.parse;R.parse=function(W,X){return O.pick(T(W,X),O.keys(this.namedAttributes))}}function C(R){var T=R.extend();var S=R.extend;T.extend=D(S);return T}function J(R){var S=C(R);G(R,S);I(R,S);return S}K.Model=J(M.Model);K.Collection=C(M.Collection);K.View=C(M.View);K.Router=C(M.Router);var Q=function(){this.initialize.apply(this,arguments)};O.extend(Q.prototype,M.Events,{initialize:function(){}});Q.extend=M.Model.extend;K.Evented=C(Q);return K}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/storage-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(B){console.log("RW: Init local storage");var A="rwot.";function C(){var D=false;try{D="localStorage" in window&&window.localStorage!==null}catch(E){console.log("RW: Browser doesn't support local storage")}this.supportStorage=function(){return D};this.getStorage=function(){return localStorage};this.getPrefix=function(){return A};this.getValue=function(F){if(!D){return }return localStorage[A+F]};this.getValueAsInt=function(F){if(!D){return }return parseInt(this.getValue(F),10)};this.getValueAsBoolean=function(F){var G=this.getValue(F);if(G=="false"){return false}if(G=="true"){return true}return !!G};this.setValue=function(F,G){if(!D){return }localStorage[A+F]=G};this.removeValueWithExactKey=function(F){if(!D){return }localStorage.removeItem(F)};return this}RW.storage=new C()})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/cache/cache-storage-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){console.log("RW: Init cache storage");var B="cache.";function C(){this.getCacheValue=function(D){if(!RW.storage.supportStorage()){return }return RW.storage.getValue(B+D)};this.setCacheValue=function(D,E){if(!RW.storage.supportStorage()){return }RW.storage.setValue(B+D,E)};this.clearCacheKeys=function(){if(!RW.storage.supportStorage()){return }var F=RW.storage.getPrefix()+B;var E=RW.storage.getStorage();for(var D in E){if(D.slice(0,F.length)==F){RW.storage.removeValueWithExactKey(D)}}};this.clearCacheKeysStartingWith=function(G){if(!RW.storage.supportStorage()){return }var F=RW.storage.getPrefix()+B+G;var E=RW.storage.getStorage();for(var D in E){if(D.slice(0,F.length)==F){RW.storage.removeValueWithExactKey(D)}}};return this}RW.cacheStorage=new C()})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/cache/cache-manager-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(C){var A=AJS.contextPath()+"/rest/originaltheme/1.0/";var F="/login.action?logout=true";var B="cacheSettings";var E=false;var D={category:"category",footer:"footer",globalmenu:"topmenu",usercategory:"user-category"};if(typeof String.prototype.startsWith!="function"){String.prototype.startsWith=function(G){return this.slice(0,G.length)==G}}if(typeof String.prototype.endsWith!="function"){String.prototype.endsWith=function(G){return this.indexOf(G,this.length-G.length)!==-1}}if(typeof String.prototype.contains==="undefined"){String.prototype.contains=function(G){return this.indexOf(G)!=-1}}AJS.toInit(function(){if(RW.storage.supportStorage()){RW.cacheManager.init()}if(window.location.href!==undefined&&window.location.href.endsWith(F)){RW.cacheStorage.clearCacheKeys()}});RW.cacheManager=new function(){this.doPoll=function(){var J=RW.cacheSettings;if(J!=undefined&&J.params.docache){if(!E){RW.cacheManager.listenForRWRestCalls()}RW.cacheManager.clearOutdatedCache(J)}else{if(J!=undefined&&!J.params.docache&&E){RW.cacheManager.clearCache();C(document).unbind("ajaxSend");E=false}}var K=JSON.stringify(J);if(K!=undefined){RW.cacheStorage.setCacheValue(B,K)}};this.listenForRWRestCalls=function(){C(document).unbind("ajaxSend");C(document).ajaxSend(function(M,P,L){E=true;if(G(L)){var K=L.url;K=K.replace(/[?&]{1}_=[0-9]*/,"");var J=K.substr(A.length);var N=RW.cacheStorage.getCacheValue(B);if(N!==undefined){var O=JSON.parse(N)}if(O!=undefined&&O.params!=undefined){if(O.params.category&&J.startsWith("category")){return H(K,P,L)}else{if(O.params.footer&&J.startsWith("footer")){return H(K,P,L)}else{if(O.params.globalmenu&&J.startsWith("topmenu")){return H(K,P,L)}else{if(O.params.usercategory&&J.startsWith("user-category")&&!J.contains("/admin-config")){return H(K,P,L)}}}}}}})};this.clearCache=function(){RW.cacheStorage.clearCacheKeys()};this.clearOutdatedCache=function(K){var L=RW.cacheStorage.getCacheValue(B);if(L!==undefined){var M=JSON.parse(L)}if(M!=undefined&&M.params!=undefined){for(var J in M.params){if(M.params[J]&&K.params!=undefined&&K.params[J]){if(M.lastChange!=undefined&&K.lastChange!=undefined&&M.lastChange[J]<K.lastChange[J]){RW.cacheManager.clearKey(J)}}else{if(M.params[J]){RW.cacheManager.clearKey(J)}else{if(M.lastChange!=undefined&&K.lastChange!=undefined&&M.lastChange[J]<K.lastChange[J]){RW.cacheManager.clearKey(J)}}}}}};this.clearKey=function(J){var K=A+D[J];if(RW.remoteUser!=undefined){K=RW.remoteUser+"."+K}else{K="."+K}RW.cacheStorage.clearCacheKeysStartingWith(K)};function H(J,O,K){var M=RW.cacheStorage.getCacheValue(B);if(M!==undefined){var N=JSON.parse(M);if(RW.remoteUser!=undefined){J=RW.remoteUser+"."+J}else{J="."+J}if(RW.cacheStorage.getCacheValue(J)!=undefined){O.abort();var L=JSON.parse(RW.cacheStorage.getCacheValue(J));L.cacheAbort=true;K.success(L);return }}O.done(function(P){if(O.status==200){RW.cacheStorage.setCacheValue(J,JSON.stringify(P))}});return true}function G(J){return J.type!=undefined&&J.type=="GET"&&J.url!=undefined&&J.url.startsWith(A)}this.init=function(){if(RW.cacheStorage.getCacheValue(B)==undefined){var J=RW.cacheSettings;var K=JSON.stringify(J);RW.cacheStorage.setCacheValue(B,K)}I()};function I(){var K=RW.cacheStorage.getCacheValue(B);if(K!==undefined){var J=JSON.parse(K)}if(J!=undefined&&J.params.docache){RW.cacheManager.listenForRWRestCalls()}RW.cacheManager.doPoll()}return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Users==="undefined"){RW.Users={}}(function(E){var C;var D;var B;var A;AJS.toInit(function(){if(E("#rw_category_menu").length>0){var F=new RW.Models.UserCategory.UserCategoryList();F.fetch({cache:false,data:{type:"category"},success:function(){RW.Users.categories=F;RW.PubSub.trigger("user-categories:fetched")}})}var H=E(".rw_user_category_macro");var G=E(".rw_users_space_macro");if(H.length>0){RW._.each(H,function(K){var L=E(".rw_user_category_macro_params",E(K)).data();var J=new RW.Models.UserCategory.UserCategoryItem({key:L.categoryKey,type:"category",rolesOnly:L.rolesOnly});var I={type:J.get("type"),rolesOnly:L.rolesOnly};if(L.hierarchy!=undefined&&L.hierarchy!="no_hierarchy"){I.recursive=true}E(K).html(RW.Templates.loader({type:"circle",bg:"gray"}));if(J.get("key")!==undefined){J.fetch({cache:false,data:I,success:function(){var M=new RW.Views.UserCategory.UserCategoryMacroView({model:J,macroParam:L});E(K).html(M.render());Confluence.Binder.userHover()},error:function(O,M,N){if(M.status===401){E(K).html(RW.Templates.infoBox({content:"The content of this macro can only be viewed by users who have logged in."}))}else{if(M.status===404){E(K).html(RW.Templates.errorBox({content:"Invalid category key"}))}else{E(K).html(RW.Templates.warningBox({content:"An unexpected error has occurred. We apologize for this inconvenience."}))}}}})}else{E(K).html(RW.Templates.infoBox({content:"Please specify a category key."}))}})}if(G.length>0){RW._.each(G,function(J){var K=E(".rw_users_space_macro_params",E(J)).data();if(K.shouldDisplay==true){var I;if(K.usersFromCategory){var I=new RW.Models.UserCategory.UserCategoryItem({key:K.usersFromCategory,type:"category",rolesOnly:K.rolesOnly})}else{var I=new RW.Models.UserCategory.UserCategoryItem({key:K.spaceKey,type:"space",rolesOnly:K.rolesOnly})}I.fetch({cache:false,data:{type:I.get("type"),rolesOnly:K.rolesOnly},success:function(){var L=new RW.Views.UserCategory.UserSpaceMacroView({model:I,macroParam:K});E(J).html(L.render());if(K.canEdit||I.get("userSize")>0){E(J).show()}else{E(J).remove()}Confluence.Binder.userHover()},error:function(N,L,M){E(J).show();if(L.status===401){E(J).html(RW.Templates.infoBox({content:"The content of this macro can only be viewed by users who have logged in."}))}else{if(L.status===404){E(J).html(RW.Templates.errorBox({content:"rw.category.space.key"}))}else{E(J).html(RW.Templates.warningBox({content:"An unexpected error has occurred. We apologize for this inconvenience."}))}}}})}})}E("#rw_edit_user_category_button").click(function(J){var I=E(J.currentTarget);RW.createUserCategoryDialog(I.data("categoryKey"),"category",false);return false});E("#rw_space_users_button").click(function(J){var I=E(J.currentTarget);RW.createUserCategoryDialog(I.data("spaceKey"),"space",true);return false})});RW.createUserCategoryDialog=function(G,H,F){if(F==undefined){F=false}var I=new RW.Models.UserCategory.UserCategoryItem({key:G,type:H});I.fetch({cache:false,url:I.url()+"/admin-config",data:{type:I.get("type")},success:function(){var J=new RW.Views.UserCategory.AddDialogView({model:I,includeSubCategories:!F,parentCategory:G})}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Models.UserCategory==="undefined"){RW.Models.UserCategory={}}(function(A){RW.Models.UserCategory.UserCategoryList=RW.Brace.Collection.extend({initialize:function(C,B){if(B&&B.listObject){this.model=B.listObject}else{this.model=RW.Models.UserCategory.UserCategoryItem}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category"}});RW.Models.UserCategory.CategoryRoles=RW.Brace.Collection.extend({initialize:function(B){this.model=RW.Models.UserCategory.CategoryRole;if(B&&B.key){this.key=B.key}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.key+"/role"}});RW.Models.UserCategory.UserCategoryItem=RW.Brace.Model.extend({idAttribute:"key",namedAttributes:{name:"string",key:"string",type:"string",users:"object",groups:"object",userSize:"number",allUsers:"object",visible:"boolean",rolesOnly:"boolean",roles:RW.Models.UserCategory.CategoryRoles,canEdit:"boolean",children:RW.Models.UserCategory.UserCategoryList},initialize:function(B){this.url=function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")}});RW.Models.UserCategory.CategoryRole=RW.Brace.Model.extend({idAttribute:"id",namedAttributes:{key:"string",id:"string",type:"string",user:"object",name:"string",position:"number"},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")+"/role"}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-views-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.UserCategory==="undefined"){RW.Views.UserCategory={}}(function(A){RW.Views.UserCategory.AddDialogView=RW.Backbone.View.extend({dialog:null,groupQuery:null,userGroupsModel:null,userQuery:null,userModel:null,roleModel:null,roleQuery:null,includeSubCategories:false,parentCategory:"",events:{"keyup #rw_form_roles":"searchRoles","click #rw_role_search_result_container li":"addRoleUser","keyup #rw_form_role_name":"updateRoleUser","click #rw_user_category_role_list .rw_delete_button":"removeRole","click .rw_add_role_button":"addRole","click .rw_cancel_role_button":"cancelRole","click .rw_save_role_button":"saveRole","click .rw_change_category_button":"changeCategory","click .rw_cancel_category_button":"cancelCategorySelection","click .rw_category_chooser ul a":"selectCategory","click .rw_check_visibility":"toggleVisibility","click .rw_check_rolesonly":"toggleRolesOnly"},initialize:function(E){var C=this;if(E&&E.includeSubCategories){this.includeSubCategories=E.includeSubCategories}if(E&&E.parentCategory){this.parentCategory=E.parentCategory}while(A("#rw_popup_dialog_admin").length>0){A("#rw_popup_dialog_admin").remove()}this.dialog=new AJS.Dialog({id:"rw_popup_dialog_admin",width:800,height:600});this.dialog.hide();if(this.model.get("type")=="space"){this.dialog.addHeader(AJS.format("Users assigned to {0}",this.model.get("name"),this.model.get("key")))}else{this.dialog.addHeader(AJS.format("Users assigned to category {0}",this.model.get("name"),this.model.get("key")))}this.dialog.addPanel();A("#rw_popup_dialog_admin").click(function(F){F.stopPropagation()});this.dialog.addButton("Done",RW._.bind(this.submitNewCategory,this));this.dialog.addLink("Cancel",function(){C.dialog.remove()});if(this.model.get("type")==="space"&&this.model.get("key")!=undefined){this.dialog.addLink("Edit macro in space layout",function(){window.open(contextPath+"/spaces/refinedwiki/edit-space-layout.action?key="+C.model.get("key"),"_blank")},"rw_left")}var D=A(RW.Templates.UserCategory.addDialog({model:this.model.toJSON()}));if(!this.includeSubCategories){A("#rw_main_category_section",D).remove()}A("#rw_popup_dialog_admin .dialog-panel-body").html(D);this.setElement(A("#rw_popup_dialog_admin .dialog-panel-body"));A(this.el).bind("keydown",function(F){if(F.which==27&&(C.$("#rw_user_search_result_container").is(":visible")||C.$("#rw_group_search_result_container").is(":visible")||C.$("#rw_role_search_result_container").is(":visible"))){C.$("#rw_user_search_result_container").hide();C.$("#rw_group_search_result_container").hide();C.$("#rw_role_search_result_container").hide();return false}});this.render();if(RW.confluenceVersion>=5&&this.model.get("type")=="space"){var B=A('<span id="rw_space_user_info" data-tooltip="'+"Please note: The Users in space macro needs to be present to be able to display this functionality. Make sure the Users in space macro is added to your space layout or added to a page."+'" class="rw_help_sign rw_icon rw_iconfont_question"></span>');A(".dialog-title",this.dialog.popup.element).append(B);RW.applyTooltip("#rw_space_user_info",{gravity:"n"})}},render:function(){var D=A(RW.Templates.UserCategory.addDialog({model:this.model.toJSON()}));if(!this.includeSubCategories){A("#rw_main_category_section",D).remove()}this.$el.html(D.html());var H=new RW.Models.UserSearchWrapper({type:"user"});if(this.model.get("type")=="category"){var I="rw.user.category.users.desc"}else{if(this.model.get("type")=="space"){var I="rw.user.space.users.desc"}}var C=new RW.Views.UserSearchView({model:this.model,title:"Users",description:AJS.I18n.getText(I),searchWrapperModel:H});this.$("#rw_role_user_group_section").prepend(C.render());var F=new RW.Models.UserSearchWrapper({type:"group"});if(this.model.get("type")=="category"){var E="rw.user.category.groups.desc"}else{if(this.model.get("type")=="space"){var E="rw.user.space.groups.desc"}}var G=new RW.Views.UserSearchView({model:this.model,title:"User groups",description:AJS.I18n.getText(E),searchWrapperModel:F});this.$("#rw_role_user_group_section").prepend(G.render());this.dialog.show();var B=this;this.$("#rw_user_category_role_list").sortable({update:function(N,L){var K=L.item.index();var J=A(L.item).data("roleKey");var M=B.model.get("roles").get(J);M.save({},{url:M.url()+"?position="+K+"&roleKey="+J+"&type="+M.get("type")})}});this.$("#rw_user_category_role_list").disableSelection();if(this.model.get("type")=="space"){B.dialog.addHeader(AJS.format("Users assigned to {0}",B.model.get("name"),B.model.get("key")))}else{B.dialog.addHeader(AJS.format("Users assigned to category {0}",B.model.get("name"),B.model.get("key")))}RW.hideLoader()},addRoleUser:function(F){var H=A(F.currentTarget).data("name");var D=RW.htmlDecode(A(".rw_search_item_title",F.currentTarget).html());var B=A("#rw_form_role_name").val();var G={user:{username:H,fullName:D},name:B};var C=A("img",A(F.currentTarget)).attr("src");var E=A(RW.Templates.UserCategory.role({role:G,fullProfilePicUrl:C}));A(".rw_delete_button",E).remove();this.$("#rw_role_user_result_container").html(E);this.$("#rw_form_roles").val(D);A("#rw_role_search_result_container").html("");A("#rw_role_search_result_container").hide()},updateRoleUser:function(){this.$("#rw_form_role_name").parent().removeClass("rw_error");var B=A("#rw_form_role_name").val();this.$("#rw_role_user_result_container .rw_user_category_role").html(RW.htmlEncode(B))},addRole:function(C){var B=this;this.$("#rw_role_suggestions_container").html("");this.$("#rw_form_roles").val("");this.$("#rw_form_role_name").val("");this.$("#rw_role_user_result_container").html("");this.$(".rw_add_role_wrapper").slideDown(250);this.$("#rw_add_role_button_wrapper").slideUp(250);this.$("#rw_role_user_group_section").hide();this.$("#rw_user_category_role_list").hide();A.get(contextPath+"/rest/originaltheme/1.0/user-category/"+this.model.get("key")+"/role/suggestion?type="+this.model.get("type"),{},function(D){RW._.each(D,function(G,E){var F=A(RW.Templates.UserCategory.resultTag({name:G}));A("span",F).css("padding-right","5px");F.css("cursor","pointer");A(".rw_delete_button",F).remove();A("span",F).attr("title",G);F.click(function(H){B.$("#rw_form_role_name").val(G);B.updateRoleUser()});B.$("#rw_role_suggestions_container").append(F);if((E+1)%3==0){B.$("#rw_role_suggestions_container").append("<div style='clear:both'></div>")}})});return false},cancelRole:function(B){this.$(".rw_add_role_wrapper").slideUp(250);this.$("#rw_add_role_button_wrapper").slideDown(250);this.$("#rw_role_user_group_section").show();this.$("#rw_user_category_role_list").show();return false},saveRole:function(H){var E={username:this.$("#rw_role_user_result_container .rw_user_role").data("username")};var C=this.$("#rw_form_role_name").val();var B=this.model.get("roles").length;var F=false;if(RW._.isEmpty(C)){this.$("#rw_form_role_name").parent().addClass("rw_error");F=true}else{this.$("#rw_form_role_name").parent().removeClass("rw_error")}if(RW._.isEmpty(E.username)){this.$("#rw_form_roles").parent().addClass("rw_error");F=true}else{this.$("#rw_form_roles").parent().removeClass("rw_error")}if(F){return false}var G=new RW.Models.UserCategory.CategoryRole({key:this.model.get("key"),type:this.model.get("type"),user:E,name:C,position:B});var D=this;G.save({},{type:"POST",success:function(I){D.model.get("roles").add(G);D.render()}});return false},removeRole:function(F){var C=A(F.currentTarget).closest("li");var G=C.data("username");var D=C.data("roleKey");var E=this.model.get("roles").get(D);var B=this;E.destroy({url:E.url()+"?roleKey="+D,success:function(H){B.render()}})},searchRoles:function(E){if(E.which!=13){var B=this;E.stopPropagation();this.$("#rw_form_roles").parent().removeClass("rw_error");var C=this.$("#rw_form_roles").val();if(this.roleQuery!=C){this.roleQuery=C;if(RW._.isEmpty(this.roleModel)){this.roleModel=new RW.Models.UserSearchWrapper({type:"user",query:C})}else{this.roleModel.set("query",C)}if(!RW._.isEmpty(C)){var D={reset:true,cache:false,success:function(G){var F=A(RW.Templates.Users.searchResult({results:B.roleModel.toJSON().result}));B.$("#rw_role_search_result_container").html(F);B.$("#rw_role_search_result_container").show();RW.startKeyable(B.$("#rw_role_search_result_container"),null,"search")}};this.roleModel.fetch(D)}else{this.$("#rw_"+type+"_search_result_container").html("");this.$("#rw_"+type+"_search_result_container").hide()}}}},changeCategory:function(D){var B=this;B.$(".rw_change_category_button").hide();if(B.$(".rw_category_chooser ul").children().length==0){var C=new RW.Models.AbstractCategory();C.fetch({cache:false,url:contextPath+"/rest/originaltheme/1.0/category/"+B.parentCategory,data:{recursive:"true","include-children":"false"},success:function(){var E=A(RW.Templates.UserCategory.categoryItem({category:C.toJSON()}));A("a[data-category-key="+B.model.get("key")+"]",E).addClass("rw_selected");B.$(".rw_category_chooser ul").html(E);B.$(".rw_category_chooser").slideDown(250);B.$("#rw_main_dialog_section").slideUp(250)}})}else{B.$(".rw_category_chooser").slideDown(250);B.$("#rw_main_dialog_section").slideUp(250)}},cancelCategorySelection:function(B){this.$(".rw_change_category_button").show();this.$("#rw_main_dialog_section").slideDown(250);this.$(".rw_category_chooser").slideUp(250)},selectCategory:function(E){var B=this;RW.showLoader();var C=A(E.currentTarget).data("category-key");var D=new RW.Models.UserCategory.UserCategoryItem({key:C,type:"category"});D.fetch({cache:false,data:{type:D.get("type")},url:D.url()+"/admin-config",success:function(){B.model=D;B.render()}})},toggleVisibility:function(C){var B=A(C.currentTarget).prop("checked");this.model.set("visible",B);if(!B){this.$(".rw_check_rolesonly").disable();this.$(".rw_check_rolesonly_text").addClass("rw_text_gray")}else{this.$(".rw_check_rolesonly").enable();this.$(".rw_check_rolesonly_text").removeClass("rw_text_gray")}},toggleRolesOnly:function(C){var B=A(C.currentTarget).prop("checked");this.model.set("rolesOnly",B)},submitNewCategory:function(C){var B=this;C.remove();if(!RW._.isEmpty(B.model)&&(!RW._.isEmpty(B.model.get("users"))||!RW._.isEmpty(B.model.get("groups"))||(!RW._.isEmpty(B.model.get("roles"))&&!RW._.isEmpty(B.model.get("roles").models)))){var D=B.model.get("type");B.model.save({},{success:function(){if(!RW._.isEmpty(RW.Users.categories)){RW.Users.categories.remove(B.model.get("key"));RW.Users.categories.add(B.model)}if(RW.cacheManager){RW.cacheManager.clearKey("usercategory")}RW.PubSub.trigger("user-category:updated",{userCategory:B.model})}})}else{if(!RW._.isEmpty(B.model)){B.model.destroy({url:B.model.url()+"?type="+B.model.get("type"),success:function(){RW.PubSub.trigger("user-category:updated",{userCategory:B.model})}});if(!RW._.isEmpty(RW.Users.categories)){RW.Users.categories.remove(B.model.get("key"))}}}}});RW.Views.UserCategory.UserCategoryButtonView=RW.Backbone.View.extend({categoryKey:"",tooltip:"",events:{"click .rw_user_category_link":"toggleDropDown"},initialize:function(C){if(C&&C.categoryKey){this.categoryKey=C.categoryKey}if(C&&C.tooltip){this.tooltip=C.tooltip}var B=A(RW.Templates.UserCategory.button({tooltip:this.tooltip}));this.setElement(B)},render:function(){var B=A(RW.Templates.UserCategory.button({tooltip:this.tooltip}));this.$el.html(B.html());return this.$el},toggleDropDown:function(){var B=this;A("#rw_wrapper .rw_user_category_dd").hide();var C=A(".rw_user_category_link",B.$el.parent());var D=new RW.Views.UserCategory.UserCategoryDDView({categoryKey:B.categoryKey,ddButton:C});A("#rw_wrapper").append(D.render());return false}});RW.Views.UserCategory.UserCategoryDDView=RW.Backbone.View.extend({categoryKey:"",$ddButton:undefined,tooltip:"",events:{"click .rw_user_category_dd":"wrapperClick",},initialize:function(E){var B=this;if(E&&E.ddButton){this.$ddButton=E.ddButton}if(E&&E.categoryKey){this.categoryKey=E.categoryKey}var C=RW.Templates.UserCategory.dropDown();var D=A(C);this.setElement(D)},render:function(){var D=A(RW.Templates.UserCategory.dropDown());this.$el.html(D.html());var C=this;var B=RW.Users.categories.get(this.categoryKey);if(B!==undefined){C.$(".rw_user_category_dd").html(RW.Templates.loader({type:"circle",bg:"gray"}));B.fetch({cache:false,data:{type:B.get("type")},success:function(){var F=new RW.Views.UserCategory.UserCategoryView({model:B});C.$(".rw_user_category_dd").html(F.render());Confluence.Binder.userHover()}})}else{var E=new RW.Views.UserCategory.UserCategoryView({categoryKey:this.categoryKey});this.$(".rw_user_category_dd").append(E.render())}A("body").bind("click",RW._.bind(this.removeDD,this));A("#rw_category_dropdown_wrapper").bind("click",RW._.bind(this.removeDD,this));this.adjustDropDownPosition();this.$ddButton.closest(".rw_has_user_category").addClass("rw_dd_open");this.tooltip=this.$ddButton.attr("data-tooltip");this.$ddButton.attr("data-tooltip","");RW.removeTooltip();return this.$el},wrapperClick:function(B){B.stopPropagation()},removeDD:function(){this.$ddButton.attr("data-tooltip",this.tooltip);this.$ddButton.closest(".rw_has_user_category").removeClass("rw_dd_open");this.remove()},adjustDropDownPosition:function(){this.$(".rw_user_category_dd").css("left",this.$ddButton.offset().left+(this.$ddButton.outerWidth()/2)-200).css("top",this.$ddButton.offset().top+this.$ddButton.outerHeight())}});RW.Views.UserCategory.UserCategoryInline=RW.Backbone.View.extend({events:{},initialize:function(D){var B=this;var C=A(RW.Templates.UserCategory.inline({categoryName:""}));this.setElement(C)},render:function(){var D=this.model.get("name");var B=A(RW.Templates.UserCategory.inline({categoryName:D}));this.$el.html(B.html());var C=new RW.Views.UserCategory.UserCategoryView({model:this.model});this.$(".rw_user_category_inline").append(C.render());return this.$el}});RW.Views.UserCategory.UserCategoryView=RW.Backbone.View.extend({categoryKey:"",events:{"click .rw_edit_button":"editUserCategory"},initialize:function(D){if(D&&D.categoryKey){this.categoryKey=D.categoryKey}var C;if(this.model!==undefined){C=this.model.toJSON()}else{C={canEdit:true}}var B=A(RW.Templates.UserCategory.view({model:C}));this.setElement(B);this.initSubscriptions()},initSubscriptions:function(){var B=this;RW.PubSub.on("user-category:updated",function(C){if(B.model===undefined){B.model=new RW.Models.UserCategory.UserCategoryItem({key:B.categoryKey,type:"category"})}if(C!==undefined&&C.userCategory!==undefined&&C.userCategory.get("key")===B.model.get("key")&&C.userCategory.get("type")===B.model.get("type")){B.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));B.model=new RW.Models.UserCategory.UserCategoryItem({key:B.model.get("key"),type:"category"});B.model.fetch({cache:false,data:{type:B.model.get("type")},success:function(){B.render()}})}})},render:function(){var C;if(this.model!==undefined){C=this.model.toJSON()}else{C={canEdit:true}}var B=A(RW.Templates.UserCategory.view({model:C}));this.$el.html(B.html());return this.$el},editUserCategory:function(B){if(this.model===undefined){RW.createUserCategoryDialog(this.categoryKey,"category",true)}else{RW.createUserCategoryDialog(this.model.get("key"),this.model.get("type"),true)}return false}});RW.Views.UserCategory.UserCategoryMacroView=RW.Backbone.View.extend({macroParam:null,events:{"click .rw_item_link":"toggleTreeItem"},initialize:function(C){if(C.macroParam!==undefined){this.macroParam=C.macroParam}var B=A(RW.Templates.UserCategory.categoryMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.setElement(B);this.initSubscriptions()},initSubscriptions:function(){var B=this;RW.PubSub.on("user-category:updated",function(){B.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));B.model=new RW.Models.UserCategory.UserCategoryItem({key:B.model.get("key"),type:"category"});var C={type:B.model.get("type")};if(B.macroParam.hierarchy!=undefined&&B.macroParam.hierarchy!="no_hierarchy"){C.recursive=true}B.model.fetch({cache:false,data:C,success:function(){B.render()}})})},render:function(){var B=A(RW.Templates.UserCategory.categoryMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.$el.html(B.html());return this.$el},toggleTreeItem:function(B){A(B.currentTarget).parent().toggleClass("rw_closed");return false}});RW.Views.UserCategory.UserSpaceMacroView=RW.Backbone.View.extend({macroParam:null,events:{"click .rw_configure_button":"editUsers"},initialize:function(C){if(C.macroParam!==undefined){this.macroParam=C.macroParam}var B=A(RW.Templates.UserCategory.spaceMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.setElement(B);this.initSubscriptions()},initSubscriptions:function(){var B=this;RW.PubSub.on("user-category:updated",function(C){if(C!==undefined&&C.userCategory!==undefined&&C.userCategory.get("key")===B.model.get("key")&&C.userCategory.get("type")===B.model.get("type")){B.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));B.model=new RW.Models.UserCategory.UserCategoryItem({key:B.macroParam.spaceKey,type:"space"});B.model.fetch({cache:false,data:{type:B.model.get("type")},success:function(){B.render()}})}})},render:function(){var B=A(RW.Templates.UserCategory.spaceMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.$el.html(B.html());return this.$el},editUsers:function(B){RW.createUserCategoryDialog(this.macroParam.spaceKey,"space",true);return false}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/keyable-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Keyable==="undefined"){RW.Keyable={}}(function(B){var A;RW.startKeyable=function(C,F,E,D){if(typeof A!="undefined"){RW.quitKeyable()}A=C.keyable(F,E,D)};RW.quitKeyable=function(){if(typeof A!="undefined"){A.quit()}try{RW.stopMenuKeyNavigation()}catch(C){}};B.fn.keyable=function(K,l,h){var e=B(this);var H=null;var Q=null;var F=null;var Y=null;var J=null;var V=null;var f=null;var d=null;var X=null;var E=true;var I=false;var N=false;J=Y=B("li:visible",e);if(typeof h!="undefined"&&h!=null){h.addClass("rw_selected");e.addClass("rw_key_nav")}switch(l){case"category_menu":R();break;case"blog_post_popup":P();break;case"category_dropdown_menu":C();break}switch(K){case"multi_column":if(l==="category_dropdown_menu"){Q=B(".rw_dd_section",e)}else{Q=B("ul",e)}break}function b(n){X=n;d=null;E=true;if(H!=null){f=H;H=null}else{f=B("li.rw_selected",e)}switch(l){case"category_menu":i();break;case"category_dropdown_menu":if(V!==null&&!V.data("loadCategory")){RW.Keyable.prevItem=V}T();break;case"page_tree":U();break;case"menu_dropdown":L();break;case"blog_post_popup":P();break;case"search":k();break;case"sidebar":W();break;case"sidebar_dd":c();break}switch(K){case"multi_column":M();break;case"horizontal":D();break}var m=J.index(f);e.addClass("rw_key_nav");if(E){if(d==null){if(m===-1){if(X===40){d=0}else{if(X===38){d=J.length-1}}}else{if((m===0)&&X===38){if(l!="page_tree"){d=J.length-1}else{d=m}}else{if((m+1===J.length)&&X===40){d=0}else{if(X===40){d=m+1}else{if(X===38){d=m-1}}}}}}B("li.rw_selected",e).removeClass("rw_selected");V=J.eq(d);V.addClass("rw_selected")}switch(l){case"category_menu":S();break;case"category_dropdown_menu":a();break;case"page_tree":if(E){O()}break;case"menu_dropdown":Z();break}j()}function M(){if(f.length!=0){for(var m=0;m<Q.length;m++){if(B("li",Q[m]).index(f)!==-1){F=Q[m]}}}else{F=Q[0]}J=B("li",F);if(X===37||X===39){var o=J.index(f);var n=Q.index(F);if(X===37){if(n===0){F=Q[Q.length-1]}else{F=Q[n-1]}}else{if(X===39){if(n===(Q.length-1)){F=Q[0]}else{F=Q[n+1]}}}J=B("li",F);if(o===-1){d=0}else{if(o>=J.length){d=(J.length-1)}else{d=o}}}}function D(){if(X===39){X=40}else{if(X===37){X=38}else{E=false}}}function R(){if(RW.inCategoryDropDown){var m=RW.hideCategory();B("#"+m,RW.category.object).addClass("rw_selected")}else{if(B("li.rw_selected",e).length===0){B(J[0]).addClass("rw_selected");e.addClass("rw_key_nav");RW.category.scrollContainer.animate({scrollLeft:"0px"},200)}}}function C(){if(RW.category.collapsedSubCategories){var m=B("#rw_category_dropdown_wrapper .rw_dd_category");B.each(m,function(){if(B("ul",this).is(":empty")&&B(".rw_dd_category",this).length===0){B("ul",this).append('<li data-load-category="true"></li>').data("empty",true)}})}}function i(){if(X===40){if(B(".rw_dropdown_btn",f).length>0){B(".rw_dropdown_btn",f).trigger("click")}}}function S(){if(RW.category.scrolling&&B("li.rw_selected",e).length>0){if(d===0){RW.category.scrollContainer.animate({scrollLeft:"0"},100)}else{if(d===(Y.size()-1)){RW.category.scrollContainer.animate({scrollLeft:"+=99999"},100)}else{if(RW.category.scrollContainer.offset().left+e.width()<B(".rw_selected",e).offset().left+B(".rw_selected",e).width()){RW.category.scrollContainer.animate({scrollLeft:"+=400"},100)}else{if(RW.category.scrollContainer.offset().left>B(".rw_selected",e).offset().left){RW.category.scrollContainer.animate({scrollLeft:"-=400"},100)}}}}}}function T(){if(f.length===0&&(X===39||X===37)){var o=RW.hideCategory();var q=B("#"+o,RW.category.object);var n;var p=B("li",RW.category.object);var m=p.index(q);if(X===37&&m===0){n=p[p.length-1]}else{if(X===37){n=p[m-1]}else{if(X===39&&m===(p.length-1)){n=p[0]}else{n=p[m+1]}}}RW.startCategoryKeyNavigation(B(n))}if(J.index(f)===0&&X===38){var o=RW.hideCategory();var q=B("#"+o,RW.category.object);RW.startCategoryKeyNavigation(q)}}function a(){if(RW.category.collapsedSubCategories&&V.data("loadCategory")){var m=V.closest(".rw_dd_category");V.remove();if(m.hasClass("rw_dd_category_collapsed")){B("a.rw_item_expand",m).trigger("click")}}}function U(){var m=B("li:visible:last",e);if(X===39){E=false;if(B("> .rw_icon_content .rw_icon",f).hasClass("rw_icon_plus")){B("> .rw_icon_content .rw_item_icon",f).trigger("click")}}else{if(X===37){E=false;if(B("> .rw_icon_content .rw_icon",f).hasClass("rw_icon_minus")){B("> .rw_icon_content .rw_item_icon",f).trigger("click")}}else{if(X===40){if(B("> .rw_icon_content .rw_item_icon",f).attr("id")==B("> .rw_icon_content .rw_item_icon",m).attr("id")){E=false}}}}}function k(){if(X===39||X===37){E=false}}function W(){if(X===39||X===37){E=false}if(X===37){var m=B(">a",f);RW.sideMenu.executeLink(m)}}function c(){if(X===39||X===37){E=false}if(X===39){RW.sideMenu.quitDDKeyNav(B("#"+e.data("owner")).parent())}}function O(){if(N==V){return }if(X===40||X==38){if(!(B(V).closest("ul").is(":visible"))){if(N==null){N=V}b(X)}}else{N=null}}function P(){var m=B(".rw_prev",e).parent();var n=B(".rw_next",e).parent();if(X===39){if(!n.hasClass("rw_transparent")){n.click()}}else{if(X===37){if(!m.hasClass("rw_transparent")){m.click()}}}}function L(){var m=J.index(f);if(m===0&&X===38){if(parseInt(AJS.version)>=5){B("#rw_menu_bar").click();RW.startConf5MenuKeyNavigation()}else{RW.startMenuKeyNavigation()}}}function Z(){if(parseInt(AJS.version)>=5){B(".active",e).removeClass("active");B("a",V).addClass("active")}}function j(){if(!RW.isScrolling){RW.scrollToElementWithOffsetAndDelay(V,250,100,{before:function(){I=true},complete:function(){I=false},error:function(){I=false}})}}var G=function(o){if(o.which==13){if(B("li.rw_selected",e).length===1){if(l=="page_tree"){window.location.href=B("li.rw_selected a",e).attr("href");if(l=="page_tree"){RW.showLoader()}}else{if(l=="menu_dropdown"){var n=B("li.rw_selected a",e).data("events");if(n!=null&&typeof (n.click)!==undefined){B("li.rw_selected a",e).trigger("click")}else{window.location.href=B("li.rw_selected a",e).attr("href")}}else{if(l=="sidebar"||l=="sidebar_dd"){RW.sideMenu.executeLink(B("li.rw_selected > a",e));return false}else{B("li.rw_selected a",e).trigger("click")}}}}o.preventDefault();return false}else{if(o.which===37||o.which===38||o.which===39||o.which===40){b(o.which);if(l=="search"&&(o.which===37||o.which===39)){return true}else{o.preventDefault();return false}}}if(o.which===27){if(l==="blog_post_popup"){var m=B(".rw_del",e).parent();m.click()}}};var g=function(){if(!I){H=B(this);e.removeClass("rw_key_nav");B("li.rw_selected",e).removeClass("rw_selected")}};this.quit=function(){B("li.rw_selected",e).removeClass("rw_selected");e.removeClass("rw_key_nav");B(document).unbind("keydown",G);B("li",e).unbind("mouseenter",g)};B(document).keydown(G);B("iframe#rw_popup_iframe_id").load(function(){B(document.activeElement.contentWindow.document).keydown(G);B(this).keydown(G)});B("li",e).mouseenter(g);return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/categories/category-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.category==="undefined"){RW.category={}}(function(b){var I="rw_category_key_";var k="single_column";var U="multi_column";var O="dynamic_column";var F=340;var s=440;var l=180;var A="/plugins/servlet/rw-resources/categories/";var T;var a;var P=false;var c=false;var R;var o;var K;var V;var h;var W;var f;var B;var N;var p=b('<div class="rw_dd_section" ></div>');var g;var C=b('<div class="rw_popup_content" ></div>');var i;var J;var n;var j;var D;var e;var E;var Y;var d;var S;var q;var M;AJS.toInit(function(){RW.category.object=b("#rw_category_menu");if(RW.category.object.length>0){RW.category.scrollContainer=b("#rw_category_menu_scroll_container",RW.category.object);if(RW.category.scrollContainer.length>0){RW.category.scrollEnabled=true}else{RW.category.scrollEnabled=false}R=b("#rw_main");o=b("#rw_category_dropdown_wrapper",R);K=b("#rw_category_dropdown_container",R);V=b("#rw_category_dropdown_loader",R);t(b("ul",RW.category.object))}});function t(u){var v=b("#rw_category_menu_parameters");D=b("#rw_category_dd_disabled",v).html();dropDownlayout=b("#rw_category_dd_layout",v).html();j=b("#rw_show_category_logo",v).html();J=b("#rw_show_space_logo",v).html();n=b("#rw_show_space_icon",v).html();E=b("#rw_active_category_key",v).html();Y=b("#rw_is_dashboard",v).html();d=b("#rw_min_column_width",v).html();S=b("#rw_exclude_archived_spaces",v).html();q=b("#rw_manual_permissions",v).html();M=b("#rw_disable_subdashboards",v).html();if(typeof M=="string"){M=(M=="true")}if(d!=null&&d!=""&&d!="0"){F=parseInt(d);s=F+100}if(b("#rw_sub_category_collapsed",v).html()==="true"){RW.category.collapsedSubCategories=true}else{RW.category.collapsedSubCategories=false}if(dropDownlayout==undefined||dropDownlayout==""){dropDownlayout=O}if(Y==="true"){b("#rw_dashboard_link",RW.category.object).addClass("rw_active")}RW.bindLink(b("#rw_dashboard_link a",RW.category.object),contextPath+"/dashboard.action",false,RW.category.object);b.ajax({type:"GET",dataType:"json",url:contextPath+"/rest/originaltheme/1.0/category?exclude-archived-spaces="+S,cache:false,success:function(w){if(w!=undefined&&w.length>0){b.each(w,function(){r(this,u)});if(RW.category.scrollEnabled&&RW.category.scrollContainer.width()>0){H()}RW.category.object.trigger("loaded")}else{if(RW.isConfluenceAdministrator){var x=b('<li><a title="'+"Organize Spaces & Categories"+'"class="rw_edit_button"><span class="rw_item_left"><span class="rw_item_logo"></span><span class="rw_item_name">'+"Organize Spaces & Categories"+'</span></span><span class="rw_item_right"></span></a></li>');RW.bindLink(b("a",x),contextPath+"/admin/spaces/organize-spaces.action",false,RW.category.object);u.append(x)}}}})}function r(y,u){if(h==undefined){h=b(b("#rw_category_menu_item_template").html())}var AB=h.clone(),v=b(".rw_item_name",AB),x=b("a",AB),z=b(".rw_item_logo",AB),w=b(".rw_item_icon",AB);if(y.nameKey===E){AB.addClass("rw_active")}AB.attr("id",I+RW.htmlEncode(y.nameKey));v.html(RW.htmlEncode(y.name));if(y.link!=undefined){var AA=y.link;if(AA.target=="_blank"){w.addClass("rw_icon_container_10 rw_target_blank");RW.bindLink(x,AA.url,true,RW.category.object)}else{RW.bindLink(x,AA.url,false,RW.category.object);if(D!=="true"){w.addClass("rw_icon_container_16 rw_dropdown_btn").categoryDropDown(contextPath,dropDownlayout)}}}else{RW.bindLink(x,contextPath+"/category/"+RW.htmlEncode(y.nameKey),false,RW.category.object);if(D!=="true"){w.addClass("rw_icon_container_16 rw_dropdown_btn").categoryDropDown(contextPath,dropDownlayout)}}x.attr("title",y.name+" "+"( Type \'n\' )");if(j==="true"&&y.logo!=undefined&&y.logo.filePath!=undefined){z.addClass("rw_image_container").html('<img src="'+contextPath+A+y.logo.filePath+'" />');x.addClass("rw_has_logo")}u.append(AB)}function H(){RW.category.scrollContainer.height(RW.category.object.height()+50);b("ul",RW.category.object).width(10000);b("ul",RW.category.object).width(10+b("li:last",RW.category.object).offset().left+b("li:last",RW.category.object).width()-RW.category.object.offset().left);RW.category.scrollContainer.scroll(X);b(window).resize(X);X();m()}function X(){var u=G();var v=L();if(u||v){RW.category.scrolling=true}else{RW.category.scrolling=false}if(RW.inCategoryDropDown){RW.hideCategory()}}function G(){var v=b("ul",RW.category.scrollContainer).width()-RW.category.scrollContainer.width();if(v>0&&v>(RW.category.scrollContainer.scrollLeft()+2)){if(!P){a=b(b("#rw_category_menu_right_button_template").html());RW.category.object.append(a);var u=parseInt((RW.category.object.height()-18)/4);a.height(RW.category.object.height());b("a",a).css("padding",u+"px 0px").css("margin",u+"px 0px 0px 0px");RW.category.scrollContainer.css("margin-right","25px");b("a",a).click(Z);a.fadeIn(300);P=true}else{a.fadeIn(300)}return true}else{if(P){a.fadeOut(300)}}return false}function L(){if(RW.category.scrollContainer.scrollLeft()>0){if(!c){T=b(b("#rw_category_menu_left_button_template").html());RW.category.object.prepend(T);var u=parseInt((RW.category.object.height()-18)/4);T.height(RW.category.object.height());b("a",T).css("padding",u+"px 0px").css("margin",u+"px 0px 0px 0px");RW.category.scrollContainer.css("margin-left","25px");b("a",T).click(Q);T.fadeIn(300);c=true}else{T.fadeIn(300)}return true}else{if(c){T.fadeOut(300)}}return false}function Z(){RW.category.scrollContainer.animate({scrollLeft:"+=400px"},200)}function Q(){RW.category.scrollContainer.animate({scrollLeft:"-=400px"},200)}function m(){if(RW.category.scrolling){var u=RW.category.getScrollPositionForItem(b(".rw_active",RW.category.object));if(u>0){RW.category.scrollContainer.animate({scrollLeft:(u+100)},0)}}}RW.category.getScrollPositionForItem=function(u){if(u.length==0){return 0}else{return(u.offset().left+u.width())-(RW.category.scrollContainer.offset().left+RW.category.scrollContainer.width())}};b.fn.categoryDropDown=function(AF,AJ){var x;var AN;var AY;var AM;var AX;var AR;var AD=false;var AL=b("<div class='rw_expand_all_section'><a style='display:none;' class='rw_expand_all'></a></div>");var AP=false;var AV;RW.showCategory=function(Ac,Ad,Ae){var Aa=false;if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(Ac)&&RW.Users.categories.get(Ac).get("visible")==true){AP=true}else{AP=false}x=Ac;var AZ=b("#"+I+x+" a:first",RW.category.object);AY=R.offset();AM=RW.category.object.offset();AX=AZ.offset();var Ab=1;if(AJ==U){w()}else{if(AJ==k){AG()}else{AJ=O;AG()}}o.css("top",AM.top+RW.category.object.height()-b("#rw_wrapper").offset().top);RW.inCategoryDropDown=true;RW.hideUserCategories();b("a.rw_category_dropdown_visible",RW.category.object).removeClass("rw_category_dropdown_visible rw_corners_top");AZ.addClass("rw_category_dropdown_visible rw_corners_top");o.show();K.hide();V.show();RW.category.recursive=Ad||!RW.category.collapsedSubCategories;b.ajax({type:"GET",dataType:"json",url:AF+"/rest/originaltheme/1.0/category/"+Ac+"?include-children=true&recursive="+RW.category.recursive+"&exclude-archived-spaces="+S,cache:false,success:function(Ak){K.html("");AN=C.clone();if(AP){o.addClass("rw_has_user_category")}var Ai=Ak.subCategories;var Aj;if(Ak.children&&Ak.children.length>0){var Aj=Ak.children}if((Aj===undefined||Aj.length==0)&&(Ai===undefined||Ai.length==0)){AN.html("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>");K.append(AN);K.show();V.hide();RW.startKeyable(K,k,"category_dropdown_menu");return }if(Ai===undefined||Ai.length===0){if(N==undefined){N=b(b("#rw_section_template").html())}if(AJ==U||AJ==O){if(Aj.length<5){var Ah=N.clone();Ah.addClass("rw_dd_section");Ah.css("float","none");AW(Aj,Ah);AN.append(Ah);AR=k}else{if(Aj.length<17){if(AJ==O){AC(2)}var Am=AT(2)+"px";var Ag=Math.ceil(Aj.length/2);AS(Aj,AN,Ag,Am);AR=U}else{if(AJ==O){w()}var Af=AU();var Ag=Math.ceil(Aj.length/Af);var Am=AT(Af)+"px";AS(Aj,AN,Ag,Am);AR=U}}}else{var Ah=N.clone();Ah.addClass("rw_dd_section");Ah.css("float","none");AW(Aj,Ah);AN.append(Ah);AR=k}}else{if(AJ==O){var Af=1;if(Ai!==undefined){Af=Ai.length;if(Aj!==undefined){if(Aj.length>5){Af=AU()}else{Af++}}}if(Af===1){AE(Ai,Aj,AN)}else{if(Af>1&&Af<4){AC(Af);AI(Ai,Aj,AN)}else{w();AI(Ai,Aj,AN)}}}else{if(AJ==U){AI(Ai,Aj,AN)}else{if(AJ==k){AE(Ai,Aj,AN)}}}if(RW.category.collapsedSubCategories){Aa=true}}K.append(AN);if(Aa){var Al=b(".rw_expand_all",AL);if(RW.category.recursive){Al.html("Collapse all")}else{Al.html("Expand all")}Al.click(function(){if(Al.html()=="Expand all"){Al.html("Collapse all");RW.showCategory(Ac,true)}else{Al.html("Expand all");RW._.each(b(".rw_item_expand",K),function(An){if(b(An).closest(".rw_dd_category").hasClass("rw_dd_category_expanded")){An.click()}});v()}});Al.show();AN.append(AL)}if(B==undefined){B=b(b("#rw_clear_template").html())}AN.append(B.clone());K.show();V.hide();v();RW.startKeyable(K,AR,"category_dropdown_menu");u(K,Ac,Ai,AZ,Ak.canEdit);if(Ad){RW._.each(b(".rw_item_expand",K),function(An){if(b(An).closest(".rw_dd_category").hasClass("rw_dd_category_collapsed")){An.click()}});v()}}})};function u(Ac,Ae,Ad,AZ,Ab){AV=[];RW._.each(Ad,function(Ag){if(Ab){AK(AV,Ag)}else{z(AV,Ag)}});if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(Ae)!==undefined){var Af=b(".rw_popup_content",b("#rw_category_dropdown_container")).children().first().css("width");var Aa=RW.Users.categories.get(Ae);b("#rw_category_dropdown_users").html(RW.Templates.loader({type:"circle",bg:"gray"}));Aa.fetch({cache:false,data:{type:Aa.get("type"),rolesOnly:Aa.get("rolesOnly")},success:function(){var Ag=new RW.Views.UserCategory.UserCategoryInline({model:Aa});b("#rw_category_dropdown_users").html(Ag.render());Confluence.Binder.userHover();v()}})}AQ(Ab)}function AQ(AZ){RW._.each(AV,function(Ab){if(!RW._.isEmpty(RW.Users.categories)&&!b("#rw_sub_category_key_"+Ab.nameKey+" > h2").hasClass("rw_has_user_category")){var Aa=RW.Users.categories.get(Ab.nameKey);if(Aa!==undefined&&Aa.get("visible")==true){var Ac=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:Ab.nameKey,tooltip:"Users"});b("#rw_sub_category_key_"+Ab.nameKey+" > h2 .rw_sub_category_link").append(Ac.render());b("#rw_sub_category_key_"+Ab.nameKey+" > h2").addClass("rw_has_user_category")}else{if(AZ){var Ac=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:Ab.nameKey,tooltip:"Manage users"});b("#rw_sub_category_key_"+Ab.nameKey+" > h2 .rw_sub_category_link").append(Ac.render());b("#rw_sub_category_key_"+Ab.nameKey+" > h2").addClass("rw_has_user_category");b("#rw_sub_category_key_"+Ab.nameKey+" > h2").addClass("rw_hidden_mode")}}}});RW.applyTooltip("#rw_category_dropdown_container .rw_user_category_link",{gravity:"n"})}function z(Aa,AZ){if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(AZ.nameKey)!==undefined){Aa.push(AZ)}if(AZ.subCategories!==undefined){RW._.each(AZ.subCategories,function(Ab){z(Aa,Ab)})}}function AK(Aa,AZ){Aa.push(AZ);if(AZ.subCategories!==undefined){RW._.each(AZ.subCategories,function(Ab){AK(Aa,Ab)})}}RW.hideUserCategories=function(){b("#rw_wrapper .rw_user_category_dd").hide();o.removeClass("rw_has_user_category");b("#rw_category_dropdown_users",o).html("");b("#rw_category_dropdown_users",o).css("min-height","0px")};RW.hideCategory=function(){RW.hideUserCategories();b("a.rw_category_dropdown_visible",RW.category.object).removeClass("rw_category_dropdown_visible rw_corners_top");o.hide();K.html("");RW.inCategoryDropDown=false;b(document).unbind("click",RW.hideCategory);RW.quitKeyable();return I+x};RW.category.toggleSubCategory=function(AZ){AZ.toggleClass("rw_dd_category_collapsed");AZ.toggleClass("rw_dd_category_expanded");v()};function v(){if(AP){b("#rw_category_dropdown_users",o).css("min-height","0px")}if(AR===U){b(".rw_dd_section",AN).css("height","auto");b(".rw_dd_section",AN).height(AN.height())}if(AP){b("#rw_category_dropdown_users",o).css("min-height",o.height())}}function AA(){var Aa=R.width()+AY.left;var AZ=AX.left+o.width()-20;if(R.width()<o.width()){w()}else{if(AZ>Aa){o.css("left",Aa-o.width())}else{o.css("left",AX.left-20)}}}function w(){o.css("left",AY.left);o.css("width",R.width())}function AC(AZ){o.css("left",AY.left);o.css("width",(AZ*F)+((AZ-1)*20));AA()}function AG(){if(AP){o.css("width",s+l)}else{o.css("width",s)}AA()}function AE(Ab,Ac,AZ){AR=k;var Ad=p.clone();Ad.css("width","100%");if(Ac){if(N==undefined){N=b(b("#rw_section_template").html())}var Aa=N.clone();AW(Ac,Aa);Ad.append(Aa)}b.each(Ab,function(Ae){if(Ae==0&&Ac==null){AB(this,Ad,false,false)}else{AB(this,Ad,true,false)}});AZ.append(Ad)}function AI(Af,Ab,AZ){AR=U;var Ag=0;var Ak=0;var Ah=AU();var Ae=1;var Ad=Af.length;if(Ad<Ah){if(Ab&&Ab.length>5){Ae=Ah-Ad;Ad=Ah}else{if(Ab){Ad++}}}if(Ad>Ah){Ad=Ah}var Aa=AT(Ad)+"px";if(Ab){if(Ae==1){var Ac=p.clone();Ac.css("width",Aa);Ac.attr("id","rw_dd_section_"+Ag);if(N==undefined){N=b(b("#rw_section_template").html())}var Ai=N.clone();AW(Ab,Ai);Ac.append(Ai);AZ.append(Ac);Ag++;Ak++}else{var Aj=Math.ceil(Ab.length/Ae);AS(Ab,AN,Aj,Aa);Ag=Ae;Ak=Ae}}b.each(Af,function(){if(Ag===Ad){if(Ab){Ag=1}else{Ag=0}}if(Ak>=Ad){AB(this,b("#rw_dd_section_"+Ag,AZ),true,false,true)}else{var Al=p.clone();Al.attr("id","rw_dd_section_"+Ag);if(Ag!==0){Al.css("padding-left","15px").css("margin-left","14px").css("border-left","1px solid")}Al.css("width",Aa);AB(this,Al,false,false);AZ.append(Al)}Ag++;Ak++})}function AB(Ag,AZ,Ah,Ab,Aj){if(f==undefined){f=b(b("#rw_category_section_template").html())}var Ai=f.clone();Ai.attr("id","rw_sub_category_key_"+RW.htmlEncode(Ag.nameKey));if(Ah){Ai.addClass("rw_padding_top")}if(Ab){Ai.addClass("rw_padding_left")}var Af=b("h2",Ai);var Ae=b("h2 a.rw_sub_category_link",Ai);var Ad=b("ul",Ai);if(Aj){Ai.css("padding-top","25px");Af.addClass("rw_new_row")}Ae.html(RW.htmlEncode(Ag.name));if(!M){Ae.attr("href",AF+"/category/"+RW.htmlEncode(Ag.nameKey))}if(Ag&&Ag.children){AW(Ag.children,Ad)}if(RW.category.collapsedSubCategories){var Aa=b('<a class="rw_item_expand"><span></span></a>');Af.prepend(Aa);Ae.addClass("rw_has_expand");Ai.addClass("rw_dd_category_collapsed");if(RW.category.recursive){Ai.data("loaded",true)}var Ac=Aa;if(M){Ac=b(Ae.closest("h2"));Ac.addClass("rw_category_title_link")}Ac.click(function(){var Al=this;if(M){Al=b(this).children(".rw_item_expand")}if(!Ai.data("loaded")){var Ak=b(RW.Templates.loader({type:"circle",bg:"gray"}));Ai.append(Ak);b.ajax({type:"GET",dataType:"json",url:AF+"/rest/originaltheme/1.0/category/"+RW.htmlEncode(Ag.nameKey)+"?include-children=true&recursive="+!RW.category.collapsedSubCategories+"&exclude-archived-spaces="+S,cache:false,success:function(Am){Ai.find(".rw_loader_box").remove();Ai.data("loaded",true);if(Am==undefined){return }if((Am.children==undefined||Am.children.length==0)&&(Am.subCategories==undefined||Am.subCategories.length==0)){Ad.append("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>")}else{if(Am&&Am.children){AW(Am.children,Ad)}if(Am&&Am.subCategories!=null){b.each(Am.subCategories,function(){AB(this,Ai,true,true)})}}RW.category.toggleSubCategory(b(Al).parent().parent());if(RW.Keyable.prevItem!=undefined){RW.startKeyable(K,AR,"category_dropdown_menu",RW.Keyable.prevItem)}if(Am.canEdit){AK(AV,Am)}else{z(AV,Am)}AQ(Am.canEdit)}})}else{RW.category.toggleSubCategory(b(Al).parent().parent())}})}else{if((Ag.children===undefined||Ag.children.length===0)&&(Ag.subCategories===undefined||Ag.subCategories.length===0)){b("ul",Ai).append("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>")}}AZ.append(Ai);if(Ag&&Ag.subCategories!=null){b.each(Ag.subCategories,function(){AB(this,Ai,true,true)})}}function AW(Aa,AZ){AZ.addClass("rw_content_list");b.each(Aa,function(Ab){AO(this,AZ,Ab)});RW.adjustIconTextSpace(AZ)}function AO(Ab,AZ,Aa){if(Ab.type=="space"){y(Ab,AZ,Aa)}else{if(Ab.type=="link"){AH(Ab,AZ,Aa)}}}function AH(Ad,Af,Ac){if(Ad==undefined){return }var Ag=b('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>'),Ae=b(".rw_item_icon",Ag),Ab=b(".rw_item_content",Ag),Aa=b("a",Ag);if(Ac%2===0){Ag.addClass("rw_alternating")}Ag.attr("id","rw_link_id_"+RW.htmlEncode(Ad.key));Ab.html(RW.htmlEncode(Ad.title));if(Ad.icon==undefined){Ae.remove()}else{Ae.addClass("rw_icon_"+Ad.icon)}if(Ad.target==true){Aa.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');Aa.attr("target","_blank");Ab.addClass("rw_icon_right")}var AZ=RW.htmlEncodeUrl(Ad.url);Aa.attr("href",AZ).click(function(){AD=true;if(K.hasClass("rw_key_nav")){if(Ad.target==true){window.open(AZ)}else{window.location=AZ}K.hide();V.show();return false}else{return true}});Af.append(Ag)}function y(Ag,AZ,Af){if(W==undefined){W=b(RW.Templates.contentItem())}var Ac=W.clone(),Ab=b(".rw_item_content",Ac),Aa=b(".rw_item_favourite",Ac),Ae=b("a",Ac),Ad=Ag.key;if(Af%2===0){Ac.addClass("rw_alternating")}Ac.attr("id","rw_space_key_"+RW.htmlEncode(Ad));Ab.html(RW.htmlEncode(Ag.title));Ae.attr("href",AF+"/display/"+Ad).click(function(){AD=true;if(K.hasClass("rw_key_nav")){window.location=AF+"/display/"+Ad;K.hide();V.show();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(Ag.favourite){Aa.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{Aa.addClass("rw_gray_star").attr("title","Add to your favourite list")}Aa.click(function(Ah){RW.addOrRemoveFav(Ad,this);Ah.stopPropagation();return false});Ab.addClass("rw_icon_right")}else{Aa.remove()}if(J==="true"&&typeof (Ag.logo)!=="undefined"){Ae.prepend('<span class="rw_item_icon"><img src="'+AF+Ag.logo+'" class="rw_space_logo" /></span>')}else{if(n==="true"){Ae.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}}AZ.append(Ac)}function AS(Ab,AZ,Ag,Aa){var Ac=p.clone();Ac.width(Aa);if(N==undefined){N=b(b("#rw_section_template").html())}var Af=N.clone();Af.addClass("rw_content_list");var Ae=0;var Ah=0;var Ad=Ab.length-1;b.each(Ab,function(){AO(this,Af,Ae);if(Ae==(Ag-1)&&Ah!=Ad){Ae=0;Ac.append(Af);AZ.append(Ac);Ac=p.clone();Ac.css("padding-left","30px");Ac.width(Aa);Af=N.clone();Af.addClass("rw_content_list")}else{Ae++}Ah++});Ac.append(Af);AZ.append(Ac)}function AU(){return Math.floor(R.width()/(F+30))}function AT(Aa){var AZ=o.width()-40;if(AP){var AZ=AZ-l}switch(Aa){case 1:columnWidth=AZ;break;case 2:columnWidth=(AZ-30)/2;break;case 3:columnWidth=(AZ-60)/3;break;case 4:columnWidth=(AZ-90)/4;break;case 5:columnWidth=(AZ-120)/5;break;case 6:columnWidth=(AZ-150)/6;break;case 7:columnWidth=(AZ-180)/7;break;case 8:columnWidth=(AZ-210)/8;break;case 9:columnWidth=(AZ-240)/9;break;case 10:columnWidth=(AZ-270)/10;break;case 11:columnWidth=(AZ-300)/11;break;case 12:columnWidth=(AZ-330)/12;break;case 13:columnWidth=(AZ-360)/13;break;case 14:columnWidth=(AZ-390)/14;break;case 15:columnWidth=(AZ-420)/15;break;default:columnWidth=(AZ-450)/16}return columnWidth-1}b(this).click(function(){var AZ=b(this).closest("a");RW.showCategory(AZ.closest("li").attr("id").replace(I,""),false);AZ.addClass("rw_category_dropdown_visible rw_corners_top");b(document).bind("click",function(){if(!AD){RW.hideCategory()}else{AD=false}});return false});b(document).ready(function(){o.click(function(AZ){if(!AD){AZ.stopPropagation()}})})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/attachments-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(E){RW.inAttachments=false;var D=false;var B;AJS.toInit(function(){E("#rw_attachment_dialog_button").click(RW.showAttachments)});function C(){var G=contextPath+"/pages/view-attachments.action?pageId="+AJS.params.pageId;var F=RW.openIframeDialog(G,"Attachments ","",true);F.addButton("Done",function(){F.remove();RW.hideLoader()});F.show();return F}function A(){if(AJS.params.pageId!=undefined){C()}}RW.showAttachments=function(){if(AJS.params.pageId!=undefined){C()}return false};RW.hideAttachments=function(){RW.inAttachments=false;B.remove();RW.quitKeyable();return false}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/fullscreen-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(B){RW.inFullscreen=false;var A=false;var C=function(D){D.stopPropagation()};AJS.toInit(function(){B("#rw_open_fullscreen").click(RW.openFullscreen);B("#rw_close_fullscreen").click(RW.closeFullscreen)});RW.openFullscreen=function(){if(B("#rw_main_column").length!=0){RW.inFullscreen=true;if(B("#rw_side_menu").length>0){if(B("#rw_wrapper").hasClass("rw_has_side_menu")){A=true;B("#rw_wrapper").removeClass("rw_has_side_menu")}B("#rw_side_menu").hide()}B("#rw_main_column").addClass("rw_in_fullscreen");B("#rw_fullscreen_bg").show();B("#rw_open_fullscreen").hide();B("#rw_close_fullscreen").show();window.scroll(0,0)}};RW.closeFullscreen=function(){RW.inFullscreen=false;if(B("#rw_side_menu").length>0){if(A){B("#rw_wrapper").addClass("rw_has_side_menu")}B("#rw_side_menu").show()}B("#rw_main_column").removeClass("rw_in_fullscreen");B("#rw_fullscreen_bg").hide();B("#rw_open_fullscreen").show();B("#rw_close_fullscreen").hide()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/global/favorite-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(D){RW.inFavPageAndSpace=false;var B;var A;var K;var J;var G;var C;function I(L,M){M.html("");M.addClass("rw_content_list");D.each(L,function(N){F(this,M,N)})}function F(S,M,R){if(C==undefined){C=D(RW.Templates.contentItem())}var P=C.clone(),L=D(".rw_item_content",P),O=D(".rw_item_favourite",P),Q=D("a",P),N=S.id;Q.prepend('<span class="rw_item_icon rw_icon_text rw_icon_container_20"></span>');if(R%2===0){P.addClass("rw_alternating")}L.html(S.name);L.append(' <span class="rw_small_text">('+S.spaceName+")</span>");Q.attr("href",S.url).click(function(){linkedClicked=true;if(A.hasClass("rw_key_nav")){window.location=S.url;K.showLoader();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(S.favourite){O.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{O.addClass("rw_gray_star").attr("title","Add to your favourite list")}O.click(function(T){RW.addOrRemoveFavPage(N,this);T.stopPropagation();return false});L.addClass("rw_icon_right")}else{O.remove()}M.append(P)}function H(M,L){L.html("");L.addClass("rw_content_list");D.each(M,function(N){E(this,L,N)})}function E(S,L,R){if(G==undefined){G=D(RW.Templates.contentItem())}var O=G.clone(),N=D(".rw_item_content",O),M=D(".rw_item_favourite",O),Q=D("a",O),P=S.key;if(R%2===0){O.addClass("rw_alternating")}O.attr("id","rw_space_key_"+P);N.html(S.name);Q.attr("href",contextPath+"/display/"+P).click(function(){linkedClicked=true;if(A.hasClass("rw_key_nav")){window.location=contextPath+"/display/"+P;K.showLoader();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(S.favourite){M.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{M.addClass("rw_gray_star").attr("title","Add to your favourite list")}M.click(function(T){RW.addOrRemoveFav(P,this);T.stopPropagation();return false});N.addClass("rw_icon_right")}else{M.remove()}if(S.logo!=undefined){Q.prepend('<span class="rw_item_icon"><img src="'+S.logo+'" class="rw_space_logo" /></span>')}else{Q.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}L.append(O)}RW.showFavourite=function(L){if(J==undefined){J=D(D("#rw_section_with_heading_template").html())}if(K==undefined){K=new RW.ui.popup("rw_favorite_popup","Favourite");K.closeButton.click(RW.hideFavourite);K.closeButton.html("Close");K.obj.click(function(M){M.stopPropagation()})}A=K.container;RW.closePopups();K.show();K.showLoader();RW.inFavPageAndSpace=true;D.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/space",type:"GET",dataType:"json",cache:false,success:function(O){var N=J.clone(),M=D("h2",N),P=D("ul",N);N.addClass("rw_left").css("padding-right","20px").width(370);M.html("Spaces");if(O.spaces.length>0){H(O.spaces,P)}else{P.after(D(D("#rw_favourite_no_spaces_template").html()).clone()).remove()}A.append(N)},}).done(function(){D.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/page",type:"GET",dataType:"json",cache:false,success:function(M){var P=J.clone(),O=D("h2",P),N=D("ul",P);P.addClass("rw_left").width(370);O.html("Pages");if(M.pages.length>0){I(M.pages,N)}else{N.after(D(D("#rw_favourite_no_pages_template").html()).clone()).remove()}A.append(P)}}).done(function(){A.append('<div style="clear:both;" ></div>');var N=D("li",A);var M=D(N[0]);if(L!=undefined&&L.which==1){M=null}RW.startKeyable(A,"multi_column",null,M);K.hideLoader();D(document).bind("click",RW.hideFavourite)})});RW.PubSub.trigger("favourite-popup:show")};RW.hideFavourite=function(){K.hide();K.clear();RW.inFavPageAndSpace=false;D(document).unbind("click",RW.hideFavourite);RW.quitKeyable();RW.PubSub.trigger("favourite-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/leftcolumn-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){AJS.toInit(function(){if(RW.confluenceVersion<5){RW.leftColumnHidden=false;RW.hideLeftColumn=function(){D();C("closed")};RW.showLeftColumn=function(){B();C("open")};function C(E){AJS.safe.ajax({url:contextPath+"/ajaxactions/left-column-state.action",type:"POST",data:{value:E},success:function(F){},error:function(F){}})}function D(){RW.leftColumnHidden=true;A("#rw_left_column").hide();A("#rw_main_column").css("margin-left","16px");A("#rw_left_column_show_button").show();A("#rw_left_column_show_button").height(A("#rw_main_column").height());A("#rw_hide_left_column").hide();A("#rw_show_left_column").show()}function B(){RW.leftColumnHidden=false;A("#rw_left_column").show();A("#rw_left_column_show_button").hide();A("#rw_hide_left_column").show();A("#rw_show_left_column").hide();A("#rw_main_column").css("margin-left","23%")}A("#rw_hide_left_column").click(RW.hideLeftColumn);A("#rw_show_left_column, #rw_left_column_show_button").click(RW.showLeftColumn);if(RW.leftColumnState=="closed"){D()}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/global/menubar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(G){var D;var F;var C;var B;AJS.toInit(function(){D=G("#rw_menu_bar_wrapper");F=G("#rw_menu_bar_button",D);C=G("#rw_menu_bar_icon",D);if(RW.confluenceVersion>=5&&C.length>0){var I=G(".space-logo",C);if(I.length>0){I.attr("title",I.attr("data-name")).click(function(){window.location=contextPath+"/display/"+G(this).attr("data-key")})}}if(F.length>0){B=G("#rw_menu_bar_content",D);F.click(function(){A()});if(D.hasClass("rw_closed")){F.attr("title","Show menu")}else{F.attr("title","Hide menu")}if(F.offset().left+F.width()>G(window).width()){var H=G(window).width()-(D.offset().left+D.width());H=H-10;F.css("margin-right",-H)}}});function E(H){G.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/menubar/state?value="+H,type:"PUT",dataType:"json",cache:false,success:function(I){},error:function(I){}})}function A(){if(D.hasClass("rw_closed")){F.attr("title","Hide menu");E("open")}else{F.attr("title","Show menu");E("closed")}D.toggleClass("rw_closed")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/globalmenu/globalmenu-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(E){RW.inTopMenu=false;var L;var K;var D;var F;var M;var H=false;var A;var C;AJS.toInit(function(){E("#rw_top_menu_button").click(N);if(E("#rw_side_menu").length>0){J();B()}});function N(){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu()}return false}function J(){if(!H){H=true;L=E(E("#rw_section_template").html());K=E(E("#rw_icon_text_item").html());A=E(E("#rw_popup_loader_template").html());F=E("#rw_top_menu_items_container");M=E("#rw_top_menu_button");C=E('<li><a id="rw_custom_links" href="#" title="" class="rw_has_dd rw_tooltip" data-dd="rw_custom_links-dd" data-tooltip=""><span class="rw_item_icon rw_iconfont_more"></span></a><nav id="rw_custom_links-dd" class="rw_side_menu_dd" data-owner="rw_custom_links"><div class="rw_section"><ul></ul></div></nav></li>')}}function I(O){RW.scrollToElementWithOffset(E("#rw_top_menu"),100);if(F.offset().left<0){F.css("left","0")}F.html(A.clone());E.ajax({url:contextPath+"/rest/originaltheme/1.0/topmenu",type:"GET",dataType:"json",cache:false,success:function(S){F.html("");var Q=false;if(S.defaultItems.length!=0){var U=L.clone();E.each(S.defaultItems,function(){U.append(G(this))});F.append(U);Q=true}if(S.confluenceItems.length!=0){var W=L.clone();E.each(S.confluenceItems,function(){W.append(G(this))});F.append(W);Q=true}if(S.customItems.length!=0){var V=L.clone();if(Q){V.addClass("rw_section")}E.each(S.customItems,function(){V.append(G(this))});F.append(V)}if(RW.isConfluenceAdministrator){var P=L.clone();if(Q){P.addClass("rw_section")}var T=K.clone();T.css("opacity","0.6");E("span.rw_item_content",T).html("Manage global menu");E("a",T).attr("title",RW.htmlDecode("Manage global menu"));RW.bindLink(E("a",T),contextPath+"/admin/topmenu/edit-topmenu.action",false,F);P.append(T);F.append(P)}if(O){var R=E("li",F);RW.startKeyable(F,null,null,E(R[0]))}else{RW.startKeyable(F,null,null)}E(document).bind("click",RW.hideTopMenu)},error:function(P){if(P.status!=0){console.log(P.status+" "+P.statusText);RW.hideTopMenu()}}})}function G(Q){var P=K.clone();var O;var S=E("a",P);E("span.rw_item_content",P).html(Q.name);S.attr("title",RW.htmlDecode(Q.name));if(Q.id){S.attr("id",Q.id)}if(Q.type==="custom"){if(Q.icon!=null){E("span.rw_item_icon img",P).attr("src",Q.icon).show()}else{E("span.rw_item_icon",P).addClass("rw_no_icon_link")}O=Q.url}else{E("span.rw_item_icon",P).addClass("rw_"+Q.nameKey);O=Q.url;if(Q.id){S.addClass("rw_item_"+Q.id)}else{S.addClass("rw_item_"+Q.nameKey)}}if(Q.target==="_blank"){E("span.rw_item_content",P).addClass("rw_blank")}if(Q.nameKey==="activity_popup"){S.click(RW.showActivitiyStream)}else{if(Q.nameKey==="favourite_content"){S.click(RW.showFavourite)}else{var R=false;if(Q.target==="_blank"){R=true}RW.bindLink(S,O,R,F)}}return P}function B(O){var P=E("#rw_side_menu_container");E.ajax({url:contextPath+"/rest/originaltheme/1.0/topmenu",type:"GET",dataType:"json",cache:false,success:function(Q){var U=false;if(Q.defaultItems.length!=0){var R=L.clone();E.each(Q.defaultItems,function(){R.append(G(this))});P.append(R)}if(Q.confluenceItems.length!=0){var T=L.clone();E.each(Q.confluenceItems,function(){if(this.id==="space-directory-link"||this.id==="confluence-questions-link"||this.nameKey==="header-teamcalendars-link"){T.append(G(this))}else{U=true;E("ul",C).append(G(this))}});P.append(T)}if(Q.customItems.length!=0){var S=L.clone();E.each(Q.customItems,function(){if(this.icon===undefined){U=true;E("ul",C).append(G(this))}else{S.append(G(this))}});P.append(S)}if(U){E(">ul:last-child",P).append(C);RW.sideMenu.bindDDEvents(E("a.rw_has_dd",C))}RW.PubSub.trigger("topmenu:loaded")},error:function(Q){if(Q.status!=0){console.log(Q.status+" "+Q.statusText);RW.hideTopMenu()}}})}RW.hideTopMenu=function(){F.hide();RW.inTopMenu=false;M.removeClass("rw_active active");RW.quitKeyable();E(document).unbind("click",RW.hideTopMenu)};RW.showTopMenu=function(O){J();if(F.length>0){RW.closePopups();M.addClass("rw_active active");F.show();RW.inTopMenu=true;I(O)}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){AJS.toInit(function(){A("#rw_search_query").val("Search").originalThemeSearch(true);A("#rw_blogpost_query").originalThemeSearch(false)});A.fn.originalThemeSearch=function(Y){inSearchResult=false;var Z=null;var K=false;var H=null;var b=false;var V;var T;var X=A(this);var D;var C;var J;var P;var Q;var N=false;var a=A(this);X.focus(F);if(Y){AJS.whenIType("gg").execute(function(){A("#rw_search_query").trigger("focus")})}function F(){H=undefined;if(!K){K=true;C=A(this).closest(".rw_search");J=A(".rw_search_form",C);P=A(".rw_search_result_container",C);var d=A(".rw_search_parameters",C);if(d.length>0){Q="";A("input",d).each(function(){Q+="&"+A(this).attr("name")+"="+A(this).attr("value")})}X.val("");J.keypress(function(f){if(f.which==13){return false}});X.keyup(function(f){if(f.which==13){if(A("li.rw_selected",P).length===0&&X.val().length>0){J.submit()}if(X.val().length>0){M()}f.stopPropagation()}else{if(f.which==39||f.which==37){}else{if(f.which==27){if(inSearchResult){D()}X.blur();if(RW.inSearch){RW.hideSearch()}if(RW.inStickyBar){RW.hideSearchStickyBar()}}else{O();if(A(this).val().length>1){U(A(this).val())}else{if((A(C.context).attr("id")=="rw_search_popup_query"||A(C.context).attr("id")=="rw_search_query")&&RW.confluenceVersion>=5.2){if(A("#rw_more_recently_viewed").length==0&&A(this).val().length==0){W();I()}else{H=undefined;if(A(this).val().length==1){D()}}f.stopPropagation()}else{H=undefined;D()}}}}}});A(this).click(function(f){f.stopPropagation()});if(C.data("custom")){var c=C.parent();A("#rw_wrapper").append(P);P.css("top",c.offset().top+c.height());P.css("left",c.offset().left)}}if(A(this).val().length==0&&(A(C.context).attr("id")=="rw_search_popup_query"||A(C.context).attr("id")=="rw_search_query")&&RW.confluenceVersion>=5.2){I()}}function U(c){if(H!=c){H=c;if(b===false){S(H)}}}function S(d){b=true;var c="query="+encodeURIComponent(d);if(typeof Q!="undefined"){c+=Q}A.ajax({url:contextPath+"/json/contentnamesearch.action",type:"GET",data:c,dataType:"json",cache:false,success:function(e){if(typeof e.errorMessage==="undefined"&&e.statusMessage==null){W();A.each(e.contentNameMatches,function(f){if(f+1===e.contentNameMatches.length){G(this,true)}else{G(this,false)}});if(H!=d){S(H)}else{b=false}R();if(RW.searchMode=="confluence"){RW.startKeyable(P,null,"search")}else{RW.startKeyable(P,null,"search",P.find("ul:first-child li:first-child"))}}else{if(e.statusMessage!=null){P.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+e.statusMessage+"</div>");R();b=false}else{P.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+e.errorMessage+"</div>");R();b=false}}},error:function(e){}})}function O(){if(typeof V==="undefined"){V=A(A("#rw_section_template").html())}if(typeof T==="undefined"){T=A(A("#rw_search_item").html())}}function W(){P.html("")}function R(){if(!inSearchResult){inSearchResult=true;P.show();A(document).bind("click",D)}}function G(d,c){var e=V.clone();A.each(d,function(f){e.append(L(this))});if(c){e.addClass("rw_last_section")}P.append(e)}function M(){P.html("<div id='rw_search_loader'><div class='rw_popup_loader_image'></div></div>")}function L(f){var d=T.clone();var c=f.href;A("span.rw_search_item_title",d).html(f.name);if(f.spaceName!=undefined){A("span.rw_search_item_space",d).html(f.spaceName)}else{A("span.rw_search_item_space",d).remove()}if(f.className==="admin-item"){A("span.rw_search_item_title",d).addClass("aui-iconfont-configure")}A("a",d).addClass(f.className);if(RW.userDashboardRedirection&&c.indexOf("/display/~")>=0){var e=c.substr(c.indexOf("~")+1,c.length);if(e.indexOf("/")==-1){c=contextPath+"/users/view-user-dashboard.action?username="+c.substr(c.indexOf("~")+1,c.length)}}if(f.className=="search-for"){c=E(c)}A("a",d).attr("href",c).click(function(g){N=true;if(P.hasClass("rw_key_nav")){window.location=c;g.stopPropagation();return false}else{return true}});if(f.icon!=null){d.prepend("<img src='"+f.icon+"' height='16px' />")}return d}function D(){if(!N){inSearchResult=false;W();P.hide();RW.quitKeyable();A(document).unbind("click",D)}else{N=false}}function E(c){if(Q!==undefined){c=c+Q}return c}function I(){if(A("#rw_more_recently_viewed",P).length===0&&RW.remoteUser!=undefined){O();var c=new B();a.addClass("rw_loading");c.fetch({cache:false,success:function(){a.removeClass("rw_loading");var d=[];RW._.each(c.toJSON(),function(g){var f={};f.id=g.id.toString();f.href=contextPath+g.url;f.className="content-type-"+g.type;f.name=RW.htmlEncode(g.title);f.spaceName=RW.htmlEncode(g.space);f.spaceKey="";d.push(f)});if(d.length>0){P.html('<span class="rw_search_result_title">'+"Recently viewed pages"+"</span>");G(d,false);R();var e=RW.Templates.moreRecentlyViewed();P.append(e);RW.startKeyable(P,null,"search");A("#rw_more_recently_viewed").bind("click",function(){A("#view-user-history-link").click();RYQ.util.analytics.trackQuickNavRecentlyDialogOpen()})}}})}}};var B=RW.Backbone.Model.extend({url:function(){return contextPath+"/rest/recentlyviewed/1.0/recent?limit=7"}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/legacy/stickybar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(H){var D=false;var A=false;var I=false;var G=false;var C;var E=true;AJS.toInit(function(){C=H("#rw_sticky_bar");if(C.length>0){if(H("#rw_search_container_sticky_bar").length>0){A=true}if(H("#rw_top_menu_container_sticky_bar").length>0){I=true}D=C.hasClass("show_on_scroll");if(D&&RW.scrollSearchActive){C.hide();E=false;H(window).scroll(function(){var L=H(document).scrollTop();if(L>100&&!E){K()}else{if(L<100&&E){J();B()}}})}H("#rw_sticky_bar_show").click(F);H("#rw_sticky_bar_hide").click(B)}});function K(){C.show();E=true}function J(){C.hide();E=false}function F(){F(false)}function F(L){RW.inStickyBar=true;if(A){H("#rw_search_container_sticky_bar").append(H("#rw_search"))}if(I){H("#rw_top_menu_container_sticky_bar").append(H("#rw_top_menu"))}if(L==true){C.css({"margin-top":"0px"})}else{C.animate({marginTop:"0px"},300)}if(A){if(L==true){H("#rw_search_query").focus()}else{setTimeout(function(){H("#rw_search_query").focus()},300)}}H("#rw_sticky_bar_show").hide();H("#rw_sticky_bar_hide").show();H("#rw_top").addClass("ie7_search_fix");H("#rw_main_top_left").addClass("ie7_search_fix")}function B(){RW.inStickyBar=false;if(A){H("#rw_search_container").append(H("#rw_search"));H("#rw_search_query").blur()}if(I){H("#rw_top_menu_container").append(H("#rw_top_menu"))}C.animate({marginTop:"-62px"},300);H("#rw_sticky_bar_show").show();H("#rw_sticky_bar_hide").hide();H("#top").removeClass("ie7_search_fix");H("#rw_main_top_left").removeClass("ie7_search_fix")}RW.showSearchStickyBar=function(){if(A){K();F(true)}};RW.hideSearchStickyBar=function(){if(A){B();if(D&&H(document).scrollTop()<100){J()}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/blogs/blog-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(Z){if(typeof RW.blogs==="undefined"){RW.blogs={}}var n;var R;var Q;var c;var k;var O;var I;var a;var T;var X;var M;var o;var D;var m;var g;var H;var h;var p=null;var B;var C=false;var j=false;var G={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};var b=new Array();AJS.toInit(function(){if(Z("#rw_blogpost_nav").length>0){N()}if(Z("#rw_blog_calendar").length>0){e()}if(Z("#rw_blog_mode").length>0){Y()}});function Y(){if(Z("#rw_share_navigation").length>0){Z("#shareContentLink").parent().appendTo("#rw_share_navigation");Z("#shareContentLink").click(function(){RW.scrollToElement(Z("#rw_share_navigation"))})}if(Z("#rw_blog_chooser").length>0){d()}if(Z("#rw_blog_admin_button").length>0){E()}Z("#rw_blogpost_permalink").click(function(v){if(!p){u()}p.show();Z("#link-page-popup-form #link-popup-field-tiny-link").select();return AJS.stopEvent(v)});if(Z("#rw_blog_watch_start").length>0){Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch",type:"GET",dataType:"json",data:{key:Z("#rw_space_key").html()},cache:false,success:function(v){if(v==true){Z("#rw_blog_watch_stop").show()}else{Z("#rw_blog_watch_start").show()}},error:function(v){if(v.status!=0){m.html("<div class='rw_warning_box'>"+v.status+" "+v.statusText+"</div>").show()}}})}Z("#rw_blog_watch_start").click(function(v){Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch/add?key="+Z("#rw_space_key").html(),type:"PUT",dataType:"json",cache:false,success:function(w){Z("#rw_blog_watch_start").hide();Z("#rw_blog_watch_stop").show()},error:function(w){if(w.status!=0){m.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}});v.preventDefault()});Z("#rw_blog_watch_stop").click(function(v){Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch/remove?key="+Z("#rw_space_key").html(),type:"PUT",dataType:"json",cache:false,success:function(w){Z("#rw_blog_watch_stop").hide();Z("#rw_blog_watch_start").show()},error:function(w){if(w.status!=0){m.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}});v.preventDefault()});RW.initLabelClickEvent(Z("#labels-section .label-list"),true);if(Z("#rw_blog_posts").length>0){q(Z("#rw_blog_posts"),Z("#rw_blog_keys").html(),Z("#rw_blog_author").html(),0,10)}if(Z("#rw_blog_menu").length>0){f(Z("#rw_blog_menu"))}if(Z("#rw_blog_contributors").length>0){r(Z("#rw_blog_contributors"))}if(Z("#rw_blog_post_title").length>0){Z("#rw_blog_post_title").css("left",Z("#rw_blog_post_title").offset().left+10).css("position","absolute")}Z("#show-resolved-comments").live("click",function(){Z("#rw_blog_admin_button").trigger("click")})}function N(){c=Z(Z("#rw_blogpost_nav_button").html());m=Z("#rw_blogpost_nav");H=Z("#rw_blogpost_id",m).html();Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+H+"/navigation",type:"GET",dataType:"json",cache:false,success:function(v){if(typeof (v.links)!=="undefined"&&v.links.length>0){Z.each(v.links,function(){var x=c.clone();var w=this.url;Z("span",x).html(this.name).addClass("rw_"+this.key);x.attr("title",RW.htmlDecode(this.title));x.click(function(){window.location=w});m.append(x)})}},error:function(v){if(v.status!=0){m.html("<div class='rw_warning_box'>"+v.status+" "+v.statusText+"</div>").show()}}})}function e(){var w=Z("#rw_blog_calendar_wrapper");R=Z(Z("#rw_blog_calendar_item",w).html());n=Z(Z("#rw_blog_calendar_section",w).html());Q=Z(Z("#rw_blog_calendar_loader",w).html());H=Z("#rw_blogpost_id",w).html();D=Z("#rw_blog_calendar",w);h=Z("#rw_space_key",w).html();var x;var z;if(Z("#rw_calendar_year",w).length>0){x=Z("#rw_calendar_year",w).html()}if(Z("#rw_calendar_month",w).length>0){z=Z("#rw_calendar_month",w).html()}if(typeof (H)==="undefined"){H=""}var y=n.clone();y.addClass("rw_blog_calendar_months");var v=Q.clone();v.addClass("rw_corners");y.append(v);D.append(y);Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar",data:{key:h,id:H,month:z,year:x},type:"GET",dataType:"json",cache:false,success:function(AA){if(typeof (AA.months)!=="undefined"&&AA.months.length>0){v.remove();W(AA,false,y)}else{v.remove();D.remove()}},error:function(AA){if(AA.status!=0){D.html("<div class='rw_warning_box'>"+AA.status+" "+AA.statusText+"</div>").show()}}})}function P(y,x,w){w.remove();var v=Q.clone();v.addClass("rw_corners_top");Z("ul.rw_blog_calendar_months",D).prepend(v);Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/next",data:{key:h,month:x,year:y},type:"GET",dataType:"json",cache:false,success:function(z){v.remove();if(typeof (z.months)!=="undefined"&&z.months.length>0){W(z,true,Z("ul.rw_blog_calendar_months",D))}else{Z("li:first > a",D).addClass("rw_corners_top");Z("li:last > a",D).addClass("rw_corners_bottom")}},error:function(z){if(z.status!=0){D.html("<div class='rw_warning_box'>"+z.status+" "+z.statusText+"</div>").show()}}})}function t(y,x,w){w.remove();var v=Q.clone();v.addClass("rw_corners_bottom");Z("ul.rw_blog_calendar_months",D).append(v);Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/prev",data:{key:h,month:x,year:y},type:"GET",dataType:"json",cache:false,success:function(z){v.remove();if(typeof (z.months)!=="undefined"&&z.months.length>0){W(z,false,Z("ul.rw_blog_calendar_months",D))}else{Z("li:first > a",D).addClass("rw_corners_top");Z("li:last > a",D).addClass("rw_corners_bottom")}},error:function(z){if(z.status!=0){D.html("<div class='rw_warning_box'>"+z.status+" "+z.statusText+"</div>").show()}}})}function A(y,x,w){h=Z("#rw_space_key").html();if(Z("ul",w).length===0){w.toggleClass("rw_open");var v=Q.clone();w.append(v);Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/"+y+"/"+x,data:{key:h},type:"GET",dataType:"json",cache:false,success:function(z){if(typeof (z.posts)!=="undefined"&&z.posts.length>0){K(z.posts,w)}v.remove()},error:function(z){if(z.status!=0){w.html("<div class='rw_warning_box'>"+z.status+" "+z.statusText+"</div>").show()}}})}else{U(w)}}function U(w){var v=Z("ul",w);if(v.length!=0){if(v.is(":visible")){v.hide()}else{v.show()}w.toggleClass("rw_open")}}function W(z,AE,w){var AD,AB,AC,y,v=1;Z.each(z.months,function(){var AG=R.clone(),AF=this.year,AH=this.month;Z("span",AG).html(this.title);Z("a",AG).attr("title",this.title).click(function(){A(AF,AH,AG)}).addClass("rw_first_level");if(typeof (this.posts)!=="undefined"&&this.posts.length>0){AG.addClass("rw_open");K(this.posts,AG)}if(AE){w.prepend(AG);if(v==z.months.length){AD=AF;AB=AH}}else{w.append(AG);if(v==1){AD=AF;AB=AH}if(v==z.months.length){AC=AF;y=AH}}v++});if(z.hasNext){var AA=R.clone();AA.addClass("rw_blog_calendar_next");Z("a",AA).click(function(){P(AD,AB,AA)}).addClass("rw_first_level");w.prepend(AA)}if(z.hasPrev){var x=R.clone();x.addClass("rw_blog_calendar_prev");Z("a",x).click(function(){t(AC,y,x)}).addClass("rw_first_level");w.append(x)}J()}function K(w,v){var x=n.clone();Z.each(w,function(){var z=R.clone();var y=this.url;Z("span",z).html(this.title);Z("a",z).attr("title",RW.htmlDecode(this.title));z.click(function(){window.location=y});if(H==this.id){z.addClass("rw_active")}x.append(z)});v.append(x)}function J(){Z("li:first > a.rw_first_level",D).addClass("rw_corners_top");Z("li:last > a.rw_first_level",D).addClass("rw_corners_bottom")}function d(){Z("#rw_blog_chooser_button").click(S)}function S(){if(C){l()}else{F()}}function F(){C=true;if(O==undefined){O=Z(Z("#rw_section_template").html())}var v=O.clone();if(I==undefined){I=Z(Z("#rw_icon_text_item").html())}if(g==undefined){g=Z("#rw_blog_chooser_items_container")}if(k==undefined){k=Z(Z("#rw_popup_loader_template").html())}g.html("");g.show().append(k.clone());Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(w){g.html("");if(typeof (w.blogs)!=="undefined"&&w.blogs.length>0){Z.each(w.blogs,function(){v.append(s(this,false))});g.append(v)}else{var x=Z('<div class="rw_no_items rw_blogs rw_corners"><div>');x.html("No blogs found");g.append(x)}Z(document).bind("click",l)},error:function(w){Z(document).bind("click",l);if(w.status!=0){g.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}})}function l(){g.hide();Z(document).unbind("click",l);C=false}function s(x,y){if(I==undefined){I=Z(Z("#rw_icon_text_item").html())}var w=I.clone();var v;var z=Z("a",w);if(y){Z("span.rw_item_content",w).append("<h3>"+x.name+"</h3>");if(x.description!=null){Z("span.rw_item_content",w).append(x.description)}}else{Z("span.rw_item_content",w).html(x.name)}z.attr("title",RW.htmlDecode(x.name));if(x.logoPath!=null){Z("span.rw_item_icon img",w).attr("src",x.logoPath).show()}else{Z("span.rw_item_icon",w).addClass("rw_iconfont_blog")}if(x.nameKey===h){Z("span.rw_item_content",w).addClass("rw_active")}v=contextPath+"/blog/"+x.nameKey;z.attr("href",v).click(function(){if(y){j=true}if(B!=undefined&&B.container.hasClass("rw_key_nav")){window.location=v;if(y){B.showLoader()}}});return w}function E(){Z("#rw_blog_admin_button").click(V)}function V(){Z("#rw_blog_admin_button").toggleClass("rw_active");Z("#rw_blog_admin_menu").toggle()}function u(){p=new AJS.Dialog(600,210,"link-page-popup").addHeader("Link to this page").addPanel("Link to this page","<form id='link-page-popup-form' class='aui'><fieldset></fieldset></form>").addCancel("Close",function(x){p.hide();return false});var v=[{label:"Link",id:"link",value:Z("link[rel=canonical]").attr("href")},{label:"Tiny link",id:"tiny-link",value:Z("link[rel=shortlink]").attr("href")}];Z.each(v,function(){Z("#link-page-popup-form fieldset").append(AJS.format("<div class='field-group'><label for=''link-popup-field-{0}''>{1}:</label><input id=''link-popup-field-{0}'' readonly=''readonly'' value='''' class=''text'' type=''text''></div>",this.id,this.label)).find("input:last").val(this.value)});var w=Z("#link-page-popup-form fieldset input.text");w.focus(function(){Z(this).select()});w.mouseup(function(x){x.preventDefault()})}function q(v,AA,AB,w,AC){if(a==undefined){a=Z(RW.Templates.loader({type:"circle",bg:"gray"}))}if(M==undefined){M=Z(Z("#rw_button_template").html())}var x=true;if(AA===""){var AE=Z('<div class="rw_no_items rw_news rw_corners"><div>');AE.html("No blogs found");v.append(AE);return }if(AA.indexOf(",")===-1){x=false}var z=undefined;var y=0;var AD=a.clone();v.append(AD);Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post",type:"GET",data:{"start-index":w,"max-results":AC,keys:AA,labels:"",authors:AB,"body-type":"excerpts","profile-pic":true,"all-info":true},dataType:"json",cache:false,success:function(AF){AD.remove();if(typeof (AF.blogPosts)!=="undefined"&&AF.blogPosts.length>0){var AH=0;Z.each(AF.blogPosts,function(){if(b[AH]==undefined){b[AH]=AF.blogPosts}else{b[AH]=b[AH].concat(AF.blogPosts)}AH=AH+1});AH=0;Z.each(AF.blogPosts,function(){if(z==undefined&&AH==0){z=this}i(v,this,x,AH);AH=AH+1});y=AH;if(AF.hasMore){if(T==undefined){T=Z(Z("#rw_load_more_template").html())}var AG=T.clone();AG.click(function(){q(v,AA,AB,w+AC,AC);Z(this).remove();return false});v.append(AG)}Confluence.Binder.userHover()}else{if(w===0){var AI=Z('<div class="rw_no_items rw_news rw_corners"><div>');AI.html("No blogs found");v.append(AI)}}},error:function(AF){v.html("<div class='rw_warning_box'>"+AF.status+" "+AF.statusText+"</div>").show()}})}function i(w,AD,y,AE){if(X==undefined){X=Z(Z("#rw_blogpost_listing_template").html())}if(o==undefined){o=Z(Z("#rw_blogpopup_button_template").html())}var AJ=X.clone(),AB=Z(".rw_blogpost_heading_link",AJ),AG=Z(".wiki-content",AJ),x=Z(".page-metadata",AJ),AH=Z(".rw_logo_block a",AJ),AA=Z(".rw_logo_block img",AJ),v=Z(".rw_buttons_section",AJ);AB.html(AD.title).click(function(){window.location=AD.url});x.html(AD.date);if(AD.bodyContent){AG.html(AD.bodyContent);Z("img.confluence-embedded-image",AG).each(function(){var AK=Z(this);AK.fancybox(G);AK.removeAttr("width")})}if(!AD.author.anonymous){AH.attr("data-username",AD.author.username);AH.attr("href",contextPath+"/display/~"+AD.author.username)}else{AH.removeClass("userLogoLink")}AA.attr("src",AD.author.profilePic);var AC=M.clone();AC.click(function(){window.location=AD.url}).addClass("rw_button_group_left");Z("span",AC).addClass("rw_read").html("Read more").attr("title","Read more");v.append(AC);var AI=M.clone();AI.click(function(){window.location=AD.commentUrl});if(AD.canEdit){AI.addClass("rw_button_group_middle")}else{AI.addClass("rw_button_group_right")}Z("span",AI).addClass("rw_comment_gray").html(AD.commentTitle).attr("title",AD.commentTitle);v.append(AI);if(AD.canEdit){var AF=M.clone();AF.click(function(){window.location=contextPath+"/pages/editblogpost.action?pageId="+AD.id}).addClass("rw_button_group_right");Z("span",AF).addClass("rw_edit_gray").html("Edit").attr("title","Edit");v.append(AF)}var z=o.clone();z.click(function(){RW.openBlogPostPopup(AD,AE,AE,b);return false}).attr("title","View in popup");AJ.prepend(z);if(y&&AD.blog!=null){if(AD.blog.logoPath!=null){Z(".rw_blog_info_icon img",AJ).attr("src",AD.blog.logoPath).show()}else{Z(".rw_blog_info_icon",AJ).addClass("rw_iconfont_blog");Z(".rw_blog_info_icon img",AJ).remove()}Z(".rw_blog_info_text",AJ).html(AD.blog.name);Z(".rw_blog_info",AJ).click(function(){window.location=contextPath+"/blog/"+AD.blog.nameKey})}else{Z(".rw_blog_info",AJ).remove()}w.append(AJ)}function f(v){if(a==undefined){a=Z(RW.Templates.loader({type:"circle",bg:"gray"}))}v.addClass("rw_side_menu_container rw_corners");v.append(a.clone());Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(w){v.html("");v.append(RW.getSideMenuTitle("Blogs"));if(typeof (w.blogs)!=="undefined"&&w.blogs.length>0){if(O==undefined){O=Z(Z("#rw_section_template").html())}var x=O.clone();Z.each(w.blogs,function(){x.append(s(this,false))});x.addClass("rw_side_menu");x.addClass("rw_corners");Z("li:first-child a",x).addClass("rw_corners_top");Z("li:last-child a",x).addClass("rw_corners_bottom");v.append(x)}else{v.remove()}},error:function(w){if(w.status!=0){v.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}})}function r(v){if(a==undefined){a=Z(RW.Templates.loader({type:"circle",bg:"gray"}))}var w=Z("#rw_blog_keys").html();v.addClass("rw_side_menu_container rw_corners");v.append(a.clone());Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/authors",data:{"start-index":0,"max-results":50,keys:w},type:"GET",dataType:"json",cache:false,success:function(x){v.html("");v.append(RW.getSideMenuTitle("Recent contributors"));if(typeof (x.authors)!=="undefined"&&x.authors.length>0){if(O==undefined){O=Z(Z("#rw_section_template").html())}var y=O.clone();Z.each(x.authors,function(){y.append(L(this))});y.addClass("rw_side_menu");y.addClass("rw_corners");Z("li:first-child a",y).addClass("rw_corners_top");Z("li:last-child a",y).addClass("rw_corners_bottom");v.append(y)}else{v.remove()}},error:function(x){if(x.status!=0){v.html("<div class='rw_warning_box'>"+x.status+" "+x.statusText+"</div>").show()}}})}function L(x){if(I==undefined){I=Z(Z("#rw_icon_text_item").html())}var w=I.clone();var v;var y=Z("a",w);Z("span.rw_item_content",w).html(x.fullName);y.attr("title",x.fullName);if(x.profilePic!=null){Z("span.rw_item_icon img",w).attr("src",x.profilePic).show()}else{Z("span.rw_item_icon",w).addClass("rw_no_contributer_icon")}v=contextPath+"/blog/view-blogs.action?author="+x.username;y.click(function(){window.location=v});return w}RW.blogs.showBlogsPopup=function(){if(O==undefined){O=Z(Z("#rw_section_template").html())}if(B==undefined){B=new RW.ui.popup("rw_blogs_popup","Blogs");B.closeButton.click(RW.blogs.hideBlogsPopup);B.closeButton.html("Close");B.obj.click(function(v){if(!j){v.stopPropagation()}})}RW.closePopups();RW.blogs.inBlogsPopup=true;B.show();B.showLoader();B.obj.addClass("rw_dd_large");Z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(w){var x=O.clone();B.hideLoader();if(typeof (w.blogs)!=="undefined"&&w.blogs.length>0){Z.each(w.blogs,function(){x.append(s(this,true))});B.content(x);B.container.append("<div style='clear:both;'></div>")}else{var y=Z('<div class="rw_no_items rw_blogs rw_corners"><div>');y.html("No blogs found");B.content(y)}var v=Z("li",B.container);if(v.length>0){RW.startKeyable(B.container,null,null,Z(v[0]))}else{RW.startKeyable(B.container,null,null)}Z(document).bind("click",RW.blogs.hideBlogsPopup)},error:function(v){Z(document).bind("click",RW.blogs.hideBlogsPopup);if(v.status!=0){B.content("<div class='rw_warning_box'>"+v.status+" "+v.statusText+"</div>")}}})};RW.blogs.hideBlogsPopup=function(){if(!j){B.hide();B.clear();RW.blogs.inBlogsPopup=false;Z(document).unbind("click",RW.blogs.hideBlogsPopup);RW.quitKeyable()}else{j=false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/activitystream/activitystream-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(X){var W="/images/icons/profilepics/anonymous.png";RW.activity={};var u,J,f,T,m,e,M,h,o,C,A,F,Z,O,L;var R=false,g=false,a=[],Y=[],w;var S;var q="my",k="all",E="network",p="team",K="popular";var D={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};AJS.toInit(function(){m=X('<div><span class="icon icon-like"></span><span class="count"></span></div>');e=X('<div><span class="icon icon-comment"></span><span class="count"></span></div>');if(X("#rw_activity_macro_wrapper").length>0){u=X(RW.Templates.Activity.item());J=X(RW.Templates.Activity.set());f=X(RW.Templates.Activity.popularSet());T=X(RW.Templates.Activity.popularItem());M=X(RW.Templates.Activity.empty());h=X(RW.Templates.Activity.loadMoreButton());C=X(RW.Templates.Activity.replyButton());A=X(RW.Templates.loader({type:"circle",bg:"gray"}));for(var x=0;x<X(".rw_activity_macro","#main").length;x++){var y=X(X(".rw_activity_macro","#main")[x]);y.data("categories-loaded",false);y.data("hasmore","false");y.data("linkclicked","false");y.data("category","");X("#rw_activity_menu",y).attr("id","rw_activity_menu_"+x);X(".rw_activity_menu_button",y).attr("aria-owns","rw_activity_menu_"+x);N(X("#typesVarActivity",y).html(),y);b(y)}}});function b(y){X(".rw_option_popular",y).show();var x=y.data("option");X(".rw_activity_menu_button",y).html(X(".rw_option_"+x+" a",y).html());X(".rw_activity_menu a",y).click(function(){X(".rw_activity_menu_button",y).html(X(this).html());RW.activity.filterBySpaces(X(this).data("option"),"",y)});X(".rw_activity_menu_button",y).click(function(AB){G(y);if(RW.confluenceVersion<5){var AA=X(this);AA.addClass("rw_active");X("#"+AA.attr("aria-owns")).addClass("rw_open");var z=function(){AA.removeClass("rw_active");X("#"+AA.attr("aria-owns")).removeClass("rw_open");X(document).unbind("click",z)};setTimeout(function(){X(document).bind("click",z)},100)}});w=X("#selectedTeamVarActivity",y).html();y.data("category",w);if(w.length>0){G(y)}Q(X("#typesVarActivity",y).html(),X("#selectedTabVarActivity",y).html(),w,0,y);v(y);X(window).resize(function(){v(y)})}function v(x){if(x.width()<400){x.addClass("rw_small")}else{x.removeClass("rw_small")}}function Q(AE,AL,AD,z,AK){var y=X("#rw_activity_macro_container",AK);var x=false;var AA=false;var AG=X("#spacesVarActivity",AK).html();var AJ=X("#stepSizeVarActivity",AK).html();var AB=X("#categoryKeyVarActivity",AK).html();var AI=X("#authorsVarActivity",AK).html();var AC=X("#labelsVarActivity",AK).html();if(z==0){y.html(A.clone())}if(AB==""){AB=AD}if(AL==q){x=true}if(AL==E){AA=true}if(AL!=K){X("#rw_filter_button, #rw_content_types_container",AK).removeClass("rw_hidden");X.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/?types="+AE+"&category-key="+AB+"&labels="+AC+"&spaces="+AG+"&authors="+AI+"&favourite="+x+"&network="+AA+"&start-index="+z+"&max-results="+AJ,type:"GET",dataType:"json",cache:false,success:function(AN){X("#rw_load_more_activity_link",AK).remove();if(z==0){y.html("")}AK.data("hasmore",AN.hasMore);if(AN.activitySets.length>0){X.each(AN.activitySets,function(){c(this,y,false)});if(AK.data("hasmore")){var AO=h.clone();var AM=parseInt(z)+parseInt(AJ);AO.click(function(){X("span",this).hide();X(".rw_loader_128_image",this).show();Q(AE,AL,AD,AM,AK);return false});y.append(AO)}Confluence.Binder.userHover()}else{if(z==0){y.append(M.clone())}}},error:function(AM){if(AM.status!=0){X(AK).html("<div class='rw_warning_box'>"+AM.status+" "+AM.statusText+"</div>").show();X("#rw_activity_macro_loader").hide()}}})}else{X("#rw_filter_button, #rw_content_types_container",AK).addClass("rw_hidden");var AH=parseInt(z)+parseInt(AJ);var AF=contextPath+"/rest/popular/1/stream/content?days=7&pageSize="+AH;X.ajax({url:AF,type:"GET",dataType:"json",cache:false,success:function(AN){y.html("");if(AN.streamItems.length>0){X.each(AN.streamItems,function(){l(this,y,false)});Confluence.Binder.userHover();if(AN.streamItems.length>=AH){var AO=h.clone();var AM=parseInt(z)+parseInt(AJ);AO.click(function(){Q(AE,AL,AD,AM,AK);return false});y.append(AO)}}else{y.append(M.clone())}},error:function(AM){if(AM.status!=0){X(AK).html("<div class='rw_warning_box'>"+AM.status+" "+AM.statusText+"</div>").show();X("#rw_activity_macro_loader").hide()}}})}}function G(y){var x=X(".rw_option_categories","#"+X(".rw_activity_menu_button",y).attr("aria-owns"));if(!y.data("categories-loaded")){x.append("<li><a>Loading...</a></li>");X.ajax({url:contextPath+"/rest/originaltheme/1.0/category",type:"GET",dataType:"json",cache:false,success:function(z){x.html("");y.data("categories-loaded",true);if(typeof (z)!=="undefined"&&z.length>0){X.each(z,function(){B(this,x,y)})}else{x.remove()}},error:function(z){}})}}function B(y,x,AB){if(L==undefined){L=X(RW.Templates.item())}var AA=L.clone(),z=X("a",AA);AA.attr("id","rw_team_"+y.nameKey);if(AB.data("category")===y.nameKey){X(".rw_activity_menu_button",AB).html(RW.htmlEncode(y.name))}if(y.isCategory){AA.addClass("rw_is_category")}z.html(RW.htmlEncode(y.name)).click(function(){X(".rw_activity_menu_button",AB).html(X(this).html());RW.activity.filterBySpaces("team",y.nameKey,AB)});x.append(AA)}function c(x,y,AB){if(J==undefined){J=X(RW.Templates.Activity.set())}var AF=J.clone(),AA=X(".rw_author",AF),AC=X(".rw_activity_items",AF),AE=X(".userLogoLink",AF);var z=X("a",AA);var AD=X("img",AE);if(x.author!=undefined){if(x.author.username==RW.remoteUser){AF.addClass("rw_activity_set_my")}z.html(x.author.fullName);if(!x.author.anonymous){z.attr("data-username",RW.htmlDecode(x.author.username)).attr("href",contextPath+"/display/~"+RW.htmlDecode(x.author.username))}else{z.removeClass("confluence-userlink")}if(!x.author.anonymous){AE.attr("data-username",RW.htmlDecode(x.author.username));AE.attr("href",contextPath+"/display/~"+RW.htmlDecode(x.author.username))}else{AE.removeClass("userLogoLink")}AD.attr("title",RW.htmlDecode(x.author.username)).attr("alt","User icon: "+RW.htmlDecode(x.author.username)).attr("src",x.author.profilePic)}X.each(x.items,function(){if(AB){AC.append(t(this,y))}else{AC.append(d(this))}});y.append(AF)}function d(AI){var z=u.clone(),AF=X(".rw_activity_item_icon",z),y=X(".rw_activity_link",z),AD=X(".rw_activity_space_name",z),AH=X(".rw_summary",z),x=X(".rw_thumbnail",z),AE=X(".rw_activity_view_diff",z),AC=X(".rw_date",z);AF.addClass(AI.iconClass);if(AI.type!="status"){y.attr("href",AI.url);y.attr("title",RW.htmlDecode(AI.title));y.prepend(AI.title)}else{X(".rw_ellipsis",z).removeClass("rw_ellipsis").addClass("rw_status");y.before(AI.title);y.remove()}AC.html(AI.date);if(AI.spaceName!=undefined&&AI.spaceName!=""){AD.html("("+AI.spaceName+")");AD.attr("title",RW.htmlDecode(AI.spaceName));y.attr("title",RW.htmlDecode(AI.title)+" ("+RW.htmlDecode(AI.spaceName)+")")}if(AI.description.length>0){AH.html(AI.description);AE.html("");if(AI.commentPermission){var AG=AI.url.replace("focusedCommentId","replyToComment");var AB=C.clone();AB.html("Reply");AB.attr("href",AG);AB.attr("title","Reply");AH.append(AB)}}if(AI.changeComment!=undefined&&AI.changeComment!=""){AH.html(RW.htmlEncode(AI.changeComment))}if(AI.changeUrl!==undefined&&AI.newContent===false){var AA=C.clone();AA.html("View Changes");AA.addClass("rw_view_change_button");var y=contextPath+AI.changeUrl;AA.attr("href",y);AC.append(AA)}if(AI.thumbnail!=undefined){x.append("<img data-image-src='"+contextPath+AI.thumbnail.imageUrl+"' src='"+AI.thumbnail.url+"' />");X("img",x).fancybox(D)}return z}function t(AB,x){if(F==undefined){F=X(X("#rw_icon_text_item").html())}var y=F.clone(),z=X(".rw_item_icon",y),AC=X(".rw_item_content",y),AA=X("a",y);z.addClass(AB.iconClass).addClass("rw_icon_container_16");if(AB.type!="status"){AC.html('<span class="rw_ellipsis">'+AB.title+"</span>");if(AB.spaceName!=undefined&&AB.spaceName!=""){X(".rw_ellipsis",AC).append(" <span class='rw_small_text'>("+AB.spaceName+")</span>")}AA.attr("href",AB.url).click(function(){g=true;if(x.hasClass("rw_key_nav")){window.location=AB.url;S.showLoader();return false}else{return true}}).attr("title",RW.htmlDecode(AB.title));if(AB.description.length>0){AC.append("<span class='rw_small_text'>"+AB.description+"</span><br/>")}if(AB.changeComment!=undefined&&AB.changeComment!=""){AC.append("<span class='rw_small_text'>"+RW.htmlEncode(AB.changeComment)+"</span><br/>")}}else{AC.html(AB.title);y.append("<div class='rw_no_link'>"+AA.html())+"</div>";AA.remove()}AC.append('<div class="rw_date">'+AB.date+"</div>");return y}function l(AB,x,AC){if(f==undefined){f=X(RW.Templates.Activity.popularSet())}var AE=f.clone(),y=X(".rw_activity_items",AE),AA=X(".userLogoLink",AE),z=X("img",AA);var AD=AB.author.userName;if(AD!=""){AA.attr("data-username",AD);AA.attr("href",contextPath+"/display/~"+AD)}else{AA.removeClass("userLogoLink")}z.attr("title",AD).attr("alt","User icon: "+AD).attr("src",AB.author.avatarUrl);if(AC){y.append(s(AB,x))}else{y.append(P(AB))}x.append(AE)}function P(AI){var x=T.clone(),AF=X(".rw_activity_item_icon",x),AE=X(".rw_activity_link",x),y=X(".rw_popularity_data",x),AB=X(".rw_author",x),z=X(".rw_date",x);AF.addClass(AI.iconCssClass);AE.attr("href",AI.url);AE.attr("title",AI.title);AE.html(RW.htmlEncode(AI.title));if(AI.numberOfComments>0){var AH=e.clone(),AD=X(".count",AH);AD.html(AI.numberOfComments);y.append(AH)}if(AI.numberOfLikes>0){var AG=m.clone(),AD=X(".count",AG);AD.html(AI.numberOfLikes);y.append(AG)}z.html(AI.friendlyDate);var AA=X("a",AB);AA.html(AI.author.fullName);var AC=AI.author.userName;if(AC!=""){AA.attr("data-username",AC).attr("href",contextPath+"/display/~"+AC)}else{AA.removeClass("confluence-userlink")}return x}function s(AG,x){if(F==undefined){F=X(X("#rw_icon_text_item").html())}var y=F.clone(),AC=X(".rw_item_icon",y),AE=X(".rw_item_content",y),AB=X("a",y);AC.addClass(AG.iconCssClass).addClass("rw_icon_container_16");AE.html(RW.htmlEncode(AG.title));AB.click(function(){g=true;if(x.hasClass("rw_key_nav")){window.location=AG.url;S.showLoader();return false}}).attr("title",AG.title).attr("href",AG.url);var z=X('<span class="rw_popularity_data"></span>');if(AG.numberOfComments>0){var AF=e.clone(),AA=X(".count",AF);AA.html(AG.numberOfComments);z.append(AF)}if(AG.numberOfLikes>0){var AD=m.clone(),AA=X(".count",AD);AA.html(AG.numberOfLikes);z.append(AD)}AE.append(z);AE.append(' <span class="rw_date_time">'+AG.friendlyDate+", "+AG.author.fullName+"</span>");return y}function N(x,z){X("#rw_content_types a.rw_checkbox_select",z).click(function(AA){AA.preventDefault();if(X(this).parent().is(".rw_type_all")){X('#rw_content_types input[type="checkbox"]:checked',z).each(function(){X(this).parent().removeClass("rw_active");X(this).parent().find("input").attr("checked",false)});X("#rw_filter_button",z).removeClass("rw_filter_on");X("#rw_filter_button #rw_filter_button_off",z).show();X("#rw_filter_button #rw_filter_button_on",z).hide()}else{X("#rw_content_types li.rw_type_all",z).removeClass("rw_active");X("#rw_content_types li.rw_type_all",z).find("input").attr("checked",false);X("#rw_filter_button",z).addClass("rw_filter_on");X("#rw_filter_button #rw_filter_button_off",z).hide();X("#rw_filter_button #rw_filter_button_on",z).show()}X(this).parent().addClass("rw_active");X(this).parent().find("input").attr("checked",true);U(true,z)});X("#rw_content_types .rw_checkbox_deselect",z).click(function(AB){AB.preventDefault();X(this).parent().removeClass("rw_active");X(this).parent().find("input").attr("checked",false);var AA=0;X('#rw_content_types input[type="checkbox"]:checked',z).each(function(){AA=AA+1});if(AA==0){X("#rw_content_types li.rw_type_all",z).addClass("rw_active");X("#rw_content_types li.rw_type_all",z).find("input").attr("checked",true);X("#rw_filter_button",z).removeClass("rw_filter_on");X("#rw_filter_button #rw_filter_button_off",z).show();X("#rw_filter_button #rw_filter_button_on",z).hide()}U(true,z)});X("#rw_filter_button",z).click(function(){X(this).toggleClass("active");X("#rw_content_types_container",z).toggle()});X('#rw_content_types input[type="checkbox"]:checked',z).each(function(){X(this).parent().removeClass("rw_active");X(this).parent().find("input").attr("checked",false)});if(x.length>0){typeList=x.split(",");for(i=0;i<typeList.length;i++){var y=typeList[i];X("#rw_content_types li.rw_type_"+y,z).addClass("rw_active");X("#rw_content_types li.rw_type_"+y,z).find("input").attr("checked",true)}X("#rw_filter_button",z).addClass("rw_filter_on");X("#rw_filter_button #rw_filter_button_off",z).hide();X("#rw_filter_button #rw_filter_button_on",z).show()}else{X("#rw_content_types li.rw_type_all",z).addClass("rw_active");X("#rw_content_types li.rw_type_all",z).find("input").attr("checked",true)}}function U(AA,AB){var y="";var z="";var x="";if(!X("#rw_content_types li.rw_type_all",AB).find("input").attr("checked")){X('#rw_content_types input[type="checkbox"]:checked',AB).each(function(){if(X(this).val().length>0){y+=X(this).val()+","}});if(y.length>0){y=y.substring(0,y.length-1)}}if(AB.data("option")!=undefined){z=AB.data("option")}if(AB.data("category")!=undefined){x=AB.data("category")}Q(y,z,x,0,AB);if(AA){n(y)}}function I(x){X.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/selectedtab?value="+x,type:"PUT",dataType:"json",cache:false,success:function(y){}})}function j(x){X.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/selectedteam?value="+x,type:"PUT",dataType:"json",cache:false,success:function(y){}})}function n(z){var x=X("meta[id=atlassian-token]");var y=x.attr("content");X.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/filter?value="+z,type:"PUT",dataType:"json",cache:false,success:function(AA){},error:function(AA){}})}function V(AH,y,AD,AB,AE,x,AA,z,AG,AC,AF){if(Z==undefined){Z=X(X("#rw_popup_loader_template").html())}y.append(Z);X.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/",data:{types:AD,"category-key":AB,spaces:AE,favourite:x,network:AA,"start-index":z,"max-results":AG,authors:AF},type:"GET",dataType:"json",cache:false,success:function(AJ){X(".rw_popup_loader",y).remove();if(AJ.activitySets.length>0){X.each(AJ.activitySets,function(){c(this,y,true)});if(AJ.hasMore){if(o==undefined){o=X(X("#rw_load_more_section_template").html())}var AL=o.clone();AL.addClass("rw_load_more_section");X("a",AL).click(function(AM){X(this).parent().parent().remove();V(AM,y,AD,AB,AE,x,AA,z+AG,AG,X(this).parent().hasClass("rw_selected"),AF);return false});y.append(AL)}Confluence.Binder.userHover()}else{if(z==0){if(M==undefined){M=X(RW.Templates.Activity.empty())}y.append(M.clone())}}if(AC){var AI=X("li",y);if(AI.size()>(z+AG)){RW.startKeyable(y,null,null,X(AI.get(z)))}else{RW.startKeyable(y,null,null,X(AI.get(z-1)))}}else{var AI=X("li",y);var AK=X(AI.get(z));if(AH!=null&&AH!=undefined&&AH.which==1){AK=null}RW.startKeyable(y,null,null,AK)}},error:function(AI){if(AI.status!=0){S.content("<div class='rw_warning_box'>"+AI.status+" "+AI.statusText+"</div>")}}})}function r(z,AC,x,AA){if(Z==undefined){Z=X(X("#rw_popup_loader_template").html())}z.append(Z);var y=parseInt(AC)+parseInt(x);var AB=contextPath+"/rest/popular/1/stream/content?days=7&pageSize="+y;X.ajax({url:AB,type:"GET",dataType:"json",cache:false,success:function(AF){z.html("");if(AF.streamItems.length>0){X.each(AF.streamItems,function(){l(this,z,true)});Confluence.Binder.userHover();if(AF.streamItems.length>=y){if(o==undefined){o=X(X("#rw_load_more_section_template").html())}var AG=o.clone();AG.addClass("rw_load_more_section");var AD=parseInt(AC)+parseInt(x);X("a",AG).click(function(){X(this).parent().parent().remove();r(z,AD,x,X(this).parent().hasClass("rw_selected"));return false});z.append(AG)}}else{if(AC==0){if(M==undefined){M=X(RW.Templates.Activity.empty())}z.append(M.clone())}}if(AA){var AE=X("li",z);if(AE.size()>(AC+x)){RW.startKeyable(z,null,null,X(AE.get(AC)))}else{RW.startKeyable(z,null,null,X(AE.get(AC-1)))}}else{RW.startKeyable(z,null,null)}},error:function(AD){if(AD.status!=0){X("#rw_activity_macro_wrapper").html("<div class='rw_warning_box'>"+AD.status+" "+AD.statusText+"</div>").show();X("#rw_activity_macro_loader").hide()}}})}function H(y,z,AC,x,AA,AB){if(O==undefined){O=X(X("#rw_section_template").html())}if(L==undefined){L=X(RW.Templates.item())}X.ajax({url:contextPath+"/rest/originaltheme/1.0/label/teamlabel",type:"GET",dataType:"json",cache:false,success:function(AF){var AJ=O.clone();AJ.addClass("rw_horizontal_menu rw_margin_bottom");if(typeof RW.remoteUser!="undefined"){var AK=L.clone();X("a",AK).html("Popular").click(function(){RW.clearActiveMenuItems(y);X(this).parent().addClass("rw_active");X(".rw_activity_popup_items",y).html("");r(X(".rw_activity_popup_items",y),AC,x,false);I(K)});if(AA==K){RW.setActiveMenuItem(AK)}AJ.append(AK);var AE=L.clone();X("a",AE).html("Favourite").click(function(AL){RW.clearActiveMenuItems(y);X(this).parent().addClass("rw_active");X(".rw_activity_popup_items",y).html("");V(AL,X(".rw_activity_popup_items",y),z,"","",true,false,AC,x,false);I(q)});if(AA==q){RW.setActiveMenuItem(AE)}AJ.append(AE);var AI=L.clone();X("a",AI).html("Network").click(function(AL){RW.clearActiveMenuItems(y);RW.setActiveMenuItem(X(this).parent());X(".rw_activity_popup_items",y).html("");V(AL,X(".rw_activity_popup_items",y),z,"","",false,true,AC,x,false);I(E)});if(AA==E){RW.setActiveMenuItem(AI)}AJ.append(AI)}if(typeof (AF.items)!=="undefined"&&AF.items.length>0){var AH=L.clone();AH.addClass("rw_has_dd");X("a",AH).html("Category").addClass("rw_dd_link");var AD=O.clone();AD.addClass("rw_dd");X.each(AF.items,function(){var AM=L.clone();var AL=this.key;X("a",AM).html(this.value).click(function(AN){RW.clearActiveMenuItems(y);RW.setActiveMenuItem(X(this).parent().parent().parent());RW.setActiveMenuItemDD(X(this).parent());X(".rw_activity_popup_items",y).html("");V(AN,X(".rw_activity_popup_items",y),z,AL,"",false,false,AC,x,false);I(p);j(AL)});if(AB==AL&&AA==p){RW.setActiveMenuItemDD(AM)}AD.append(AM)});AH.append("<div style='clear:both;'></div>");AH.append(AD);if(AA==p){RW.setActiveMenuItem(AH)}AJ.append(AH)}var AG=L.clone();X("a",AG).html("All").click(function(AL){RW.clearActiveMenuItems(y);RW.setActiveMenuItem(X(this).parent());X(".rw_activity_popup_items",y).html("");V(AL,X(".rw_activity_popup_items",y),z,"","",false,false,AC,x,false);I(k)});if(AA==k){RW.setActiveMenuItem(AG)}AJ.append(AG);y.prepend(AJ)},error:function(AD){if(AD.status!=0){S.content("<div class='rw_warning_box'>"+AD.status+" "+AD.statusText+"</div>")}}})}RW.activity.filterBySpaces=function(z,y,AA){var x=X(".rw_activity_menu",AA);AA.data("option",z);if(y!=""){AA.data("category",y);j(y)}else{AA.data("category","")}I(z);U(false,AA)};RW.showActivitiyStream=function(AH,AI,AB){if(typeof AI!="string"){AI=""}if(typeof AB!="string"){AB=""}if(S==undefined){S=new RW.ui.popup("rw_activity_popup","Activity stream");S.closeButton.click(RW.hideActivitiyStream);S.closeButton.html("Close");S.obj.click(function(AK){if(!g){AK.stopPropagation()}})}var AJ=X(".rw_popup_top h1",S.obj);if(AI==""){AJ.html("Activity stream")}else{AJ.html(RW.htmlEncode(AB)+" : "+"Network")}RW.closePopups();RW.activity.inActivityPopup=true;S.show();S.hideLoader();var y=S.container;var AC=X("<div class='rw_activity_popup_items'></div>");y.append(AC);var AE="";var AD="";var AF="";var x=false;var AA=false;var z=0;var AG=10;X.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream",type:"GET",dataType:"json",cache:false,success:function(AK){var AL;var AM;if(typeof (AK.selectedType)!=="undefined"){AL=AK.selectedType}if(typeof (AK.selectedCategory)!=="undefined"){AM=AK.selectedCategory}if(AL==K){H(y,AE,z,AG,K,AM);r(AC,z,AG,false)}else{if(AL==q){x=true}else{if(AL==E){AA=true}else{if(AL==p){AD=AM}else{AL=k}}}if(AI==""){H(y,AE,z,AG,AL,AM)}if(AI==""){V(AH,AC,AE,AD,AF,x,AA,z,AG,false)}else{AI=AI.replace("[","");AI=AI.replace("]","");if(AI==""){AI=false}V(AH,AC,AE,"",AF,false,false,z,AG,false,AI)}}X(document).bind("click",RW.hideActivitiyStream)},error:function(AK){if(AK.status!=0){S.content("<div class='rw_warning_box'>"+AK.status+" "+AK.statusText+"</div>")}}});RW.PubSub.trigger("activity-popup:show")};RW.hideActivitiyStream=function(){if(!g){S.hide();S.clear();RW.activity.inActivityPopup=false;X(document).unbind("click",RW.hideActivitiyStream);RW.quitKeyable()}else{g=false}RW.PubSub.trigger("activity-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/spaces-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(V){RW.spaces={};var Y;var j;var R;var N;var a;var X;var H;var P;var Z=[];var D=false;AJS.toInit(function(){if(V("#rw_spaces_macro").length>0){Y=V(RW.Templates.Spaces.categoryItem({}));j=V(RW.Templates.Spaces.categorySection());R=V(RW.Templates.contentItem());N=V(RW.Templates.Spaces.section());a=V(RW.Templates.Spaces.empty());X=V(RW.Templates.loader({type:"circle",bg:"gray"}));H=V(RW.Templates.item());for(var m=0;m<V(".rw_spaces_macro","#main").length;m++){var l=V(V(".rw_spaces_macro","#main")[m]);l.data("closedcategories",V("#spacesVarClosedCategories",l).html());l.data("showlogo",V("#spacesVarShowLogo",l).html());l.data("excludearchivedspaces",V("#spacesVarExcludeArchivedSpaces",l).html());l.data("includelinks",V("#spacesVarIncludeLinks",l).html());l.data("excludeDescriptions",V("#spacesVarExcludeDescriptions",l).html());P=V("#spacesVarManualPermissions",l).html();l.data("isspacedirectory",false);V("#rw_spaces_menu",l).attr("id","rw_spaces_menu_"+m);V(".rw_spaces_menu_button",l).attr("aria-owns","rw_spaces_menu_"+m);W(l)}}});function W(l){var m=l.data("option");V(".rw_spaces_menu_button",l).html(V(".rw_option_"+m+" a",l).html());V(".rw_spaces_menu a",l).click(function(){V(".rw_spaces_menu_button",l).html(V(this).html());RW.spaces.filterSpaces(V(this).data("option"),l)});V(".rw_spaces_menu_button",l).click(function(){E(l);if(RW.confluenceVersion<5){var n=V(this);n.addClass("rw_active");V("#"+n.attr("aria-owns")).addClass("rw_open");var o=function(){n.removeClass("rw_active");V("#"+n.attr("aria-owns")).removeClass("rw_open");V(document).unbind("click",o)};setTimeout(function(){V(document).bind("click",o)},100)}});selectedTeamLabel=V("#spacesVarSelectedTeam",l).html();l.data("category",selectedTeamLabel);if(selectedTeamLabel.length>0){E(l)}if(V("#spacesVarCategoryKey",l).length>0){f(V("#spacesVarCategoryKey",l).html(),V("#rw_spaces_macro_container",l),l)}else{l.data("selectedteamlabel",V("#spacesVarSelectedTeam",l).html());if(V("#spacesVarSpaceDirectory",l).html()==="true"){l.data("isspacedirectory",true)}if(V("#spacesVarTeamLabelIsCategoryTeamLabel",l).html()==="true"){h(V("#spacesVarSpacesSelectedTab",l).html(),l.data("selectedteamlabel"),"",l.data("isspacedirectory"),l)}else{h(V("#spacesVarSpacesSelectedTab",l).html(),"",l.data("selectedteamlabel"),l.data("isspacedirectory"),l)}if(l.data("isspacedirectory")){E(l)}}}function T(l){return{closedCategories:l.data("closedcategories"),showLogo:l.data("showlogo"),excludeArchivedSpaces:l.data("excludearchivedspaces"),includeLinks:(l.data("includelinks")==="true"),isSpaceDirectory:l.data("isspacedirectory"),excludeDescriptions:l.data("excludeDescriptions"),showDashboards:l.data("showDashboards"),disabledSubdashboards:l.data("disabledSubdashboards")}}function M(m){var l=V("#rw_spaces_macro_container",m);l.html(X);V.ajax({url:contextPath+"/rest/originaltheme/1.0/category?include-children=true&recursive=true&exclude-archived-spaces="+m.data("excludearchivedspaces")+"&exclude-links="+(m.data("includelinks")!=="true"),type:"GET",dataType:"json",cache:false,success:function(n){l.html("");if(typeof (n)!=="undefined"&&n.length>0){k(n,V("#rw_spaces_macro_container",m),T(m),m)}S(V("#rw_spaces_macro_container",m),m);if((typeof (n)==="undefined"||n.length==0)){l.html(a.clone())}},error:function(n){if(n.status!=0){l.html("<div class='rw_warning_box'>"+n.status+" "+n.statusText+"</div>").show()}}})}function S(n,l){var m=V("<div></div>");Q(m,l);n.append(m)}function F(m){var l=V("#rw_spaces_macro_container",m);l.html(X);V.ajax({url:contextPath+"/rest/originaltheme/1.0/category?exclude-archived-spaces="+m.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(n){l.html("");if(typeof (n)!=="undefined"&&n.length>0){G(n,l,m,T(m))}J(l,m,T(m))},error:function(n){if(n.status!=0){l.html("<div class='rw_warning_box'>"+n.status+" "+n.statusText+"</div>").show()}}})}function f(m,l,o){l.html(X);var n=T(o).closedCategories!=="true";V.ajax({url:contextPath+"/rest/originaltheme/1.0/category/"+m+"/?include-children=true&recursive="+n+"&exclude-archived-spaces="+o.data("excludearchivedspaces")+"&exclude-links="+(o.data("includelinks")!=="true"),type:"GET",dataType:"json",cache:false,success:function(p){l.html("");if((typeof (p.children)==="undefined"||p.children.length==0)&&(typeof (p.subCategories)==="undefined"||p.subCategories.length==0)){l.html(a.clone())}else{B(p,l,T(o),o)}},error:function(p){if(p.status!=0){l.html("<div class='rw_warning_box'>"+p.status+" "+p.statusText+"</div>").show()}}})}function I(n,m){var l=V("#rw_spaces_macro_container",m);l.html(X);V.ajax({url:contextPath+"/rest/originaltheme/1.0/label/space?label="+n+"&exclude-archived-spaces="+m.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(o){l.html("");A(o,l,T(m))},error:function(o){if(o.status!=0){l.html("<div class='rw_warning_box'>"+o.status+" "+o.statusText+"</div>").show()}}})}function d(m){var l=V("#rw_spaces_macro_container",m);l.html(X);V.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/spaces?exclude-archived-spaces="+m.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(n){l.html("");if(typeof (n)!=="undefined"&&n.length>0){A({children:n},l,T(m))}else{l.html(a.clone())}},error:function(n){if(n.status!=0){l.html("<div class='rw_warning_box'>"+n.status+" "+n.statusText+"</div>").show()}}})}function Q(l,m){l.html(X);V.ajax({url:contextPath+"/rest/originaltheme/1.0/space/uncategorized?exclude-archived-spaces="+m.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(n){l.html("");if(typeof (n)!=="undefined"&&n.length>0){A({children:n},l,T(m))}else{if(m.data("closedcategories")==="true"){l.html(a.clone())}}},error:function(n){if(n.status!=0){l.html("<div class='rw_warning_box'>"+n.status+" "+n.statusText+"</div>").show()}}})}function E(l){if(l.data("isspacedirectory")){var m=V(".rw_space_filter_menu",l)}else{var m=V(".rw_option_categories","#"+V(".rw_spaces_menu_button",l).attr("aria-owns"))}if(!l.data("categories-loaded")){if(!l.data("isspacedirectory")){m.append("<li><a>Loading...</a></li>")}V.ajax({url:contextPath+"/rest/originaltheme/1.0/category",type:"GET",dataType:"json",cache:false,success:function(n){l.data("categories-loaded",true);if(!l.data("isspacedirectory")){m.html("")}if(typeof (n)!=="undefined"&&n.length>0){V.each(n,function(){if(this.url==undefined||this.url==""){L(this,m,l)}})}else{if(!l.data("isspacedirectory")){m.remove()}}if(l.data("isspacedirectory")){V("li:last-child a",m).addClass("rw_corners_bottom")}},error:function(n){}})}}function O(l){V.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/spaces/selectedtab?value="+l,type:"PUT",dataType:"json",cache:false,success:function(m){}})}function c(l){V.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/spaces/selectedteam?value="+l,type:"PUT",dataType:"json",cache:false,success:function(m){}})}function L(p,l,m){var o=H.clone(),n=V("a",o);o.attr("id","rw_team_"+RW.htmlEncode(p.nameKey));if(m.data("selectedteamlabel")===p.nameKey){if(m.data("isspacedirectory")){o.addClass("rw_active")}else{V(".rw_spaces_menu_button",m).html(RW.htmlEncode(p.name))}}n.html(RW.htmlEncode(p.name)).click(function(){V(".rw_spaces_menu_button",m).html(V(this).html());RW.spaces.filterSpaces("team",m,p.nameKey,"",m.data("isspacedirectory"))});l.append(o)}function k(n,l,m,o){if(typeof (n)!=="undefined"){V.each(n,function(){b(this,l,m,o)})}}function G(n,l,o,m){if(typeof (n)!=="undefined"){V.each(n,function(){var p=this.nameKey;var r;if(m.showDashboards){r=V(RW.Templates.Spaces.categoryItemWithDashboard({}))}else{r=Y.clone()}var w=V("div.rw_spaces_category_title",r),v=V("div.rw_spaces_category_title span",r),u=V("div.rw_spaces_subcategories",r),p=this.nameKey,q=V(".rw_item_expand",r);RW.spaces.toggleCategorySection(w);v.html(RW.htmlEncode(this.name));if(this.link!=undefined){var t=this.link.url;v.addClass("rw_custom_link");if(this.link.target!=undefined){v.append('<span class="rw_new_window"></span>');w.click(function(){window.open(t)})}else{w.click(function(){window.location=t})}}else{var s;if(m.showDashboards){s=q}else{s=w}s.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(x){f(p,u,o);w.unbind(x)});if(m.showDashboards){w.click(function(){window.location=contextPath+"/category/"+p})}}RW.PubSub.on("user-categories:fetched",function(){var y=o.data("showUsers");if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(p)&&y==true&&!w.hasClass("rw_has_user_category")){var x=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:p});v.after(x.render());w.addClass("rw_has_user_category")}});if(!RW._.isEmpty(RW.Users.categories)){RW.PubSub.trigger("user-categories:fetched")}l.append(r)})}}function b(n,l,o,p){if(n.link!==undefined){}else{if(o.closedCategories!=="true"&&(n.children===undefined||n.children.length===0)&&(n.subCategories===undefined||n.subCategories.length===0)){return }else{if(o.closedCategories!=="true"&&(n.children===undefined||n.children.length===0)&&!U(n.subCategories)){return }}}var x;var u=false;if(!o.showDashboards||(n.parentKey!==undefined&&o.disabledSubdashboards)){x=Y.clone()}else{x=V(RW.Templates.Spaces.categoryItemWithDashboard({}));u=true}var w=V("div.rw_spaces_category_title",x),v=V("div.rw_spaces_category_title span",x),r=V("ul.rw_content_list",x),t=V("div.rw_spaces_subcategories",x),m=V(".rw_item_expand",x);if(o.closedCategories==="true"){RW.spaces.toggleCategorySection(w)}v.html(RW.htmlEncode(n.name));if(n.link!=undefined){var s=n.link.url;v.addClass("rw_custom_link");if(n.link.target!=undefined){v.append('<span class="rw_new_window"></span>');w.click(function(){window.open(s)})}else{w.click(function(){window.location=s})}}else{var q;if(u){q=m}else{q=w}q.click(function(){var y=V(".rw_spaces_category_content",x);if(V("ul.rw_content_list",y).children().length==0&&V("div.rw_spaces_subcategories",y).children().length==0){V(".rw_no_items",l).remove();f(n.nameKey,y,p)}RW.spaces.toggleCategorySection(this)});if(u){w.click(function(){window.location=contextPath+"/category/"+n.nameKey})}}if(o.closedCategories!=="true"&&(n.children===undefined||n.children.length===0)&&(n.subCategories===undefined||n.subCategories.length===0)){if(n.link===undefined){r.append(a.clone())}}else{K(n.children,r,o);k(n.subCategories,t,o,p)}RW.PubSub.on("user-categories:fetched",function(){var z=p.data("showUsers");if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(n.nameKey)&&z==true&&!w.hasClass("rw_has_user_category")){var y=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:n.nameKey});v.after(y.render());w.addClass("rw_has_user_category")}});if(!RW._.isEmpty(RW.Users.categories)){RW.PubSub.trigger("user-categories:fetched")}l.append(x)}function U(l){for(i=0;i<l.length;i++){var m=l[i];if(m.children.length>0){return true}else{return U(m.subCategories)}}return false}function B(q,l,n,o){var p=j.clone(),m=V("ul.rw_content_list",p),r=V("div.rw_spaces_subcategories",p);K(q.children,m,n);k(q.subCategories,r,n,o);l.append(p)}function C(o,l,n,m){if(o.type=="space"){e(o,l,n,m)}else{if(o.type=="link"){g(o,l,n,m)}}}function g(p,r,o,m){if(p==undefined){return }var s=V('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>'),q=V(".rw_item_icon",s),n=V(".rw_item_content",s),l=V("a",s);if(o%2===0){s.addClass("rw_alternating")}s.attr("id","rw_link_id_"+p.key);n.html(RW.htmlEncode(p.title));if(p.icon!=undefined){q.addClass("rw_icon_"+p.icon)}else{q.remove()}if(p.target=="_blank"){l.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');l.attr("target","_blank");n.addClass("rw_icon_right")}l.attr("href",p.url).click(function(){linkedClicked=true;if(dropDownContainer.hasClass("rw_key_nav")){if(p.target=="_blank"){window.open(p.url)}else{window.location=p.url}dropDownContainer.hide();dropDownLoader.show();return false}else{return true}});r.append(s)}function e(l,m,p,o){var n=R.clone(),t=V("a",n),q=V("span.rw_item_content",n),r=V("span.rw_item_favourite",n),s=l.key;q.html(RW.htmlEncode(l.title));if(p%2===0){n.addClass("rw_alternating")}if(userIsLoggedIn){if(l.favourite){r.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{r.addClass("rw_gray_star").attr("title","Add to your favourite list")}r.click(function(u){RW.addOrRemoveFav(s,this);u.stopPropagation();return false});q.addClass("rw_icon_right")}else{r.remove()}t.attr("href",contextPath+"/display/"+s);if(o.excludeDescriptions!="true"&&l.description!=undefined&&l.description!=""){t.append('<span class="rw_space_description rw_small_text">'+l.description+"</span>")}if(o.showLogo==="true"&&typeof (l.logo)!=="undefined"){t.prepend('<span class="rw_item_icon"><img src="'+contextPath+l.logo+'" class="rw_space_logo" /></span>')}else{t.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}m.append(n)}function K(n,l,m){if(typeof (n)!=="undefined"){V.each(n,function(o){C(this,l,o,m)})}}function A(o,l,n){var p=N.clone(),m=V("ul.rw_content_list",p);if(typeof (o.children)!=="undefined"){V.each(o.children,function(q){C(this,m,q,n)})}l.append(p)}function J(l,p,o){var u;if(o.showDashboards){u=V(RW.Templates.Spaces.categoryItemWithDashboard({}))}else{u=Y.clone()}var t=V("div.rw_spaces_category_title",u),r=V("div.rw_spaces_category_title span",u),q=V("ul.rw_content_list",u),s=V("div.rw_spaces_subcategories",u),m=V(".rw_item_expand",u),n=this.nameKey;u.addClass("rw_uncategorized_spaces");RW.spaces.toggleCategorySection(t);r.html(unCategorizedSpaces);t.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(v){Q(q,p);t.unbind(v)});m.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(v){Q(q,p);m.unbind(v)});l.append(u)}function h(l,p,n,o,m){V("#rw_spacelist_menu .rw_active",m).removeClass("rw_active");V("#rw_spacelist_menu .rw_active_team",m).removeClass("rw_active_team");if(l==="team"){if(o){V("#rw_spacelist_menu #rw_team_"+n,m).addClass("rw_active")}else{V("#rw_spacelist_menu #rw_spacelist_team",m).addClass("rw_active");V("#rw_spacelist_menu #rw_team_"+n,m).addClass("rw_active_team")}if(p!==""){f(p,V("#rw_spaces_macro_container",m),m)}else{I(n,m)}}else{if(l==="my"){V("#rw_spacelist_menu #rw_spacelist_my",m).addClass("rw_active");d(m)}else{V("#rw_spacelist_menu #rw_spacelist_all",m).addClass("rw_active");if(m.data("closedcategories")==="true"){F(m)}else{M(m)}}}}RW.spaces.filterSpaces=function(l,m){RW.spaces.filterSpaces(l,m,"","",false)};RW.spaces.filterSpaces=function(l,m,n){RW.spaces.filterSpaces(l,m,"",n,false)};RW.spaces.filterSpaces=function(l,m,p,n,o){h(l,p,n,o,m);O(l);if(l==="team"){if(p!==""){c(p)}else{c(n)}}};RW.spaces.toggleCategorySection=function(l){V(l).closest(".rw_category").toggleClass("rw_closed")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/news/news-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(I){RW.news={};var N="blog";var K="/pages/view-page-simple.action?pageId=";var O;var E;var M;var G;var A;var J;var B=0;var D=2;var P=[];var F={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};AJS.toInit(function(){O=I(RW.Templates.News.item());E=I(RW.Templates.News.itemSimple());G=I(RW.Templates.News.loadMoreButton());M=I(RW.Templates.News.empty());A=I(RW.Templates.loader({type:"circle",bg:"gray"}));J=I(RW.Templates.News.popupButton());I("#main .rw_news_macro").each(function(Q){C(I(this),0,Q)})});function C(R,Z,T){var Q=I(".rw_news_container",R);if(Z==0){Q.append(A.clone())}var Y=I("#contentVarNews",R).html();var U=I("#stepSizeVarNews",R).html();var a=I("#spacesVarNews",R).html();var X=I("#labelsVarNews",R).html();var d=I("#profilePicVarNews",R).html();var c=I("#typeVarNews",R).html();var S=I("#showSpaceNameVarNews",R).html();var b=I("#popupVarNews",R).html();var V=I("#themeVarNews",R).html();var W=I("#categoriesVarNews",R).html();Y="excerpts";I.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/",type:"GET",data:{"start-index":Z,"max-results":U,keys:a,labels:X,"body-type":Y,"profile-pic":d,"all-info":true,"blog-mode":c=="blog","category-keys":W},dataType:"json",cache:false,success:function(e){I(".rw_load_more_link",Q).remove();var g=e.hasMore;if(Z==0){Q.html("")}if(typeof (e.blogPosts)!=="undefined"&&e.blogPosts.length>0){if(P[T]==undefined){P[T]=e.blogPosts}else{P[T]=P[T].concat(e.blogPosts)}I.each(e.blogPosts,function(h){if(b=="true"&&Z==0&&h==0){var j=this;var i=J.clone();i.click(function(){RW.openBlogPostPopup(j,0,T,P);return false}).attr("title","View in popup");I(".rw_macro_title h2",R).append(i)}if(V==="simple"){L(this,Q,S,b,c,Z+h,T)}else{H(this,Q,S,b,c,Z+h,T)}if(h+Z==0&&I("#firstExpandedVarNews",R).html()=="true"){I(".rw_news_item_btn",Q.last()).click()}});if(g){var f=G.clone();f.click(function(){I("span",this).hide();I(".rw_loader_128_image",this).show();C(R,Z+e.blogPosts.length,T);return false});Q.append(f)}Confluence.Binder.userHover()}else{if(Z===0){Q.after(M.clone()).remove()}}I(".rw_news_item_btn:first",Q).addClass("rw_corners_top");if(!g){I(".rw_news_item_btn:last",Q).addClass("rw_corners_bottom");I(".rw_news_item:last",Q).css("border","0px")}},error:function(e){Q.html("<div class='rw_warning_box'>"+e.status+" "+e.statusText+"</div>").show()}})}function H(T,a,i,R,U,h,d){var f=O.clone(),e=I(".rw_caption",f),g=I(".rw_date",f),b=I(".rw_item_icon img",f),W=I(".rw_item_content",f),c=I(".wiki-content",f),Y=I(".rw_read_more_page",f),Q=I(".rw_read_more_popup",f),X=I(".rw_comments_link",f),S=I(".rw_space_name",f),V=I(".rw_news_item_btn",f),Z=I(".rw_user_link",f);e.html(T.title);e.attr("href",T.url);e.attr("title",RW.htmlDecode(T.title));e.click(function(j){window.location=T.url;j.stopPropagation()});g.html(T.date);if(U===N&&T.blog!=undefined){S.html(T.blog.name).addClass("rw_blog_name").attr("title",T.blog.name).click(function(j){window.location=contextPath+"/blog/"+T.blog.nameKey;j.stopPropagation()})}else{if(i){S.html(T.spaceName)}else{S.remove()}}if(T.author.profilePic){if(!T.author.anonymous){b.parent().attr("data-username",T.author.username)}else{b.parent().removeClass("userLogoLink")}b.attr("src",T.author.profilePic);W.addClass("rw_has_icon")}else{b.remove()}if(!T.author.anonymous){Z.attr("href",contextPath+"/display/~"+T.author.username);Z.attr("data-username",T.author.username)}else{Z.removeClass("confluence-userlink")}Z.html(T.author.fullName);if(T.bodyContent){c.html(T.bodyContent);I("img.confluence-embedded-image",c).each(function(){var j=I(this);j.fancybox(F);j.removeAttr("width")})}Y.attr("href",T.url);if(R=="true"){Q.click(function(){RW.openBlogPostPopup(T,h,d,P);return false})}else{Q.remove()}X.attr("href",T.commentUrl).attr("title",T.commentTitle);I("span",X).html(T.commentTitle);a.append(f)}function L(T,a,h,R,U,g,c){var e=E.clone(),d=I(".rw_caption",e),f=I(".rw_date",e),Y=I(".rw_user_link img",e),b=I(".wiki-content",e),X=I(".rw_read_more_page",e),Q=I(".rw_read_more_popup",e),W=I(".rw_comments_link",e),S=I(".rw_space_name",e),V=I(".rw_news_item_btn",e),Z=I(".rw_user_link",e);d.html(T.title);d.attr("href",T.url);d.attr("title",RW.htmlDecode(T.title));f.html(T.date);if(U===N&&T.blog!=undefined){S.html(T.blog.name).addClass("rw_blog_name").attr("title",T.blog.name).click(function(i){window.location=contextPath+"/blog/"+T.blog.nameKey;i.stopPropagation()})}else{if(h){S.html(T.spaceName)}else{S.remove()}}if(T.author.profilePic){Y.attr("src",T.author.profilePic);Z.addClass("rw_has_icon")}else{Y.remove()}if(!T.author.anonymous){Z.attr("href",contextPath+"/display/~"+T.author.username);Z.attr("data-username",T.author.username)}else{Z.removeClass("confluence-userlink")}I("span",Z).html(T.author.fullName);if(T.bodyContent){b.html(T.bodyContent);I("img.confluence-embedded-image",b).each(function(){var i=I(this);i.fancybox(F);i.removeAttr("width")})}X.attr("href",T.url);if(R=="true"){Q.click(function(){RW.openBlogPostPopup(T,g,c,P);return false})}else{Q.remove()}W.attr("href",T.commentUrl).attr("title",T.commentTitle);I("span",W).html(T.commentTitle);a.append(e)}RW.openBlogPostPopup=function(V,Q,R,U){var T=RW.openIframeDialog(contextPath+K+V.id,RW.htmlDecode(V.title));if(Q!=0){T.addButton("<span class='rw_next'>"+"Next"+"</span>",function(){T.remove();RW.openBlogPostPopup(U[R][Q-1],Q-1,R,U)},"rw_button rw_right")}else{T.addButton("<span class='rw_next'>"+"Next"+"</span>",function(){return false},"rw_button rw_right rw_transparent")}if(U[R].length!=Q+1){T.addButton("<span class='rw_prev'>"+"Previous"+"</span>",function(){T.remove();RW.openBlogPostPopup(U[R][Q+1],Q+1,R,U)},"rw_button rw_right")}else{T.addButton("<span class='rw_prev'>"+"Previous"+"</span>",function(){return false},"rw_button rw_right rw_transparent")}T.addButton("<span class='rw_comment_gray'>"+V.commentTitle+"</span>",function(){window.location=V.commentUrl},"rw_button rw_left");if(V.canEdit){T.addButton("<span class='rw_edit_gray'>"+"Edit"+"</span>",function(){window.location=contextPath+"/pages/editblogpost.action?pageId="+V.id},"rw_button rw_left")}try{RW.startKeyable(I("#rw_popup_dialog"),null,"blog_post_popup",I(".rw_button rw_right"))}catch(S){}};RW.news.toggleNewsItem=function(Q){if(I(Q).parent().hasClass("rw_open")){I(Q).parent().removeClass("rw_open");I(Q).parent().find(".rw_news_item_content").hide()}else{I(Q).parent().addClass("rw_open");I(Q).parent().find(".rw_news_item_content").show()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/news/space-news-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(G){RW.spacenews={};var F;var H;var J;var I;var B=0;var D=2;var C=false;AJS.toInit(function(){F=G(G("#rw_space_news_container_template").html());H=G(G("#rw_space_news_item_template").html());J=G(G("#rw_space_news_load_more_button").html());I=G(G("#rw_section_template").html());velocityCount=0;G("#main .rw_space_news_macro").each(function(L){if(L===0){K(G("#rw_space_news_macro",G(this)),B,true)}else{K(G("#rw_space_news_macro",G(this)),B,false)}})});function K(Q,M,N){var O=G("#spaceKeyVarSpaceNews",Q.parent()).html();var L=G("#stepSizeVarNews",Q.parent()).html();var P=G("#collapsedVarSpaceNews",Q.parent()).html();var R=G("#labelsVarSpaceNews",Q.parent()).html();if(!RW._.isEmpty(L)){L=G.trim(L)}if(O==undefined||O==""){if(parent!=undefined){if(parent.parent!=undefined&&(parent.parent.RW.spaceLayoutKey!=undefined&&parent.parent.RW.spaceLayoutKey!="")){O=parent.parent.RW.spaceLayoutKey}else{if(parent.RW.spaceLayoutKey!=undefined&&parent.RW.spaceLayoutKey!=""){O=parent.RW.spaceLayoutKey}}}}if(O==undefined||O==""){return }A(Q,M,N,O,L,P,R)}function A(R,M,N,P,L,Q,S,O){G.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/blog/post",data:{"start-index":M,"max-results":L,keys:P,labels:S,"profile-pic":false},dataType:"json",cache:false,success:function(U){G(".rw_load_more_link",R).remove();C=U.hasMore;if(typeof (U.blogPosts)!=="undefined"&&U.blogPosts.length>0){if(M==0){if(O){var Y=I.clone();Y.addClass("rw_flyout_items");Y.attr("id","rw_space_news_list");R.append(Y)}else{R.append(F.clone())}}var X=G("ul",R);G.each(U.blogPosts,function(){velocityCount++;E(this,X)});if(C){var V=J.clone();V.click(function(){G("span",this).hide();G(".rw_loader_128_image",this).show();A(R,M+U.blogPosts.length,N,P,L,Q,S,O);return false});X.append(V)}else{G("li:last-child a",X).addClass("rw_corners_bottom")}if(N){var a=G(".rw_sidebar_icon",R.parent());var W=a.attr("data-tooltip");var Z={getContent:function(){var b=G("<div></div>");b.append("<h5>"+W+"</h5>");A(b,M,N,P,L,Q,S,true);return b}};var T=RW.sidebar.createFlyout(a,"rw_flyout_space_news",Z)}}else{if(M==0){R.parent().find(".rw_sidebar_icon").remove()}}},error:function(T){if(T.status!=0){G("#rw_space_news_macro",R).html("<div class='rw_warning_box'>"+T.status+" "+T.statusText+"</div>").show()}}})}function E(N,L){var P=H.clone(),O=G("a",P),Q=G("a span",P),M=G(".rw_date",P);O.attr("title",N.title);O.attr("href",N.url);Q.html(N.title);M.html(N.date);if(velocityCount%2==0){O.addClass("rw_space_news_alternating")}L.append(P)}RW.spacenews.showSpaceNews=function(L){var M=G(L).parent();M.find("#rw_space_news_container").show();M.find("#rw_space_news_show").hide();M.find("#rw_space_news_hide").show()};RW.spacenews.hideSpaceNews=function(L){var M=G(L).parent();M.find("#rw_space_news_container").hide();M.find("#rw_space_news_show").show();M.find("#rw_space_news_hide").hide()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/base-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(F){var B;var C;AJS.toInit(function(){if(RW.confluenceVersion>=5){D()}else{J()}F("#rw_toolbar .rw_toolbar_dropdown_button").click(function(){H(F(this));return false});F("#rw_toolbar .ajs-button a").click(function(){A()});var O=F("#action-menu-link").next();O.css({margin:0,right:"auto",left:0});if(F("#user-menu-link").outerWidth()>F("#browse_and_user_menu div.user").outerWidth()){F("#browse_and_user_menu div.user").css("width",F("#user-menu-link").outerWidth()-2)}if(F("#rw_page_optional_functions").length>0){if(RW.confluenceVersion>=5){M()}else{E()}}if(RW.userDashboardRedirection){F("a.confluence-userlink, a.userLogoLink").live("click",function(){var P=F(this).attr("data-username");if(P!=undefined&&P!=""&&F(this).attr("href").indexOf("editmyprofilepicture.action")==-1){window.location=contextPath+"/users/view-user-dashboard.action?username="+P;return false}})}});var K=function(O){F("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");F(this).addClass("dropdown_open")};function H(O){I();O.parent().addClass("dropdown_open");F("#rw_toolbar .toolbar-dropdown-menu-item").bind("mouseenter",K);F(document).bind("click",A)}var A=function(){F("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");F("#rw_toolbar .toolbar-dropdown-menu-item").unbind("mouseenter",K);F(document).unbind("click",A)};function I(){A();try{if(AJS.InlineDialog.current!=null){AJS.InlineDialog.current.hide()}}catch(O){}}function D(){F("#rw_toolbar .toolbar-dropdown-menu-item").each(function(){dd=F(".ajs-drop-down",this);if(!dd.length){return }dd=dd[0];dd.hide=function(){};dd.show=function(){}});var P=F("#action-view-storage-link");if(P.length>0){var O=F("#action-view-storage-link").clone();P.after(O);P.remove();O.click(function(Q){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");Q.preventDefault();return false})}}var G=function(O){F.ajax({type:"PUT",url:O,dataType:"json",cache:false,success:function(P){},error:function(P){alert("Server error while updating watching page")},}).done(function(){if(C.length>0){F("span",C).toggleClass("rw_watching");F("span",C).toggleClass("rw_not_watching");if(F("span",C).hasClass("rw_watching")){C.attr("title","Stop watching")}else{C.attr("title","Watch")}}})};function M(){var O=F("#rw_page_optional_functions");B=F("#rw_page_optional_favourite",O);C=F("#rw_page_optional_watch",O);if(B.length>0){F.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/",dataType:"json",cache:false,success:function(Q){if(Q.result){F("span",B).addClass("rw_yellow_star");F("span",B).attr("title","Remove from your favourite list")}else{F("span",B).addClass("rw_gray_star");F("span",B).attr("title","Add to your favourite list")}B.show();B.click(function(){RW.addOrRemoveFavPage(AJS.params.pageId,F("span",this))})},error:function(Q){}})}if(C.length>0){if(F("#space-watching").length>0){F("span",C).addClass("rw_space_watching");C.show().attr("title","Watching space");C.click(function(){if(RW.confluenceVersion<5){window.location=contextPath+"/spaces/viewspacecontent.action?key="+AJS.params.spaceKey}else{window.location=contextPath+"/users/viewnotifications.action"}})}else{var P;F.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/",dataType:"json",cache:false,success:function(Q){if(Q.result){F("span",C).addClass("rw_watching");P=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove";C.attr("title","Stop watching")}else{F("span",C).addClass("rw_not_watching");P=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";C.attr("title","Watch")}C.show();C.click(function(){G(P)})},error:function(Q){}})}}}var N=new Array();RW.addOrRemoveFav=function(Q,R){if(N[R.id]==null){N[R.id]=true;var P;var S;var O;if(F(R).hasClass("rw_yellow_star")){P=contextPath+"/rest/originaltheme/1.0/space/"+Q+"/favourite/remove";S="rw_gray_star";O="rw_yellow_star";F(R).removeClass("rw_yellow_star");F(R).attr("title","Add to your favourite list")}else{P=contextPath+"/rest/originaltheme/1.0/space/"+Q+"/favourite/add";S="rw_yellow_star";O="rw_gray_star";F(R).removeClass("rw_gray_star");F(R).attr("title","Remove from your favourite list")}F.ajax({type:"PUT",url:P,dataType:"json",cache:false,success:function(T){},error:function(T){N[R.id]=null;F(R).addClass(O)},}).done(function(){F(R).addClass(S);N[R.id]=null;if(RW.cacheStorage){var T=RW.remoteUser+"."+AJS.contextPath()+"/rest/originaltheme/1.0/category";RW.cacheStorage.clearCacheKeysStartingWith(T)}})}};RW.addOrRemoveFavPage=function(O,R){var Q;var S;var P;if(F(R).hasClass("rw_yellow_star")){Q=contextPath+"/rest/originaltheme/1.0/page/"+O+"/favourite/remove";S="rw_gray_star";P="rw_yellow_star";F(R).removeClass("rw_yellow_star");F(R).attr("title","Add to your favourite list")}else{Q=contextPath+"/rest/originaltheme/1.0/page/"+O+"/favourite/add";S="rw_yellow_star";P="rw_gray_star";F(R).removeClass("rw_gray_star");F(R).attr("title","Remove from your favourite list")}F.ajax({type:"PUT",url:Q,dataType:"json",cache:false,success:function(T){},error:function(T){F(R).addClass(P)},}).done(function(){F(R).addClass(S);if(O===AJS.params.pageId){F("#page-favourite span").toggleClass("selected");F("#page-favourite span").toggleClass("ie-page-favourite-selected");if(!F("span",B).hasClass(S)){F("span",B).removeClass(P).addClass(S)}}})};RW.showPopupLoader=function(){F(".rw_popup_container").hide();F(".rw_popup_loader").show()};RW.addNewsOnDashboard=function(P,O){F(P).hide().parent().find(".news_on_dashboard_loader").show();F.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+O+"/dashboard/add",type:"PUT",cache:false,success:function(Q){F(P).parent().find(".news_is_visible").show();F(P).parent().find(".news_on_dashboard_loader").hide()},error:function(Q){}})};RW.removeNewsOnDashboard=function(P,O){F(P).hide().parent().find(".news_on_dashboard_loader").show();F.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+O+"/dashboard/remove",type:"PUT",cache:false,success:function(Q){F(P).parent().find(".news_is_not_visible").show();F(P).parent().find(".news_on_dashboard_loader").hide()},error:function(Q){}})};function J(){F("#rw_toolbar .toolbar-dropdown-menu-item").each(function(){dd=F(".ajs-drop-down",this);if(!dd.length){return }dd=dd[0];dd.hide=function(){};dd.show=function(){}});var R=F("#action-view-storage-link");if(R.length>0){var O=F("#action-view-storage-link").clone();R.after(O);R.remove();O.click(function(V){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");V.preventDefault();return false})}F("#page-favourite").unbind().click(function(X){X.stopPropagation();var W=F(this).find("span");if(W.hasClass("waiting")){return AJS.stopEvent(X)}W.addClass("waiting");var V=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/add";if(W.hasClass("selected")){V=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/remove"}F.ajax({type:"PUT",url:V,dataType:"json",cache:false,success:function(Y){},error:function(Y){alert("Server error while updating favourite")},}).done(function(){W.removeClass("waiting");W.toggleClass("selected");W.toggleClass("ie-page-favourite-selected");if(B.length>0){F("span",B).toggleClass("rw_yellow_star");F("span",B).toggleClass("rw_gray_star");if(F("span",B).hasClass("rw_yellow_star")){F("span",B).attr("title","Remove from your favourite list")}else{F("span",B).attr("title","Add to your favourite list")}}});return AJS.stopEvent(X)});var T=F("#page-watch").unbind().find("span");if(F("#page-unwatch").length==0){var Q=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";if(T.hasClass("selected")){Q=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove"}T.click(function(V){L(Q,T,null);T.addClass("waiting");return AJS.stopEvent(V)})}else{var U=F("#page-unwatch").unbind().find("span");var S=F(T.parent().parent("li"));var P=F(U.parent().parent("li"));if(T.hasClass("inactive")){S.addClass("hidden")}if(U.hasClass("inactive")){P.addClass("hidden")}U.click(function(V){L(contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove",U,T);U.addClass("waiting");return AJS.stopEvent(V)});T.click(function(V){L(contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add",T,U);T.addClass("waiting");return AJS.stopEvent(V)})}}var L=function(O,P,Q){P.addClass("waiting");F.ajax({type:"PUT",url:O,dataType:"json",cache:false,success:function(R){},error:function(R){alert("Server error while updating watching page")},}).done(function(){if(F("#page-unwatch").length==0){P.removeClass("waiting");P.toggleClass("selected");P.toggleClass("ie-page-watching-selected")}else{P.removeClass("waiting");P.toggleClass("inactive");Q.toggleClass("inactive");P.parent().parent("li").toggleClass("hidden");Q.parent().parent("li").toggleClass("hidden")}if(C.length>0){F("span",C).toggleClass("rw_watching");F("span",C).toggleClass("rw_not_watching");if(F("span",C).hasClass("rw_watching")){C.attr("title","Stop watching")}else{C.attr("title","Watch")}}})};function E(){var O=F("#rw_page_optional_functions");B=F("#rw_page_optional_favourite",O);C=F("#rw_page_optional_watch",O);var P=F("#page-favourite span");var Q=F("#page-watch span");var T=F("#page-unwatch span");var S=F("#space-watching");if(B.length>0){if(P.hasClass("selected")){F("span",B).addClass("rw_yellow_star");F("span",B).attr("title","Remove from your favourite list")}else{F("span",B).addClass("rw_gray_star");F("span",B).attr("title","Add to your favourite list")}B.show();B.click(function(){RW.addOrRemoveFavPage(AJS.params.pageId,F("span",this))})}if(C.length>0){if(S.length>0){F("span",C).addClass("rw_space_watching");C.show().attr("title","Watching space");C.click(function(){window.location=contextPath+"/spaces/viewspacecontent.action?key="+AJS.params.spaceKey})}else{var R;if(Q.hasClass("inactive")){F("span",C).addClass("rw_watching");R=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove";C.attr("title","Stop watching")}else{F("span",C).addClass("rw_not_watching");R=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";C.attr("title","Watch")}C.show();C.click(function(){L(R,T,Q)})}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/shortcuts-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(B){AJS.toInit(function(){var D=false;var E=false;var F=false;var C=false;B(document).keydown(function(G){if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!B(G.target).is("input, textarea, select")&&!G.metaKey&&!G.ctrlKey&&!G.shiftKey&&!G.altKey){if(G.which==71){C=true}if(G.which==78&&!F&&!C){F=true;RW.openMainKeyNavigation()}}}});B(document).keypress(function(G){var H=String.fromCharCode(G.which);if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!B(G.target).is("input, textarea, select")){if(H=="/"){RW.showSearch()}else{if(H=="?"){Confluence.KeyboardShortcuts.openDialog()}}}}});B(document).keyup(function(G){if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!B(G.target).is("input, textarea, select")){if(G.which==71&&C){setTimeout(function(){C=false},700)}if(G.shiftKey&&G.which==70){if(typeof RW.remoteUser!="undefined"){if(RW.inFavPageAndSpace){RW.hideFavourite()}else{RW.showFavourite()}}}else{if((G.altKey&&G.which==53||G.which==56)||G.which==219){if(RW.leftColumnHidden){RW.showLeftColumn()}else{RW.hideLeftColumn()}}else{if(G.which==70&&!G.ctrlKey&&!G.altKey){if(RW.inFullscreen){RW.closeFullscreen()}else{RW.openFullscreen()}}else{if(G.which==80){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu(true)}}else{if(G.shiftKey&&G.which==65){if(RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{RW.showActivitiyStream()}}else{if(G.shiftKey&&G.which==66){if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}else{RW.blogs.showBlogsPopup()}}else{if(G.which==65){if(RW.inAttachments){RW.hideAttachments()}else{window.scroll(0,0);RW.showAttachments()}}else{if((G.shiftKey==true&&G.which==55)||G.which==191){RW.showSearch()}else{if(G.which==78){F=false;RW.closeMainKeyNavigation()}}}}}}}}}if(G.which==27){RW.killPopupAndNavigationEvents()}}}})});var A=false;RW.startCategoryKeyNavigation=function(C){A=true;RW.scrollToElementWithOffset(B("#rw_category_menu"),100);RW.startKeyable(RW.category.object,"horizontal","category_menu",C);B(document).bind("click",function(D){RW.quitCategoryKeyNavigation();B(document).unbind(D)})};RW.quitCategoryKeyNavigation=function(){A=false;RW.quitKeyable()};RW.closePopups=function(){if(RW.inFavPageAndSpace==true){RW.hideFavourite()}if(RW.inTopMenu==true){RW.hideTopMenu()}if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}if(typeof RW.activity!="undefined"&&RW.activity.inActivityPopup){RW.hideActivitiyStream()}if(RW.inSearch){RW.hideSearch()}};RW.killPopupAndNavigationEvents=function(){if(RW.inFavPageAndSpace==true){RW.hideFavourite()}else{if(RW.inTopMenu==true){RW.hideTopMenu()}else{if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}else{if(typeof RW.activity!="undefined"&&RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{if(RW.inCategoryDropDown==true){RW.hideCategory()}else{if(RW.inAttachments==true){RW.hideAttachments()}else{if(RW.inFullscreen==true){RW.closeFullscreen()}else{if(RW.inStickyBar==true){RW.hideSearchStickyBar()}else{if(A){RW.quitCategoryKeyNavigation()}else{if(RW.inPageTree){RW.quitPageTreeNavigation()}else{if(RW.inMenuBarNavigation){RW.stopMenuKeyNavigation()}else{if(RW.sideMenu.isActive()){RW.sideMenu.close()}}}}}}}}}}}}if(RW.inSearch){RW.hideSearch()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/ui-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.ui==="undefined"){RW.ui={}}(function(B){var A;RW.ui.popup=function(G,F){var E=B(B("#rw_popup_template").html()).clone();E.attr("id",G);var D=B(".rw_popup_bottom a",E);var C=B(".rw_popup_content",E);B("#rw_main").append(E);B(".rw_popup_top h1",E).html(F);this.show=function(){E.show();B("#rw_popup_bg").show();window.scroll(0,0)};this.hide=function(){E.hide();B("#rw_popup_bg").hide()};this.showLoader=function(){B(".rw_popup_container",E).hide();B(".rw_popup_loader",E).show()};this.hideLoader=function(){B(".rw_popup_container",E).show();B(".rw_popup_loader",E).hide()};this.content=function(H){B(".rw_popup_container",E).show();B(".rw_popup_content",E).html(H)};this.clear=function(H){B(".rw_popup_content",E).html("")};this.obj=E;this.closeButton=D;this.container=C;return this};RW.getSideMenuTitle=function(C){if(A==undefined){A=B('<div class="rw_side_menu_title rw_corners_top"></div>')}var D=A.clone();D.html(C);return D}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/pagetree-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(F){var G;var C;var A;var E=null;var N;RW.inPageTree=false;var J="none";var M="default";var I="public";var L="rw_in_key_nav";AJS.toInit(function(){C=F(F("#rw_page_tree_wrapper_template").html());G=F(F("#rw_page_item_container_template").html());A=F(F("#rw_page_children_list_container").html());N=F(RW.Templates.loader({type:"circle",bg:"gray"})).clone();F("#main .rw_page_tree_wrapper").each(function(R){if(R===0){O(F(this),true)}else{O(F(this),false)}})});function O(R,a){if(a){R.attr("id","rw_page_tree_wrapper");E=R}var V=F(".rw_param_start_page_id",R).attr("data-value");var U=F(".rw_param_theme",R).attr("data-value");var b=F(".rw_param_search",R).attr("data-value");var X=F(".rw_param_expand_collapse",R).attr("data-value");var T=F(".rw_param_page_id",R).attr("data-value");var Z=F(".rw_param_space_key",R).attr("data-value");var Y=F(".rw_param_space_admin",R).attr("data-value");var W=F(".rw_param_space_shortcuts",R).attr("data-value");if(Z==undefined||Z==""){if(parent!=undefined){if(parent.parent!=undefined&&(parent.parent.RW.spaceLayoutKey!=undefined&&parent.parent.RW.spaceLayoutKey!="")){Z=parent.parent.RW.spaceLayoutKey;T=""}else{if(parent.RW.spaceLayoutKey!=undefined&&parent.RW.spaceLayoutKey!=""){Z=parent.RW.spaceLayoutKey;T=""}else{return }}}}var S={inLeftColumn:a,startPageId:V,theme:U,pageId:T,spaceKey:Z};if(b==="true"){S.search=true}else{S.search=false}if(X==="false"){S.expandCollapse=false}else{S.expandCollapse=true}if(Y==="true"){S.spaceAdmin=true}else{S.spaceAdmin=false}if(W==="true"){S.spaceShortcuts=true}else{S.spaceShortcuts=false}P(R,S)}function P(R,T){var S="";if(T.startPageId!=""&&T.startPageId!=undefined){S=contextPath+"/rest/originaltheme/1.0/space/"+T.spaceKey+"/pagetree?selected="+T.pageId+"&root="+T.startPageId}else{S=contextPath+"/rest/originaltheme/1.0/space/"+T.spaceKey+"/pagetree?selected="+T.pageId}if(T.search){F("#rw_pagetree_query",R).originalThemeSearch(false)}R.append(N);var U=C.clone();if(T.theme===J){}else{if(T.theme===I){U.addClass("rw_theme_"+I)}else{U.addClass("rw_theme_"+M)}}D(U,T);F.ajax({type:"GET",url:S,dataType:"json",cache:false,success:function(Y){var V=A.clone();V.addClass("rw_pagetree_list rw_toplevel rw_sidebar_content");if(Y.pages.length>0){K(V,T.pageId,Y.pages);U.append(V);R.append(U);if(T.expandCollapse===false){F(".rw_expand_collapse",U).remove()}else{F(".rw_expand_all",U).click(function(){Q(F(this).parent().parent());return false});F(".rw_collapse_all",U).click(function(){H(F(this).parent().parent());return false})}RW.inPageTree=true;if(T.inLeftColumn){var X={getContent:function(){var a=F("<div></div>");var Z={inleftColumn:false,startPageId:T.startPageId,theme:"none",expandCollapse:false,pageId:T.pageId,spaceKey:T.spaceKey};P(a,Z);return a}};var W=RW.sidebar.createFlyout(F("#rw_sidebar_icon_pagetree",R),"rw_flyout_pagetree",X)}}N.remove()},error:function(V){if(V.status!=0){alert(V.status+" "+V.statusText)}}})}function D(T,V){if(RW.confluenceVersion>=5&&V.spaceShortcuts){var S=new RW.sidebar.quickLinksObject(T,V.spaceKey,V.spaceAdmin);S.getLinks();if(V.inLeftColumn){var U={getContent:function(){var X=F("<div></div>");var W=new RW.sidebar.quickLinksObject(X,V.spaceKey,false);W.getLinks();return X}};var R=RW.sidebar.createFlyout(F("#rw_sidebar_icon_quicklinks"),"rw_flyout_quicklinks",U)}}}function K(R,S,U,T){F.each(U,function(){var Y=G.clone(),V=F(".rw_item_icon",Y),X=F("a",Y);X.html(this.title);X.attr("href",this.url);X.attr("title",RW.htmlDecode(this.title));V.attr("id",this.id);Y.attr("id","rw_pagetree_item_"+this.id);if(this.hasChildren){V.children("span").attr("class","rw_icon rw_icon_plus")}if(S==this.id){X.addClass("rw_current_page_item")}if(this.children&&this.children!=undefined&&this.children!=[]&&this.children.length>0){V.children("span").attr("class","rw_icon rw_icon_minus");var W=A.clone();K(W,S,this.children,T);Y.append(W)}R.append(Y);if(this.hasChildren){V.bind("click",B);if(T){V.trigger("click",[true])}}})}function B(X,U){var S=F(this).closest("li");var W=F(this).children("span");var T=F(this).attr("id");var Y=F(this).closest(".rw_page_tree_wrapper");var R=false;if(Y.hasClass("rw_key_nav")){R=true}if(W.hasClass("rw_icon_plus")){if(W.closest("li").children("ul").size()>0){W.closest("li").children("ul").show();W.attr("class","rw_icon rw_icon_minus");if(R){RW.startKeyable(E.not("li ul:visible"),null,"page_tree",W.closest("li"))}return }S.append(N);F.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+T+"/children",dataType:"json",cache:false,success:function(a){N.remove();var Z=A.clone();if(a.pages.length>0){K(Z,T,a.pages,U);S.append(Z);W.attr("class","rw_icon rw_icon_minus");if(R){RW.startKeyable(E.not("li ul:visible"),null,"page_tree",W.closest("li"))}}},error:function(Z){if(Z.status!=0){alert(Z.status+" "+Z.statusText)}}})}else{if(W.hasClass("rw_icon_minus")){var V=W.closest("li").children("ul");V.hide();W.attr("class","rw_icon rw_icon_plus");if(R){RW.startKeyable(E,null,"page_tree",W.closest("li"))}}}}function Q(R){if(R.hasClass("rw_loaded")){F(".rw_pagetree_list",R).show();F(".rw_icon.rw_icon_plus",R).attr("class","rw_icon rw_icon_minus")}else{var S=F(".rw_icon.rw_icon_plus",R);F.each(S,function(){F(this).trigger("click",[true])});R.addClass("rw_loaded")}return false}function H(R){F(".rw_pagetree_list",R).hide();F(".rw_toplevel",R).show();F(".rw_icon.rw_icon_minus",R).attr("class","rw_icon rw_icon_plus")}RW.startPageTreeNavigation=function(){if(RW.leftColumnHidden){RW.showLeftColumn()}var R;if(F(".rw_current_page_item",E).length>0){R=F(".rw_current_page_item",E).closest("li")}else{R=E.find("li:first-child").first()}RW.startKeyable(E,null,"page_tree",R);RW.scrollToElementWithOffset(R,100)};RW.quitPageTreeNavigation=function(){RW.quitKeyable()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){AJS.toInit(function(){if(RW.confluenceVersion>=5){RW.leftColumnHidden=false;var F=false;var J=false;var X=0;var V;var M=A("#rw_page_container");var W=A("#rw_left_column",M);var E=A("#rw_main_column",M);var N=A("#rw_show_left_column",M);var U=A("#rw_hide_left_column",M);var Z=A("#rw_splitter",M);var O=A(window);var Y=A(document);var C=150;var B=48;var R=300;var S=10;var T="leftcolumn.width";var I="leftcolumn.state";var K="collapsed";var H="expanded";RW.hideLeftColumn=function(){if(!J){Q();RW.storage.setValue(I,K)}};RW.showLeftColumn=function(){if(!J){var a=Math.round(X*0.23);P(a);RW.storage.setValue(I,H);RW.storage.setValue(T,a)}};RW.toggleLeftColumn=function(){if(RW.leftColumnHidden){RW.showLeftColumn()}else{RW.hideLeftColumn()}};function D(b,a){if(!A("#rw_main_column").hasClass("rw_has_left_column")){return }if(b<B){b=B}else{if(b>X-R){b=X-R}}V=b;if(b>C){RW.leftColumnHidden=false;W.removeClass("rw_collapsed").css({position:"static"});if(F){A("#rw_sidebar .acs-side-bar").removeClass("collapsed")}U.show();N.hide()}else{RW.leftColumnHidden=true;W.addClass("rw_collapsed");if(F){A("#rw_sidebar .acs-side-bar").addClass("collapsed");setTimeout(function(){A("#rw_sidebar .acs-side-bar").addClass("collapsed")},100)}U.hide();N.show()}if(a!=undefined&&a===true){if(Z!=undefined){Z.css("left",b+S)}}W.outerWidth(b);E.css({"margin-left":b})}function Q(){RW.leftColumnHidden=true;D(48,true);Z.attr("data-tooltip","Expand left column ( Type \'[\' )")}function P(a){RW.leftColumnHidden=false;D(a,true);Z.attr("data-tooltip","Collapse left column ( Type \'[\' )")}function L(){if(RW.leftColumnHidden){var a=E.offset().top,b=O.scrollTop(),c=O.scrollLeft();if(b<0){return }if(b>(Y.height()-O.height())){return }if(b>a-10){W.css({position:"fixed"})}else{W.css({position:"static"})}}}function G(){X=M.width();if(V!=undefined){if(V>X-R){D(V,true)}}}if(W.length>0){X=M.width();U.click(RW.hideLeftColumn);N.click(RW.showLeftColumn);if(A("#rw_sidebar").length>0){F=true;if(RW.storage.getValue(I)!=K){A("#rw_sidebar .acs-side-bar").removeClass("collapsed");setTimeout(function(){A("#rw_sidebar .acs-side-bar").removeClass("collapsed")},100)}}if(W.hasClass("rw_collapsed_locked")){J=true;Q();if(F){A("#rw_sidebar .acs-side-bar").addClass("collapsed");setTimeout(function(){A("#rw_sidebar .acs-side-bar").addClass("collapsed")},100)}}if(Z.length>0){console.log("RW: Initiate splitter functionality");Z.draggable({containment:"parent",axis:"x",start:function(){Z.attr("data-tooltip","");RW.removeTooltip()},drag:function(){D(parseInt(A(this).css("left"),10)-S)},stop:function(){if((parseInt(A(this).css("left"),10)-S)<=C){D(48,true);RW.storage.setValue(T,48);RW.storage.setValue(I,K);Z.attr("data-tooltip","Expand left column ( Type \'[\' )")}else{RW.leftColumnHidden=false;var a=parseInt(E.css("margin-left"),10);A(this).css("left",a+S);RW.storage.setValue(T,a);RW.storage.setValue(I,H);Z.attr("data-tooltip","Collapse left column ( Type \'[\' )")}}}).click(function(){RW.toggleLeftColumn()}).css({left:(parseInt(E.css("margin-left"),10)+S),height:E.parent().height()});if(RW.storage.getValue(I)!=K&&RW.storage.getValue(I)!=undefined){D(RW.storage.getValueAsInt(T),true)}A("#rw_splitter_handle",Z).css("top",(Z.height()/2)-10);if(RW.storage.getValue(I)==K){Z.attr("data-tooltip","Expand left column ( Type \'[\' )")}else{Z.attr("data-tooltip","Collapse left column ( Type \'[\' )")}A("#rw_splitter_handle",Z).removeClass("rw_hidden");RW.applyTooltip(Z)}if(RW.storage.getValue(I)==K){Q()}RW.applyTooltip(".rw_sidebar_icon");O.scroll(L);O.resize(L,G);O.on("touchend",L)}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-flyout-min.js' */
(function(A){if(RW.sidebar==undefined){RW.sidebar={}}RW.sidebar.createFlyout=function(F,E,G){var I=F.attr("data-tooltip");var H=function(K,J,L){A(J).attr("data-tooltip","");RW.removeTooltip();A(K).html(G.getContent()).addClass("rw_flyout_content");L();A(J).one("click",function(M){if(A("#inline-dialog-"+E).is(":visible")){setTimeout(function(){D.hide()},0)}})};var D=AJS.InlineDialog(F,E,H,{getArrowPath:B,calculatePositions:C,hideDelay:null,hideCallback:function(){A(F).attr("data-tooltip",I)}});A(window).scroll(function(){D.hide()});return D};function C(E,H,M,D){var N=H.target.offset();var L=H.target.width();var I=H.target.height();var K={top:N.top+I/2-15,left:N.left+L+5,right:"auto"};var F=A(window);var J=20;K.maxHeight=F.height()+F.scrollTop()-K.top-J;if(A.browser.msie&&parseInt(A.browser.version,10)<=8){K.maxHeight-=40}var G={top:9,left:-7};return{displayAbove:false,popupCss:K,arrowCss:G}}function B(){return"M8,16 L0,8,8,0"}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-quicklinks-min.js' */
(function(A){if(RW.sidebar==undefined){RW.sidebar={}}RW.sidebar.quickLinksObject=function(D,J,E){var L=A(A("#rw_items_template").html());var S=A(A("#rw_icon_content_item_template").html());var P=A("<div class='rw_quick_links_container'></div>");var C=L.clone();var Q;var I;var H;var M=A("<h5>"+"Space shortcuts"+"</h5>");var T=A("#rw_sidebar_icon_quicklinks");var O=A(RW.Templates.loader({type:"circle",bg:"gray"})).clone();var N=contextPath+"/rest/ia/1.0/link/";var U=false;var B=false;P.bind("loaded",function(W,V){if(!B){B=true;if(V>0||E){D.prepend(P);P.prepend(M);P.append(O.hide());P.append(C.addClass("rw_quick_links").attr("id","rw_quick_links"));if(E){Q=A('<a class="rw_configure_button rw_button_discrete"><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>');P.prepend(Q);Q.click(function(){F()})}}}});function R(W){var V=S.clone();V.addClass("acs-nav-item "+W.styleClass);A(".rw_item_icon",V).addClass("icon");A(".rw_item_content",V).html(RW.htmlEncode(W.title)).addClass("rw_has_icon");V.attr("data-id",W.id);if(U){var X=A('<span class="rw_delete" data-tooltip="'+"Remove link"+'"></span>');A("a",V).before('<span class="rw_move"></span>');A("a",V).before(X);X.click(function(){K.deleteLink(A(this).parent().attr("data-id"));A(this).attr("data-tooltip","");RW.removeTooltip()})}else{A("a",V).attr("href",W.url)}return V}function F(){Q.hide();if(I==undefined){I=A('<button class="rw_done_button aui-button aui-button-primary ">'+"Done"+"</button>");P.append(I);I.click(function(){G()})}else{I.show()}if(H==undefined){H=A('<button class="rw_add_button aui-button">'+"Add link"+"</button>");P.append(H);H.click(function(){RW.sidebar.linkAdapter.hijackLinkBrowser();Confluence.Editor.LinkBrowser.open();A("#recentlyviewed-panel-id").click()})}else{H.show()}C.addClass("rw_configure");U=true;K.refreshLinks()}function G(){Q.show();H.hide();I.hide();C.removeClass("rw_configure");U=false;K.refreshLinks()}this.getLinks=function(){O.show();A.ajax({type:"GET",url:N+"quick?spaceKey="+J,dataType:"json",cache:false,success:function(V){O.hide();if(V.length>0){A.each(V,function(){C.prepend(R(this))});T.removeClass("rw_hidden")}else{if(E){if(U){C.append('<span class="rw_help">'+"Click \"Add link\" to add links to the sidebar."+"</span>")}else{P.append('<span class="rw_help">'+AJS.format("Here you can add shortcut links to the most important content for your team or project. \u003ca href=\"{0}\" class=\"{1}\"\u003eConfigure sidebar\u003c/a\u003e.","","rw_configure_link")+"</span>");A(".rw_configure_link",P).click(function(W){F();W.preventDefault()})}}T.addClass("rw_hidden")}P.trigger("loaded",[V.length])},error:function(V){}}).done(function(){if(U){var W={},V;C.sortable({update:function(X,Y){V=Y.item.next();if(!V.length){W.position="first"}else{W.after=N+V.attr("data-id")}W.spaceKey=J;K.moveLink(Y.item.attr("data-id"),W)}}).disableSelection();RW.applyTooltip("#rw_quick_links .rw_delete")}})};this.addLink=function(V){A.ajax({type:"POST",url:N,data:A.toJSON(V),dataType:"json",contentType:"application/json",success:function(W){K.refreshLinks()}})};this.deleteLink=function(W){var V={};V.spaceKey=J;A.ajax({type:"DELETE",url:N+W+"?spaceKey="+J,dataType:"json",contentType:"application/json",success:function(X){K.refreshLinks()}})};this.refreshLinks=function(){C.html("");A(".rw_help",P).remove();K.getLinks()};this.moveLink=function(W,V){A.ajax({type:"POST",url:N+W+"/move",dataType:"json",contentType:"application/json",data:JSON.stringify(V),complete:function(){},success:function(X){},error:function(X){}})};if(E){RW.sidebar.quickLinks=this}var K=this;return this};RW.sidebar.linkAdapter={setLink:function(D){var C=AJS.Meta.get("context-path");var E=Confluence.unescapeEntities(D.getHtml());var B={spaceKey:AJS.Meta.get("space-key"),pageId:D.attrs["data-linked-resource-id"],customTitle:E==D.getDefaultAlias()?"":E,url:D.attrs.href};RW.sidebar.quickLinks.addLink(B)},getLink:function(){return Confluence.Link.fromData({attrs:{},body:{isEditable:true,isImage:false,html:"",imgName:"",text:""}})},hijackedLinkBrowser:false,hijackLinkBrowser:function(){var B=RW.sidebar.linkAdapter;if(!B.hijackedLinkBrowser){B.storeBookmark=AJS.Rte.BookmarkManager.storeBookmark;B.restoreBookmark=AJS.Rte.BookmarkManager.restoreBookmark;AJS.Rte.BookmarkManager.storeBookmark=A.noop;AJS.Rte.BookmarkManager.restoreBookmark=A.noop;B.oldLinkAdapter=Confluence.Editor.LinkAdapter;Confluence.Editor.LinkAdapter=B;B.$oldTabItems=A("#link-browser-tab-items div");B.$oldTabItems.each(function(){var C=A(this).text();if(C!="search"&&C!="recentlyviewed"&&C!="weblink"){A(this).remove()}});B.hijackedLinkBrowser=true}},releaseLinkBrowser:function(){var B=RW.sidebar.linkAdapter;if(B.hijackedLinkBrowser){AJS.Rte.BookmarkManager.storeBookmark=B.storeBookmark;AJS.Rte.BookmarkManager.restoreBookmark=B.restoreBookmark;A("#link-browser-tab-items").empty().append(B.$oldTabItems);Confluence.Editor.LinkAdapter=B.oldLinkAdapter;B.hijackedLinkBrowser=false}}};AJS.bind("closed.link-browser",function(){if(RW.sidebar.linkAdapter.hijackedLinkBrowser){RW.sidebar.linkAdapter.releaseLinkBrowser()}});AJS.bind("updated.link-browser-recently-viewed",function(){var C=AJS.Meta.get("page-title"),B=AJS.Meta.get("space-name");if(C&&B){A("#insert-link-dialog .recently-viewed-panel .data-table tr").each(function(){var D=A(this);if(D.find(".title-field").text()==C&&D.find(".space-field").text()==B){D.click()}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/user-settings-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(B){var A;AJS.toInit(function(){if(B("#rw_personal_first_time").html()=="true"){RW.showUserSettingsPopup()}});RW.closeUserSettingsDialog=function(){A.remove();window.location.reload();return true};RW.closeUserSettingsDialogWithNoReload=function(){A.remove();return true};RW.showUserSettingsPopup=function(){A=RW.openIframeDialog(contextPath+"/originaltheme/dialog/users/edit-user-settings.action?","User Configuration","admin")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/im-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(D){var C="https://api.hipchat.com/v1/users/show";var O="https://api.hipchat.com/v1/users/list";var J="https://api.hipchat.com/v1/rooms/list";var K="https://api.hipchat.com/v1/rooms/show";var E;var P=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/";var B=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/";var M=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/icon_openroom_dark.png";var L;var I;var A=5;var H;AJS.toInit(function(){RW.initHipchatStatus();D(self).bind("hover-user.open",function(S,R){N(R)})});RW.initHipchatStatus=function(){RW._.each(D(".rw_hipchat_detail_wrapper"),function(R){G(R)})};function N(T){if(T==undefined){return false}var U=D(".confluence-userlink",T.target).attr("data-username");var R=T.target;var S="<a class='rw_user_dashboard_link' href='"+contextPath+"/users/view-user-dashboard.action?username="+U+"'>"+"User dashboard"+"</a>";D(".actions",R).before(S);D.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/imaccount",data:{username:U},type:"GET",dataType:"json",cache:false,success:function(W){var X=W.skypeAccount;var Z=W.hipchatAccount;var Y;var V;if(W.isUsingExternHipChat){V=true;D.get(contextPath+"/rest/hipchatproxy/1/user/show?user_id="+encodeURIComponent(W.email),function(a){if(a.error!=undefined&&a.error.code==404){V=false}},"json").done(function(){Q(X,R,V)})}else{if(Z!=undefined&&Z!=""){D.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/hipchat/user/show?user-id="+Z,dataType:"json",cache:false,success:function(a){if(a.name!=null){V=true}else{V=false}F(Z,a.name,a.status,a.statusMessage,R);Q(X,R,V)},})}else{Q(X,R,false)}}},})}function Q(T,S,V){if(T!=undefined&&T!=""){var R="rw_vcard_im";if(V){R+=" rw_second"}var U='<a class="'+R+'" href="skype:'+T+'?chat" title="Skype"><img width="16" height="16" alt="" style="border: none;" src="http://mystatus.skype.com/smallicon/'+T+'"></a></div>';D(".vcard",S).prepend(U)}}function F(W,S,R,V,U){if(W!=undefined&&W!=""){var T='<span class="rw_vcard_im rw_icon_container_10 rw_icon_hipchat_'+R+'"';if(V!=null&&V!=""){T+=" title='HipChat - "+S+" : "+V+"'"}else{T+=" title='HipChat'"}T+="></span>";D(".vcard",U).prepend(T)}}function G(S){var T=D("#rw_hipchat_icon",S);if(T.length>0){var U=D("#rw_hipchat_username",S).html();var R=true;D.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/hipchat/user/show?user-id="+U,dataType:"json",cache:false,success:function(V){if(V.name!=null){T.append('<span class="rw_icon_container_10 rw_icon_hipchat_'+V.status+'" ></span>');if(V.statusMessage!=null&&V.statusMessage!=""){T.attr("title","HipChat - "+V.name+": "+V.statusMessage)}else{T.attr("title","HipChat - "+V.name)}if(V.userId!==undefined){D("#rw_go_to_hipchat_button",S).attr("href","https://www.hipchat.com/people/show/"+V.userId)}}}})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/legacy/twitter-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(F){var B="https://api.twitter.com/1/statuses/user_timeline.json?include_rts=true";var J="http://search.twitter.com/search.json";var L="http://twitter.com";var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var V;var C;var X;var H=null;var Y;var O;var M;var N=F("<div class='rw_info_box'></div>");AJS.toInit(function(){RW.initTwitter()});RW.initTwitter=function(){var a=F("#main .rw_twitter_macro_container");if(a.length>0){C=F(F("#rw_twitter_wrapper_template").html());X=F(F("#rw_twitter_item").html());H=F(F("#rw_twitter_avatar").html());Y=F(F("#rw_twitter_loader_template").html());V=F(F("#rw_twitter_wrapper_template").html());O=F(F("#rw_twitter_load_more_template").html());M=F(F("#rw_confluence_status_item_template").html());for(var Z=0;Z<a.length;++Z){RW.initModule(a.eq(Z))}}};RW.initModule=function(a){var e=F(a).find("#rw_twitter_max_id").html();var g=F(a).find("#rw_twitter_username").html();var f=F(a).find("#rw_twitter_count").html();var d=F(a).find("#rw_twitter_hashtag").html();var b=F(a).find("#rw_twitter_include_activitystream").html();var c=F(a).find("#rw_twitter_confluence_username").html();var Z=Y.clone();if(F(a).find("#rw_load_more_twitter_link").length>0){F(a).find("#rw_load_more_twitter_link").find(".rw_load_more_text").html("");F(a).find("#rw_load_more_twitter_link").find(".rw_loader_128_image").show()}else{F(a).append(Z)}if(d){I(d,f,a,c,b,e,Z)}else{W(g,f,a,c,b,e,Z)}};function T(Z){Z="  "+Z;Z=Z.replace(/http:\/\/\S+/g,'<a href="$&" target="_blank">$&</a>');Z=Z.replace(/https:\/\/\S+/g,'<a href="$&" target="_blank">$&</a>');Z=Z.replace(/(\s)+(#[A-Za-z������0-9\-\_]+)/g,' <a href="http://twitter.com/$2" target="_blank">$2</a>');Z=Z.replace(/(\s)+(@[A-Za-z�����0-9\-\_]+)/g,' <a href="http://twitter.com/$2" target="_blank">$2</a>');Z=Z.substring(1);return Z}function G(a){var b=a.split(" ");var Z=b[3].split(":");return(Date.UTC(b[5],E(b[1]),b[2],Z[0],Z[1],Z[2],0))}function A(a){var b=a.split(" ");var Z=b[4].split(":");return(Date.UTC(b[3],E(b[2].split(",")[0]),b[1],Z[0],Z[1],Z[2],0))}function E(a){for(var Z=0;Z<P.length;++Z){if(P[Z]==a){return Z}}return -1}function I(Z,d,a,c,h,e,g){var i=d;i++;var b="";if(e>0){b="&max_id="+e}if(h=="true"){var f=new Array();Q(d,c,f,a,g)}else{g.remove();a.append(N.clone().append("No status updates found."))}}function W(b,c,Z,a,g,d,f){var e=new Array();var h=c;h++;if(b==""){if(g=="true"){var e=new Array();Q(c,a,e,Z,f)}else{f.remove();Z.append(N.clone().append("No status updates found."))}}else{if(g=="true"){var e=new Array();Q(c,a,e,Z,f)}else{f.remove();Z.append(N.clone().append("No status updates found."))}}}function Q(g,e,l,a,m){var h="status";var d="";var f="";var i="";var k=e;var Z="";var c="";var b=F(a).find("#rw_twitter_item_count").html();var j=g;F.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/?types="+h+"&category-key="+d+"&labels="+f+"&spaces="+i+"&authors="+k+"&favourite="+Z+"&network="+c+"&start-index="+b+"&max-results="+j,type:"GET",dataType:"json",cache:false,success:function(o){var p=new Array();var n=null;F.each(o.activitySets,function(){n=this.author;F.each(this.items,function(){var q=this;q.url=n.profilePic;q.spaceName=n.username;q.fullName=n.fullName;p.push(q)})});D(S(l,p,g),a,g,m)},error:function(n){if(n.status!=0){alert(n.status+" "+n.statusText)}}})}function S(Z,g,f){var e=0;var d=0;var c=new Array();for(var b=0;b<f;++b){if((Z[e]&&!g[d])||(Z[e]&&g[d]&&Z[e].timestamp>g[d].timestamp)){c.push(Z[e]);e++}else{if(g[d]){c.push(g[d]);d++}}}return c}function D(e,Z,d,j){var f;if(F("ul",Z).length>0){f=F("ul",Z)}else{f=V.clone()}var g=O.clone();g.click(function(){RW.initModule(F(this).parent())});var b=0;var c=0;var k=Z.find("#rw_twitter_item_count").html();var h=false;F.each(e,function(){if(b!=d){if(this.type=="user_tweet"||this.type=="search_tweet"){f.append(U(this));c=this.id}else{f.append(K(this));k++}h=true}b++});Z.append(f);if(h){Z.find("#rw_load_more_twitter_link").remove();Z.find("#rw_twitter_max_id").html(c);Z.find("#rw_twitter_item_count").html(k);Z.append(g)}else{Z.find("#rw_load_more_twitter_link").remove()}j.remove();try{Confluence.Binder.userHover()}catch(a){}if(k==0&&e.length==0){Z.append(N.clone().append("No status updates found."))}F("li:first-child",Z).addClass("rw_corners_top");Confluence.Binder.userHover()}function R(){var Z={type:"",imageurl:"",text:"",timestamp:"",profileurl:"",id:"","isRetweet:":""};return Z}function U(d){var a=X.clone(),b=F(".rw_twitter_profile_picture",a),c=F(".rw_twitter_content",a),Z=F(".rw_date",a),e=F(".rw_twitter_profile_link",a);b.attr("src",d.imageurl);c.html(d.text);Z.html(RW.getTimeString(d.timestamp));e.attr("href",d.profileurl);if(d.isRetweet=="true"){a.addClass("rw_retweet_item")}return a}function K(e){var a=M.clone(),Z=F(".userLogoLink",a),f=F(".userLogo",a),d=F(".rw_content_holder",a),b=F(".rw_date",a);d.html(e.title);f.attr("src",e.url);if(e.timestamp==undefined&&e.date!=undefined){e.timestamp=e.date}b.html(RW.getTimeString(e.timestamp));Z.attr("data-username",e.spaceName);var c=F("<span class='rw_small_text rw_author'>  <a href='"+contextPath+"/users/view-user-dashboard.action?username="+e.spaceName+"' class='rw_user_link url fn confluence-userlink' data-username='"+e.spaceName+"'>"+e.fullName+"</a></span>");b.after(c);Z.attr("href",contextPath+"/display/~"+e.spaceName);return a}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/key-nav-popup-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(I){var S;var Q;var P;var D;var T="categories";var X="pagetree";var Y="menu";var E="favourite";var N="activitystream";var V="topmenu";var K="allblog";var R="allblogpost";var Z="prevblog";var a="nextblog";var H="dashboardlink";var G="blogs";var C="search";var U="cancel";var B="empty";var L="sidebar";var J;var F=1000;var W=false;RW.openMainKeyNavigation=function(){W=false;J=new Date().getTime();RW.quitKeyable();if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}if(RW.inStickyBar==true){RW.hideSearchStickyBar()}S=I(I("#rw_keynavigation_item_template").html());Q=I(I("#rw_keynavigation_empty_item_template").html());P=I(I("#rw_keynavigation_row_template").html());D=I(I("#rw_keynavigation_container_template").html()).clone();var h=new Array();if(I("#rw_blog_mode").length>0){if(I("#rw_blog_posts").length>0){var b=P.clone();b.addClass("rw_row_1");b.append(A(H));if(I(".rw_blog_info_icon").length==0){b.append(A(K))}if(I("#rw_side_menu").length>0){b.append(A(L))}D.append(b);h[0]=b;var g=P.clone();g.addClass("rw_row_2");g.append(A(B));g.append(A(U));g.append(A(B));D.append(g);h[1]=g}else{if("#blogpost_container"){var e=B;var d=B;if(I("#rw_blogpost_nav").find(".rw_prev").length>0){e=Z}if(I("#rw_blogpost_nav").find(".rw_next").length>0){d=a}var b=P.clone();b.addClass("rw_row_1");b.append(A(H));b.append(A(R));if(I("#rw_side_menu").length>0){b.append(A(L))}D.append(b);h[0]=b;var g=P.clone();g.addClass("rw_row_2");g.append(A(e));g.append(A(U));g.append(A(d));D.append(g);h[1]=g}else{closeMainKeyNavigation()}}var c=P.clone();c.addClass("rw_row_3");if(RW.remoteUser!=undefined){c.append(A(E))}else{c.append(A(B))}c.append(A(C));c.append(A(N));D.append(c);h[2]=c;M(h,1,1)}else{var f=false;if(I("#rw_side_menu").length>0){f=true}var b=P.clone();b.addClass("rw_row_1");b.append(A(H));if(I("#rw_category_menu").length>0){b.append(A(T))}if(I("#rw_top_menu").length>0){b.append(A(V))}if(f){if(I("ul:visible","#rw_menu_bar").not("#rw_space_menu").length>0){b.append(A(Y))}else{if(I("#rw_menu_bar_wrapper").hasClass("rw_closed")){b.append(A(Y))}}}D.append(b);h[0]=b;var g=P.clone();g.addClass("rw_row_2");if(I("#rw_page_tree_wrapper").length>0){g.append(A(X))}else{g.append(A(B))}g.append(A(U));if(f){g.append(A(L))}else{if(I("ul:visible","#rw_menu_bar").not("#rw_space_menu").length>0){g.append(A(Y))}else{if(I("#rw_menu_bar_wrapper").hasClass("rw_closed")){g.append(A(Y))}else{g.append(A(B))}}}D.append(g);h[1]=g;var c=P.clone();c.addClass("rw_row_3");if(RW.remoteUser!=undefined){c.append(A(E))}c.append(A(N));c.append(A(C));c.append(A(G));D.append(c);h[2]=c;M(h,1,1)}I("#rw_main").append(D);D.show();I(".rw_keynavigation_item",D).bind("click",function(j){I(".rw_selected",D).removeClass("rw_selected");I(this).addClass("rw_selected");var i=I(this).parent().index();var k=I(this).index();I(document).unbind("keydown.bottomkeynav");M(h,i,k)})};RW.closeMainKeyNavigation=function(){I(document).unbind("keydown.bottomkeynav");var b=I(".rw_keynavigation_container").find(".rw_selected");if(b!=undefined){O(b)}I(".rw_keynavigation_container").remove()};RW.startMenuKeyNavigation=function(){RW.quitKeyable();var c=new Array();var e;if(parseInt(AJS.version)>=5&&I("#rw_content_menu").length>0){e=I("#rw_content_menu")}else{e=I(".rw_toolbar_menu")}var d=0;I.each(I(e).get().reverse(),function(){I.each(I(this).children("li:visible"),function(){c[d]=this;d++})});if(parseInt(AJS.version)<5){if(I("#notifications-anchor").length>0){c[d]=I("#notifications-anchor");d++}}var b=0;if(I(".rw_current",e).length>0){b=I(".rw_current",e).html();I(".rw_current",e).remove();I(c[b]).removeClass("dropdown_open")}if(c.length>0){I(c[b]).addClass("rw_selected")}I(".rw_current",e).remove();RW.inMenuBarNavigation=true;RW.scrollToElementWithOffset(I(c[b]),100);I("li",e).mouseenter(function(){RW.stopMenuKeyNavigation();I("li",e).unbind("mouseenter")});I(document).bind("keydown.menukeynav",function(h){if(h.keyCode===39){if(b<c.length-1){I(c[b]).removeClass("rw_selected");b++;I(c[b]).addClass("rw_selected")}}else{if(h.keyCode===37){if(b>0){I(c[b]).removeClass("rw_selected");b--;I(c[b]).addClass("rw_selected")}}else{if(h.keyCode===38){I("#rw_menu_bar").click();h.preventDefault()}else{if(h.keyCode===13||h.keyCode===40){if(I(c[b]).hasClass("toolbar-dropdown-menu-item")||(I(c[b]).hasClass("ajs-menu-item")||(parseInt(AJS.version)>=5&&I("#rw_content_menu").length>0))){RW.quitKeyable();I(c[b]).children("a").click();I(c[b]).append("<div style='display:none' class='rw_current'>"+b+"</div>");var f=I(c[b]).find("ul");RW.startKeyable(f,"single_column","menu_dropdown",I(f).children("li:first"))}else{if(I(c[b]).is("a")){I(c[b]).trigger("click")}else{var g=I(c[b]).children("a").data("events");if(g!=null&&typeof (g.click)!==undefined){if(g.click.length>1){I(c[b]).children("a").trigger("click")}else{if(h.keyCode===13){window.location.href=I(c[b]).children("a").attr("href")}}}else{window.location.href=I(c[b]).children("a").attr("href")}}}h.preventDefault()}}}}})};RW.startConf5MenuKeyNavigation=function(){RW.quitKeyable();var c=new Array();var e=I("ul:visible","#rw_menu_bar").not("#rw_space_menu");var d=0;I.each(I(e).get().reverse(),function(){I.each(I(this).children("li:visible"),function(){c[d]=this;d++})});var b=0;if(I(".rw_current",e).length>0){b=I(".rw_current",e).html();I(".rw_current",e).remove();I(c[b]).removeClass("dropdown_open")}if(c.length>0){I(c[b]).addClass("rw_selected")}I(".rw_current",e).remove();RW.inMenuBarNavigation=true;RW.scrollToElementWithOffset(I(c[b]),100);I("li",e).mouseenter(function(){RW.stopMenuKeyNavigation();I("li",e).unbind("mouseenter")});I(document).bind("keydown.menukeynav",function(h){if(h.keyCode===39){if(b<c.length-1){I(c[b]).removeClass("rw_selected");b++;I(c[b]).addClass("rw_selected")}}else{if(h.keyCode===37){if(b>0){I(c[b]).removeClass("rw_selected");b--;I(c[b]).addClass("rw_selected")}}else{if(h.keyCode===38){I("#rw_menu_bar").click();h.preventDefault()}else{if(h.keyCode===13||h.keyCode===40){if(I(c[b]).hasClass("toolbar-dropdown-menu-item")||(I(c[b]).hasClass("ajs-menu-item"))){RW.quitKeyable();var f=I("#action-menu").find("ul");I(c[b]).children("a").click();I(c[b]).append("<div style='display:none' class='rw_current'>"+b+"</div>");I(".assistive",f).hide();RW.startKeyable(f,"single_column","menu_dropdown",I(f).children("li:first"))}else{var g=I(c[b]).children("a").data("events");if(g!=null&&typeof (g.click)!==undefined){I(c[b]).children("a").trigger("click")}else{window.location.href=I(c[b]).children("a").attr("href")}}h.preventDefault()}}}}})};RW.stopMenuKeyNavigation=function(){I(document).unbind("keydown.menukeynav");I(".rw_toolbar_menu").find(".rw_selected").removeClass("rw_selected")};function O(c){var b=I(c).children(".rw_keynavigation_item_target").html();if(b==U){if(new Date().getTime()-J<F&&!W){if(I("#rw_menu_bar").length>0&&I("#rw_category_menu").length>0){b=T}}}if(b==T){if(RW.inCategoryKeyNavigation){RW.quitCategoryKeyNavigation()}else{RW.startCategoryKeyNavigation()}}else{if(b==Y){if(I("#rw_menu_bar_button").length>0&&I("#rw_menu_bar_wrapper").hasClass("rw_closed")){I("#rw_menu_bar_button").click()}if(parseInt(AJS.version)>=5){RW.startConf5MenuKeyNavigation()}else{RW.startMenuKeyNavigation()}}else{if(b==X){if(RW.inPageTree){RW.startPageTreeNavigation()}}else{if(b==E){if(RW.inFavPageAndSpace){RW.hideFavourite()}else{RW.showFavourite()}}else{if(b==V){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu(true)}}else{if(b==N){if(RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{RW.showActivitiyStream()}}else{if(b==R){I("#rw_blogpost_nav").find(".rw_all").click()}else{if(b==a){I("#rw_blogpost_nav").find(".rw_next").click()}else{if(b==Z){I("#rw_blogpost_nav").find(".rw_prev").click()}else{if(b==K){window.location.href=contextPath+"/blog"}else{if(b==H){window.location.href=contextPath+"/homepage.action"}else{if(b==G){window.location.href=contextPath+"/blog"}else{if(b==C){RW.showSearch()}else{if(b==L){RW.sideMenu.startKeyNav()}}}}}}}}}}}}}}}function A(b){var c;if(b==null||b==B){c=Q.clone()}else{c=S.clone();I(c).children(".rw_keynavigation_item_target").html(b);I(c).children(".rw_item_content").html(AJS.I18n.getText("rw.keynav."+b));c.attr("id","rw_navigation_item_"+b)}return c}function M(d,f,h){var j=d[f];var e=I(".rw_keynavigation_item, .rw_keynavigation_empty_item",j);var i=I(".rw_keynavigation_item",j);var b=I(".rw_keynavigation_empty_item",j);var c;if(b.length==1&&I(b.get(0)).index()==2){c=0}else{c=e.length-i.length}h=h-c;if(h>=i.length){h=i.length-1}if(h<0){h=0}var g=i[h];I(g).addClass("rw_selected");I(document).bind("keydown.bottomkeynav",function(l){if(l.keyCode===78){return }if(l.keyCode===13){RW.closeMainKeyNavigation();return }I(".rw_selected",D).removeClass("rw_selected");if(l.keyCode===38){W=true;if(f==0){I(g).addClass("rw_selected")}else{var k;if(e.length>2&&I(e[0]).attr("id")==I(g).attr("id")){k=0}else{if(e.length>2&&I(e[e.length-1]).attr("id")==I(g).attr("id")){k=d[f-1].children("div").length-1}else{k=Math.floor(d[f-1].children("div").length/2)}}M(d,f-1,k)}l.preventDefault()}else{if(l.keyCode===39){W=true;if((h+1)<i.length){h=h+1;I(g).removeClass("rw_selected");g=i[h];I(g).addClass("rw_selected")}else{I(g).addClass("rw_selected")}}else{if(l.keyCode===37){W=true;if(h>0){h=h-1;I(g).removeClass("rw_selected");g=i[h];I(g).addClass("rw_selected")}else{I(g).addClass("rw_selected")}}else{if(l.keyCode===40){W=true;if(d.length>(f+1)){I(document).unbind("keydown.bottomkeynav");var k;if(e.length>2&&I(e[0]).attr("id")==I(g).attr("id")){k=0}else{if(e.length>2&&I(e[e.length-1]).attr("id")==I(g).attr("id")){k=d[f+1].children("div").length-1}else{k=Math.floor(d[f+1].children("div").length/2)}}M(d,f+1,k)}else{I(g).addClass("rw_selected")}l.preventDefault()}else{if(l.keyCode===13){RW.closeMainKeyNavigation()}}}}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/breadcrumbs-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Breadcrumbs==="undefined"){RW.Breadcrumbs={}}(function(F){var L=true;var G=true;var B;var N;var I=F('<span class="rw_css_arrow_right"></span><span class="rw_css_arrow_right_border"></span>');var P=F('<span class="rw_css_arrow_left"></span><span class="rw_css_arrow_left_border"></span>');var M=F('<span class="rw_pointer"><span></span></span>');var A;var J;AJS.toInit(function(){var Q=F("#rw_main");var R=F("#rw_breadcrumbs_link",Q);if(R.length>0){AJS.InlineDialog(R,"rw_breadcrumbs_dialog",function(T,S,U){J=undefined;N=F(F("#rw_icon_content_item_template").html());A=F(RW.Templates.loader({type:"circle",bg:"gray"}));T.html(A.clone());K(AJS.params.pageId,T);U()},{width:700,hideDelay:null})}});function K(R,Q){F.ajax({url:contextPath+"/rest/originaltheme/1.0/page/"+R+"/breadcrumbs",type:"GET",cache:false,success:function(S){var U=F(F("#rw_section_template").html()).clone();U.addClass("rw_breadcrumb_list");Q.html(U);H(U);if(S.categories!=null&&S.categories!=undefined){D(U,S.categories)}C(U,S.space);E(U,S.pages);var T=F("li",U).last();T.addClass("rw_active")},error:function(S){}})}function H(Q){var R=N.clone();F("span.rw_item_content",R).html("Dashboard");F("span.rw_item_icon",R).addClass("rw_icon_container_20 rw_icon_dashboard");F("a",R).attr("href",contextPath+"/dashboard.action").append(I.clone()).attr("id","rw_breadcrumb_dashboard").attr("title","Dashboard");Q.append(R.addClass("rw_first"))}function C(Q,S){var R=N.clone();F("span.rw_item_content",R).html(S.name);F("span.rw_item_icon",R).addClass("rw_icon_container_20 rw_icon_space");F("a",R).attr("href",contextPath+"/display/"+S.key).append(I.clone()).attr("id","rw_breadcrumb_space_"+S.key).attr("title",RW.htmlDecode(S.name));Q.append(R);O(R)}function D(Q,R){var S=F("#rw_category_menu_parameters #rw_disable_subdashboards").html();F.each(R,function(U){var T=N.clone();F("span.rw_item_content",T).html(RW.htmlEncode(this.name));F("span.rw_item_icon",T).remove();if(U==0||S==="false"){F("a",T).attr("href",contextPath+"/category/"+this.nameKey).append(I.clone()).attr("id","rw_breadcrumb_category_"+this.nameKey).attr("title",this.name)}else{F("a",T).append(I.clone()).attr("id","rw_breadcrumb_category_"+this.nameKey).addClass("rw_no_link")}Q.append(T);O(T)})}function E(R,Q){F.each(Q,function(){var S=N.clone();F("span.rw_item_content",S).html(this.name);F("span.rw_item_icon",S).remove();if(this.url!=undefined){F("a",S).attr("href",this.url).attr("title",RW.htmlDecode(this.name))}else{F("a",S).addClass("rw_no_link")}F("a",S).append(I.clone()).attr("id","rw_breadcrumb_page_"+this.id);R.append(S);O(S)})}function O(S){var Q=S.offset().top;if(J!=undefined&&Q!=J){S.addClass("rw_new_row");F("a",S).append(P.clone()).append(M.clone());var R=S.prev();R.addClass("rw_last");F("a",R).append(M.clone())}J=Q}RW.Breadcrumbs.displayInSimpleMenu=function(){if(F("#rw_simple_menu_breadcrumbs").length>0){J=undefined;N=F(F("#rw_icon_content_item_template").html());A=F(RW.Templates.loader({type:"circle",bg:"gray"}));F("#rw_simple_menu_breadcrumbs").html(A.clone());K(AJS.params.pageId,F("#rw_simple_menu_breadcrumbs"))}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/label-popup-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(G){var K=0;var H=10;var M=0;var N=10;var D;var L;var B;var F;function A(U,a,V){var T=RW.getPopupWidth();var Y=RW.getPopupHeight();var b=70;if(T>1200){T=1200}var W=new AJS.Dialog({width:T,height:Y,id:"rw_popup_dialog"});W.addButton("Classic Label View",function(){window.location=V},"rw_left");W.addButton("Close",function(){W.remove();RW.hideLoader()});var Z="All content with label \u003cb\u003e{0}\u003c/b\u003e.".replace("{0}",a);Z=Z.replace("<b>","");Z=Z.replace("</b>","");W.addHeader(Z,"");L=G(G("#rw_section_with_heading_template").html()).clone();var P=L.clone();P.addClass("rw_labels_section");G("h2",P).html("Pages");G("ul",P).addClass("rw_items rw_content_list");var S=L.clone();S.addClass("rw_labels_section");G("h2",S).html("Blog Posts");G("ul",S).addClass("rw_items rw_content_list");var O=G(G("#rw_board_template").html()).clone();var X=G(G("#rw_board_column_template").html());var R=X.clone();var Q=X.clone();R.css("width","50%");Q.css("width","50%");if(U){R.append(S);Q.append(P)}else{R.append(P);Q.append(S)}O.append(R);O.append(Q);W.addPanel("",O,"");W.show();D=G(G("#rw_icon_content_item_template").html());B=G(RW.Templates.loader({type:"circle",bg:"gray"}));F=G(G("#rw_more_button_template").html());C(a,K,H,S,true,F.clone());I(a,M,N,P,true,F.clone())}function C(R,V,O,P,T,U){var S=G(".rw_items",P);var Q=B.clone();S.append(Q);G.ajax({url:contextPath+"/rest/originaltheme/1.0/label/blogpost",type:"GET",dataType:"json",data:{label:R,"start-index":V,"max-results":O},cache:false,success:function(W){Q.remove();if(W.blogPosts!=undefined&&W.blogPosts.length>0){G.each(W.blogPosts,function(){E(this,S,"blogpost")});G("li:even",S).addClass("rw_alternating")}else{S.append("<div class='rw_info_box'>"+"No items found"+"</div>")}if(T&&W.blogPosts.length==O){P.append(U);J(R,P,U,C,V,O)}if(W.blogPosts.length==O){U.show()}},error:function(W){if(W.status!=0){navigationContainer.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}})}function I(Q,V,O,S,T,U){var R=G(".rw_items",S);var P=B.clone();R.append(P);G.ajax({url:contextPath+"/rest/originaltheme/1.0/label/page",type:"GET",dataType:"json",data:{label:Q,"start-index":V,"max-results":O},cache:false,success:function(W){P.remove();if(W.pages!=undefined&&W.pages.length>0){G.each(W.pages,function(){E(this,R,"page")});G("li:even",R).addClass("rw_alternating")}else{R.append("<div class='rw_info_box'>"+"No items found"+"</div>")}if(T&&W.pages.length==O){S.append(U);J(Q,S,U,I,V,O)}if(W.pages.length==O){U.show()}},error:function(W){if(W.status!=0){navigationContainer.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}})}function E(P,O,U){var T=D.clone(),Q=G(".rw_item_icon",T),S=G(".rw_item_content",T),R=G("a",T);Q.html('<span class="rw_icon_container_16 icon-'+U+'"></span>');S.html(P.title+" <span class='rw_small_text'>("+P.spaceName+")</span>");R.attr("href",P.url);O.append(T)}function J(R,Q,S,P,U,O){var T=U;S.click(function(){S.hide();T=T+O;var V=P(R,T,O,Q,false,S)})}RW.initLabelClickEvent=function(O,P){O.click(function(S){S.preventDefault();var R=S.target.parentNode.className;if(S.target.nodeName=="SPAN"&&(S.target.parentNode.className).indexOf("show-labels-editor")==-1&&(S.target.parentNode.className).indexOf("no-labels-message-container")==-1){var Q=S.target.innerHTML;A(P,Q,S.target.parentNode.href)}else{if(S.target.nodeName=="A"&&(S.target.parentNode.className).indexOf("show-labels-editor")==-1&&(S.target.parentNode.className).indexOf("no-labels-message-container")==-1){var Q=S.target.innerHTML;A(P,Q,S.target.href)}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/refinedwiki/scripts/refinedwiki.utils-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(B){var C;var A=B('<div><iframe id="rw_popup_iframe_id" onload="RW.hideLoader()" allowTransparency="true" frameBorder="0" class="rw_popup_iframe"></iframe></div>');AJS.toInit(function(){});RW.validateAjaxResponse=function(D){if(D.substring(0,4)=="RWAR"){return D.substring(4)}else{return"<div class='rw_warning_box'><a href='"+contextPath+"/login.action?os_destination="+encodeURIComponent(window.location)+"'>"+"Not logged in"+"</a></div>"}};RW.showSmallLoader=function(D){B(D).after("<div style='padding-left:5px;' class='rw_loader_16_image'></div>");B(D).remove()};RW.showLoader=function(){if(B("#rw_top_loader").length===0){B("body").prepend('<div id="rw_top_loader"><div id="rw_top_loader_container"><div class="rw_loader_32_image"></div></div></div>')}else{B("#rw_top_loader").show()}};RW.hideLoader=function(){B("#rw_top_loader").hide()};RW.showDiv=function(D){B("#"+D).show();B("#"+D+"_show").hide();B("#"+D+"_hide").show()};RW.hideDiv=function(D){B("#"+D).hide();B("#"+D+"_show").show();B("#"+D+"_hide").hide()};RW.getPopupWidth=function(){var D=B(window).width();D=D*0.9;if(D<1020){D=1020}return D};RW.getPopupHeight=function(){var D=B(window).height();D=D*0.9;if(D<600){D=600}else{if(D>900){D=900}}return D};RW.scrollToElement=function(D){RW.scrollToElementWithOffset(D,0)};RW.scrollToElementWithOffset=function(F,I){if(F!=undefined&&F.length>0){var E=B(window).scrollTop();var G=E+B(window).height();var D=F.offset().top;var H=D+F.height();if(D<E||H>G){window.scroll(0,F.offset().top-I)}}};RW.scrollToElementWithOffsetAndDelay=function(F,J,I,K){if(F!=undefined&&F.length>0){var E=B(window).scrollTop();var G=E+B(window).height();var D=F.offset().top;var H=D+F.height();if(D<E||H>G){RW.isScrolling=true;if(K!=undefined){K.before.call()}B("html,body").animate({scrollTop:(F.offset().top-J)},{duration:I,complete:function(){RW.isScrolling=false;if(K!=undefined){K.complete.call()}},error:function(){RW.isScrolling=false;if(K!=undefined){K.error.call()}}})}}};RW.clearActiveMenuItems=function(D){B(".rw_active",D).removeClass("rw_active");B(".rw_active_dd",D).removeClass("rw_active_dd")};RW.setActiveMenuItem=function(D){D.addClass("rw_active")};RW.setActiveMenuItemDD=function(D){D.addClass("rw_active_dd")};RW.openIframeDialog=function(D,K,I,G){RW.showLoader();var L="rw_popup_dialog";if(I=="admin"){L="rw_popup_dialog_admin"}var H=RW.getPopupWidth();var J=RW.getPopupHeight();if(H>1200){H=1200}var E=new AJS.Dialog({width:H,height:J,id:L});if(K!=undefined||K!=""){E.addHeader(K)}E.popup.element.addClass("rw_has_iframe");var F=A.clone();B("iframe",F).attr("src",D);E.addPanel("",F,"");if(G==undefined||G==false){E.addLink("Close",function(){E.remove();RW.hideLoader()},"rw_right")}E.show();if(RW.confluenceVersion<5){E.popup.element.height(E.popup.element.height()-20)}B("iframe",F).attr("height",B(".dialog-panel-body",E.popup.element).height());return E};RW.openIframeDialogWithPanels=function(G,J,I){RW.showLoader();var E="rw_popup_dialog";if(I=="admin"){E="rw_popup_dialog_admin"}var H=RW.getPopupWidth();var F=RW.getPopupHeight();if(H>1200){H=1200}var D=new AJS.Dialog({width:H,height:F,id:E});if(J!=undefined||J!=""){D.addHeader(J)}D.popup.element.addClass("rw_has_iframe");D.addLink("Close",function(){D.remove();RW.hideLoader()},"rw_right");D.show();B.each(G,function(L){var K=A.clone();D.addPanel(this.title,K,"rw_dialog_panel",L+1);B("iframe",K).attr("src",this.url);B("iframe",K).attr("height",B(".dialog-panel-body",D.popup.element).height())});return D};RW.htmlEncode=function(D){return B("<div/>").text(D).html()};RW.htmlEncodeUrl=function(D){var E=B("<div/>").text(D).html();return E.replace("&amp;","&")};RW.htmlDecode=function(D){return B("<div/>").html(D).text()};RW.bindLink=function(F,E,G,D){if(G){F.attr("target","_blank")}F.attr("href",E).click(function(H){if(D.hasClass("rw_key_nav")){if(G){window.open(E)}else{window.location=E}H.stopPropagation();return false}else{return true}})};RW.launchUrlInBackground=function(D,E){AJS.safe.ajax({url:D,data:{},type:"POST",success:function(F){if(E){window.location.reload()}},error:function(F){}})};RW.openImage=function(D){if(C==undefined){C=new RW.ui.viewer()}var E=B("<img />");E.attr("src",D);C.content(E);E.bind("load",function(){var F=B(this).width()+30;if(F<100){F=100}var G=RW.getPopupWidth();if(F>G){F=G;B(this).width(F-30)}C.container.css("width",F);var H=RW.getPopupHeight();C.container.css("margin-top",(B(window).height()-H)/2-10)})};RW.playMovie=function(G){if(C==undefined){C=new RW.ui.viewer()}C.content('<iframe width="960" height="540" src="https://www.youtube.com/embed/'+G+'" frameborder="0" allowfullscreen></iframe>');var D=960+30;var E=RW.getPopupWidth();if(D>E){D=E;B(this).width(D-30)}C.container.css("width",D);var F=RW.getPopupHeight();C.container.css("margin-top",(B(window).height()-F)/2-10)};RW.getTimeString=function(F){if(typeof F=="string"){return F}var D=new Date();var G=D.getTime()-F;if(G<60*60*1000){var E=Math.floor(G/(60*1000));if(E==1){return "1 minute ago."}else{return AJS.format("{0} minutes ago.",["first_parameter"]).replace("first_parameter",E)}}else{if(G<24*60*60*1000){hours=Math.floor(G/(60*60*1000));if(hours==1||hours==0){return "1 hour ago."}else{return AJS.format("{0} hours ago.",["first_parameter"]).replace("first_parameter",hours)}}else{if(G<100*24*60*60*1000){days=Math.floor(G/(24*60*60*1000));if(days==1||days==0){return "1 day ago."}else{return AJS.format("{0} days ago.",["first_parameter"]).replace("first_parameter",days)}}else{return(new Date(F-0)).toLocaleDateString()}}}};RW.getDateString=function(G){if(typeof G=="string"){return G}var F=new Date(G);var E=new Date();var D=new Date();D.setDate(D.getDate()+1);var H=new Date();H.setDate(H.getDate()-1);if(E.toLocaleDateString()==F.toLocaleDateString()){return "rw.global.today"}else{if(D.toLocaleDateString()==F.toLocaleDateString()){return "rw.global.tomorrow"}else{if(H.toLocaleDateString()==F.toLocaleDateString()){return "rw.global.yesterday"}else{return(new Date(G-0)).toLocaleDateString()}}}};RW.renderStatusUpdate=function(D){var E=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;D=D.replace(E,"<a href='$1'>$1</a>");var F=/((^)#[A-Za-z0-9\-\_]+)/g;D=D.replace(F,"<a href='"+contextPath+"/label/$1'>$1</a>");var F=/((\s)#[A-Za-z0-9\-\_]+)/g;D=D.replace(F," <a href='"+contextPath+"/label/$1'>$1</a>");D=D.replace("/label/#","/label/");return D};RW.applyTooltip=function(D,F){var E={live:true,gravity:"w",title:"data-tooltip",delayIn:250,delayOut:0,offset:5};if(RW.confluenceVersion>=4.4){B(D).tooltip(F?B.extend(E,F):E)}};RW.applyTooltipToElement=function(D,F){var E={live:true,gravity:"w",title:"data-tooltip",delayIn:250,delayOut:0,offset:5};if(RW.confluenceVersion>=4.4){D.tooltip(F?B.extend(E,F):E)}};RW.removeTooltip=function(){B(".tipsy").remove();setTimeout(function(){B(".tipsy").remove()},250)};RW.adjustIconTextSpace=function(E){var D=B(".rw_item_icon",E).length;if(D>0&&D<B("li",E).length){B("li",E).each(function(){if(B(".rw_item_icon",this).length===0){B("a",this).prepend('<span class="rw_item_icon"></span>')}})}};RW.message=function(I,G){var H={delay:4000,type:"success"};var F=I?B.extend(H,I):H;if(B("#rw_message_container").length===0){B("body").prepend('<div id="rw_message_container"></div>')}var E=B("#rw_message_container");E.unbind().html("");var D=B('<div class="rw_message"></div>');D.html(G).addClass("rw_"+F.type);E.append(D);E.show();E.delay(F.delay).fadeOut(function(){D.remove()})};RW.initPubSub=function(){if(RW.PubSub===undefined){RW.PubSub=RW._.extend({},RW.Backbone.Events)}};RW.colorLuminance=function(G,D){G=String(G).replace(/[^0-9a-f]/gi,"");if(G.length<6){G=G[0]+G[0]+G[1]+G[1]+G[2]+G[2]}D=D||0;var E="",H,F;for(F=0;F<3;F++){H=parseInt(G.substr(F*2,2),16);H=Math.round(Math.min(Math.max(0,H+(H*D)),255)).toString(16);E+=("00"+H).substr(H.length)}return E};RW.getLuminanceValue=function(F){F=String(F).replace(/[^0-9a-f]/gi,"");if(F.length<6){F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]}var D;var E=0;for(D=0;D<3;D++){E+=parseInt(F.substr(D*2,2),16)}return E}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/refinedwiki/scripts/refinedwiki.ui-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.ui==="undefined"){RW.ui={}}(function(B){var A;RW.ui.viewer=function(G){var F=this;var E=B(B("#rw_viewer_template").html()).clone();E.attr("id",G);var D=B(".rw_viewer_close",E);var C=B(".rw_viewer_container",E);B("body").append(E);this.show=function(){F.isOpened=true;E.show()};this.hide=function(){F.isOpened=true;E.hide()};this.showLoader=function(){B(".rw_viewer_loader",E).show()};this.hideLoader=function(){B(".rw_viewer_loader",E).hide()};this.content=function(H){E.show();F.hideLoader();B(".rw_viewer_data",E).html(H)};this.clear=function(H){B(".rw_viewer_data",E).html("")};this.obj=E;this.closeButton=D;this.container=C;this.isOpened=false;E.bind("click",function(H){F.hide()});D.bind("click",function(H){F.hide()});C.bind("click",function(H){H.stopPropagation()});B(document).keyup(function(H){if(H.keyCode==27){if(F.isOpened==true){F.hide()}}});return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/footer/footer-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(H){if(typeof RW.Footer==="undefined"){RW.Footer={}}var O="footer-column-links";var F="footer-column-logo";var A="footer-column-blogs";var S="footer-column-custom";var J=300;var N=H('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>');var L=H('<li><a><span class="rw_item_icon"></span><span class="rw_item_content"></span></a></li>');var K=H('<a class="rw_edit_button"></a>');var Q;var C;var B;AJS.toInit(function(){if(H("#rw_footer_wrapper").length>0){V()}});function V(){Q=H("#rw_footer_wrapper");C=H("#rw_footer_container");B=H("#rw_main");M();if(RW.isConfluenceAdministrator){var W=K.clone();W.attr("href",contextPath+"/admin/originaltheme/footer.action").attr("title","Edit");H("#rw_footer_container",Q).append(W)}D()}function M(){var W=C.height()+80;B.css("padding-bottom",W+100);Q.css("height",W)}function E(){var W=H("#rw_footer_columns",Q);var X=H(".rw_column",W).length;H("#rw_footer_columns_container",Q).css("max-width",X*J).show()}function D(){H.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/footer/",dataType:"json",contentType:"application/json",cache:false,success:function(W){if(W.columns!=undefined){H.each(W.columns,function(){if(this.type===O){U(this)}if(this.type===A){I(this)}})}if(W.cacheAbort){T()}},error:function(W){if(W.status!=0){console.log(W.status+" "+W.statusText)}}}).done(function(){T()})}function T(){E();M();R()}function R(){if((".rw_custom_content",Q).length>0){setInterval(function(){M()},1000)}}function U(Y){var X=H("#rw_footer_column_"+Y.nameKey,Q);var W=H("ul",X);if(X.length==0){return }var Z=false;if(Y.links!=undefined){H.each(Y.links,function(){Z=true;P(this,W)})}if(Z){if(Y.name!=undefined&&Y.name!=""){H("h3",X).html(RW.htmlEncode(Y.name))}else{H("h3",X).remove()}RW.adjustIconTextSpace(W)}else{X.remove()}}function I(X){var W=H("#rw_footer_column_"+X.nameKey,Q);var Z=H("ul",W);if(W.length==0){return }var Y=false;W.unbind("blog-url:done");W.bind("blog-url:done",function(c,b){if(b!=true){b=false}var a="max-results=5&profile-pic=true&blog-mode="+b+"&keys="+X.name;H.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/blog/post?"+a,dataType:"json",contentType:"application/json",cache:false,success:function(d){H.each(d.blogPosts,function(){Y=true;G(this,Z)})},error:function(d){if(d.status!=0){console.log(d.status+" "+d.statusText)}}}).done(function(){if(Y){if(X.title!=undefined&&X.title!=""){H("h3",W).html(RW.htmlEncode(X.title))}else{H("h3",W).remove()}RW.adjustIconTextSpace(Z)}E();M()})});if(X.selectedMode!=undefined&&X.selectedMode=="blogMode"){W.trigger("blog-url:done",true)}else{W.trigger("blog-url:done")}}function G(a,b){if(a==undefined){return }var Z=L.clone(),Y=H(".rw_item_icon",Z),X=H(".rw_item_content",Z),W=H("a",Z);X.html(a.title+"<br/><div class='rw_date'>"+a.date+"</div>");if(a.author==undefined||a.author.profilePic==undefined){Y.remove()}else{Y.html("<img src='"+a.author.profilePic+"' />")}W.attr("href",RW.htmlEncodeUrl(a.url));b.append(Z)}function P(Y,a){if(Y==undefined){return }var b=N.clone(),Z=H(".rw_item_icon",b),X=H(".rw_item_content",b),W=H("a",b);b.attr("id","rw_link_id_"+Y.id);X.html(RW.htmlEncode(Y.title));if(Y.icon==undefined){Z.remove()}else{Z.addClass("rw_icon_"+Y.icon)}if(Y.target=="_blank"){W.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');W.attr("target","_blank");X.addClass("rw_icon_right")}W.attr("href",RW.htmlEncodeUrl(Y.url));a.append(b)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/spacegroup-min.js' */
(function(A){AJS.toInit(function(){A("#rw_space_group_button").unbind("click");A("#rw_space_group_button").bind("click",function(){if(RW.confluenceVersion<5){var B=A(this);var D=A("#rw_space_group_dropdown");B.addClass("active");D.addClass("rw_open");var C=function(){B.removeClass("active");D.removeClass("rw_open");A(document).unbind("click",C)};setTimeout(function(){A(document).bind("click",C)},100)}A.ajax({url:contextPath+"/rest/originaltheme/1.0/category/"+AJS.Meta.get("abstract-category-key")+"/child",type:"GET",dataType:"json",success:function(E){for(var F in E.spaces){var G=E.spaces[F];G.url=contextPath+"/display/"+G.key}var H=RW.Templates.siblingList({ulClass:"aui-dropdown2-section",list:E});A("#rw_space_group_dropdown").html("");A("#rw_space_group_dropdown").append(H)},error:function(){}})})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/simple-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(E){var G;var I;var C=false;AJS.toInit(function(){G=E("#rw_simple_menu_button");if(G.length>0){I=E("#rw_simple_menu_dialog");G.click(function(J){E("#rw_wrapper").after(I);E("#rw_open_fullscreen, #rw_close_fullscreen").click(function(){A()});I.css("top",G.offset().top+30);I.css("right",E(window).width()-(G.offset().left+G.outerWidth()));F();if(!C){C=true;if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){E(document).keyup(function(K){if(!E(K.target).is("input, textarea, select")){if(K.which===27){A()}}})}}J.stopPropagation()});B("#shareContentLink","#inline-dialog-shareContentPopup",83);B("#watch-content-button","#inline-dialog-confluence-watch",87);I.click(function(J){J.stopPropagation()})}});function B(K,J,L){if(E(K).length>0){E(document).keyup(function(Q){if(E(J).length>0&&E(J).is(":visible")){if(L!==87&&Q.which===L&&Confluence.KeyboardShortcuts.enabled){if(!G.hasClass("active")){G.click()}var N=E(K).offset();var P=N.top+30;var O=N.left;var M=E(J);M.offset({top:P,left:O});M.addClass("rw_in_simple_menu")}}});E(K).on("click",function(N){var M=E(J);M.addClass("rw_in_simple_menu")})}}function F(){if(G.hasClass("active")){A()}else{H()}}function H(){G.addClass("active");I.show();RW.Breadcrumbs.displayInSimpleMenu();E(document).bind("click",D)}function D(J){var K=E(J.target).closest("#inline-dialog-shareContentPopup").length==1;if(!K){A()}}function A(){G.removeClass("active");I.hide();E(document).unbind("click",D)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(A){AJS.toInit(function(){A(".rw_search_macro_wrapper").each(function(C){var B=A(".rw_param_space_key",this).attr("data-value");A("#rw_searchmacro_query",this).originalThemeSearch(RW._.isEmpty(B))})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/navigation/side-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.sideMenu==="undefined"){RW.sideMenu={}}(function(H){var N,P,L,O=false,F,E=false,J="";SIDE_MENU_WIDTH_LIMIT=1100,MODE_RESPONSIVE="responsive",MODE_CLOSED="closed",MODE_OPEN="open";AJS.toInit(function(){N=H("#rw_side_menu");if(N.length>0){RW.sideMenu.bindDDEvents(H("a.rw_has_dd",N));J=N.data("mode");if(J===MODE_CLOSED){B()}else{if(J===MODE_OPEN){}else{F=H(window);F.resize(function(){if(F.width()>SIDE_MENU_WIDTH_LIMIT&&E){D()}else{if(F.width()<SIDE_MENU_WIDTH_LIMIT&&!E){B()}}});if(F.width()<SIDE_MENU_WIDTH_LIMIT&&!E){B()}}}K();H(".active",N).removeClass("active");H(".rw_item_"+N.data("active-item"),N).addClass("active")}});function K(){RW.PubSub.on("topmenu:loaded",M);RW.PubSub.on("favourite-popup:show",function(){C(H(".rw_item_favourite_content",N))});RW.PubSub.on("favourite-popup:hide",function(){M(H(".rw_item_favourite_content",N))});RW.PubSub.on("activity-popup:show",function(){C(H(".rw_item_activity_popup",N))});RW.PubSub.on("activity-popup:hide",function(){M(H(".rw_item_activity_popup",N))});RW.PubSub.on("search-popup:show",function(){C(H("#rw_search_popup_button",N))});RW.PubSub.on("search-popup:hide",function(){M(H("#rw_search_popup_button",N))});H("#notifications-anchor",N).click(function(){C(H(this));if(RW.confluenceVersion>=5.5){setTimeout(function(){H("#mw-deprecated-task-show-me",H("#notifications-miniview-iframe").contents()).unbind().click(function(){window.location=contextPath+"/plugins/inlinetasks/mytasks.action"})},1000)}})}function Q(){if(N.hasClass("rw_mode_closed")&&!N.data("closed-events-bound")){N.data("closed-events-bound",true);H(".rw_handle, #rw_side_menu_container",N).hover(function(){N.addClass("rw_open")});H(".rw_done_cover",N).mousemove(function(){N.removeClass("rw_open");A();RW.quitKeyable()})}}function B(){E=true;H("#rw_wrapper").removeClass("rw_has_side_menu");N.addClass("rw_mode_closed");Q()}function D(){E=false;H("#rw_wrapper").addClass("rw_has_side_menu");N.removeClass("rw_mode_closed")}function I(R,S){if(P!=undefined){P.hide()}var U;C(R);L=R;if(R.data("dd-bound")===undefined){R.data("dd-bound","true");var T=R.parent();U=H("nav",T);U.css("right",80);U.css("top",R.offset().top-N.offset().top+5);N.append(U.show());P=U}else{U=H("#"+R.data("dd"),N);U.show();P=U}U.click(function(V){V.stopPropagation()});if(S){setTimeout(function(){if(O===false){O=true;H(document).bind("click",A)}},100)}N.data("menu-state","active");G(R,U)}function G(R,S){if(R.attr("id")=="user-menu-link"&&RW.confluenceVersion>=5.6){H("#create-user-status-link").unbind("click");H("#create-user-status-link").bind("click",function(){A();var T=WRM.require("wr!confluence.userstatus:userstatus-resources",function(){H("#create-user-status-link").trigger("deferred.userstatus.click")});return false})}}function A(){if(P!=undefined){P.hide();M(L);N.data("menu-state","");O=false;H(document).unbind("click",A)}}function M(R){if(R!==undefined&&!R.hasClass("active")){return }H(".active",N).removeClass("active");H(".rw_item_"+N.data("active-item"),N).addClass("active")}function C(R){H(".active",N).removeClass("active");R.addClass("active")}RW.sideMenu.bindDDEvents=function(R){R.click(function(S){S.preventDefault();if(O===false){I(H(this),true)}}).hover(function(){if(N.data("menu-state")==="active"){I(H(this))}})};RW.sideMenu.startKeyNav=function(R){if(R!==undefined){}else{if(H("ul:nth-child(3) li:first-child",N).length>0){R=H("ul:nth-child(3) li:first-child",N)}else{if(H("ul:nth-child(2) li:first-child",N).length>0){R=H("ul:nth-child(2) li:first-child",N)}else{if(H("ul:first-child li:first-child",N).length>0){R=H("ul:first-child li:first-child",N)}}}}if(N.hasClass("rw_mode_closed")){N.addClass("rw_open")}RW.startKeyable(N,null,"sidebar",R)};RW.sideMenu.startDDKeyNav=function(R){var S=H("#"+R.data("dd"));RW.startKeyable(S,null,"sidebar_dd",H("div:first-child li:first-child",S))};RW.sideMenu.quitDDKeyNav=function(R){A();RW.sideMenu.startKeyNav(R)};RW.sideMenu.executeLink=function(S){RW.quitKeyable();var U=S.attr("id");var T=S.attr("href");if(U==="create-user-status-link"||U==="set-user-status-link"||U==="create-personal-space-link"||U==="keyboard-shortcuts-link"||U==="whats-new-menu-link"||U==="gadget-directory-link"||U==="confluence-about-link"||U==="view-user-history-link"){if(U==="create-user-status-link"&&RW.confluenceVersion>=5.6){A();var R=WRM.require("wr!confluence.userstatus:userstatus-resources",function(){S.trigger("deferred.userstatus.click")})}else{S.trigger("click")}}else{if(T!==undefined&&T!=="#"){if(S.attr("target")==="_blank"){window.open(T)}else{RW.showLoader();window.location=T}}else{S.trigger("click")}}if(S.hasClass("rw_has_dd")){RW.sideMenu.startDDKeyNav(S)}};RW.sideMenu.isActive=function(){if(N.length>0){if(O){return true}if(E&&N.hasClass("rw_open")){return true}if(N.hasClass("rw_key_nav")){return true}}return false};RW.sideMenu.close=function(){if(N.length>0){if(O){A()}if(E&&N.hasClass("rw_open")){N.removeClass("rw_open")}if(N.hasClass("rw_key_nav")){RW.quitKeyable()}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-popup-min.js' */
(function(B){var A;AJS.toInit(function(){if(B("#rw_search_popup_button").length>0){B("#rw_search_popup_button").click(RW.showSearch)}});RW.showSearch=function(){RW.closePopups();RW.inSearch=true;A=B(RW.Templates.searchPopup());B("#rw_main").append(A);B("#rw_popup_bg").show();A.click(function(C){C.stopPropagation()});B("#rw_search_popup_query",A).originalThemeSearch();B("#rw_search_popup_query",A).focus();setTimeout(function(){B(document).bind("click",RW.hideSearch)},100);RW.PubSub.trigger("search-popup:show")};RW.hideSearch=function(){B(document).unbind("click",RW.hideSearch);RW.inSearch=false;A.remove();B("#rw_popup_bg").hide();RW.PubSub.trigger("search-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/layoutboard.soy' */
// This file was automatically generated from layoutboard.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Layout == 'undefined') { RW.Templates.Layout = {}; }


RW.Templates.Layout.board = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board">');
  RW.Templates.Layout.toolBar(opt_data, output);
  var iLimit7 = opt_data.maxGroup;
  for (var i7 = 0; i7 < iLimit7; i7++) {
    output.append('<div class="rw_board"><div class="rw_board_row rw_board_group_', soy.$$escapeHtml(i7), '"></div></div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceBoard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board">');
  RW.Templates.Layout.toolBar(opt_data, output);
  output.append('<div class="rw_board"><div class="rw_board_row rw_board_group_0"><div class="rw_menu_settings"><span class="rw_space_setting rw_spacelogo_setting" ><input data-key="spaceLogoVisible" id="rw_spacesettings_spacelogo" type="checkbox" ', (opt_data.model.spaceLogoVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Space logo"), '</span><span class="rw_space_setting"><input data-key="spaceGroupVisible" id="rw_spacesettings_spacegroup" type="checkbox" ', (opt_data.model.spaceGroupVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Space Siblings "), '</span><span class="rw_space_setting"><input data-key="menuLayoutType" id="rw_spacesettings_menubar" type="checkbox" ', (opt_data.model.menuLayoutType == 'simple') ? 'checked' : '', '> ', soy.$$escapeHtml("Concealed menu layout"), '</span></div><div id="rw_space_section_placeholder_0"></div><div id="rw_space_section_placeholder_1"></div><div class="rw_space_settings" style="text-align:right;"><span class="rw_space_setting rw_left"><input data-key="breadcrumbsVisible" id="rw_spacesettings_breadcrumbs" type="checkbox" ', (opt_data.model.breadcrumbsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Breadcrumbs "), '</span><span class="rw_space_setting"><input data-key="favouriteVisible" id="rw_spacesettings_favourite" type="checkbox" ', (opt_data.model.favouriteVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Favourite page button"), '</span><span class="rw_space_setting"><input data-key="watchVisible" id="rw_spacesettings_watch" type="checkbox" ', (opt_data.model.watchVisible) ? 'checked' : '', '>', soy.$$escapeHtml("Watch page button"), ' </span></div>');
  RW.Templates.Layout.spaceLayoutTitle(null, output);
  output.append('<div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="metaDataVisible" id="rw_spacesettings_metadata" type="checkbox" ', (opt_data.model.metaDataVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Meta data"), '</span></div><div id="rw_space_section_placeholder_2"></div>');
  RW.Templates.Layout.spaceLayoutText(null, output);
  output.append('<div id="rw_space_section_placeholder_3"></div><div class="rw_space_settings"><span class="rw_space_setting"><input data-key="likesVisible" id="rw_spacesettings_likes" type="checkbox" ', (opt_data.model.likesVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Likes"), '</span><span class="rw_space_setting"><input data-key="labelsVisible" id="rw_spacesettings_labels" type="checkbox" ', (opt_data.model.labelsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Labels"), '</span></div><div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="childrenVisible" id="rw_spacesettings_children" type="checkbox" ', (opt_data.model.childrenVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Children"), '</span></div><div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="commentsVisible" id="rw_spacesettings_comments" type="checkbox" ', (opt_data.model.commentsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Comments"), '</span></div><div id="rw_space_section_placeholder_4"></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.toolBar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml(opt_data.title), '</h1><div class="aui-buttons">');
  if (opt_data.model.type != 'space' && opt_data.model.type != 'global_space') {
    RW.Templates.Button.button({cssClass: 'rw_layout_mode_button rw_tooltip', icon: 'layout', tooltip: soy.$$escapeHtml("Edit Board Layout"), content: soy.$$escapeHtml("Board Layout")}, output);
  }
  if (opt_data.model.type != 'space') {
    RW.Templates.Button.button({cssClass: 'rw_open_attachments_button rw_tooltip', tooltip: soy.$$escapeHtml("Edit attachments for this board"), content: soy.$$escapeHtml("Attachments "), icon: 'attachment'}, output);
  }
  RW.Templates.Button.button({cssClass: 'rw_versions_button rw_tooltip', icon: 'clock', tooltip: soy.$$escapeHtml("View History"), content: soy.$$escapeHtml("Version History")}, output);
  output.append('</div>');
  if (opt_data.model.type == 'space' || opt_data.model.type == 'global_space') {
    RW.Templates.Button.button({cssClass: 'rw_template_button rw_tooltip', tooltip: soy.$$escapeHtml("View space types"), content: soy.$$escapeHtml("View space types")}, output);
  } else {
    RW.Templates.Button.button({cssClass: 'rw_template_button rw_tooltip', tooltip: soy.$$escapeHtml("Start from template"), content: soy.$$escapeHtml("Start from template")}, output);
  }
  output.append((opt_data.model.layoutBoardInfo != undefined) ? (opt_data.model.layoutBoardInfo.level == opt_data.level) ? '<div class="rw_layout_board_mode ' + ((opt_data.model.layoutBoardInfo.spaceType != undefined) ? 'rw_space_type' : 'rw_custom') + '" ' + ((opt_data.model.layoutBoardInfo.spaceType != undefined) ? 'data-space-type="' + soy.$$escapeHtml(opt_data.model.layoutBoardInfo.spaceType) + '"' : '') + '>' + (((opt_data.model.layoutBoardInfo.type == 'space' || opt_data.model.layoutBoardInfo.type == 'global_space') && opt_data.model.layoutBoardInfo.spaceType != undefined) ? soy.$$escapeHtml(opt_data.model.layoutBoardInfo.spaceType) : soy.$$escapeHtml("Custom settings")) + '<span class="rw_delete_button rw_tooltip" data-confirm="' + soy.$$escapeHtml("Are you sure you want to revert to the default settings?") + '" data-tooltip="' + soy.$$escapeHtml("Revert back to the default settings ") + '">x</span></div>' : (opt_data.level == 'global') ? '<div class="rw_layout_board_mode">' + soy.$$escapeHtml("Default settings") + '</div>' : '<div class="rw_layout_board_mode">' + soy.$$escapeHtml("Global settings ") + '</div>' : '', '</div><div class="aui-toolbar2-secondary"><div class="rw_unsaved_changes">', soy.$$escapeHtml("Unsaved changes"), '</div>');
  RW.Templates.Button.button({cssClass: 'rw_preview_button', content: soy.$$escapeHtml("Preview")}, output);
  RW.Templates.Button.button({cssClass: 'rw_save_button aui-button-primary', content: soy.$$escapeHtml("Save")}, output);
  RW.Templates.Button.button({cssClass: 'rw_select_space_type_button rw_hidden aui-button-primary', content: soy.$$escapeHtml("Save space type")}, output);
  RW.Templates.Button.button({cssClass: 'rw_cancel_button aui-button-link', content: soy.$$escapeHtml("Cancel")}, output);
  output.append('</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.boardLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_layout_mode rw_edit_section_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board" data-id="', soy.$$escapeHtml(opt_data.model.id), '"><div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml("Board Layout"), '</h1></div><div class="aui-toolbar2-secondary"><div class="rw_unsaved_changes">', soy.$$escapeHtml("Unsaved changes"), '</div>');
  RW.Templates.Button.button({cssClass: 'rw_layout_mode_done_button aui-button-primary', content: soy.$$escapeHtml("Done")}, output);
  RW.Templates.Button.button({cssClass: 'rw_layout_mode_cancel_button aui-button-link', content: soy.$$escapeHtml("Cancel")}, output);
  output.append('</div></div></div></div><div class="rw_layout_board_content"><div class="rw_layout_button_container">');
  RW.Templates.Button.add({cssClass: 'rw_add_top_section_button aui-button-link rw_tooltip', tooltip: soy.$$escapeHtml("Add section")}, output);
  output.append('</div>');
  var iLimit227 = opt_data.maxGroup;
  for (var i227 = 0; i227 < iLimit227; i227++) {
    output.append('<div class="rw_board"><div class="rw_board_group_', soy.$$escapeHtml(i227), '"></div></div>');
  }
  output.append('<div class="rw_layout_button_container">');
  RW.Templates.Button.add({cssClass: 'rw_add_bottom_section_button aui-button-link rw_tooltip', tooltip: soy.$$escapeHtml("Add section")}, output);
  output.append('<div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.boardVersions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_version_mode"><div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml("Version History"), '</h1></div><div class="aui-toolbar2-secondary">');
  RW.Templates.Button.button({cssClass: 'rw_version_mode_done_button aui-button-primary', content: soy.$$escapeHtml("Done")}, output);
  output.append('</div></div></div></div><div class="rw_layout_board_content">', (opt_data.defaultBoard) ? '<div class="rw_info_box">' + soy.$$escapeHtml("A default board is currently in use. Below you can find previous versions of this board.") + '</div>' : '');
  if (opt_data.versionsModel.versions.length > 0) {
    output.append('<ul class="rw_items rw_versions"><li class="rw_heading" ><div class="rw_item_version">', soy.$$escapeHtml("Version"), '</div><div class="rw_item_date">', soy.$$escapeHtml("Date"), '</div><div class="rw_item_author">', soy.$$escapeHtml("Changed By"), '</div><div class="rw_item_operations">', soy.$$escapeHtml("Operations"), '</div><div class="rw_item_comment">', soy.$$escapeHtml("Comment"), '</div></li>');
    var versionList266 = opt_data.versionsModel.versions;
    var versionListLen266 = versionList266.length;
    for (var versionIndex266 = 0; versionIndex266 < versionListLen266; versionIndex266++) {
      var versionData266 = versionList266[versionIndex266];
      output.append('<li class="rw_item" data-id="', soy.$$escapeHtml(versionData266.versionNumber), '"><div class="rw_item_version">', soy.$$escapeHtml(versionData266.versionNumber), '</div><div class="rw_item_date">', (versionData266.date) ? soy.$$escapeHtml(versionData266.date) : '', '</div><div class="rw_item_author">', (versionData266.author) ? '<a class="confluence-userlink userlink-0" data-username="' + soy.$$escapeHtml(versionData266.author.username) + '" href="/display/~' + soy.$$escapeHtml(versionData266.author.username) + '" title="' + soy.$$escapeHtml(versionData266.author.fullName) + '">' + soy.$$escapeHtml(versionData266.author.fullName) + '</a>' : '', '</div><div class="rw_item_operations">');
      if (! (versionIndex266 == 0) || opt_data.defaultBoard) {
        RW.Templates.Button.button({cssClass: 'rw_layout_revert_button', content: soy.$$escapeHtml("Restore this version")}, output);
        RW.Templates.Button.button({cssClass: 'rw_layout_preview_button', content: soy.$$escapeHtml("Preview")}, output);
        RW.Templates.Button.button({cssClass: 'rw_layout_delete_button', content: soy.$$escapeHtml("Delete"), dataConfirm: soy.$$escapeHtml(AJS.format("This will delete version {0} of this board, are you sure?",versionData266.versionNumber))}, output);
        output.append('<div class="data_param_add_comment" style="display:none;">', soy.$$escapeHtml("Add comment"), '</div><div class="data_param_default_comment" style="display:none;">', soy.$$escapeHtml("Restored to version"), ' ', soy.$$escapeHtml(versionData266.versionNumber), '</div>');
      } else {
        output.append('<div class="aui-lozenge aui-lozenge-success">', soy.$$escapeHtml("Current version"), '</div>');
      }
      output.append('</div><div class="rw_item_comment">', soy.$$escapeHtml(versionData266.comment), '</div></li>');
    }
    output.append('</ul>');
  } else {
    output.append(soy.$$escapeHtml("There are no previous versions available."));
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.restoreVersion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="rw_restore_version_form" title="', soy.$$escapeHtml("Restore this version"), '"><p>', soy.$$escapeHtml("Are you sure you want to revert the content back to this previous version?"), '</p><form class="aui" onkeypress="return event.keyCode != 13;"><div class="field-group"><label for="comment">', soy.$$escapeHtml("Add comment"), '</label><input type="text" name="comment" class="text long-field" id="comment-field" class="" value="" maxlength="100"/></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_board_column" ', (opt_data.section.width) ? 'style="width:' + soy.$$escapeHtml(opt_data.section.width) + '%"' : '', '><ul class="rw_board_items rw_layout_section" id="rw_section_', soy.$$escapeHtml(opt_data.section.id), '" data-id="', soy.$$escapeHtml(opt_data.section.id), '" ><div class="rw_add_item_container">');
  RW.Templates.Button.button({cssClass: 'rw_add_item_button rw_tooltip', content: soy.$$escapeHtml("Add"), tooltip: soy.$$escapeHtml("Add new item")}, output);
  output.append('</div></ul></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.editableSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_section rw_editable_section rw_middle_section" id="rw_section_', soy.$$escapeHtml(opt_data.section.id), '" data-id="', soy.$$escapeHtml(opt_data.section.id), '" style="width:', soy.$$escapeHtml(Math.round(opt_data.section.width)), '0px">', (opt_data.section.items.length > 0) ? '<span class="rw_section_has_content rw_tooltip" data-tooltip="' + soy.$$escapeHtml("This section contains content and can\x27t be deleted") + '">' + soy.$$escapeHtml("Has content") + '</span>' : '<span class="rw_remove_section_button rw_tooltip" data-tooltip="' + soy.$$escapeHtml("Remove section") + '">X</span>', '<h1>', soy.$$escapeHtml(Math.round(opt_data.section.width)), '%</h1></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li id="rw_item_', soy.$$escapeHtml(opt_data.item.id), '" data-id="', soy.$$escapeHtml(opt_data.item.id), '" class="rw_item rw_item_board">', (opt_data.content) ? '<ul class="rw_items rw_item_preview">' + opt_data.content + '</ul>' : '', '<div class="rw_item_operations">');
  RW.Templates.Button.button({cssClass: 'rw_open_editor rw_tooltip', content: soy.$$escapeHtml("Edit"), tooltip: soy.$$escapeHtml("Open in editor")}, output);
  RW.Templates.Button.button({cssClass: 'rw_remove_item rw_tooltip', content: soy.$$escapeHtml("Remove"), tooltip: soy.$$escapeHtml("Remove this item")}, output);
  output.append('</div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.addItemDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_layout_board_dialog"><div class="rw_board rw_primary"><div class="rw_board_column"><ul class="rw_items rw_quicklinks">');
  var macroList406 = opt_data.defaultMacros;
  var macroListLen406 = macroList406.length;
  for (var macroIndex406 = 0; macroIndex406 < macroListLen406; macroIndex406++) {
    var macroData406 = macroList406[macroIndex406];
    if (macroIndex406 % 2 == 0) {
      RW.Templates.Layout.macroItem({macro: macroData406}, output);
    }
  }
  output.append('</ul></div><div class="rw_board_column"><ul class="rw_items rw_quicklinks">');
  var macroList413 = opt_data.defaultMacros;
  var macroListLen413 = macroList413.length;
  for (var macroIndex413 = 0; macroIndex413 < macroListLen413; macroIndex413++) {
    var macroData413 = macroList413[macroIndex413];
    if (macroIndex413 % 2 != 0) {
      RW.Templates.Layout.macroItem({macro: macroData413}, output);
    }
  }
  output.append('</ul></div></div><div class="rw_board rw_secondary"><div class="rw_board_column"><button class="aui-button aui-button-primary"  id="rw_macrobrowser_button">', soy.$$escapeHtml("Add macro"), '</button></div><div class="rw_board_column"><p><strong>', soy.$$escapeHtml("OR"), '</strong></p></div><div class="rw_board_column"><button class="aui-button" id="rw_editor_button">', soy.$$escapeHtml("Open Editor"), '</button></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.macroItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li data-item="', soy.$$escapeHtml(opt_data.macro.key), '" class="rw_size_large rw_quicklink_button"><div class="rw_item_icon"></div><div class="rw_item_content rw_has_icon"></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_space_board_text rw_board_column"><strong>', soy.$$escapeHtml("Page body"), '</strong></br>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h1 class="rw_space_board_title rw_board_column">', soy.$$escapeHtml("Page Title"), '</h1>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.loader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_loader_container"><div class="rw_loader_32_image"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutBlueprint = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_board"><div class="rw_board_column" style="width:500px; padding:0px;"><div id="rw_layout_template_chooser"><ul class="rw_items"><li><a data-template-key="global" class="rw_selected"><h4>', soy.$$escapeHtml("Global Space Layout"), '</h4><span>', soy.$$escapeHtml("Use the default space layout defined by your administrator. "), '</span></a></li>');
  var templateList446 = opt_data.model.templates;
  var templateListLen446 = templateList446.length;
  for (var templateIndex446 = 0; templateIndex446 < templateListLen446; templateIndex446++) {
    var templateData446 = templateList446[templateIndex446];
    output.append('<li><a data-template-key="', soy.$$escapeHtml(templateData446.key), '"><h4>', soy.$$escapeHtml(templateData446.name), '</h4><span>', soy.$$escapeHtml(templateData446.description), '</span></a></li>');
  }
  output.append('<li><a data-template-key="custom"><h4>', soy.$$escapeHtml("Custom Space Layout"), '</h4><span>', soy.$$escapeHtml("Create a custom space layout. You will be redirected to the space layout editor"), '</span></a></li></ul></div></div><div class="rw_board_column" style="padding:20px;" ><h3>', soy.$$escapeHtml("About Space Layouts"), '</h3><p>', soy.$$escapeHtml("The space layout defines the functionality which will be available on all pages in your space. Use the global, create a custom or choose one of the predefined."), '</p></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.templateList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="rw_layout_template_chooser"><ul class="rw_items">');
  var templateList466 = opt_data.model.templates;
  var templateListLen466 = templateList466.length;
  for (var templateIndex466 = 0; templateIndex466 < templateListLen466; templateIndex466++) {
    var templateData466 = templateList466[templateIndex466];
    output.append('<li><a id="rw_template_', soy.$$escapeHtml(templateData466.key), '" data-template-key="', soy.$$escapeHtml(templateData466.key), '"><h4>', soy.$$escapeHtml(templateData466.name), '</h4><span>', soy.$$escapeHtml(templateData466.description), '</span></a></li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.macroPreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li class="rw_macro_preview"><div class="rw_item_icon">', (opt_data.macro.icon) ? '<img src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.macro.icon.location) + '"/>' : '<span class="icon-' + soy.$$escapeHtml(opt_data.macro.name) + '"></span>', '</div>', (opt_data.macro.hasEdit) ? '<div class="rw_item_edit"><div class="rw_edit_macro rw_tooltip" data-tooltip="' + soy.$$escapeHtml("Edit macro") + '"></div></div>' : '', '<div class="rw_item_content ', (opt_data.macro.hasEdit) ? 'rw_has_edit' : '', '">', (opt_data.macro.title) ? soy.$$escapeHtml(opt_data.macro.title) : soy.$$escapeHtml(opt_data.macro.name), '</div>', (opt_data.macro.body) ? '<div class="rw_item_body"><span>' + soy.$$escapeHtml("This macro has a body") + '</span></div>' : '', (opt_data.macro.paramDesc) ? '<div class="rw_item_parameters">' + opt_data.macro.paramDesc + '</div>' : '', '</li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.itemPreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="rw_content_preview">', opt_data.content, '</li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.imagePreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="rw_image_preview"><div>', opt_data.image, '</div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.customLayoutBoardList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  if (opt_data.type == 'spaces') {
    output.append('<p>', soy.$$escapeHtml("Here you will find all spaces with custom space layouts"), '</p><ul class="rw_items">');
    var spaceList536 = opt_data.list;
    var spaceListLen536 = spaceList536.length;
    for (var spaceIndex536 = 0; spaceIndex536 < spaceListLen536; spaceIndex536++) {
      var spaceData536 = spaceList536[spaceIndex536];
      output.append('<li data-key="', soy.$$escapeHtml(spaceData536.key), '" data-name="', soy.$$escapeHtml(spaceData536.name), '"><div>', soy.$$escapeHtml(spaceData536.name), ' <span class="rw_small_text">(', soy.$$escapeHtml(spaceData536.key), ')</span>', (spaceData536.type == 'space') ? '<div class="rw_layout_board_mode rw_custom">' + soy.$$escapeHtml("Custom Space Layout") + '</div>' : '<div class="rw_layout_board_mode rw_space_type">' + soy.$$escapeHtml(spaceData536.type) + '</div>', '<a href="', soy.$$escapeHtml(""), '/spaces/refinedwiki/edit-space-layout.action?key=', soy.$$escapeHtml(spaceData536.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("Edit"), '</a><a href="', soy.$$escapeHtml(""), '/display/', soy.$$escapeHtml(spaceData536.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("View"), '</a></div></li>');
    }
    output.append((opt_data.list.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No items found") + '</div>' : '', '</ul>');
  } else if (opt_data.type == 'users') {
    output.append('<p>', soy.$$escapeHtml("Here you will find all users with custom user dashboards. "), '</p><ul class="rw_items">');
    var userList579 = opt_data.list;
    var userListLen579 = userList579.length;
    for (var userIndex579 = 0; userIndex579 < userListLen579; userIndex579++) {
      var userData579 = userList579[userIndex579];
      output.append('<li data-key="', soy.$$escapeHtml(userData579.key), '"><div>', soy.$$escapeHtml(userData579.key), '<div class="rw_layout_board_mode rw_custom">', soy.$$escapeHtml("Custom settings"), '</div><a href="', soy.$$escapeHtml(""), '/users/edit-user-dashboard.action?username=', soy.$$escapeHtml(userData579.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("Edit"), '</a><a href="', soy.$$escapeHtml(""), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(userData579.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("View"), '</a></div></li>');
    }
    output.append((opt_data.list.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No items found") + '</div>' : '', '</ul>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/buttons.soy' */
// This file was automatically generated from buttons.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Button == 'undefined') { RW.Templates.Button = {}; }


RW.Templates.Button.button = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<button ', (opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="aui-button ', (opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : '', '" ', (opt_data.href) ? 'href="' + soy.$$escapeHtml(opt_data.href) + '"' : '', ' ', (opt_data.confirm) ? 'onclick="return confirm(\'' + soy.$$escapeHtml(opt_data.confirm) + '\');"' : '', ' ', (opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', ' ', (opt_data.dataConfirm) ? 'data-confirm="' + soy.$$escapeHtml(opt_data.dataConfirm) + '"' : '', '>', (opt_data.icon) ? '<span class="icon rw_icon_' + soy.$$escapeHtml(opt_data.icon) + '_16"></span>' : '', '<span>', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</span></button>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Button.add = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="rw_button ', soy.$$escapeHtml(opt_data.cssClass), '" href="#" data-id="', soy.$$escapeHtml(opt_data.data), '" ', (opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '><span class="rw_add_gray rw_only_icon"></span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/global.soy' */
// This file was automatically generated from global.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }


RW.Templates.loader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="', (opt_data.bg == 'gray') ? 'rw_bg_gray' : (opt_data.bg == 'dark_gray') ? 'rw_bg_dark_gray' : '', ' rw_loader_box rw_padding rw_corners ">', (opt_data.type == 'circle') ? '<div class="rw_loader_32_image"></div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.ddLoader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_popup_loader" style="display:none; padding:10px 0px;"><div class="rw_popup_loader_image"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.pageTreeErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t', (opt_data.type == 'nospacelayout') ? '<span>' + soy.$$escapeHtml("Must be in context of a space. Please set the \x27space\x27 parameter to the space you want to show the pagetree for.") + '</span>' : '');
  return opt_sb ? '' : output.toString();
};


RW.Templates.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.contentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a><span class="rw_item_favourite rw_icon_container_20 rw_item_icon_right rw_loader_16_11_image"></span><span class="rw_item_content"></span></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.list = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul ', (opt_data.ulClass != 'undefined') ? 'class="' + soy.$$escapeHtml(opt_data.ulClass) + '"' : '', ' >');
  var elList36 = opt_data.list;
  var elListLen36 = elList36.length;
  for (var elIndex36 = 0; elIndex36 < elListLen36; elIndex36++) {
    var elData36 = elList36[elIndex36];
    output.append('<li><a title="', soy.$$escapeHtml(elData36.name), '" href="', soy.$$escapeHtml(elData36.url), '"><span>', soy.$$escapeHtml(elData36.name), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.siblingList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul ', (opt_data.ulClass != 'undefined') ? 'class="' + soy.$$escapeHtml(opt_data.ulClass) + '"' : '', ' >');
  var elList54 = opt_data.list;
  var elListLen54 = elList54.length;
  for (var elIndex54 = 0; elIndex54 < elListLen54; elIndex54++) {
    var elData54 = elList54[elIndex54];
    output.append('<li><a title="', soy.$$escapeHtml(elData54.title), '" href="', soy.$$escapeHtml(""), '/spaces/viewspace.action?key=', soy.$$escapeHtml(elData54.key), '"><span>', soy.$$escapeHtml(elData54.title), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.searchPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="rw_popup_search" class="rw_popup_search rw_popup"><div class="rw_search"><form style="width:0px; height:0px; overflow:hidden; "><input type="text" name="hack" onfocus="this.blur()" /></form><form class="rw_search_form" method="get" action="', soy.$$escapeHtml(""), '/dosearchsite.action"><div class="rw_search_style rw_corners"><input class="rw_search_query rw_corners" id="rw_search_popup_query" type="text" value="', soy.$$escapeHtml("Search"), '" accessKey="', soy.$$escapeHtml("search-pages-action.accesskey"), '" autocomplete="off" name="queryString" size="25" /></div><div style="clear:both;"></div><div id="rw_search_result_container" class="rw_search_result_container rw_corners" style="display:none;"></div></form></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.moreRecentlyViewed = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul><li><a href=\'#\' id=\'rw_more_recently_viewed\'><span class="rw_icon rw_iconfont_activity"></span><span class="rw_search_item_title" title=\'', soy.$$escapeHtml("More recently viewed pages..."), '\'>', soy.$$escapeHtml("More recently viewed pages..."), '</span></a></li></ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.infoBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_info_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.warningBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_warning_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.errorBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_error_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.popup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_error_box"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/activity.soy' */
// This file was automatically generated from activity.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Activity == 'undefined') { RW.Templates.Activity = {}; }


RW.Templates.Activity.set = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_activity_set"><div class="rw_activity_set_pic"><div class="rw_profile_pic"><a class="userLogoLink"><img class="userLogo logo"></a></div></div><div class="rw_activity_set_content rw_corners"><div class="rw_author"><a class="confluence-userlink"></a></div><ul class="rw_items rw_activity_items"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><div class="rw_item_icon"><span class="rw_activity_item_icon rw_icon_container_16 "></span></div><div class="rw_item_content rw_has_icon"><div class="rw_ellipsis"><a class="rw_activity_link"></a><span class="rw_activity_space_name rw_small_text"></span></div><div class="rw_summary"></div><div class="rw_date"></div><div class="rw_thumbnail"></div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.popularSet = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_activity_set rw_activity_set_popular"><div class="rw_activity_set_pic"><div class="rw_profile_pic"><a class="userLogoLink"><img class="userLogo logo"></a></div></div><div class="rw_activity_set_content rw_corners"><ul class="rw_items rw_activity_items"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.popularItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><div class="rw_item_icon"><span class="rw_activity_item_icon rw_icon_container_16 "></span></div><div class="rw_item_content"><span class="rw_popularity_data"></span><a class="rw_activity_link"></a><div class="rw_date"></div><div class="rw_author"><a class="confluence-userlink"></a></div><div style="clear:both;"></div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.loadMoreButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="rw_load_more_activity_link" class="rw_load_more_link rw_corners" ><span class="rw_load_more_text">', soy.$$escapeHtml("More"), '</span><span style="display:none;" class="rw_loader_128_image"></span></a>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_no_items rw_activity rw_corners">', soy.$$escapeHtml("No recently updated content found."), '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.replyButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a onclick="RW.showSmallLoader(this)" class="rw_button_small"></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/spaces.soy' */
// This file was automatically generated from spaces.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Spaces == 'undefined') { RW.Templates.Spaces = {}; }


RW.Templates.Spaces.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_box"><ul class="rw_content_list"></ul></div><div style="clear:both;"></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categorySection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_box"><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categoryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_category"><div class="rw_spaces_category_title"><span>', (opt_data.category && opt_data.category.name) ? soy.$$escapeHtml(opt_data.category.name) : '', '</span></div><div class="rw_spaces_category_content" ><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories">');
  if (opt_data.category && opt_data.category.subCategories) {
    var catList14 = opt_data.category.subCategories;
    var catListLen14 = catList14.length;
    for (var catIndex14 = 0; catIndex14 < catListLen14; catIndex14++) {
      var catData14 = catList14[catIndex14];
      RW.Templates.Spaces.categoryItem({category: catData14}, output);
    }
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categoryItemWithDashboard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_category"><a class="rw_item_expand"><span></span></a><div class="rw_spaces_category_title rw_has_expand"><span>', (opt_data.category && opt_data.category.name) ? soy.$$escapeHtml(opt_data.category.name) : '', '</span></div><div class="rw_spaces_category_content" ><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories">');
  if (opt_data.category && opt_data.category.subCategories) {
    var catList27 = opt_data.category.subCategories;
    var catListLen27 = catList27.length;
    for (var catIndex27 = 0; catIndex27 < catListLen27; catIndex27++) {
      var catData27 = catList27[catIndex27];
      RW.Templates.Spaces.categoryItem({category: catData27}, output);
    }
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_spaces rw_corners">', soy.$$escapeHtml("There are no spaces at the moment."), '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/news.soy' */
// This file was automatically generated from news.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.News == 'undefined') { RW.Templates.News = {}; }


RW.Templates.News.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_news_item"><div class="rw_news_item_btn" onClick="RW.news.toggleNewsItem(this);return false;" href="#" title="', soy.$$escapeHtml("Show this news"), '" ><div class="rw_news_add_subtract"><div class="rw_item_icon"><a class="userLogoLink"><img class="userLogo logo"></a></div><div class="rw_item_content" style=""><a class="rw_caption rw_ellipsis"></a><span class="rw_date rw_rounded_3px"></span><span class="rw_space_name rw_margin_left_5px rw_rounded_3px"></span></div></div></div><div style="clear:both;"></div><div class="rw_news_item_content"><div class="rw_box_section"><span class="rw_small_text rw_author">', soy.$$escapeHtml("Written by: "), ' <a class="rw_user_link url fn confluence-userlink"></a></span><br/><div class="wiki-content"></div><div style="clear:both;"></div><a class="rw_button rw_right rw_read_more_popup rw_button_group_right rw_margin_top" title="', soy.$$escapeHtml("View in popup"), '"><span class="rw_open_popup rw_only_icon"></span></a><a class="rw_button rw_right rw_read_more_page rw_button_group_left rw_margin_top" title="', soy.$$escapeHtml("Read more"), '"><span class="rw_no_icon">', soy.$$escapeHtml("Read more"), '</span></a><a class="rw_comments_link rw_left rw_button rw_margin_top"><span class="rw_comment_gray"></span></a><div style="clear:both;"></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.itemSimple = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_news_item"><a class="rw_caption rw_ellipsis"></a><span class="rw_date rw_rounded_3px"></span><span class="rw_space_name rw_margin_left_5px rw_rounded_3px"></span><div class="wiki-content"></div><div class="rw_item_footer"><div class="rw_section"><div class="rw_read_more"><a class="rw_button rw_right rw_read_more_popup rw_button_group_right" title="', soy.$$escapeHtml("View in popup"), '"><span class="rw_open_popup rw_only_icon"></span></a><a class="rw_button rw_right rw_read_more_page rw_button_group_left" title="', soy.$$escapeHtml("Read more"), '"><span class="rw_no_icon">', soy.$$escapeHtml("Read more"), '</span></a></div><a class="url fn confluence-userlink rw_user_link"><img class="userLogo logo"><span></span></a></div></div><div style="clear:both;"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.loadMoreButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="rw_load_more_news_link" class="rw_load_more_link rw_corners_bottom" href="#" ><span class="rw_load_more_text">', soy.$$escapeHtml("More"), '</span><span style="display:none;" class="rw_loader_128_image"></span></a>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_news rw_corners">', soy.$$escapeHtml("No blog posts found."), '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.popupButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="rw_news_in_popup rw_icon_button_24 rw_right"><span class="rw_icon_container_20 rw_open_popup_small"></span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/admin-message.soy' */
// This file was automatically generated from admin-message.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.AdminMessage == 'undefined') { RW.Templates.AdminMessage = {}; }


RW.Templates.AdminMessage.messageList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item', (opt_data.activeTab == 'undone') ? ' active-tab' : '', '" data-key="undone"><a id="tab_button_undone" href="#tabs-messages-undone"><strong>', soy.$$escapeHtml("Unread"), '</strong></a></li><li class="menu-item', (opt_data.activeTab == 'completed') ? ' active-tab' : '', '" data-key="completed"><a id="tab_button_completed" href="#tabs-messages-completed"><strong>', soy.$$escapeHtml("Read"), '</strong></a></li></ul><div class="tabs-pane', (opt_data.activeTab == 'undone') ? ' active-pane' : '', '" id="tabs-messages-undone">');
  RW.Templates.Button.button({cssClass: 'rw_mark_all_button', content: soy.$$escapeHtml("Mark all as read")}, output);
  output.append('<ul class="rw_items rw_admin_messages">');
  var messageList26 = opt_data.messageList;
  var messageListLen26 = messageList26.length;
  for (var messageIndex26 = 0; messageIndex26 < messageListLen26; messageIndex26++) {
    var messageData26 = messageList26[messageIndex26];
    output.append((messageData26.visible == true) ? '<li data-key="' + soy.$$escapeHtml(messageData26.id) + '" class="rw_' + soy.$$escapeHtml(messageData26.type) + '"><div class="rw_item_icon"><input type="checkbox" class="markRead" ></div><div class="rw_item_content rw_has_icon"><h3>' + soy.$$escapeHtml(messageData26.title) + '</h3><span class="rw_small_text rw_date" data-date="' + soy.$$escapeHtml(messageData26.date) + '"></span><p>' + messageData26.content + '</p>' + ((messageData26.link) ? '<a target="_blank" href="' + soy.$$escapeHtml(messageData26.link) + '" class="aui-button">' + soy.$$escapeHtml("Documentation") + '</a>' : '') + '</div></li>' : '');
  }
  output.append('</ul></div><div class="tabs-pane', (opt_data.activeTab == 'completed') ? ' active-pane' : '', '" id="tabs-messages-completed"><ul class="rw_items rw_admin_messages">');
  var messageList55 = opt_data.messageList;
  var messageListLen55 = messageList55.length;
  for (var messageIndex55 = 0; messageIndex55 < messageListLen55; messageIndex55++) {
    var messageData55 = messageList55[messageIndex55];
    output.append((messageData55.visible == false) ? '<li data-key="' + soy.$$escapeHtml(messageData55.id) + '"><div class="rw_item_icon"><input type="checkbox" class="markRead" checked="checked" ></div><div class="rw_item_content rw_has_icon"><h3>' + soy.$$escapeHtml(messageData55.title) + '</h3><span class="rw_small_text rw_date" data-date="' + soy.$$escapeHtml(messageData55.date) + '"></span><p>' + messageData55.content + '</p>' + ((messageData55.link) ? '<a target="_blank" href="' + soy.$$escapeHtml(messageData55.link) + '" class="aui-button">' + soy.$$escapeHtml("Documentation") + '</a>' : '') + '</div></li>' : '');
  }
  output.append((opt_data.hasMore == true) ? '<a id="rw_load_more_messages_link" class="rw_load_more_link rw_corners"><span class="rw_load_more_text">' + soy.$$escapeHtml("More") + '</span><span class="rw_loader_128_image" style="display:none;"></span></a>' : '', '</ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.AdminMessage.notification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<span id="rw_notification_badge">', soy.$$escapeHtml(opt_data.count), '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/categories.soy' */
// This file was automatically generated from categories.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }


RW.Templates.categoryBlueprint = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_board"><div class="rw_board_column" style="width:500px; padding:0px;"><div id="rw_category_chooser">', (opt_data.model.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No categories found") + '</div>' : '');
  RW.Templates.abstractCategoriesList({abstractCategories: opt_data.model}, output);
  output.append('</div></div><div class="rw_board_column" style="padding:20px;"><h3>', soy.$$escapeHtml("About organizing spaces"), '</h3><p>', soy.$$escapeHtml("Spaces can be organized into categories and subcategories. The main navigation feature is based on this structure."), '</p></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.abstractCategoriesList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var abstractCategoryList18 = opt_data.abstractCategories;
  var abstractCategoryListLen18 = abstractCategoryList18.length;
  for (var abstractCategoryIndex18 = 0; abstractCategoryIndex18 < abstractCategoryListLen18; abstractCategoryIndex18++) {
    var abstractCategoryData18 = abstractCategoryList18[abstractCategoryIndex18];
    output.append('<li><a id="rw_category_item_', soy.$$escapeHtml(abstractCategoryData18.nameKey), '" data-category-key="', soy.$$escapeHtml(abstractCategoryData18.nameKey), '">', soy.$$escapeHtml(abstractCategoryData18.name), '</a>');
    if (abstractCategoryData18.subCategories != undefined) {
      RW.Templates.abstractCategoriesList({abstractCategories: abstractCategoryData18.subCategories}, output);
    }
    output.append('</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/users.soy' */
// This file was automatically generated from users.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Users == 'undefined') { RW.Templates.Users = {}; }


RW.Templates.Users.list = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var users__soy4 = opt_data.model.users;
  var title__soy5 = opt_data.model.title;
  var layout__soy6 = opt_data.model.layout;
  var remoteUser__soy7 = opt_data.model.remoteUser;
  var description__soy8 = opt_data.model.description;
  var canSeePersonalSpace__soy9 = opt_data.model.canSeePersonalSpace;
  output.append('<div class="rw_users_container ', (layout__soy6 != undefined) ? 'rw_layout_' + soy.$$escapeHtml(layout__soy6) : '', '">', (title__soy5 != undefined) ? '<h3>' + soy.$$escapeHtml(title__soy5) + '</h3>' : '', (description__soy8 != undefined && description__soy8 != '') ? '<div class="rw_description">' + soy.$$escapeHtml(description__soy8) + '</div>' : '');
  if (layout__soy6 == 'avatar' || opt_data.columns < 2) {
    output.append('<ul class="rw_items rw_users_list">');
    var userList29 = users__soy4;
    var userListLen29 = userList29.length;
    for (var userIndex29 = 0; userIndex29 < userListLen29; userIndex29++) {
      var userData29 = userList29[userIndex29];
      output.append('<li>');
      RW.Templates.Users.userDetails({user: userData29, layout: layout__soy6, remoteUser: remoteUser__soy7, following: userData29.following, canSeePersonalSpace: canSeePersonalSpace__soy9}, output);
      output.append('</li>');
    }
    output.append((users__soy4.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No users found") + '</div>' : '', '</ul>');
  } else {
    var count__soy46 = 0;
    output.append('<div class="rw_table rw_users_list"><div class="rw_table_row">');
    var userList48 = users__soy4;
    var userListLen48 = userList48.length;
    for (var userIndex48 = 0; userIndex48 < userListLen48; userIndex48++) {
      var userData48 = userList48[userIndex48];
      output.append('<div class="rw_table_cell">');
      RW.Templates.Users.userDetails({user: userData48, layout: layout__soy6, remoteUser: remoteUser__soy7, following: userData48.following, canSeePersonalSpace: canSeePersonalSpace__soy9}, output);
      output.append('</div>', ((userIndex48 + 1) % opt_data.columns == 0) ? '</div><div class="rw_table_row">' : '');
    }
    output.append((users__soy4.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No users found") + '</div>' : '', '</div></div>');
  }
  output.append('</div><div style="clear:both;"></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userDetails = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  if (opt_data.user) {
    var isRemoteUser__soy72 = opt_data.user.username == opt_data.remoteUser;
    output.append('<div class="rw_user_details rw_macro ', (isRemoteUser__soy72) ? 'rw_is_remote_user' : '', '  ', (opt_data.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.layout) : '', '" data-username="', soy.$$escapeHtml(opt_data.user.username), '">', (opt_data.title != undefined) ? '<h3>' + soy.$$escapeHtml(opt_data.title) + '</h3>' : '', (isRemoteUser__soy72 && opt_data.layout != 'avatar') ? '<a class="rw_button_discrete rw_right" onclick="RW.showUserSettingsPopup();" ><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>' : '', (opt_data.user.profilePic != undefined) ? (isRemoteUser__soy72 && opt_data.user.profilePic == '/images/icons/profilepics/default.png') ? '<a class="confluence-userlink rw_profile_picture" href="' + soy.$$escapeHtml("") + '/users/editmyprofilepicture.action" data-username="' + soy.$$escapeHtml(opt_data.user.username) + '" title="" ><img class="userLogo logo" title="" alt="User icon: ' + soy.$$escapeHtml(opt_data.user.username) + '" src="' + soy.$$escapeHtml("") + '/images/icons/profilepics/add_profile_pic.png"></a>' : '<a class="confluence-userlink rw_profile_picture" href="' + soy.$$escapeHtml("") + '/users/view-user-dashboard.action?username=' + soy.$$escapeHtml(opt_data.user.username) + '" data-username="' + soy.$$escapeHtml(opt_data.user.username) + '" title="" ><img class="userLogo logo" title="" alt="User icon: ' + soy.$$escapeHtml(opt_data.user.username) + '" src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.user.profilePic) + '"></a>' : '');
    if (opt_data.layout != 'avatar') {
      output.append('<ul class="rw_items rw_user_info_list"><li><div class="rw_item_content"><h2 class="rw_user_link"><a href="', soy.$$escapeHtml(""), '/users/view-user-dashboard.action?username=', soy.$$escapeUri(opt_data.user.username), '" title="" class="confluence-userlink rw_ellipsis" data-username="', soy.$$escapeHtml(opt_data.user.username), '">', opt_data.user.fullName, '</a></h2></div></li>', (opt_data.layout != 'simple') ? '<li><div class="rw_item_content">' + ((opt_data.user.statusText != undefined) ? '<div class="rw_status_box"><div class="rw_status_box_talk"></div><span class="status-text rw_block">' + opt_data.user.statusText + '</span>' + ((isRemoteUser__soy72) ? '<div style="float:right;">' + ((opt_data.canUpdateStatus) ? '<a class="rw_small_text rw_clear rw_update_status_button rw_padding_right_10px" style="float:none;">' + "Update Status\u2026" + '</a>' : '') + '<a class="rw_small_text rw_clear" onclick="RW.launchUrlInBackground(\'' + soy.$$escapeHtml("") + '/status/clear.action?username=' + soy.$$escapeHtml(opt_data.user.username) + '\',true)" style="float:none;">' + soy.$$escapeHtml("Clear") + '</a></div>' : '') + '<span class="rw_date rw_small_text">' + soy.$$escapeHtml(opt_data.user.statusDate) + '</span><div style="clear:both"></div></div>' : (isRemoteUser__soy72 && opt_data.canUpdateStatus) ? '<a class="rw_button rw_update_status_button"><span class="rw_no_icon">' + "Update Status\u2026" + '</span></a>' : '') + '</div></li>' : '', (opt_data.user.email) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_mail" title=\'' + soy.$$escapeHtml("Email") + '\'></div></div><div class="rw_item_content rw_has_icon"><a class="rw_email" title="' + soy.$$escapeHtml(AJS.format("Send email to {0}",opt_data.user.fullName)) + '" href="mailto:' + soy.$$escapeHtml(opt_data.user.email) + '"><span class="rw_email rw_ellipsis">' + soy.$$escapeHtml(opt_data.user.email) + '</span></a></div></li>' : '', (opt_data.user.skypeAccount != undefined && opt_data.user.skypeAccount != '') ? '<li><div class="rw_item_icon"><script type="text/javascript" src="http://download.skype.com/share/skypebuttons/js/skypeCheck.js"><\/script><a href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?call" title="Skype"><img src="http://mystatus.skype.com/mediumicon/' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '" style="border: none;" alt="" /></a></div><div class="rw_item_content rw_has_icon"><span class="rw_im_title">Skype:</span><a class="rw_button rw_im_action" href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?call" title=\'' + soy.$$escapeHtml(AJS.format("Call {0}",[opt_data.user.fullName])) + '\'><span class="rw_only_icon rw_phone"></span></a><a class="rw_button rw_im_action rw_margin_left_5px" href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?chat" title=\'' + soy.$$escapeHtml(AJS.format("Chat with {0}",[opt_data.user.fullName])) + '\' ><span class="rw_only_icon rw_chat"></span></a></div></li>' : (opt_data.user.skypeAccount != undefined && isRemoteUser__soy72) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_skype"></div></div><div class="rw_item_content rw_has_icon"><a class="rw_button rw_im_action" onclick="RW.showUserSettingsPopup();" title=\'' + soy.$$escapeHtml("Configure") + '\' ><span class="rw_no_icon">' + soy.$$escapeHtml("Configure") + '</span></a></div></li>' : '', (opt_data.user.hipchatAccount != undefined && opt_data.user.hipchatAccount != '') ? '<li class="rw_hipchat_detail_wrapper"><div id="rw_hipchat_username" style="display:none;">' + soy.$$escapeHtml(opt_data.user.hipchatAccount) + '</div><div class="rw_item_icon"><div id="rw_hipchat_icon" class="rw_icon_container_24 rw_icon_hipchat"></div></div><div class="rw_item_content rw_has_icon"><span class="rw_im_title">HipChat:</span><a id="rw_go_to_hipchat_button" class="rw_button rw_im_action" href="https://www.hipchat.com/sign_in" title=\'' + soy.$$escapeHtml(AJS.format("Go to {0}",['HipChat'])) + '\' target="_blank"><span class="rw_no_icon">' + soy.$$escapeHtml(AJS.format("Go to {0}",['HipChat'])) + '</span></a></div></li>' : (opt_data.user.hipchatAccount != undefined && isRemoteUser__soy72) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_hipchat"></div></div><div class="rw_item_content rw_has_icon"><a class="rw_button rw_im_action" onclick="RW.showUserSettingsPopup();" title=\'' + soy.$$escapeHtml("Configure") + '\' ><span class="rw_no_icon">' + soy.$$escapeHtml("Configure") + '</span></a></div></li>' : '');
      var keyList213 = soy.$$getMapKeys(opt_data.user.personalValues);
      var keyListLen213 = keyList213.length;
      for (var keyIndex213 = 0; keyIndex213 < keyListLen213; keyIndex213++) {
        var keyData213 = keyList213[keyIndex213];
        var value__soy214 = opt_data.user.personalValues[keyData213];
        output.append((value__soy214 != undefined && value__soy214 != '') ? (opt_data.layout == 'simple' && (keyData213 == 'im' || keyData213 == 'website')) ? '' : '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_' + soy.$$escapeHtml(keyData213) + '" title=\'' + soy.$$escapeHtml("confluence.user.profile.$key") + '\'></div></div><div class="rw_item_content rw_has_icon rw_ellipsis">' + ((keyData213 == 'website') ? '<a href="' + soy.$$escapeHtml(value__soy214) + '" class="rw_ellipsis" target="_blank" title="' + soy.$$escapeHtml(value__soy214) + '">' + soy.$$escapeHtml(value__soy214) + '</a>' : soy.$$escapeHtml(value__soy214)) + '</div></li>' : '');
      }
      if (opt_data.layout == 'full') {
        if (opt_data.user.uCategories && opt_data.user.uCategories.length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', (opt_data.user.uCategories.length == 1) ? soy.$$escapeHtml("Member of category:") : soy.$$escapeHtml("Member of categories:"), '</h3></div></li><li><ul class="rw_user_categories rw_category">');
          var userCategoryList249 = opt_data.user.uCategories;
          var userCategoryListLen249 = userCategoryList249.length;
          for (var userCategoryIndex249 = 0; userCategoryIndex249 < userCategoryListLen249; userCategoryIndex249++) {
            var userCategoryData249 = userCategoryList249[userCategoryIndex249];
            RW.Templates.Users.userMember({userCategory: userCategoryData249}, output);
          }
          output.append('</ul></li>');
        }
        if (opt_data.user.uSpaces && opt_data.user.uSpaces.length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', (opt_data.user.uSpaces.length == 1) ? soy.$$escapeHtml("Member of space:") : soy.$$escapeHtml("Member of spaces:"), '</h3></div></li><li><ul class="rw_user_categories rw_space">');
          var userCategoryList263 = opt_data.user.uSpaces;
          var userCategoryListLen263 = userCategoryList263.length;
          for (var userCategoryIndex263 = 0; userCategoryIndex263 < userCategoryListLen263; userCategoryIndex263++) {
            var userCategoryData263 = userCategoryList263[userCategoryIndex263];
            RW.Templates.Users.userMember({userCategory: userCategoryData263}, output);
          }
          output.append('</ul></li>');
        }
        if (opt_data.user.companyValues != undefined && soy.$$getMapKeys(opt_data.user.companyValues).length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', soy.$$escapeHtml("Company"), '</h3></div></li>');
          var keyList273 = soy.$$getMapKeys(opt_data.user.companyValues);
          var keyListLen273 = keyList273.length;
          for (var keyIndex273 = 0; keyIndex273 < keyListLen273; keyIndex273++) {
            var keyData273 = keyList273[keyIndex273];
            var value__soy274 = opt_data.user.companyValues[keyData273];
            output.append((value__soy274 != undefined && value__soy274 != '') ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_' + soy.$$escapeHtml(keyData273) + '" title=\'' + soy.$$escapeHtml("confluence.user.profile.$key") + '\'></div></div><div class="rw_item_content rw_has_icon rw_ellipsis">' + soy.$$escapeHtml(value__soy274) + '</div></li>' : '');
          }
        }
        output.append((opt_data.following == true) ? '<li><div class="rw_item_content rw_padding_top rw_unfollow" data-username="' + soy.$$escapeUri(opt_data.user.username) + '"><a class="rw_button"><span class="rw_no_icon">' + soy.$$escapeHtml("Stop Following") + '</span></a></div></li>' : (! opt_data.following) ? '<li><div class="rw_item_content rw_padding_top rw_follow" data-username="' + soy.$$escapeUri(opt_data.user.username) + '"><a class="rw_button"><span class="rw_no_icon">' + soy.$$escapeHtml("Follow") + '</span></a></div></li>' : '', (opt_data.canSeePersonalSpace) ? '<li><div class="rw_item_content rw_padding_top"><a class="rw_button" href="' + soy.$$escapeHtml("") + '/spaces/viewspace.action?key=~' + soy.$$escapeUri(opt_data.user.username) + '" title="' + soy.$$escapeHtml("View personal space ") + '"><span class="rw_space">' + soy.$$escapeHtml("Personal Space") + '</span></a></div></li>' : '');
      }
      output.append('</ul>');
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userSearch = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form class="rw_user_search_form"><div id="rw_category_attributes_container" class="rw_admin_section"><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml(opt_data.title), ':</label></div><div class="rw_input_content rw_has_input_desc rw_has_input_help"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Search to add"), '" id="rw_input_search_users"><br><div id="rw_user_search_result_container" class="rw_results_container" style="display: none;"></div><span class="rw_small_text">', soy.$$escapeHtml(opt_data.description), '</span><br><div class="rw_result_tags"><ul id="rw_users_result_container" class="rw_tag_list rw_search_result_users">');
  if (opt_data.users) {
    var userList324 = opt_data.users;
    var userListLen324 = userList324.length;
    for (var userIndex324 = 0; userIndex324 < userListLen324; userIndex324++) {
      var userData324 = userList324[userIndex324];
      if (userData324.username) {
        if (userData324.name) {
          RW.Templates.Users.resultTag({name: userData324.name, key: userData324.username}, output);
        } else if (userData324.fullName) {
          RW.Templates.Users.resultTag({name: userData324.fullName, key: userData324.username}, output);
        }
      }
    }
  }
  output.append('</ul></div></div></div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.groupSearch = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form class="rw_user_search_form"><div class="rw_input_container">', (opt_data.title) ? '<div class="rw_input_desc"><label for="groups">' + soy.$$escapeHtml(opt_data.title) + ':</label></div>' : '', '<div class="rw_input_content rw_has_input_desc"><input type="text" name="groups" placeholder="', soy.$$escapeHtml("Search to add"), '" id="rw_input_search_groups"><br><div class="rw_search_group rw_results_container" style="display: none;"></div>', (opt_data.description) ? '<span class="rw_small_text">' + soy.$$escapeHtml(opt_data.description) + '</span><br>' : '', '<div class="rw_result_tags"><ul class="rw_tag_list rw_search_result_groups">');
  if (opt_data.groups) {
    var groupList356 = opt_data.groups;
    var groupListLen356 = groupList356.length;
    for (var groupIndex356 = 0; groupIndex356 < groupListLen356; groupIndex356++) {
      var groupData356 = groupList356[groupIndex356];
      RW.Templates.Users.resultTag({name: groupData356, key: groupData356}, output);
    }
  }
  output.append('</ul></div></div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.searchResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var itemList364 = opt_data.results;
  var itemListLen364 = itemList364.length;
  for (var itemIndex364 = 0; itemIndex364 < itemListLen364; itemIndex364++) {
    var itemData364 = itemList364[itemIndex364];
    output.append('<li data-name="', (itemData364.type == 'user') ? soy.$$escapeHtml(itemData364.username) : soy.$$escapeHtml(itemData364.name), '">', (itemData364.type == 'user') ? '<img src="' + soy.$$escapeHtml(itemData364.thumbnailLink.href) + '" height="16px">' : '', '<a class="content-type-userinfo" ><span class="rw_search_item_title">', (itemData364.type == 'user') ? soy.$$escapeHtml(itemData364.title) : soy.$$escapeHtml(itemData364.name), '</span></a></li>');
  }
  output.append((opt_data.results.length == 0) ? '<span class="rw_padding">' + soy.$$escapeHtml("No search results found.") + '</span>' : '', '</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.resultTag = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li ', (opt_data.key) ? 'data-key="' + soy.$$escapeHtml(opt_data.key) + '"' : '', ' data-name="', soy.$$escapeHtml(opt_data.name), '"><span title="', soy.$$escapeHtml("Remove"), '">', opt_data.name, '<span class=\'rw_delete_button\'>X</span></span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userMember = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li>', (opt_data.userCategory.linkingAllowed) ? (opt_data.userCategory.type == 'space') ? '<a href="' + soy.$$escapeHtml("") + '/display/' + soy.$$escapeHtml(opt_data.userCategory.key) + '" title="' + soy.$$escapeHtml(opt_data.userCategory.name) + '">' : (opt_data.userCategory.type == 'category') ? '<a href="' + soy.$$escapeHtml("") + '/category/' + soy.$$escapeHtml(opt_data.userCategory.key) + '" title="' + soy.$$escapeHtml(opt_data.userCategory.name) + '">' : '' : '<a class="rw_disabled_link">', '<span class="rw_item_name">', soy.$$escapeHtml(opt_data.userCategory.name), '</span><span class="rw_item_role">');
  if (opt_data.userCategory.roles && opt_data.userCategory.roles.length) {
    var roleList434 = opt_data.userCategory.roles;
    var roleListLen434 = roleList434.length;
    for (var roleIndex434 = 0; roleIndex434 < roleListLen434; roleIndex434++) {
      var roleData434 = roleList434[roleIndex434];
      output.append(soy.$$escapeHtml(roleData434), (roleIndex434 != opt_data.userCategory.roles.length - 1) ? ', ' : '');
    }
  }
  output.append('</span></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_users rw_corners">', soy.$$escapeHtml("No users found"), '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/user-categories.soy' */
// This file was automatically generated from user-categories.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.UserCategory == 'undefined') { RW.Templates.UserCategory = {}; }


RW.Templates.UserCategory.addDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form style="width:0px; height:0px; overflow:hidden; "><input type="text" name="hack" onfocus="this.blur()" /></form><form id="rw_user_category_form" class="rw_user_search_form" style=""><div id="rw_main_category_section"><div id="rw_select_category_container" class="rw_admin_section"><div class="rw_input_container"><div class="rw_input_desc" style="line-height: 34px;"><label for="groups">', soy.$$escapeHtml("Category"), ':</label></div><div class="rw_input_content rw_has_input_desc"><span class="rw_item_name">', soy.$$escapeHtml(opt_data.model.name), ' <span class="rw_small_text">(', soy.$$escapeHtml(opt_data.model.key), ')</span></span><a class="rw_change_category_button aui-button"><span>', soy.$$escapeHtml("Change category"), '</span></a></div></div><div class="rw_input_container rw_category_chooser"  style="display:none;" ><div class="rw_input_content rw_has_input_desc"><ul></ul><a class="rw_cancel_category_button aui-button"><span>', soy.$$escapeHtml("Cancel"), '</span></a></div></div></div></div><div id="rw_main_dialog_section"><div class="rw_admin_section rw_padding_bottom_10px"><div id="rw_add_role_button_wrapper"><div class="rw_input_desc" style="line-height: 34px;"><label for="groups">', soy.$$escapeHtml("Roles"), ':</label></div><div class="rw_input_content rw_has_input_desc"><a class="rw_add_role_button rw_button rw_margin_bottom_10px" href="#"><span class="rw_no_icon">', soy.$$escapeHtml("Add"), '</span></a></div></div>');
  RW.Templates.UserCategory.addRoleDialog(null, output);
  output.append('<ul id="rw_user_category_role_list" class="rw_items">');
  if (opt_data.model.roles) {
    var roleList22 = opt_data.model.roles;
    var roleListLen22 = roleList22.length;
    for (var roleIndex22 = 0; roleIndex22 < roleListLen22; roleIndex22++) {
      var roleData22 = roleList22[roleIndex22];
      RW.Templates.UserCategory.role({role: roleData22}, output);
    }
  }
  output.append('</ul></div><div id="rw_role_user_group_section" class="rw_admin_section rw_padding_top_10px">', (opt_data.model.type != 'space') ? '<div class="rw_input_container"><div class="rw_input_desc"><label for="visible">' + soy.$$escapeHtml("Category Dropdown") + ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="checkbox" name="visible" class="rw_check_visibility" ' + ((opt_data.model.visible != false) ? 'checked="checked"' : '') + '><span> ' + soy.$$escapeHtml("Visible") + '</span><br><span class="rw_small_text">' + soy.$$escapeHtml("Show users in category dropdown menu") + '</span><br><input type="checkbox" name="rolesOnly" class="rw_check_rolesonly" ' + ((opt_data.model.rolesOnly == true) ? 'checked="checked"' : '') + '><span class="rw_check_rolesonly_text"> ' + soy.$$escapeHtml("Only display roles") + '</span><br><span class="rw_small_text">' + soy.$$escapeHtml("Only display users with roles in category dropdown menu") + '</span></div></div>' : '', '</div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.addRoleDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_add_role_wrapper" style="display:none;"><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml("User"), ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Search"), '" id="rw_form_roles"><br><div id="rw_role_search_result_container" class="rw_results_container" style="display: none;"></div><div class="rw_error_text">', soy.$$escapeHtml("No user specified"), '</div><span class="rw_small_text">', soy.$$escapeHtml("Select user to assign to this role."), '</span><br><div class="rw_result_tags"><ul id="rw_role_user_result_container" class="rw_items"></ul></div></div></div><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml("Role"), ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Enter role name"), '" id="rw_form_role_name"><br><div class="rw_error_text">', soy.$$escapeHtml("No role name specified"), '</div><span class="rw_small_text">', soy.$$escapeHtml("Define the name of the role, or select one of the suggestions below."), '</span><br><div class="rw_result_tags"><ul id="rw_role_suggestions_container" class="rw_tag_list rw_items"></ul></div></div></div><div class="rw_input_container"><div class="rw_input_content rw_has_input_desc"><a class="rw_save_role_button aui-button aui-button-primary" href="#"><span>', soy.$$escapeHtml("Save role"), '</span></a><a class="rw_cancel_role_button aui-link rw_margin_left" href="#"><span>', soy.$$escapeHtml("Cancel"), '</span></a></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.role = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var user__soy73 = opt_data.role.user;
  output.append('<li class="rw_user_role" data-username="', soy.$$escapeHtml(user__soy73.username), '" data-role-key="', soy.$$escapeHtml(opt_data.role.id), '"><div class="rw_user_role_wrapper"><div class="rw_item_icon"><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy73.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy73.username), '" title="', soy.$$escapeHtml(user__soy73.fullName), '"><img class="userLogo logo" ', (user__soy73.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy73.profilePic) + '"' : (opt_data.fullProfilePicUrl) ? 'src="' + soy.$$escapeHtml(opt_data.fullProfilePicUrl) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy73.username), '" title=""></a></div><div class="rw_item_content rw_has_icon"><div class="rw_ellipsis"><span ', (user__soy73 && user__soy73.fullName) ? 'title="' + user__soy73.fullName + '"' : '', '>', (user__soy73 && user__soy73.fullName) ? user__soy73.fullName : '', '</span><div style="clear:both;"></div><span ', (opt_data.role && opt_data.role.name) ? 'title="' + soy.$$escapeHtml(opt_data.role.name) + '"' : '', ' class="rw_small_text rw_user_category_role">', (opt_data.role && opt_data.role.name) ? soy.$$escapeHtml(opt_data.role.name) : '', '</span></div></div></div><span class="rw_delete_button">X</span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.searchResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var itemList126 = opt_data.results;
  var itemListLen126 = itemList126.length;
  for (var itemIndex126 = 0; itemIndex126 < itemListLen126; itemIndex126++) {
    var itemData126 = itemList126[itemIndex126];
    output.append('<li data-name=', (itemData126.type == 'user') ? soy.$$escapeHtml(itemData126.username) : soy.$$escapeHtml(itemData126.name), '>', (itemData126.type == 'user') ? '<img src="' + soy.$$escapeHtml(itemData126.thumbnailLink.href) + '" height="16px">' : '', '<a class="content-type-userinfo" ><span class="rw_search_item_title">', (itemData126.type == 'user') ? soy.$$escapeHtml(itemData126.title) : soy.$$escapeHtml(itemData126.name), '</span></a></li>');
  }
  output.append((opt_data.results.length == 0) ? '<span class="rw_padding">' + soy.$$escapeHtml("No search results found.") + '</span>' : '', '</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.resultTag = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li ', (opt_data.key) ? 'data-key="' + soy.$$escapeHtml(opt_data.key) + '"' : '', ' data-name="', soy.$$escapeHtml(opt_data.name), '"><span title="', soy.$$escapeHtml("Remove"), '">', soy.$$escapeHtml(opt_data.name), '<span class=\'rw_delete_button\'>X</span></span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.button = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><a class="rw_item_icon rw_people_directory rw_user_category_link" data-tooltip="', soy.$$escapeHtml(opt_data.tooltip), '"></a></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.view = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category rw_in_popup">');
  if (opt_data.model.visible) {
    if ((opt_data.model.userSize == undefined || opt_data.model.userSize == 0) && (opt_data.model.roles == undefined || opt_data.model.roles.length == 0)) {
      output.append('<div class="rw_title">', soy.$$escapeHtml("No users found"), '</div>');
    } else {
      if (opt_data.model.roles && opt_data.model.roles.length > 0) {
        output.append('<ul class="rw_items rw_roles ', (opt_data.model.allUsers && opt_data.model.allUsers.length > 0) ? 'rw_separator' : '', '">');
        var roleList188 = opt_data.model.roles;
        var roleListLen188 = roleList188.length;
        for (var roleIndex188 = 0; roleIndex188 < roleListLen188; roleIndex188++) {
          var roleData188 = roleList188[roleIndex188];
          var user__soy189 = roleData188.user;
          output.append('<li><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy189.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy189.username), '" title="', soy.$$escapeHtml(user__soy189.fullName), '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy189.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy189.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy189.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy189.fullName, '">', user__soy189.fullName, '</span><span title="', soy.$$escapeHtml(roleData188.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData188.name), '</span></span></a></li>');
        }
        output.append('</ul>');
      }
      if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && opt_data.model.rolesOnly != true) {
        output.append('<ul class="rw_items rw_category_members">');
        RW.Templates.UserCategory.userList({model: opt_data.model.allUsers}, output);
        output.append('</ul>');
      }
    }
  } else {
    output.append((opt_data.model.userSize == undefined || opt_data.model.userSize == 0) ? '<div class="rw_title">' + soy.$$escapeHtml("No users found") + '</div>' : '<div class="rw_title">' + soy.$$escapeHtml("Users not visible") + '</div>');
  }
  output.append((opt_data.model.canEdit) ? '<ul class="rw_items rw_category_admin"><li><a class="rw_edit_button"><span class="rw_item_icon"></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis">' + soy.$$escapeHtml("Edit") + '</span></span></a></li></ul>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.inline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category_inline">', (opt_data.categoryName) ? '<div class="rw_title rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.categoryName) + '">' + soy.$$escapeHtml(opt_data.categoryName) + '</div>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.dropDown = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category_dd"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.userList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var userList258 = opt_data.model;
  var userListLen258 = userList258.length;
  for (var userIndex258 = 0; userIndex258 < userListLen258; userIndex258++) {
    var userData258 = userList258[userIndex258];
    output.append('<li ', (opt_data.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(userData258.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(userData258.username), '" title="', userData258.fullName, '">', (opt_data.layout == 'avatar') ? '<img class="userLogo logo" ' + ((userData258.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(userData258.profilePic) + '"' : '') + ' alt="' + soy.$$escapeHtml("User icon") + ': ' + soy.$$escapeHtml(userData258.username) + '" title="">' : '<span class="rw_item_icon"><img class="userLogo logo" ' + ((userData258.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(userData258.profilePic) + '"' : '') + ' alt="' + soy.$$escapeHtml("User icon") + ': ' + soy.$$escapeHtml(userData258.username) + '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis">' + userData258.fullName + '</span></span>', '</a></li>');
  }
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a data-category-key="', soy.$$escapeHtml(opt_data.category.nameKey), '" id="rw_category_item_', soy.$$escapeHtml(opt_data.category.nameKey), '" class="rw_ellipsis">', soy.$$escapeHtml(opt_data.category.name), '</a>');
  if (opt_data.category && opt_data.category.subCategories) {
    output.append('<ul>');
    var catList316 = opt_data.category.subCategories;
    var catListLen316 = catList316.length;
    for (var catIndex316 = 0; catIndex316 < catListLen316; catIndex316++) {
      var catData316 = catList316[catIndex316];
      RW.Templates.UserCategory.categoryItem({category: catData316}, output);
    }
    output.append('</ul>');
  }
  output.append('</div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.spaceMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><div class="rw_user_category rw_in_macro ', (opt_data.macroParam.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.macroParam.layout) : '', '">', (opt_data.macroParam.hideTitle != true) ? (opt_data.macroParam.title != undefined && opt_data.macroParam.title != '') ? '<h3 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.macroParam.title) + '">' + soy.$$escapeHtml(opt_data.macroParam.title) + '</h3>' : '<h3 class="rw_ellipsis" title="' + soy.$$escapeHtml("Space Users") + '">' + soy.$$escapeHtml("Space Users") + '</h3>' : '', (opt_data.macroParam.description != undefined && opt_data.macroParam.description != '') ? '<div class="rw_description">' + soy.$$escapeHtml(opt_data.macroParam.description) + '</div>' : '');
  if (opt_data.model.roles && opt_data.model.roles.length > 0) {
    output.append('<ul class="rw_items rw_roles">');
    var roleList352 = opt_data.model.roles;
    var roleListLen352 = roleList352.length;
    for (var roleIndex352 = 0; roleIndex352 < roleListLen352; roleIndex352++) {
      var roleData352 = roleList352[roleIndex352];
      var user__soy353 = roleData352.user;
      output.append('<li ', (opt_data.macroParam.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy353.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy353.username), '" title="', user__soy353.fullName, '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy353.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy353.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy353.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy353.fullName, '">', user__soy353.fullName, '</span><span title="', soy.$$escapeHtml(roleData352.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData352.name), '</span></span></a></li>');
    }
    output.append('</ul>');
  }
  if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && ! opt_data.macroParam.rolesOnly) {
    output.append('<ul class="rw_items rw_category_members ', (opt_data.model.roles && opt_data.model.roles.length > 0) ? 'rw_separator' : '', '">');
    RW.Templates.UserCategory.userList({model: opt_data.model.allUsers, layout: opt_data.macroParam.layout, size: opt_data.macroParam.size}, output);
    output.append('</ul>');
  }
  output.append((opt_data.model.userSize == 0) ? '<div class="rw_help">' + soy.$$escapeHtml("Here you can add team members and define user roles. ") + '</div>' : '', (opt_data.macroParam.canEdit == true) ? '<a class="rw_configure_button rw_button_discrete" ><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><div class="rw_user_category rw_in_macro ', (opt_data.macroParam.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.macroParam.layout) : '', '"><div class="rw_macro_title"><div class="rw_icon rw_iconfont_users"></div>', (opt_data.macroParam.title != undefined && opt_data.macroParam.title != '') ? '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.macroParam.title) + '">' + soy.$$escapeHtml(opt_data.macroParam.title) + '</h2>' : (opt_data.model.name) ? '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.model.name) + '">' + soy.$$escapeHtml(opt_data.model.name) + '</h2>' : '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml("Users") + '">' + soy.$$escapeHtml("Users") + '</h2>', '</div>', (opt_data.macroParam.description != undefined && opt_data.macroParam.description != '') ? '<div class="rw_description">' + soy.$$escapeHtml(opt_data.macroParam.description) + '</div>' : '');
  if (opt_data.model.userSize > 0 || opt_data.model.children && opt_data.model.children.length > 0) {
    RW.Templates.UserCategory.categoryMacroUsers(opt_data, output);
  } else {
    RW.Templates.Users.empty(null, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryMacroUsers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_tree_view ', (opt_data.macroParam.hierarchy == 'tree_view_closed') ? 'rw_closed' : '', '">', (opt_data.treeMode) ? '<div class="rw_item_link"><span>' + soy.$$escapeHtml(opt_data.model.name) + '</span></div><div class="rw_item_section">' : '');
  if (opt_data.model.roles && opt_data.model.roles.length > 0) {
    output.append('<ul class="rw_items rw_roles">');
    var roleList466 = opt_data.model.roles;
    var roleListLen466 = roleList466.length;
    for (var roleIndex466 = 0; roleIndex466 < roleListLen466; roleIndex466++) {
      var roleData466 = roleList466[roleIndex466];
      var user__soy467 = roleData466.user;
      output.append('<li ', (opt_data.macroParam.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy467.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy467.username), '" title="', soy.$$escapeHtml(user__soy467.fullName), '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy467.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy467.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy467.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy467.fullName, '">', user__soy467.fullName, '</span><span title="', soy.$$escapeHtml(roleData466.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData466.name), '</span></span></a></li>');
    }
    output.append('</ul>');
  }
  if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && ! opt_data.macroParam.rolesOnly) {
    output.append('<ul class="rw_items rw_category_members ', (opt_data.model.roles && opt_data.model.roles.length > 0) ? 'rw_separator' : '', '">');
    RW.Templates.UserCategory.userList({model: opt_data.model.allUsers, layout: opt_data.macroParam.layout, size: opt_data.macroParam.size}, output);
    output.append('</ul>');
  }
  if (opt_data.model.children && opt_data.model.children.length > 0) {
    var childList518 = opt_data.model.children;
    var childListLen518 = childList518.length;
    for (var childIndex518 = 0; childIndex518 < childListLen518; childIndex518++) {
      var childData518 = childList518[childIndex518];
      RW.Templates.UserCategory.categoryMacroUsers({macroParam: opt_data.macroParam, model: childData518, treeMode: true}, output);
    }
  }
  output.append((opt_data.treeMode) ? '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Models.Layout==="undefined"){RW.Models.Layout={}}(function(A){RW.Models.Layout.Sections=RW.Brace.Collection.extend({comparator:function(B){return B.get("group")+""+B.get("position")}});RW.Models.Layout.Items=RW.Brace.Collection.extend({comparator:function(B){return B.getPosition()}});RW.Models.Layout.Boards=RW.Brace.Collection.extend();RW.Models.Layout.VersionListItems=RW.Brace.Collection.extend();RW.Models.Layout.Templates=RW.Brace.Collection.extend();RW.Models.Layout.QuickLinkMacros=RW.Brace.Collection.extend({initialize:function(){this.url=contextPath+"/rest/originaltheme/1.0/layoutboard/RW_TYPE_PLACEHOLDER/suggested-macros";this.model=RW.Models.Layout.QuickLinkMacro}});RW.Models.Layout.Board=RW.Brace.Model.extend({namedAttributes:{sections:RW.Models.Layout.Sections,type:"string",contentKey:"string",layoutBoardInfo:RW.Models.Layout.LayoutBoardInfo},parse:function(B){if(B==undefined){B={id:this.get("type")+"_"+this.get("contentKey")}}else{B.id=B.type+"_"+B.contentKey}return B},initialize:function(B){RW.Models.Layout.Sections.model=RW.Models.Layout.Section;RW.Models.Layout.Items.model=RW.Models.Layout.Item;if(!B.sections){this.setSections(new RW.Models.Layout.Sections())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.getType()+"/"+this.get("contentKey")},addSection:function(C,D){if(C==undefined){C=100}var B=new RW.Models.Layout.Section({position:this.getSectionsInGroup(D).length,width:C,group:D});var F=this.get("contentKey")+"_"+this.get("type")+"-section-"+D+"-"+this.getSectionsInGroup(D).length;var E=RW._.pluck(this.get("sections").models,"id");while(RW._.contains(E,F)){F=F+Math.floor((Math.random()*100)+1)}B.set("id",F);this.get("sections").add(B);return B},removeSection:function(E){var B=E.get("items");var D=true;for(var C=0;C<B.length;C++){if(B.models[C].get("locked")){D=false}}if(D){E.destroy()}},getSectionsInGroup:function(B){var C=RW._.filter(this.get("sections").models,function(D){return D.get("group")==B});return C},getMaxGroup:function(){if(this.get("sections").length>0){var B=this.get("sections").max(function(C){return C.get("group")});return B.get("group")}},getGroupList:function(){var B=[];this.get("sections").each(function(C){var D=C.get("group");if(RW._.isUndefined(B[D])){B[D]=new Array()}B[D].push(C)});return B},sortLayoutBoard:function(){var B=this.get("sections");if(B!=undefined){B.each(function(D){var C=D.get("items");if(C!=undefined){D.set("items",C.sortBy(function(E){return E.get("position")}))}});this.set("sections",B.sortBy(function(C){return C.get("position")}))}}});RW.Models.Layout.Section=RW.Brace.Model.extend({namedAttributes:{id:"string",position:"number",items:RW.Models.Layout.Items,width:"number",group:"number"},initialize:function(B){if(!B.items){this.setItems(new RW.Models.Layout.Items())}},addItem:function(D){if(D==undefined){var E=this.get("id")+"-";var B=0;if(this.get("items")!=undefined&&this.get("items").length!=undefined){B=this.get("items").length}var C=new RW.Models.Layout.Item({position:B,content:"",locked:false});C.setId(E+C.cid);this.get("items").add(C);return C}else{this.get("items").add(D);return D}},removeItem:function(B){this.get("items").remove(B)},destroy:function(){while(this.get("items").length>0){this.get("items").last().destroy()}this.trigger("destroy",this)}});RW.Models.Layout.Item=RW.Brace.Model.extend({namedAttributes:{id:"string",position:"number",content:"string",locked:"boolean",params:"object",defaultParameterValue:"object",macroName:"string"},setContentAsMacro:function(B,I,D){var H=B.callback;var G=B.params;var E={name:G.name,params:G.params,boardType:D};if(G.defaultParameterValue){E.defaultParameterValue=G.defaultParameterValue}if(G.bodyHTML){E.body=G.bodyHTML}var C=new RW.Models.Layout.Macro(E);var F={contentKey:I,type:C.get("boardType"),name:C.get("name"),params:JSON.stringify(C.get("params"))};if(!RW._.isEmpty(C.getBody)){F.body=C.getBody}if(!RW._.isEmpty(C.getDefaultParameterValue())){F.defaultParameterValue=C.getDefaultParameterValue()}C.fetch({cache:false,data:A.param(F),success:RW._.bind(function(J){if(!RW._.isEmpty(C.getParams())){this.setParams(C.getParams());this.setMacroName(C.getName())}if(!RW._.isEmpty(C.getDefaultParameterValue())){this.setDefaultParameterValue(C.getDefaultParameterValue())}else{delete this.attributes.defaultParameterValue}if(J.get("storageFormat")!=undefined){this.setContent(J.get("storageFormat"))}else{this.setContent("")}H(C)},this),failure:function(J){console.log("failed to fetch content")}})},destroy:function(){if(!this.get("locked")){this.trigger("destroy",this)}else{console.log("Cannot destroy item "+this.get("id")+" - it's locked.")}}});RW.Models.Layout.SpaceLayoutBoard=RW.Models.Layout.Board.extend({namedAttributes:RW._.extend({},RW.Models.Layout.Board.namedAttributes,{spaceGroupVisible:"boolean",menuLayoutType:"string",metaDataVisible:"boolean",commentsVisible:"boolean",labelsVisible:"boolean",likesVisible:"boolean",favouriteVisible:"boolean",watchVisible:"boolean",spaceLogoVisible:"boolean",childrenVisible:"boolean",breadcrumbsVisible:"boolean"})});RW.Models.Layout.VersionList=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",versions:RW.Models.Layout.VersionListItems},parse:function(B){B.id=B.type+"_"+B.contentKey;return B},initialize:function(B){RW.Models.Layout.VersionListItems.model=RW.Models.Layout.Version;if(!B.versions){this.setVersions(new RW.Models.Layout.VersionListItems())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.get("type")+"/"+this.get("contentKey")+"/version"},deleteVersion:function(C){var B=this.get("versions").filter(function(D){return D.get("versionNumber")==C});this.trigger("destroy",this)}});RW.Models.Layout.Version=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",versionNumber:"number",date:"string",author:"object",comment:"string",layoutBoard:"object"},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.get("type")+"/"+this.get("contentKey")+"/version/"+this.get("versionNumber").toString()}});RW.Models.Layout.Macro=RW.Brace.Model.extend({namedAttributes:{name:"string",params:"object",boardType:"string",body:"string",storageFormat:"string",defaultParameterValue:null},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/macro"}});RW.Models.Layout.QuickLinkMacro=RW.Brace.Model.extend({namedAttributes:{key:"string",name:"string",icon:"string"}});RW.Models.Layout.LayoutBoardInfo=RW.Brace.Model.extend({namedAttributes:{type:"string",spaceType:"string",level:"string"}});RW.Models.Layout.TemplateList=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",templates:RW.Models.Layout.Templates},initialize:function(B){RW.Models.Layout.Templates.model=RW.Models.Layout.Template;this.set("id",this.get("type")+"_"+this.get("contentKey"));if(!B.templates){this.setTemplates(new RW.Models.Layout.Templates())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.getType()+"/template-board?contentKey="+this.get("contentKey")}});RW.Models.Layout.Template=RW.Brace.Model.extend({namedAttributes:{name:"string",key:"string",description:"string",source:"string"}});RW.Models.Layout.LayoutSpaceKey=RW.Backbone.Model.extend({initialize:function(C,B){B||(B={});this.init&&this.init(attributes,B);this.bind("error",this.defaultErrorHandler)},defaultErrorHandler:function(C,B){if(B.status==401||B.status==403){}},url:contextPath+"/rest/originaltheme/1.0/layoutboard/layout-space-key"})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/categories/category-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}(function(A){RW.Models.AbstractCategories=RW.Brace.Collection.extend();RW.Models.CategoryList=RW.Models.AbstractCategories.extend({namedAttributes:{categories:RW.Models.AbstractCategories},url:function(){return contextPath+"/rest/originaltheme/1.0/category"}});RW.Models.AbstractCategory=RW.Backbone.Model.extend({namedAttributes:{subCategories:RW.Models.AbstractCategories},initialize:function(B){RW.Models.AbstractCategories.model=RW.Models.AbstractCategory;if(!B||!B.subCategories){this.set("subCategories",new RW.Models.AbstractCategories())}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-views-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.Layout==="undefined"){RW.Views.Layout={}}(function(B){RW.initPubSub();var A=10;RW.Views.Layout.MainView=RW.Backbone.View.extend({events:{"click .rw_save_button":"saveModel","click .rw_cancel_button":"cancel","click .rw_template_button":"showTemplates","click .rw_layout_mode_button":"openLayoutMode","click .rw_layout_mode_done_button":"openBoardView","click .rw_layout_mode_cancel_button":"cancelLayoutMode","click .rw_delete_button":"deleteModel","click .rw_versions_button":"openVersionsView","click .rw_version_mode_done_button":"openBoardView","click .rw_preview_button":"showPreview","click .rw_select_template_button":"selectTemplate","click .rw_select_space_type_button":"selectTemplate","click .rw_open_attachments_button":"openAttachments"},currentView:null,previewsView:null,unsavedChanges:false,previewsUnsavedChanges:false,title:"",level:"",$toolbarMenu:null,antiXSS:true,view:"",mainView:"",cancelButtonTemplate:null,initialize:function(C){if(C.title!==undefined){this.title=C.title}if(C.level!==undefined){this.level=C.level}if(C.antiXSS!==undefined){this.antiXSS=C.antiXSS}mainView=this;if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){this.currentView=new RW.Views.Layout.SpaceBoardView({model:this.model,title:this.title,level:this.level})}else{this.currentView=new RW.Views.Layout.BoardView({model:this.model,title:this.title,level:this.level})}this.initSubscriptions();RW.applyTooltip("#rw_layout_board_container .rw_tooltip",{gravity:"n"});B(window).resize(function(){mainView.responsiveLayoutEditor()})},initSubscriptions:function(){RW.PubSub.on("layoutboard:editor-view-ready",RW._.bind(function(C){var D=C.item.model;if(this.antiXSS){B("input[name=formattedBodyString]","#rw_board_editor_form").attr("value",encodeURIComponent(D.get("content")))}else{B("input[name=formattedBodyString]","#rw_board_editor_form").attr("value",D.get("content"))}B("input[name=contentKey]","#rw_board_editor_form").attr("value",mainView.model.get("contentKey"));B("input[name=type]","#rw_board_editor_form").attr("value",mainView.model.get("type"));B("input[name=itemId]","#rw_board_editor_form").attr("value",D.get("id"));var E=RW.openEditorIframeDialog();E.show();B("#rw_board_editor_form").submit();C.item.bindFrame(E)},this));RW.PubSub.on("layoutboard:editor-loaded",function(D){var C=D.form;C.append("<input type='hidden' name='type' value='"+mainView.model.get("type")+"' />");C.append("<input type='hidden' name='contentKey' value='"+mainView.model.get("contentKey")+"' />")});RW.PubSub.on("layoutboard:popup-loaded",function(C){var E=C.itemView;var D=new RW.Models.Layout.QuickLinkMacros();D.url=D.url.replace("RW_TYPE_PLACEHOLDER",mainView.model.get("type"));D.url+="?contentKey="+mainView.model.get("contentKey");D.fetch({cache:false,success:function(G){E.popup.show();var F=B(RW.Templates.Layout.addItemDialog({item:E.model.toJSON(),defaultMacros:D.toJSON()}));B("li",F).each(function(){var I=B(this);var H=AJS.MacroBrowser.getMacroMetadata(I.data("item"));B(".rw_item_content",I).html(H.title);I.attr("title",H.title);if(H.icon!==undefined&&H.icon!==null){B(".rw_item_icon",I).html('<img src="'+contextPath+H.icon.location+'" />')}});E.popup.addPanel("",F,"");B(E.el).html(B(".dialog-page-body","#rw_layoutboard_popup_frame").html())},failure:function(F){console.log("failed to fetch content")}})});RW.PubSub.on("layoutboard:macro-browser-ready",function(C){var D=C.view;var F=RW.Util.XHTMLparser.parse(D.model);if(F.length==1){var E=F[0]}tinymce.confluence.macrobrowser.macroBrowserComplete=function(J){var G=AJS.MacroBrowser.getMacroMetadata(J.name);var H=J;try{var H=AJS.MacroBrowser.getMacroDefinitionFromForm(G)}catch(I){}D.model.setContentAsMacro({params:H,callback:function(K){if(G.formDetails==undefined){G=AJS.MacroBrowser.dialog.activeMetadata}if(!RW._.isEmpty(G.formDetails.body)&&G.formDetails.body.bodyType!="NONE"){D.openEditor(null,true)}RW.PubSub.trigger("layoutboard:unsaved-changes")}},mainView.model.get("contentKey"),mainView.model.get("type"))};tinymce.confluence.macrobrowser.openMacro(E)});RW.PubSub.on("layoutboard:quick-links-ready",function(D){var C=D.view;var E=C.macro;tinymce.confluence.macrobrowser.macroBrowserComplete=function(F){C.model.setContentAsMacro({params:F,callback:function(){}},mainView.model.get("contentKey"),mainView.model.get("type"))};tinymce.confluence.macrobrowser.openMacro(E)});RW.PubSub.on("layoutboard:editor-clicked",function(C){RW.showLoader();B(".rw_save_button",mainView.$el).prop("disabled","disabled")});RW.PubSub.on("layoutboard:selected-space-type",function(C){B(".rw_save_button",mainView.$el).prop("disabled","disabled");B(".rw_save_button",mainView.$el).hide();B(".rw_select_space_type_button",mainView.$el).data("space-type",C);B(".rw_select_space_type_button",mainView.$el).removeProp("disabled");B(".rw_select_space_type_button",mainView.$el).removeClass("rw_hidden")});RW.PubSub.on("layoutboard:unsaved-changes",function(C){mainView.unsavedChanges=true;mainView.currentView.showUnsavedChangesBadge();RW.hideLoader();B(".rw_save_button",mainView.$el).removeProp("disabled");B(".rw_save_button",mainView.$el).show();B(".rw_select_space_type_button",mainView.$el).prop("disabled","disabled");if(!B(".rw_select_space_type_button",mainView.$el).hasClass("rw_hidden")){B(".rw_select_space_type_button",mainView.$el).addClass("rw_hidden")}});RW.PubSub.on("layoutboard:refresh",function(C){mainView.unsavedChanges=false;mainView.openBoardView()});RW.PubSub.on("layoutboard:update-column-height",function(C){if(mainView.model.get("type")!="space"&&mainView.model.get("type")!="global_space"){mainView.$(".rw_layout_board > .rw_board").each(function(){B(".rw_layout_section",this).css("min-height","inherit");B(".rw_layout_section",this).css("min-height",B(this).height()-64)})}});AJS.$(document).unbind("hideLayer");AJS.$(document).bind("hideLayer",function(E,D,C){if(D==="popup"&&(C.element[0].id==="rw_popup_preview_dialog"||C.element[0].id==="rw_popup_editor_dialog")){C.remove()}});this.model.on("sync",function(C,D){if(D==undefined){RW.hideLoader();mainView.unsavedChanges=false;mainView.openBoardView();mainView.responsiveLayoutEditor();RW.PubSub.trigger("layoutboard:saved")}});this.model.on("error",function(){RW.hideLoader();alert("An error occured while saving data.")})},render:function(){this.$el.html(this.currentView.render());RW.removeTooltip();this.responsiveLayoutEditor();return this.$el},saveModel:function(D){D.preventDefault();RW.showLoader();var E=this.model.get("contentKey");var C=this.model.get("type");this.model.get("sections").each(function(G){var F=E+"_"+C+"-section-"+G.get("group")+"-"+G.get("position");G.setId(F);if(G.get("items").comparator){G.get("items").sort()}G.get("items").each(function(H){var I=H.get("id");var J=F+"-"+H.get("position");H.setId(J)})});delete this.model.attributes.layoutBoardInfo;delete this.model.attributes.id;delete this.model.id;this.model.save({},{cache:false})},deleteModel:function(C){C.preventDefault();if(confirm(B(C.currentTarget).data("confirm"))){this.model.id="-";this.model.destroy({success:function(E,D){RW.PubSub.trigger("layoutboard:deleted")}})}},cancel:function(C){C.preventDefault();RW.PubSub.trigger("layoutboard:canceled")},showTemplates:function(E){E.preventDefault();var C=new RW.Models.Layout.TemplateList({type:this.model.getType(),contentKey:this.model.get("contentKey")});RW.showLoader();var D=this.model.get("type");C.fetch({cache:false,success:function(G){RW.hideLoader();var F=new RW.Views.Layout.TemplatesView({model:C,boardType:D})},error:function(F){RW.hideLoader()}})},loadTemplate:function(C){this.model.fetch({cache:false,data:B.param({template:C}),reset:true,success:RW._.bind(function(D){if(this.model.getType()=="space"||this.model.getType()=="global_space"){this.currentView.hideUnsavedChangesBadge();RW.PubSub.trigger("layoutboard:selected-space-type",C)}else{this.currentView.showUnsavedChangesBadge()}this.responsiveLayoutEditor()},this),error:function(){console.log("Something went wrong while fetching model with id "+C)}})},selectTemplate:function(D){var C=B(D.currentTarget).data("space-type");B.ajax({url:contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.model.get("type")+"/template-board/"+this.model.get("contentKey")+"?template="+C,type:"PUT",dataType:"json",success:function(E){RW.PubSub.trigger("layoutboard:space-type-selected")},error:function(E){}})},openLayoutMode:function(C){this.currentView.destroy();this.previewsView=new RW.Models.Layout.Board(this.model.toJSON());this.previewsUnsavedChanges=this.unsavedChanges;this.currentView=new RW.Views.Layout.SectionLayoutView({model:this.model,unsavedChanges:this.unsavedChanges});this.render()},openBoardView:function(C){this.currentView.destroy();if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){this.currentView=new RW.Views.Layout.SpaceBoardView({model:this.model,unsavedChanges:this.unsavedChanges,title:this.title,level:this.level})}else{this.currentView=new RW.Views.Layout.BoardView({model:this.model,unsavedChanges:this.unsavedChanges,title:this.title,level:this.level})}this.render();RW.PubSub.trigger("layoutboard:update-column-height")},openVersionsView:function(E){E.preventDefault();RW.showLoader();var D=new RW.Models.Layout.VersionList({contentKey:this.model.get("contentKey"),type:this.model.get("type")});var C=this;var F=true;if((C.model.get("type")===C.model.get("layoutBoardInfo").type)&&C.model.get("layoutBoardInfo").spaceType==undefined){F=false}D.fetch({cache:false,success:function(G){C.currentView.destroy();C.currentView=new RW.Views.Layout.VersionsView({model:D,defaultBoard:F});C.render();Confluence.Binder.userHover();RW.hideLoader()},failure:function(G){RW.hideLoader()}})},showPreview:function(D){D.stopPropagation();D.preventDefault();var C=this.model.toJSON();C=RW._.omit(C,"id");C=JSON.stringify(C);B("input[name=type]","#rw_board_preview_form").attr("value",this.model.get("type"));B("input[name=contentKey]","#rw_board_preview_form").attr("value",this.model.get("contentKey"));B("input[name=boardAsJSON]","#rw_board_preview_form").attr("value",C);var E=RW.openPreviewDialog();E.show();B("#rw_board_preview_form").submit()},openAttachments:function(D){D.stopPropagation();D.preventDefault();var C=RW.openIframeDialog(contextPath+"/pages/view-attachments.action?pageId="+AJS.params.pageId,"Attachments ","",true);C.addButton("Done",function(){C.remove();RW.hideLoader()},"rw_editor_done_button");C.show()},cancelLayoutMode:function(C){this.model=this.previewsView;this.unsavedChanges=this.previewsUnsavedChanges;this.openBoardView()},responsiveLayoutEditor:function(){if(B(".rw_layout_board_toolbar",this.$el).width()<1180){B(".rw_layout_board_toolbar",this.$el).addClass("rw_collapsed")}else{B(".rw_layout_board_toolbar",this.$el).removeClass("rw_collapsed")}}});RW.Views.Layout.SectionLayoutView=RW.Backbone.View.extend({events:{"click .rw_add_section_button":"createSection","click .rw_add_top_section_button":"createTopSection","click .rw_add_bottom_section_button":"createBottomSection","click .rw_remove_section_button":"removeSection"},template:null,views:[],minWidth:100,maxTotalWidth:1000,unsavedChanges:false,initialize:function(C){var D=this.model.get("sections");this.template=RW.Templates.Layout.boardLayout({model:this.model.toJSON()});this.setElement(this.template);if(C.unsavedChanges!==undefined){this.unsavedChanges=C.unsavedChanges}},render:function(){var C=this;this.views=[];this.template=RW.Templates.Layout.boardLayout({model:this.model.toJSON(),maxGroup:this.model.getMaxGroup()+1});B(this.el).html(B(this.template).html());this.addAll();for(var E=0;E<this.model.getGroupList().length;E++){if(this.model.getGroupList()[E]){if(this.model.getGroupList()[E].length<A){var D=RW.Templates.Button.add({cssClass:"rw_add_section_button rw_tooltip",data:E,tooltip:"Add section"});B(".rw_board_group_"+E,this.$el).append(B(D))}}else{B(".rw_board_group_"+E,this.$el).remove()}}RW._.each(this.model.getGroupList(),RW._.bind(function(G){var H=RW._.filter(this.views,function(I){return I.model.get("group")==G[0].getGroup()});var F=0;if(H.length>0){F=44}RW.disarm=H[0].$el;RW.Util.ResizableUtil.resizeColumns(H,".rw_board_group_"+G[0].getGroup(),1000-(H.length)*F,100-(H.length-1)*4,true,function(){RW._.each(H,function(I,J){I.model.set("width",parseInt(I.$el.find("h1").text()));RW.PubSub.trigger("layoutboard:unsaved-changes")})});RW._.each(H,function(I,J){I.$el.width(parseInt(I.$el.width())-F)})},this));B(".ui-resizable-handle",this.el).attr("data-tooltip","Resize sections");RW.applyTooltip("#rw_layout_board_container .ui-resizable-handle");if(this.unsavedChanges){this.showUnsavedChangesBadge()}RW.removeTooltip();return B(this.el)},addOne:function(D){var C=new RW.Views.Layout.EditableSectionView({model:D});var E=".rw_board_group_"+D.get("group");B(E,this.$el).append(B(C.render()));this.views.push(C)},addAll:function(){this.model.get("sections").forEach(RW._.bind(function(C){this.addOne(C)},this))},createSection:function(F){F.preventDefault();F.stopPropagation();var E=parseInt(B(F.currentTarget).attr("data-id"));var I=this.model.getSectionsInGroup(E);var H=I.length;if(H<A){var G=Math.floor(100/(H+1));var C=0;RW._.each(I,function(K,J){C+=G;K.set("width",G)});var D=this.model.addSection(100-C,E);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()}},createTopSection:function(C){C.preventDefault();C.stopPropagation();this.model.get("sections").each(function(D){var E=D.getGroup();D.setGroup(E+1)});this.model.addSection(100,0);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},createBottomSection:function(C){C.preventDefault();C.stopPropagation();this.model.addSection(100,this.model.getGroupList().length);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},removeSection:function(F){var E=B(F.target).parent().data("id");var G=this.model.get("sections").get(E);var D=this.model;this.model.removeSection(G);var J=this.model.getSectionsInGroup(G.getGroup());var I=J.length;if(I===0){this.model.get("sections").each(function(K){if(K.getGroup()>G.getGroup()){K.setGroup(K.getGroup()-1)}})}var H=Math.floor(100/(I));var C=0;RW._.each(J,function(L,K){if(I===(K+1)){L.set("width",100-C)}else{L.set("width",H)}C+=H});B("#rw_section_"+E).trigger("destroy");RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},showUnsavedChangesBadge:function(){B(this.el).addClass("rw_has_unsaved_changes")},hideUnsavedChangesBadge:function(){B(this.el).removeClass("rw_has_unsaved_changes")},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.BoardView=RW.Backbone.View.extend({unsavedChanges:false,title:"",level:"",initialize:function(C){if(C.unsavedChanges!==undefined){this.unsavedChanges=C.unsavedChanges}if(C.title!==undefined){this.title=C.title}if(C.level!==undefined){this.level=C.level}var D=RW.Templates.Layout.board({model:this.model.toJSON(),title:this.title,level:this.level});this.setElement(D);if(this.model.get("type")=="space"){RW.spaceLayoutKey=this.model.get("contentKey")}this.model.unbind("change");this.model.bind("change",this.render,this)},render:function(){var C=RW.Templates.Layout.board({model:this.model.toJSON(),maxGroup:this.model.getMaxGroup()+1,title:this.title,level:this.level});B(this.el).html(B(C).html());this.addAll();if(this.unsavedChanges){this.showUnsavedChangesBadge()}return B(this.el)},addOne:function(E){var C=new RW.Views.Layout.SectionView({model:E});if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){var D=B(C.render().el);D.addClass("rw_space_board_position_"+E.get("position"));if(E.get("position")==0){D.addClass("rw_left_column_board")}else{D.addClass("rw_right_column_board")}B("#rw_space_section_placeholder_"+E.get("position"),B(this.el)).after(D);B("#rw_space_section_placeholder_"+E.get("position"),B(this.el)).remove()}else{var F=".rw_board_group_"+E.get("group");B(F,B(this.el)).append(B(C.render().el))}C.makeSortable()},addAll:function(){var D=0;var C=this;this.model.get("sections").forEach(RW._.bind(function(E){this.addOne(E);D++},this))},showUnsavedChangesBadge:function(){B(this.el).addClass("rw_has_unsaved_changes")},hideUnsavedChangesBadge:function(){B(this.el).removeClass("rw_has_unsaved_changes")},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.SpaceBoardView=RW.Views.Layout.BoardView.extend({events:function(){return RW._.extend({},RW.Views.Layout.BoardView.prototype.events,{"click .rw_space_setting>input":"checkBoxEvent"})},render:function(){var C=RW.Templates.Layout.spaceBoard({model:this.model.toJSON(),title:this.title,level:this.level});B(this.el).html(B(C).html());this.addAll();if(this.unsavedChanges){this.showUnsavedChangesBadge()}return B(this.el)},checkBoxEvent:function(C){var D=B(C.currentTarget).data("key");if(D==="menuLayoutType"){if(B(C.currentTarget).is(":checked")){this.model.set(D,"simple",{silent:true})}else{this.model.set(D,"",{silent:true})}}else{this.model.set(D,B(C.currentTarget).is(":checked"),{silent:true})}RW.PubSub.trigger("layoutboard:unsaved-changes")}});RW.Views.Layout.VersionsView=RW.Backbone.View.extend({events:{"click .rw_layout_preview_button":"previewVersion","click .rw_layout_revert_button":"revertToVersion","click .rw_layout_delete_button":"deleteVersion"},defaultBoard:false,initialize:function(C){if(C.defaultBoard!==undefined){this.defaultBoard=C.defaultBoard}this.template=RW.Templates.Layout.boardVersions({versionsModel:this.model.toJSON(),defaultBoard:this.defaultBoard});this.setElement(this.template);this.model.unbind("change");this.model.bind("change",this.updateTemplate,this)},render:function(){B(this.el).html(B(this.template).html());return B(this.el)},updateTemplate:function(){this.template=RW.Templates.Layout.boardVersions({versionsModel:this.model.toJSON(),defaultBoard:this.defaultBoard});this.render()},previewVersion:function(D){D.preventDefault();var C=B(D.currentTarget).closest(".rw_item").attr("data-id");B("input[name=versionNumber]","#rw_board_preview_form").attr("value",C);B("input[name=type]","#rw_board_preview_form").attr("value",mainView.model.get("type"));B("input[name=contentKey]","#rw_board_preview_form").attr("value",mainView.model.get("contentKey"));var E=RW.openPreviewDialog();E.show();B("#rw_board_preview_form").submit();D.stopPropagation();D.preventDefault()},revertToVersion:function(G){G.preventDefault();var E=parseInt(B(G.currentTarget).closest(".rw_item").attr("data-id"));var F=this.model.get("type");var H=this.model.get("contentKey");var D=new AJS.Dialog({id:"rw_layoutboard_restore_version",closeOnOutsideClick:true,width:500,height:300});D.addHeader("Restore this version");var C=B(RW.Templates.Layout.restoreVersion());D.addPanel("",C,"");D.addButton("Restore this version",function(){var I=new RW.Models.Layout.Version({versionNumber:E,contentKey:H,type:F,comment:B("#comment-field",C).val()});I.save({},{cache:false,success:function(K,J){RW.PubSub.trigger("layoutboard:version-restored")}});D.remove()});D.addCancel("Cancel",function(){D.remove()});B("input",C).val("Restored to version"+" "+E);D.show()},deleteVersion:function(F){F.preventDefault();var D=this;var E=B(F.currentTarget).closest(".rw_item").attr("data-id");var C=this.model.get("versions").filter(function(G){return G.getVersionNumber()==E});if(C&&confirm(B(F.currentTarget).data("confirm"))){C[0].id="";C[0].destroy({success:function(){D.model.fetch({cache:false,success:function(){D.updateTemplate();D.render()}})}});this.model.trigger("change")}},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.EditableSectionView=RW.Backbone.View.extend({initialize:function(){var C=RW.Templates.Layout.editableSection({section:this.model.toJSON()});this.setElement(C)},render:function(){var C=RW.Templates.Layout.editableSection({section:this.model.toJSON()});B(this.el).html(B(C).html());return B(this.el)},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.SectionView=RW.Backbone.View.extend({events:{"click .rw_open_editor":"openEditorDirectly","click .rw_edit_macro":"editMacro","click .rw_add_item_button":"createItem",updatePositions:"updatePositions","click .rw_remove_item":"deleteItem",},initialize:function(){var C=RW.Templates.Layout.section({section:this.model.toJSON()});this.setElement(C);this.views=[];this.initSubscriptions()},render:function(){var C=RW.Templates.Layout.section({section:this.model.toJSON()});B(this.el).html(B(C).html());this.addAll();return this},initSubscriptions:function(){var C=this;RW.PubSub.on("layoutboard:create-dialog-cancel",function(D){RW._.each(C.views,function(E){if(D.view.model.id===E.model.id){C.removeItem(E.model.id)}})})},addOne:function(D){var C=new RW.Views.Layout.ItemView({model:D});B(".rw_add_item_container",this.el).before(B(C.render().el));this.views.push(C)},addAll:function(){this.model.get("items").forEach(RW._.bind(function(C){this.addOne(C)},this))},removeItem:function(D){var C=this.model.get("items").get(D);this.model.removeItem(C);B("#rw_item_"+D.replace(/\~/g,"\\~")).trigger("destroy");this.updatePositions();RW.removeTooltip()},addItem:function(D){var C=this.model.addItem(D);this.addOne(C);this.updatePositions()},makeSortable:function(){var D=this;var C=this.views;this.$(".rw_layout_section").sortable({items:"li.rw_item_board",helper:"original",connectWith:".ui-sortable",dropOnEmpty:true,tolerance:"pointer",over:function(E,F){B("#rw_layout_board_container .rw_selected").removeClass("rw_selected");B(this).addClass("rw_selected")},stop:function(E,F){B("#rw_layout_board_container .rw_selected").removeClass("rw_selected");RW.removeTooltip()},update:function(F,L){var N=D.model.id;if(L.sender!=undefined){var H=B(L.sender).data("id");if(N!=H){B(this).append(B(".rw_add_item_container",this));var G=D.model.collection;var E=G.get(N);var K=B(L.item).data("id");var M=G.get(H);var O=M.get("items").get(K);M.removeItem(O);E.addItem(O);B("#rw_section_"+H.replace(/\~/g,"\\~")).trigger("updatePositions");B("#rw_section_"+N.replace(/\~/g,"\\~")).trigger("updatePositions")}else{}}else{var G=D.model.collection;var J=G.get(N);var I=J.get("items");I.comparator=function(Q,P){return Q.getPosition()-P.getPosition()};I.sort()}B("#rw_section_"+N.replace(/\~/g,"\\~")).trigger("updatePositions");RW.PubSub.trigger("layoutboard:update-column-height")},})},openEditor:function(E){var D=this.model.get("items").get(B(E.currentTarget).closest(".rw_item").data("id"));E.stopPropagation();E.preventDefault();var C=new RW.Views.Layout.Popup({model:D})},openEditorDirectly:function(E){E.stopPropagation();E.preventDefault();var D=this.model.get("items").get(B(E.currentTarget).closest(".rw_item").data("id"));var C=new RW.Views.Layout.Popup({model:D,skipPopup:true})},editMacro:function(E){E.stopPropagation();E.preventDefault();var D=this.model.get("items").get(B(E.currentTarget).closest(".rw_item").data("id"));var C=new RW.Views.Layout.Popup({model:D,editMacro:true})},createItem:function(E){E.preventDefault();E.stopPropagation();var D;D=this.model.addItem();this.addOne(D);this.updatePositions();var C=new RW.Views.Layout.Popup({model:D})},deleteItem:function(C){this.removeItem(B(C.currentTarget).closest(".rw_item").data("id"));C.stopPropagation();C.preventDefault()},updatePositions:function(){for(var D=0;D<this.model.get("items").models.length;D++){var E=this.model.get("items").models[D];var C=B("#rw_item_"+E.get("id").replace(/\~/g,"\\~"),"#rw_section_"+this.model.get("id").replace(/\~/g,"\\~")).index();E.set("position",C)}RW.PubSub.trigger("layoutboard:unsaved-changes")}});RW.Views.Layout.ItemView=RW.Backbone.View.extend({events:{destroy:"destroyItem",},initialize:function(){var C=RW.Templates.Layout.item({item:this.model});this.setElement(C);this.model.unbind("change");this.model.bind("change",this.render,this)},render:function(){if(this.model.get("content")!=undefined&&this.model.get("content").length>0){var E=RW.Util.XHTMLparser.parse(this.model);var D=RW.Util.XHTMLparser.getAsHTML(E);var C="";for(var G in D){C+=D[G]}}var F=RW.Templates.Layout.item({item:this.model,content:C});B(this.el).html(B(F).html());return this},destroyItem:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.Popup=RW.Backbone.View.extend({popup:null,skipPopup:false,editMacro:false,itemView:null,events:{"click #rw_macrobrowser_button":"openMacroBrowser","click #rw_editor_button":"openEditor","click .rw_quicklink_button":"macroItemLinkHandler"},initialize:function(C){if(B("#rw_layoutboard_popup_frame").length>0){B("#rw_layoutboard_popup_frame").remove()}else{}if(C.skipPopup){this.openEditor()}else{if(C.editMacro){this.openMacroBrowser()}else{this.render()}}this.setElement(B(".dialog-page-body","#rw_layoutboard_popup_frame"))},render:function(){var C=this;this.popup=new AJS.Dialog({id:"rw_layoutboard_popup_frame",closeOnOutsideClick:true});this.popup.addHeader("Add new item");this.popup.addButton("Cancel",function(){C.popup.remove();RW.PubSub.trigger("layoutboard:create-dialog-cancel",{view:C})});RW.PubSub.trigger("layoutboard:popup-loaded",{itemView:C})},macroItemLinkHandler:function(E){var C=this;var D={name:B(E.currentTarget).data("item")};C.macro=D;RW.PubSub.trigger("layoutboard:quick-links-ready",{view:C});this.destroy()},openMacroBrowser:function(D){var C=this;RW.PubSub.trigger("layoutboard:macro-browser-ready",{view:C});this.destroy()},openEditor:function(D,E){if(D){D.stopPropagation()}var C=new RW.Views.Layout.EditFrame({model:this.model});if(!E){this.destroy()}},destroy:function(C){if(this.popup!=undefined){this.popup.remove()}else{B("#rw_layoutboard_popup_frame").remove()}this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.EditFrame=RW.Backbone.View.extend({initialize:function(){this.render()},render:function(){var C=this;RW.PubSub.trigger("layoutboard:editor-view-ready",{item:C})},bindFrame:function(E){var D=this.model;var C;B("#rw_popup_iframe_id").bind("editorIframeHasLoaded",function(){RW.PubSub.trigger("layoutboard:editor-loaded",{form:B("#rw_popup_iframe_id").contents().find("#editpageform")});if(B("#rw_popup_iframe_id").contents().find("#rw_saved_content").length>0){var I="";var H=B("#rw_popup_iframe_id").contents().find("#rw_saved_content");if(H.data("anti-xss")){I=H.text()}else{I=RW.htmlDecode(H.html())}D.set("content",I);var G=[];var F=[];B.each(B(".rw_macro_param_data",B("#rw_popup_iframe_id").contents().find("#rw_saved_macro_params")),function(J,K){var L=B(K).data();if(RW._.isEmpty(L.macroDefaultParameter)){F.push("")}else{F.push(L.macroDefaultParameter);delete L.macroDefaultParameter}G.push(L)});if(G.length>0){D.set("params",G)}if(F.length>0){D.set("defaultParameterValue",F)}else{D.set("defaultParameterValue",null)}E.remove();RW.hideLoader();RW.PubSub.trigger("layoutboard:unsaved-changes")}else{B("#rw_popup_iframe_id").contents().find("body").addClass("rw_layout_board_confluence_editor");B("#rw_popup_iframe_id").contents().find("#editor-precursor").remove();B("#rw_popup_iframe_id").contents().find("#header-precursor").remove();B("#rw_popup_iframe_id").contents().find("#rte-button-toolbartoggle").remove();B("#rw_popup_iframe_id").css("visibility","visible");RW.hideLoader();B(".rw_editor_done_button","#rw_popup_editor_dialog").bind("click",function(){B("#rw_popup_iframe_id").contents().find("#rte-savebar").show();B("#rw_popup_iframe_id").contents().find("#rte-button-publish").click();B("#rw_popup_editor_dialog").hide();B(".aui-blanket","body").hide();RW.PubSub.trigger("layoutboard:editor-clicked")})}})}});RW.Views.Layout.TemplatesView=RW.Backbone.View.extend({boardType:"",events:{"click a":"selectTemplate"},initialize:function(C){if(C.boardType!==undefined){this.boardType=C.boardType}this.render()},render:function(){var D=0;var C=B("#rw_layout_board_container .rw_layout_board_mode").data("space-type");var G=new AJS.Dialog({id:"rw_layout_template_popup",closeOnOutsideClick:true});var F=0;var E=B(RW.Templates.Layout.templateList({model:this.model.toJSON()}));G.addPanel("",E,"");if(C!=undefined){B("#rw_template_"+C).addClass("rw_selected")}if(this.boardType==="space"||this.boardType==="global_space"){G.addHeader("Choose a space type");G.addSubmit("Select space type",function(H){if(B("a.rw_selected",E).data("template-key")!==undefined){mainView.loadTemplate(B("a.rw_selected",E).data("template-key"))}G.remove()})}else{G.addHeader("Choose a template");G.addSubmit("Select template",function(H){if(B("a.rw_selected",E).data("template-key")!==undefined){mainView.loadTemplate(B("a.rw_selected",E).data("template-key"))}G.remove()})}G.addCancel("Cancel",function(){G.remove()});G.show();G.gotoPanel(D);this.setElement(E);return this.$el},selectTemplate:function(C){B("a.rw_selected",this.$el).removeClass("rw_selected");B(C.currentTarget).addClass("rw_selected")}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(C){var E=false;var B;var D;AJS.toInit(function(){if(C("#rw_layout_board_container").length>0){C("#rw_layout_board_container").html(RW.Templates.Layout.loader())}C(document).ajaxSuccess(function(L,M,K){if(K.url.indexOf(AJS.params.contextPath+"/plugins/macrobrowser/browse-macros.action")==0){if(C("#rw_global_dashboard_editor_oa").length>0){var I=new RW.Models.Layout.Board({contentKey:"dashboard",type:"dashboard"});A(I,C("#rw_dashboard_link").text().trim(),"content",C("#rw_global_dashboard_editor_oa").data("anti-xss"));var H=function(N){F(N,contextPath+"/dashboard.action")};RW.PubSub.on("layoutboard:saved",function(){H(true)});RW.PubSub.on("layoutboard:deleted",H);RW.PubSub.on("layoutboard:canceled",H);RW.PubSub.on("layoutboard:version-restored",function(){H(true)})}else{if(C("#rw_global_dashboard_editor_category").length>0){var J=C("#rw_global_dashboard_editor_category");var I=new RW.Models.Layout.Board({contentKey:J.data("category-key"),type:"category"});A(I,J.data("category-name")+" "+"Dashboard","content",C("#rw_global_dashboard_editor_category").data("anti-xss"));var H=function(N){F(N,contextPath+"/category/"+J.data("category-key"))};RW.PubSub.on("layoutboard:saved",function(){H(true)});RW.PubSub.on("layoutboard:deleted",H);RW.PubSub.on("layoutboard:canceled",H);RW.PubSub.on("layoutboard:version-restored",function(){H(true)})}else{if(C("#rw_edit_space_layout_board").length>0){var I=new RW.Models.Layout.SpaceLayoutBoard({contentKey:C("#rw_space_key").html(),type:"space"});A(I,"Space Layout","content",C("#rw_edit_space_layout_board").data("anti-xss"));var H=function(N){F(N,contextPath+"/spaces/viewspace.action?key="+C("#rw_space_key").html())};RW.PubSub.on("layoutboard:saved",function(){H(true)});RW.PubSub.on("layoutboard:deleted",H);RW.PubSub.on("layoutboard:canceled",H);RW.PubSub.on("layoutboard:version-restored",function(){H(true)});RW.PubSub.on("layoutboard:space-type-selected",function(){H(true)})}else{if(C("#rw_edit_user_dashboard_layout").length>0){var I=new RW.Models.Layout.Board({contentKey:C("#rw_user_key").html(),type:"user"});A(I,"User dashboard","content",C("#rw_edit_user_dashboard_layout").data("anti-xss"));var H=function(N){F(N,contextPath+"/users/view-user-dashboard.action?username="+C("#rw_user_key").html())};RW.PubSub.on("layoutboard:saved",function(){H(true)});RW.PubSub.on("layoutboard:deleted",H);RW.PubSub.on("layoutboard:canceled",H);RW.PubSub.on("layoutboard:version-restored",function(){H(true)})}else{if(C("#rw_edit_global_user_dashboard_layout").length>0){var G=C("#rw_custom_user_dashboard_list").length>0;var I=new RW.Models.Layout.Board({contentKey:C("#rw_user_key").html(),type:"global_user"});A(I,"User dashboard","global",C("#rw_edit_global_user_dashboard_layout").data("anti-xss"));RW.PubSub.on("layoutboard:saved",function(){RW.message({type:"success"},"Your changes have been saved");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});if(G){RW.PubSub.trigger("layoutboard:add-custom-users")}});RW.PubSub.on("layoutboard:deleted",function(){RW.message({type:"success"},"You have successfully reverted back to the default settings");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});if(G){RW.PubSub.trigger("layoutboard:add-custom-users");I=new RW.Models.Layout.Board({contentKey:C("#rw_user_key").html(),type:"global_user"});A(I,"User dashboard","global")}});RW.PubSub.on("layoutboard:canceled",function(){RW.message({type:"info"},"Editing canceled ");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:version-restored",function(){RW.message({type:"success"},"You have successfully restored a previous version");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});if(G){RW.PubSub.on("layoutboard:change-to-custom",function(N){I=new RW.Models.Layout.SpaceLayoutBoard({contentKey:N.key,type:"user"});A(I,N.key,"content")});RW.PubSub.trigger("layoutboard:add-custom-users")}}else{if(C("#rw_edit_global_space_layout_board").length>0){var I=new RW.Models.Layout.SpaceLayoutBoard({contentKey:"global_space",type:"global_space"});A(I,"Space Layout","global",C("#rw_edit_global_space_layout_board").data("anti-xss"));RW.PubSub.on("layoutboard:saved",function(){RW.message({type:"success"},"Your changes have been saved");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces")});RW.PubSub.on("layoutboard:deleted",function(){RW.message({type:"success"},"You have successfully reverted back to the default settings");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces");I=new RW.Models.Layout.SpaceLayoutBoard({contentKey:"global_space",type:"global_space"});A(I,"Space Layout","global")});RW.PubSub.on("layoutboard:canceled",function(){RW.message({type:"info"},"Editing canceled ");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:space-type-selected",function(){RW.message({type:"success"},"You have successfully selected a space type");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces")});RW.PubSub.on("layoutboard:version-restored",function(){RW.message({type:"success"},"You have successfully restored a previous version");I.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:change-to-custom",function(N){I=new RW.Models.Layout.SpaceLayoutBoard({contentKey:N.key,type:"space"});A(I,N.name,"content")});RW.PubSub.trigger("layoutboard:add-custom-spaces")}}}}}}}});var F=function(I,H){D=I;if(C.browser.msie&&!I){window.onbeforeunload=function(){};var G=RW.backEventHandler();if(G!=undefined&&G.length>0){if(confirm(G)){window.location=H;return }}else{window.location=H}}else{window.location=H}window.onbeforeunload=RW.backEventHandler}});function A(F,H,I,G){if(!E){window.onbeforeunload=RW.backEventHandler;E=true}F.fetch({cache:false,reset:true,success:function(J){F.sortLayoutBoard();RW.mainView=new RW.Views.Layout.MainView({model:F,title:H,level:I,antiXSS:G});B=RW.mainView;C("#rw_layout_board_container").html(RW.mainView.render());RW.mainView.responsiveLayoutEditor();RW.PubSub.trigger("layoutboard:update-column-height")},failure:function(J){console.log("failed to fetch content")}});RW.openEditorIframeDialog=function(M,Q){RW.showLoader();var K="rw_popup_editor_dialog";var P=RW.getPopupWidth();var L=RW.getPopupHeight();var J=new AJS.Dialog({width:P,height:L,id:K});var N="jQuery(this).trigger('editorIframeHasLoaded')";var O=C('<div><iframe id="rw_popup_iframe_id" name="rw_popup_iframe_id" style="visibility:hidden;" onload="'+N+' " allowTransparency="true" frameBorder="0" class="rw_popup_iframe" style="width:100%;" ></iframe></div>');J.addPanel("",O,"");J.addButton("Done",function(){},"aui-button aui-button-primary rw_editor_done_button");J.addCancel("Cancel",function(){J.remove();RW.hideLoader()});J.show();if(RW.confluenceVersion<5){J.popup.element.height(J.popup.element.height()-20)}C("iframe",O).attr("height",C(".dialog-panel-body",J.popup.element).height());return J};RW.openPreviewDialog=function(){var K="rw_popup_preview_dialog";var P=RW.getPopupWidth();var L=RW.getPopupHeight();var M=55;var J=new AJS.Dialog({width:P,height:L,id:K});var P=RW.getPopupWidth();var L=RW.getPopupHeight();var J=new AJS.Dialog({width:P,height:L,id:K});var N="jQuery(this).trigger('editorIframeHasLoaded')";var O=C('<div><iframe id="rw_preview_popup_iframe_id" name="rw_preview_popup_iframe_id" onload="RW.hideLoader(); '+N+' " allowTransparency="true" frameBorder="0" class="rw_popup_iframe" style="width:100%;" ></iframe></div>');J.addPanel("",O,"");J.addButton("Done",function(){J.remove();RW.hideLoader()},"aui-button aui-button-primary rw_editor_done_button");J.show();if(RW.confluenceVersion<5){J.popup.element.height(J.popup.element.height()-20)}C("iframe",O).attr("height",C(".dialog-panel-body",J.popup.element).height());return J}}RW.backEventHandler=function(F){if(B&&B.unsavedChanges&&!D){return "The board still has unsaved changes, are you sure you want to leave?"}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/custom-layout-board-list-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(G){var A=false;AJS.toInit(function(){RW.PubSub.on("layoutboard:add-custom-spaces",function(){F("Spaces with custom space layouts","spaces")});RW.PubSub.on("layoutboard:add-custom-users",function(){F("User with custom user dashboards","users")})});function F(J,H){var I=G(RW.Templates.Button.button({content:J,cssClass:"rw_custom_layout_board_button"}));if(RW.confluenceVersion>=5){I.css("margin-top","-50px")}else{I.css("margin-bottom","15px")}if(!A){G("#rw_layout_board_container").parent().prepend(I);A=true}I.click(function(){var K=null;if(H==="spaces"){K=new C()}else{K=new D()}K.fetch({cache:false,success:function(N){var L=new B({model:K});var M=new AJS.Dialog({id:"rw_layout_board_list_dialog",closeOnOutsideClick:false,width:840});M.addHeader(J);M.addPanel("",L.render(H),"");M.show();M.addCancel("Cancel",function(){M.remove()});M.addButton("Refresh",function(){L.refresh()},"rw_left")},failure:function(L){console.log("failed to fetch content")}})})}var C=RW.Brace.Model.extend({namedAttributes:{spaces:E},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/custom-spaces"}});var D=RW.Brace.Model.extend({namedAttributes:{users:E},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/custom-users"}});var E=RW.Brace.Model.extend({});var B=RW.Backbone.View.extend({type:"",events:{"click .rw_refresh":"refresh"},initialize:function(){},render:function(I){this.type=I;var J;if(I=="spaces"){J=this.model.get("spaces")}else{if(I=="users"){J=this.model.get("users")}}var H=RW.Templates.Layout.customLayoutBoardList({list:J,type:I});this.$el.html(H);return this.$el},refresh:function(){var H=this;this.model.fetch({cache:false,success:function(I){H.render(H.type)}})},loadBoard:function(J){var I=G(J.currentTarget).closest("li").data("key");var H=G(J.currentTarget).closest("li").data("name");RW.PubSub.trigger("layoutboard:change-to-custom",{key:I,name:H})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/xhtml-parser-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Util==="undefined"){RW.Util={}}(function(I){var O="AC:MACRO";var B="AC:STRUCTURED-MACRO";var N="structured-macro";var P="macro";var C="ac:name";var J="AC:PARAMETER";var D="parameter";var Q="AC:DEFAULT-PARAMETER";var M="default-parameter";var G="AC:RICH-TEXT-BODY";var H="rich-text-body";var F="AC:PLAIN-TEXT-BODY";var E="plain-text-body";var L=50;var K="AC:IMAGE";var A="image";RW.Util.XHTMLparser={parse:function(V){var U=V.get("content");var X=[];var R=[];var W=[];var T=false;var Z=0;var Y=0;if(I.browser.msie&&parseInt(I.browser.version,10)===8&&U.indexOf("</ac:structured-macro>")===-1){U=U.replace(/(<ac:structured-macro.*?)\/>/g,"$1></ac:structured-macro>")}U=U.replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,"");S(U);if(T){W.push({more:true})}return W;function S(a){I.each(I(a),function(){var e=I(this).prop("tagName");if(e==O||e==B||e==P||e==N){var g={};g.name=I(this).attr(C);var b;b=AJS.MacroBrowser.getMacroMetadata(g.name);if(b){g.icon=b.icon;if(b.title){g.title=b.title}}I.each(this.childNodes,function(){var j=I(this).prop("tagName");var l=this.innerHTML;switch(j){case D:case J:if(!g.params){g.params={}}var k=I(this).attr(C);if(RW._.isEmpty(k)){g.defaultParameterValue=l}else{g.params[k]=l}break;case M:case Q:g.defaultParameterValue=l;break;case H:case G:g.body=this;break;case E:case F:g.body=this;break;default:console.log("Found an unknown macro property while generating preview html: "+j);break}});var i;var d;if(RW._.isArray(V.get("params"))){i=V.get("params")[Z];Z++}else{i=V.get("params")}if(RW._.isArray(V.get("defaultParameterValue"))){d=V.get("defaultParameterValue")[Y];Y++}else{d=V.get("defaultParameterValue")}if(!RW._.isEmpty(i)){g.params=i}if(!RW._.isEmpty(d)){g.defaultParameterValue=d}if(W.length<3){W.push(g)}else{T=true;return }}else{if(e=="P"){S(this.childNodes)}else{if(W.length<3){if(e==K||e==A){var c={};c.isImage=true;c.content="<div>"+"Unable to preview item"+"</div>";if(I(":first",this).attr("ri:filename")!=undefined){}c.content='<img src="'+contextPath+"/download/attachments/"+AJS.Meta.get("page-id")+"/"+I(":first",this).attr("ri:filename")+'" />';W.push(c)}else{var h;if(this.textContent!=undefined){h=this.textContent}else{if(this.innerText!=undefined){h=this.innerText}else{if(e==undefined&&this.nodeName=="#text"){h=this.data}}}if(h!=undefined){var f=h.replace(/\W|\n/g,"");if(f.length>0){W.push(this)}}else{}}}else{T=true;return }}}})}},getAsHTML:function(U){var T=U;var V=false;if(T.length==1&&T[0].name&&!T[0].body){V=true}var R=[];if(T.length==0){var W=I("<div>"+"Unable to preview item"+"</div>");T.push(W)}for(var S=0;S<T.length;S++){var Z=T[S];if(Z.name){var a="";if(Z.defaultParameterValue){a+="<li><b>"+Z.defaultParameterValue+"</b></li>"}if(Z.params){if(a===undefined){var a="<ul>"}for(var X in Z.params){a+="<li>"+X+": <b>";a+=RW.htmlEncode(Z.params[X]);a+="</b></li>"}}if(a!==""){Z.paramDesc="<ul>"+a+"</ul>"}if(V){Z.hasEdit=true}R.push(RW.Templates.Layout.macroPreview({macro:Z}))}else{if(Z.isImage){R.push(RW.Templates.Layout.imagePreview({image:Z.content}))}else{if(Z.more){R.push('<li class="rw_more_preview" data-tooltip="">...</li>')}else{var Y=I("<div></div>");Y.append(Z);R.push(RW.Templates.Layout.itemPreview({content:Y.html()}))}}}}return R}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/resize-util-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Util==="undefined"){RW.Util={}}(function(A){RW.Util.ResizableUtil={totalSize:0,resizeColumns:function(J,B,G,D,H,I){var E=this;var F=0;var C=RW._.pluck(J,"model");RW._.each(RW._.initial(J),function(K,L){A(K.$el,A(B)).resizable({handles:"e",containment:"parent",grid:[1,0],maxWidth:G-(J.length-1)*D,minWidth:D,start:function(M,N){A("#rw_layout_board_container .ui-resizable-handle").attr("data-tooltip","");RW.removeTooltip();F=N.originalSize.width;E.setCurrentMaxWidth(N.element,C,G,D);N.element.parent().addClass("rw_resizing")},stop:function(M,N){N.element.parent().removeClass("rw_resizing");A("#rw_layout_board_container .ui-resizable-handle").attr("data-tooltip","Resize sections");I()},resize:function(O,Q){var R=F-Q.size.width;E.sumOfCalculatedWidthRate=0;var N=0;var P=[];var M=0;RW._.each(C,function(T,S){if(T.id!=A(Q.element).data("id")){N+=parseInt(A("#rw_section_"+T.id).width())}else{M=S}});if(Q.position.left==Q.originalPosition.left){P=RW._.rest(C,(M+1));P=P.concat(RW._.first(C,(M)).reverse())}RW._.each(P,function(T,S){if(T.id!=A(Q.element).data("id")){var V=parseInt(A("#rw_section_"+T.id).width());var U=Math.max(D,G-A(Q.element).width()-(N-V));A("#rw_section_"+T.id).width(U);N-=(V-U);A("#rw_section_"+T.id).find("h1").html(Math.round(Math.max(10,(U/G)*100))+"%");E.sumOfCalculatedWidthRate+=Math.round(Math.max(10,(U/G)*100));R=R-(V-A("#rw_section_"+T.id).width())}});F=F-R;A(Q.element).find("h1").html(Math.round(100-E.sumOfCalculatedWidthRate)+"%")}})})},setCurrentMaxWidth:function(E,I,H,D){var G=A(E).data("id");var B=0;var C=0;RW._.each(I,function(K,J){if(K.id!=G){C+=parseInt(A("#rw_section_"+K.id).width())}else{B=C}});var F=RW._.pluck(I,"id");A(E).resizable({maxWidth:H-B-RW._.rest(F,RW._.indexOf(F,G)+1).length*D})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/dialog-util-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.SpaceOrganizer==="undefined"){RW.Views.SpaceOrganizer={}}(function(A){AJS.toInit(function(){});RW.Views.Dialog=RW.Brace.View.extend({dialog:null,template:null,clickedDone:false,initialize:function(B){this.template=RW.Templates.popup();this.setElement(A(this.template))},render:function(){this.template=RW.Templates.popup();this.setElement(A(this.template));return this.$el},open:function(F,E,D,G,C){var B=true;if(C==true){B=false}this.render();var H=this;this.dialog=new AJS.Dialog({id:"rw_popup_dialog_admin",width:800,height:600,closeOnOutsideClick:B});this.dialog.hide();this.dialog.addHeader(E);this.dialog.addPanel();this.dialog.addButton("Save",function(){H.clickedDone=true;var I=A(H.dialog.popup.element).clone();if(D&&D(I)){H.dialog.remove()}},"aui-button aui-button-primary rw_margin_right");A(".button-panel-button",this.dialog.popup.element).removeClass("button-panel-button");this.dialog.addLink("Cancel",function(){H.dialog.remove()});AJS.$(document).bind("hideLayer",function(K,J,I){if(!H.clickedDone){if(J==="popup"&&I===H.dialog.popup){if(G){G()}}}else{H.clickedDone=false}});if(F!=undefined&&F.render!=undefined){A(".dialog-panel-body",this.dialog.popup.element).html(F.render());this.dialog.show()}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/space-layout-dialog-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(C){var D=false;AJS.toInit(function(){RW.PubSub.on("space-layout-blueprint:show",function(E){if(AJS.Meta.get("show-space-layout-dialog")==true){A(E.contentKey)}else{location.reload()}})});function A(F){var E=new RW.Models.Layout.TemplateList({type:"space",contentKey:F});RW.showLoader();E.fetch({cache:false,success:function(L){RW.hideLoader();var I=new B({model:E});var J=new AJS.Dialog({id:"rw_space_layout_dialog",closeOnOutsideClick:false,width:840});J.addHeader("Choose a Space Layout");var H=I.render();J.addPanel("",H,"");J.show();J.addCancel("Cancel",function(){J.remove()});var G=C("#rw_space_layout_dialog .dialog-button-panel");var K=C(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Done"}));K.css("margin-right","10px").click(function(){var M=C("a.rw_selected",H).data("template-key");if(M==="global"||M===undefined){J.remove();location.reload()}else{if(M==="custom"){RW.showLoader();window.location=contextPath+"/spaces/refinedwiki/edit-space-layout.action?key="+AJS.Meta.get("space-key")}else{RW.showLoader();C.ajax({url:contextPath+"/rest/originaltheme/1.0/layoutboard/space/template-board/"+AJS.Meta.get("space-key")+"?template="+M,type:"PUT",dataType:"json",success:function(N){location.reload()},error:function(N){}})}}});G.prepend(K);J.show()},error:function(G){RW.hideLoader()}})}var B=RW.Backbone.View.extend({events:{"click a":"selectTemplate"},initialize:function(){},render:function(){var E=RW.Templates.Layout.spaceLayoutBlueprint({model:this.model.toJSON()});this.setElement(E);return this.$el},selectTemplate:function(E){C("a.rw_selected",this.$el).removeClass("rw_selected");C(E.currentTarget).addClass("rw_selected")}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/space-category-dialog-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(C){var D=false;AJS.toInit(function(){if(AJS.Meta.get("space-just-created")){if(AJS.Meta.get("show-move-space-dialog")){D=true;B()}else{if(AJS.Meta.get("show-space-layout-dialog")){RW.PubSub.trigger("space-layout-blueprint:show",{contentKey:AJS.Meta.get("space-key")})}}}if(C("#rw_space_category_btn, #rw_space_category_btn-tab").length>0){C("#rw_space_category_btn, #rw_space_category_btn-tab").click(function(){B();return false})}});function B(){var F=new RW.Models.CategoryList();RW.showLoader();F.fetch({cache:false,data:{recursive:"true"},success:function(K){RW.hideLoader();var N=new E({model:F});var P=new AJS.Dialog({id:"rw_space_category_dialog",closeOnOutsideClick:false,width:840});P.addHeader("Choose a category");var I=N.render();P.addPanel("",I,"");P.show();var Q="_uncategorized";P.addCancel("Cancel",function(){P.remove()});var M=C("#rw_space_category_dialog .dialog-button-panel");if(D){var L=C(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Next"}))}else{var L=C(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Done"}))}L.css("margin-right","10px").click(function(){var R=new A();R.setKey(Q);R.setContentType("space");R.setId(AJS.Meta.get("space-key"));if(C("a.rw_selected",I).length>0){R.setNewCategoryKey(C("a.rw_selected",I).data("category-key"))}else{R.setNewCategoryKey("")}RW.showLoader();R.save({},{success:function(S){if(D){RW.hideLoader();RW.PubSub.trigger("space-layout-blueprint:show",{contentKey:AJS.Meta.get("space-key")});P.remove()}else{location.reload()}},error:function(S,T){RW.hideLoader();if(T.status==401){alert("You don\'t have the right permissions to move this space to another category")}location.reload()}})});M.prepend(L);if(AJS.Meta.get("abstract-category-key")!==""){Q=AJS.Meta.get("abstract-category-key");var G=C("#rw_category_item_"+Q,I);G.addClass("rw_selected");var J=G.closest("#rw_category_chooser");if(G!=undefined&&G.length>0){var H=G.offset().top;var O=H+G.height();if(O>J.height()){J.scrollTop(O-J.height())}}}P.show()},error:function(G){}})}var A=RW.Brace.Model.extend({namedAttributes:{key:"string",id:"string",newCategoryKey:"string",contentType:"string"},url:function(){return contextPath+"/rest/originaltheme/1.0/category/"+this.get("key")+"/child/"+this.get("id")+"/move"},});var E=RW.Backbone.View.extend({events:{"click a":"selectCategory"},initialize:function(F){},render:function(){var F=RW.Templates.categoryBlueprint({model:this.model.toJSON()});this.setElement(F);return this.$el},selectCategory:function(F){if(C(F.target).hasClass("rw_selected")){C("a.rw_selected",this.$el).removeClass("rw_selected")}else{C("a.rw_selected",this.$el).removeClass("rw_selected");C(F.target).addClass("rw_selected")}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/users-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(B){var A=250;RW.Models.Users=RW.Brace.Collection.extend({initialize:function(C){}});RW.Models.User=RW.Brace.Model.extend({saveAsCategoryAdmin:function(D,C){if(D==undefined){D={}}D.url=contextPath+"/rest/originaltheme/1.0/category/"+C+"/admin?username="+this.get("username");this.id=1;return RW.Backbone.Model.prototype.save.call(this,{},D)}});RW.Models.Users.model=RW.Models.User;RW.Models.UsersModel=RW.Brace.Model.extend({namedAttributes:{usersParam:"string",groupsParam:"string",layout:"string",title:"string",remoteUser:"string",description:"string",excludeUserCategories:"boolean",following:"boolean",canSeePersonalSpace:"boolean",users:RW.Models.Users},initialize:function(C){this.users=new RW.Models.Users()},url:function(){return contextPath+"/rest/originaltheme/1.0/user?users="+encodeURIComponent(this.get("usersParam"))+"&groups="+encodeURIComponent(this.get("groupsParam"))+"&layout="+encodeURIComponent(this.get("layout"))+"&excludeUserCategories="+encodeURIComponent(this.get("excludeUserCategories"))}});RW.Models.UserSearchData=RW.Brace.Model.extend({namedAttributes:{title:"string",description:"string",groups:"object",type:"string",users:RW.Models.Users,searchWrapper:RW.Models.UserSearchWrapper}});RW.Models.UserSearchWrapper=RW.Brace.Model.extend({title:"",namedAttributes:{totalSize:"number",result:RW.Models.UserSearchResults,group:"object",query:"string",type:"string"},initialize:function(C){if(C){if(C.type){this.type=C.type}if(C.title){this.title=C.title}}},url:function(){return contextPath+"/rest/prototype/1/search/"+this.type+"?query="+this.get("query")},fetchGroups:function(C){if(C==undefined){C={}}if(RW.confluenceVersion<5.1){C.url=contextPath+"/rest/originaltheme/1.0/search/group?query="+this.get("query")}else{C.url=contextPath+"/rest/prototype/1/search/group?query="+this.get("query")}return RW.Backbone.Model.prototype.fetch.call(this,C)},legacyUrl:function(){return contextPath+"/rest/originaltheme/1.0/search/group?query="+this.get("query")}});RW.Models.UserSearchResults=RW.Brace.Collection.extend({initialize:function(C){this.model=RW.Models.UserSearchResult}});RW.Models.UserSearchResult=RW.Brace.Model.extend({});RW.Views.UsersView=RW.Backbone.View.extend({width:0,events:{},initialize:function(C){if(C.width!=undefined){this.width=C.width}},render:function(){var D=this.model.toJSON();RW._.each(D.users,function(E){E.uCategories=[];E.uSpaces=[];RW._.each(E.userCategories,function(F){if(F.type=="category"){E.uCategories.push(F)}else{if(F.type=="space"){E.uSpaces.push(F)}}})});var C=RW.Templates.Users.list({model:D,columns:Math.floor(this.width/A)});this.setElement(C);return this.$el}});RW.Views.UserView=RW.Backbone.View.extend({title:undefined,canUpdateStatus:undefined,initialize:function(C){if(C&&C.title){this.title=C.title}if(C&&C.canUpdateStatus){this.canUpdateStatus=C.canUpdateStatus}},render:function(){var E=this.model.get("users");if(E&&E.at(0)!=undefined){var C=E.at(0).toJSON()}if(C){C.uCategories=[];C.uSpaces=[];RW._.each(C.userCategories,function(F){if(F.type=="category"){C.uCategories.push(F)}else{if(F.type=="space"){C.uSpaces.push(F)}}})}C.username=RW.htmlDecode(C.username);var D=RW.Templates.Users.userDetails({user:C,layout:this.model.get("layout"),remoteUser:this.model.get("remoteUser"),following:C.following,canSeePersonalSpace:this.model.get("canSeePersonalSpace"),title:this.title,canUpdateStatus:this.canUpdateStatus});this.setElement(D);return this.$el}});RW.Views.UserSearchView=RW.Brace.View.extend({searchWrapperModel:null,title:null,description:null,lastQuery:"",events:{"keyup #rw_input_search_groups":"search","keyup #rw_input_search_users":"search",keydown:"handleKeyDown","click .rw_results_container li":"addTag","click .rw_tag_list .rw_delete_button":"removeTag"},initialize:function(C){if(C&&C.searchWrapperModel){this.searchWrapperModel=C.searchWrapperModel}else{this.searchWrapperModel=this.model.get("searchWrapper")}if(C&&C.title){this.title=C.title}else{this.title=this.model.get("title")}if(C&&C.description){this.description=C.description}else{this.description=this.model.get("description")}if(this.searchWrapperModel.get("type")=="user"){var D;if(this.model.get("users").toJSON!==undefined){D=this.model.get("users").toJSON()}else{D=this.model.get("users")}this.template=RW.Templates.Users.userSearch({users:D,title:this.title,description:this.description})}else{this.template=RW.Templates.Users.groupSearch({groups:this.model.get("groups"),title:this.title,description:this.description})}this.setElement(B(this.template))},render:function(){if(this.searchWrapperModel.get("type")=="user"){var C;if(this.model.get("users").toJSON!==undefined){C=this.model.get("users").toJSON()}else{C=this.model.get("users")}this.template=RW.Templates.Users.userSearch({users:C,title:this.title,description:this.description})}else{this.template=RW.Templates.Users.groupSearch({groups:this.model.get("groups"),title:this.title,description:this.description})}this.$el.html(B(this.template).html());return this.$el},handleKeyDown:function(C){if(C.which==27&&(this.$(".rw_results_container").is(":visible"))){this.$(".rw_results_container").hide();return false}},search:function(E){E.stopPropagation();var D=B(E.currentTarget).val();if(D!=""&&D!=this.lastQuery){this.lastQuery=D;var C=this;this.searchWrapperModel.set("query",D);if(this.searchWrapperModel.get("type")=="user"){this.searchWrapperModel.fetch({cache:false,success:function(){var F=B(RW.Templates.Users.searchResult({results:C.searchWrapperModel.toJSON().result}));C.$(".rw_results_container").html(F);C.$(".rw_results_container").show();RW.startKeyable(C.$(".rw_results_container"),null,"search")}})}else{this.searchWrapperModel.fetchGroups({success:function(){var F=B(RW.Templates.Users.searchResult({results:C.searchWrapperModel.toJSON().result}));C.$(".rw_results_container").html(F);C.$(".rw_results_container").show();RW.startKeyable(C.$(".rw_results_container"),null,"search")}})}}else{if(D==""){this.$(".rw_results_container").html("");this.$(".rw_results_container").hide()}}},addTag:function(C){if(this.searchWrapperModel.get("type")=="user"){this.addUser(C)}else{if(this.searchWrapperModel.get("type")=="group"){this.addGroup(C)}}},addUser:function(H){var E=B(H.currentTarget).data("name");var C=B(".rw_search_item_title",H.currentTarget).html();this.$("#rw_input_search_users").val("");var K=false;var J=this;if(this.model.get("users") instanceof RW.Backbone.Collection){RW._.each(this.model.get("users").models,function(L){if(L.get("username")==E){K=true}})}else{for(var F=0;F<this.model.get("users").length;F++){var D=this.model.get("users")[F];var I=D.username!=undefined?D.username:D.get("username");if(I==E){K=true;break}}}if(!K){var D=new RW.Models.User({name:C,username:E});if(this.model.get("users").add!=undefined){this.model.get("users").add(D)}else{this.model.get("users").push(D)}var G=B(RW.Templates.Users.resultTag({name:C,key:E}));this.$(".rw_search_result_users").append(G)}this.$(".rw_results_container").html("");this.$(".rw_results_container").hide();this.lastQuery=""},addGroup:function(G){var E=B(G.currentTarget).data("name");this.$("#rw_input_search_groups").val("");var F=false;var C=this;RW._.each(this.model.get("groups"),function(H){if(H==E){F=true}});if(!F){if(this.model.get("groups")==undefined){this.model.set("groups",[])}this.model.get("groups").push(E);var D=B(RW.Templates.Users.resultTag({name:E,key:E}));this.$(".rw_search_result_groups").append(D)}this.$(".rw_results_container").html("");this.$(".rw_results_container").hide();this.lastQuery=""},removeTag:function(C){if(this.searchWrapperModel.get("type")=="user"){this.removeUser(C)}else{if(this.searchWrapperModel.get("type")=="group"){this.removeGroup(C)}}},removeUser:function(D){var C=B(D.currentTarget).closest("li");var F=C.data("key");if(this.model.get("users").models!=undefined){this.model.get("users").models=RW._.filter(this.model.get("users").models,function(G){return G.get("username")!=F})}else{var E=this.model.get("users");E=RW._.filter(E,function(G){return G.username!=F});this.model.set("users",E)}C.remove()},removeGroup:function(F){var D=B(F.currentTarget).closest("li");var C=D.data("key");var E=RW._.filter(this.model.get("groups"),function(G){return G!=C});this.model.set("groups",E);D.remove()}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/users-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(C){AJS.toInit(function(){RW.registerUserClickEvents();var D=C(".rw_users_macro");if(D.length>0){RW._.each(D,function(F){B(C(F))})}var E=C(".rw_user_details_macro");if(E.length>0){RW._.each(E,function(F){A(C(F))})}});var B=function(K){var D=C(".rw_users_macro_params",K).data("users");var E=C(".rw_users_macro_params",K).data("groups");var I=C(".rw_users_macro_params",K).data("title");var H=C(".rw_users_macro_params",K).data("layout");var J=C(".rw_users_macro_params",K).data("description");var L=C(".rw_users_macro_params",K).data("excludeUserCategories");var F=new RW.Models.UsersModel({usersParam:D,groupsParam:E,title:I,layout:H,description:J,excludeUserCategories:L,remoteUser:AJS.Meta.get("remote-user")});var G=C(RW.Templates.loader({type:"circle",bg:"gray"}));K.append(G);F.fetch({cache:false,success:function(){var M=new RW.Views.UsersView({model:F,width:K.width()});G.remove();K.append(M.render());RW.initHipchatStatus();Confluence.Binder.userHover();RW.registerUserClickEvents()},error:function(){G.remove()}})};var A=function(K){var F=K.data("username");var J=K.data("title");var G=K.data("layout");var H=K.data("can-update-status");var I=K.data("canSeePersonalSpace");if(RW._.isEmpty(G)){G="full"}var L=K.data("excludeUserCategories");var D=new RW.Models.UsersModel({usersParam:F,title:J,layout:G,excludeUserCategories:L,canSeePersonalSpace:I,remoteUser:AJS.Meta.get("remote-user")});var E=C(RW.Templates.loader({type:"circle",bg:"gray"}));K.append(E);D.fetch({cache:false,data:{showDeactive:true},success:function(){var M=new RW.Views.UserView({model:D,title:J,canUpdateStatus:H});E.remove();K.append(M.render());RW.initHipchatStatus();Confluence.Binder.userHover();RW.registerUserClickEvents()},error:function(){E.remove()}})};RW.registerUserClickEvents=function(){RW._.each(C(".rw_user_details .rw_follow"),function(D){C("a",D).unbind("click");C("a",D).bind("click",function(E){E.stopPropagation();C("span",D).removeClass("rw_no_icon").addClass("rw_loading");C.ajax({url:contextPath+"/rest/originaltheme/1.0/user/"+C(D).data("username")+"/follow",type:"POST",cache:false,success:function(F){var G=F;C("span",D).addClass("rw_no_icon").removeClass("rw_loading");if(G){C(D).removeClass("rw_follow");C(D).addClass("rw_unfollow");C("span",D).html("Stop Following")}RW.registerUserClickEvents()},error:function(F){if(F.status!=0){alert(F.status+" "+F.statusText)}}})})});RW._.each(C(".rw_user_details .rw_unfollow"),function(D){C("a",D).unbind("click");C("a",D).bind("click",function(E){E.stopPropagation();C("span",D).removeClass("rw_no_icon").addClass("rw_loading");C.ajax({url:contextPath+"/rest/originaltheme/1.0/user/"+C(D).data("username")+"/unfollow",type:"POST",cache:false,success:function(F){var G=F;C("span",D).addClass("rw_no_icon").removeClass("rw_loading");if(!G){C(D).removeClass("rw_unfollow");C(D).addClass("rw_follow");C("span",D).html("Follow")}RW.registerUserClickEvents()},error:function(F){if(F.status!=0){alert(F.status+" "+F.statusText)}}});RW.registerUserClickEvents()})});RW._.each(C(".rw_user_details .rw_update_status_button"),function(D){C(D).unbind("click");C(D).bind("click",function(E){E.stopPropagation();if(RW.confluenceVersion&&RW.confluenceVersion<5){C("#set-user-status-link").click()}else{C("#create-user-status-link").click()}C(".status-update-button","#update-user-status-dialog").bind("click",function(F){C(document).ajaxSuccess(function(H,I,G){if(G.url.indexOf("status/update.action")!=-1){location.href=location.href}})})})})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
