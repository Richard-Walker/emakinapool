;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/atlassian/highlight-actions-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){AJS.toInit(function(){if(RW.confluenceVersion>=5.4&&a("#main-content").length>0){var f;var l;Confluence.HighlightAction.WORKING_AREA={MAINCONTENT_AND_COMMENT:function(n){l=l||a("#main-content, .comment-content");return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(l,n)},MAINCONTENT_ONLY:function(n){f=f||a("#main-content");return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f,n)},COMMENT_ONLY:function(n){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(a(".comment-content"),n)}};if(RW.confluenceVersion>=5.7){var g=Confluence.HighlightAction.RangeHelper.computeSearchTextObject;Confluence.HighlightAction.RangeHelper.computeSearchTextObject=function(o,n){if(o.hasClass("rw_custom_section")||o.parent().hasClass("rw_custom_section")){return g(f,n)}else{return g(o,n)}}}}if(Confluence.HighlightAction){var i=Confluence.HighlightAction.getButtonHandler("com.atlassian.confluence.plugins.confluence-inline-comments:create-inline-comment");i.shouldDisplay=Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY}var h="#main-content";var j="com.atlassian.confluence.plugins.confluence-jira-content:create-JIRA-issue-summary";var c=function(n){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(a(h),n)};if(Confluence.CreateJiraContent){if(Confluence.CreateJiraContent.InlineDialog){var k;var e;var d=function(n){if(k){k.remove()}k=Confluence.CreateJiraContent.InlineDialog.openCreateIssueDialog(n);k.show();Confluence.CreateJiraContent.displayDialog=k;Confluence.CreateJiraContent.Analytics.sendAnalyticsForDialogOpen()};var b=function(n){if(e){e.remove()}e=Confluence.CreateJiraContent.InlineDialog.openFeatureDiscoveryDialog(n,d);e.show()};var m=function(n){n.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(a(h),n.range);if(Confluence.CreateJiraContent.FeatureDiscoveryDialog.shouldShowFeatureDiscovery()){b(n)}else{d(n)}};Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(j,{onClick:m,shouldDisplay:c})}else{Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(j,{onClick:function(n){n.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(a(h),n.range);if(Confluence.CreateJiraContent.FeatureDiscovery.shouldShowFeatureDiscovery()){Confluence.CreateJiraContent.Dialogs.showFeatureDiscoveryDialog(n)}else{Confluence.CreateJiraContent.Dialogs.showCreateIssueDialog(n)}},shouldDisplay:c})}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/underscore-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(){var u=RW;var q=u._;var i=Array.prototype,x=Object.prototype,A=Function.prototype;var h=i.push,t=i.slice,e=i.concat,v=x.toString,n=x.hasOwnProperty;var c=Array.isArray,w=Object.keys,j=A.bind;var z=function(D){if(D instanceof z){return D}if(!(this instanceof z)){return new z(D)}this._wrapped=D};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=z}exports._=z}else{u._=z}z.VERSION="1.7.0";var f=function(E,D,F){if(D===void 0){return E}switch(F==null?3:F){case 1:return function(G){return E.call(D,G)};case 2:return function(H,G){return E.call(D,H,G)};case 3:return function(H,G,I){return E.call(D,H,G,I)};case 4:return function(G,I,H,J){return E.call(D,G,I,H,J)}}return function(){return E.apply(D,arguments)}};z.iteratee=function(E,D,F){if(E==null){return z.identity}if(z.isFunction(E)){return f(E,D,F)}if(z.isObject(E)){return z.matches(E)}return z.property(E)};z.each=z.forEach=function(H,I,E){if(H==null){return H}I=f(I,E);var D,G=H.length;if(G===+G){for(D=0;D<G;D++){I(H[D],D,H)}}else{var F=z.keys(H);for(D=0,G=F.length;D<G;D++){I(H[F[D]],F[D],H)}}return H};z.map=z.collect=function(I,K,F){if(I==null){return[]}K=z.iteratee(K,F);var H=I.length!==+I.length&&z.keys(I),G=(H||I).length,E=Array(G),J;for(var D=0;D<G;D++){J=H?H[D]:D;E[D]=K(I[J],J,I)}return E};var r="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(I,K,D,F){if(I==null){I=[]}K=f(K,F,4);var H=I.length!==+I.length&&z.keys(I),G=(H||I).length,E=0,J;if(arguments.length<3){if(!G){throw new TypeError(r)}D=I[H?H[E++]:E++]}for(;E<G;E++){J=H?H[E]:E;D=K(D,I[J],J,I)}return D};z.reduceRight=z.foldr=function(H,J,D,F){if(H==null){H=[]}J=f(J,F,4);var G=H.length!==+H.length&&z.keys(H),E=(G||H).length,I;if(arguments.length<3){if(!E){throw new TypeError(r)}D=H[G?G[--E]:--E]}while(E--){I=G?G[E]:E;D=J(D,H[I],I,H)}return D};z.find=z.detect=function(G,E,F){var D;E=z.iteratee(E,F);z.some(G,function(J,H,I){if(E(J,H,I)){D=J;return true}});return D};z.filter=z.select=function(G,D,F){var E=[];if(G==null){return E}D=z.iteratee(D,F);z.each(G,function(J,H,I){if(D(J,H,I)){E.push(J)}});return E};z.reject=function(F,D,E){return z.filter(F,z.negate(z.iteratee(D)),E)};z.every=z.all=function(I,D,F){if(I==null){return true}D=z.iteratee(D,F);var H=I.length!==+I.length&&z.keys(I),G=(H||I).length,E,J;for(E=0;E<G;E++){J=H?H[E]:E;if(!D(I[J],J,I)){return false}}return true};z.some=z.any=function(I,D,F){if(I==null){return false}D=z.iteratee(D,F);var H=I.length!==+I.length&&z.keys(I),G=(H||I).length,E,J;for(E=0;E<G;E++){J=H?H[E]:E;if(D(I[J],J,I)){return true}}return false};z.contains=z.include=function(E,D){if(E==null){return false}if(E.length!==+E.length){E=z.values(E)}return z.indexOf(E,D)>=0};z.invoke=function(F,G){var D=t.call(arguments,2);var E=z.isFunction(G);return z.map(F,function(H){return(E?G:H[G]).apply(H,D)})};z.pluck=function(E,D){return z.map(E,z.property(D))};z.where=function(E,D){return z.filter(E,z.matches(D))};z.findWhere=function(E,D){return z.find(E,z.matches(D))};z.max=function(G,I,D){var L=-Infinity,J=-Infinity,K,F;if(I==null&&G!=null){G=G.length===+G.length?G:z.values(G);for(var H=0,E=G.length;H<E;H++){K=G[H];if(K>L){L=K}}}else{I=z.iteratee(I,D);z.each(G,function(O,M,N){F=I(O,M,N);if(F>J||F===-Infinity&&L===-Infinity){L=O;J=F}})}return L};z.min=function(G,I,D){var L=Infinity,J=Infinity,K,F;if(I==null&&G!=null){G=G.length===+G.length?G:z.values(G);for(var H=0,E=G.length;H<E;H++){K=G[H];if(K<L){L=K}}}else{I=z.iteratee(I,D);z.each(G,function(O,M,N){F=I(O,M,N);if(F<J||F===Infinity&&L===Infinity){L=O;J=F}})}return L};z.shuffle=function(H){var I=H&&H.length===+H.length?H:z.values(H);var G=I.length;var D=Array(G);for(var E=0,F;E<G;E++){F=z.random(0,E);if(F!==E){D[E]=D[F]}D[F]=I[E]}return D};z.sample=function(E,F,D){if(F==null||D){if(E.length!==+E.length){E=z.values(E)}return E[z.random(E.length-1)]}return z.shuffle(E).slice(0,Math.max(0,F))};z.sortBy=function(E,F,D){F=z.iteratee(F,D);return z.pluck(z.map(E,function(I,G,H){return{value:I,index:G,criteria:F(I,G,H)}}).sort(function(J,I){var H=J.criteria;var G=I.criteria;if(H!==G){if(H>G||H===void 0){return 1}if(H<G||G===void 0){return -1}}return J.index-I.index}),"value")};var k=function(D){return function(G,H,F){var E={};H=z.iteratee(H,F);z.each(G,function(K,I){var J=H(K,I,G);D(E,K,J)});return E}};z.groupBy=k(function(D,F,E){if(z.has(D,E)){D[E].push(F)}else{D[E]=[F]}});z.indexBy=k(function(D,F,E){D[E]=F});z.countBy=k(function(D,F,E){if(z.has(D,E)){D[E]++}else{D[E]=1}});z.sortedIndex=function(K,I,J,F){J=z.iteratee(J,F,1);var H=J(I);var D=0,G=K.length;while(D<G){var E=D+G>>>1;if(J(K[E])<H){D=E+1}else{G=E}}return D};z.toArray=function(D){if(!D){return[]}if(z.isArray(D)){return t.call(D)}if(D.length===+D.length){return z.map(D,z.identity)}return z.values(D)};z.size=function(D){if(D==null){return 0}return D.length===+D.length?D.length:z.keys(D).length};z.partition=function(H,D,F){D=z.iteratee(D,F);var G=[],E=[];z.each(H,function(J,I,K){(D(J,I,K)?G:E).push(J)});return[G,E]};z.first=z.head=z.take=function(F,E,D){if(F==null){return void 0}if(E==null||D){return F[0]}if(E<0){return[]}return t.call(F,0,E)};z.initial=function(F,E,D){return t.call(F,0,Math.max(0,F.length-(E==null||D?1:E)))};z.last=function(F,E,D){if(F==null){return void 0}if(E==null||D){return F[F.length-1]}return t.call(F,Math.max(F.length-E,0))};z.rest=z.tail=z.drop=function(F,E,D){return t.call(F,E==null||D?1:E)};z.compact=function(D){return z.filter(D,z.identity)};var C=function(F,J,D,E){if(J&&z.every(F,z.isArray)){return e.apply(E,F)}for(var G=0,H=F.length;G<H;G++){var I=F[G];if(!z.isArray(I)&&!z.isArguments(I)){if(!D){E.push(I)}}else{if(J){h.apply(E,I)}else{C(I,J,D,E)}}}return E};z.flatten=function(E,D){return C(E,D,false,[])};z.without=function(D){return z.difference(D,t.call(arguments,1))};z.uniq=z.unique=function(K,G,J,E){if(K==null){return[]}if(!z.isBoolean(G)){E=J;J=G;G=false}if(J!=null){J=z.iteratee(J,E)}var M=[];var D=[];for(var I=0,F=K.length;I<F;I++){var L=K[I];if(G){if(!I||D!==L){M.push(L)}D=L}else{if(J){var H=J(L,I,K);if(z.indexOf(D,H)<0){D.push(H);M.push(L)}}else{if(z.indexOf(M,L)<0){M.push(L)}}}}return M};z.union=function(){return z.uniq(C(arguments,true,true,[]))};z.intersection=function(J){if(J==null){return[]}var D=[];var I=arguments.length;for(var F=0,H=J.length;F<H;F++){var G=J[F];if(z.contains(D,G)){continue}for(var E=1;E<I;E++){if(!z.contains(arguments[E],G)){break}}if(E===I){D.push(G)}}return D};z.difference=function(E){var D=C(t.call(arguments,1),true,true,[]);return z.filter(E,function(F){return !z.contains(D,F)})};z.zip=function(G){if(G==null){return[]}var F=z.max(arguments,"length").length;var E=Array(F);for(var D=0;D<F;D++){E[D]=z.pluck(arguments,D)}return E};z.object=function(H,E){if(H==null){return{}}var D={};for(var F=0,G=H.length;F<G;F++){if(E){D[H[F]]=E[F]}else{D[H[F][0]]=H[F][1]}}return D};z.indexOf=function(H,F,G){if(H==null){return -1}var D=0,E=H.length;if(G){if(typeof G=="number"){D=G<0?Math.max(0,E+G):G}else{D=z.sortedIndex(H,F);return H[D]===F?D:-1}}for(;D<E;D++){if(H[D]===F){return D}}return -1};z.lastIndexOf=function(G,E,F){if(G==null){return -1}var D=G.length;if(typeof F=="number"){D=F<0?D+F+1:Math.min(D,F+1)}while(--D>=0){if(G[D]===E){return D}}return -1};z.range=function(I,F,H){if(arguments.length<=1){F=I||0;I=0}H=H||1;var G=Math.max(Math.ceil((F-I)/H),0);var E=Array(G);for(var D=0;D<G;D++,I+=H){E[D]=I}return E};var o=function(){};z.bind=function(G,E){var D,F;if(j&&G.bind===j){return j.apply(G,t.call(arguments,1))}if(!z.isFunction(G)){throw new TypeError("Bind must be called on a function")}D=t.call(arguments,2);F=function(){if(!(this instanceof F)){return G.apply(E,D.concat(t.call(arguments)))}o.prototype=G.prototype;var I=new o;o.prototype=null;var H=G.apply(I,D.concat(t.call(arguments)));if(z.isObject(H)){return H}return I};return F};z.partial=function(D){var E=t.call(arguments,1);return function(){var F=0;var G=E.slice();for(var H=0,I=G.length;H<I;H++){if(G[H]===z){G[H]=arguments[F++]}}while(F<arguments.length){G.push(arguments[F++])}return D.apply(this,G)}};z.bindAll=function(G){var E,F=arguments.length,D;if(F<=1){throw new Error("bindAll must be passed function names")}for(E=1;E<F;E++){D=arguments[E];G[D]=z.bind(G[D],G)}return G};z.memoize=function(E,D){var F=function(I){var H=F.cache;var G=D?D.apply(this,arguments):I;if(!z.has(H,G)){H[G]=E.apply(this,arguments)}return H[G]};F.cache={};return F};z.delay=function(E,F){var D=t.call(arguments,2);return setTimeout(function(){return E.apply(null,D)},F)};z.defer=function(D){return z.delay.apply(z,[D,1].concat(t.call(arguments,1)))};z.throttle=function(E,G,K){var D,I,L;var J=null;var H=0;if(!K){K={}}var F=function(){H=K.leading===false?0:z.now();J=null;L=E.apply(D,I);if(!J){D=I=null}};return function(){var M=z.now();if(!H&&K.leading===false){H=M}var N=G-(M-H);D=this;I=arguments;if(N<=0||N>G){clearTimeout(J);J=null;H=M;L=E.apply(D,I);if(!J){D=I=null}}else{if(!J&&K.trailing!==false){J=setTimeout(F,N)}}return L}};z.debounce=function(F,H,E){var K,J,D,I,L;var G=function(){var M=z.now()-I;if(M<H&&M>0){K=setTimeout(G,H-M)}else{K=null;if(!E){L=F.apply(D,J);if(!K){D=J=null}}}};return function(){D=this;J=arguments;I=z.now();var M=E&&!K;if(!K){K=setTimeout(G,H)}if(M){L=F.apply(D,J);D=J=null}return L}};z.wrap=function(D,E){return z.partial(E,D)};z.negate=function(D){return function(){return !D.apply(this,arguments)}};z.compose=function(){var D=arguments;var E=D.length-1;return function(){var G=E;var F=D[E].apply(this,arguments);while(G--){F=D[G].call(this,F)}return F}};z.after=function(E,D){return function(){if(--E<1){return D.apply(this,arguments)}}};z.before=function(F,E){var D;return function(){if(--F>0){D=E.apply(this,arguments)}else{E=null}return D}};z.once=z.partial(z.before,2);z.keys=function(F){if(!z.isObject(F)){return[]}if(w){return w(F)}var E=[];for(var D in F){if(z.has(F,D)){E.push(D)}}return E};z.values=function(H){var G=z.keys(H);var F=G.length;var D=Array(F);for(var E=0;E<F;E++){D[E]=H[G[E]]}return D};z.pairs=function(H){var F=z.keys(H);var E=F.length;var G=Array(E);for(var D=0;D<E;D++){G[D]=[F[D],H[F[D]]]}return G};z.invert=function(H){var D={};var G=z.keys(H);for(var E=0,F=G.length;E<F;E++){D[H[G[E]]]=G[E]}return D};z.functions=z.methods=function(F){var E=[];for(var D in F){if(z.isFunction(F[D])){E.push(D)}}return E.sort()};z.extend=function(G){if(!z.isObject(G)){return G}var F,H;for(var D=1,E=arguments.length;D<E;D++){F=arguments[D];for(H in F){if(n.call(F,H)){G[H]=F[H]}}}return G};z.pick=function(F,H,D){var L={},J;if(F==null){return L}if(z.isFunction(H)){H=f(H,D);for(J in F){var I=F[J];if(H(I,J,F)){L[J]=I}}}else{var K=e.apply([],t.call(arguments,1));F=new Object(F);for(var G=0,E=K.length;G<E;G++){J=K[G];if(J in F){L[J]=F[J]}}}return L};z.omit=function(F,G,D){if(z.isFunction(G)){G=z.negate(G)}else{var E=z.map(e.apply([],t.call(arguments,1)),String);G=function(I,H){return !z.contains(E,H)}}return z.pick(F,G,D)};z.defaults=function(G){if(!z.isObject(G)){return G}for(var D=1,E=arguments.length;D<E;D++){var F=arguments[D];for(var H in F){if(G[H]===void 0){G[H]=F[H]}}}return G};z.clone=function(D){if(!z.isObject(D)){return D}return z.isArray(D)?D.slice():z.extend({},D)};z.tap=function(E,D){D(E);return E};var y=function(K,J,E,F){if(K===J){return K!==0||1/K===1/J}if(K==null||J==null){return K===J}if(K instanceof z){K=K._wrapped}if(J instanceof z){J=J._wrapped}var H=v.call(K);if(H!==v.call(J)){return false}switch(H){case"[object RegExp]":case"[object String]":return""+K===""+J;case"[object Number]":if(+K!==+K){return +J!==+J}return +K===0?1/+K===1/J:+K===+J;case"[object Date]":case"[object Boolean]":return +K===+J}if(typeof K!="object"||typeof J!="object"){return false}var D=E.length;while(D--){if(E[D]===K){return F[D]===J}}var I=K.constructor,G=J.constructor;if(I!==G&&"constructor" in K&&"constructor" in J&&!(z.isFunction(I)&&I instanceof I&&z.isFunction(G)&&G instanceof G)){return false}E.push(K);F.push(J);var O,N;if(H==="[object Array]"){O=K.length;N=O===J.length;if(N){while(O--){if(!(N=y(K[O],J[O],E,F))){break}}}}else{var M=z.keys(K),L;O=M.length;N=z.keys(J).length===O;if(N){while(O--){L=M[O];if(!(N=z.has(J,L)&&y(K[L],J[L],E,F))){break}}}}E.pop();F.pop();return N};z.isEqual=function(E,D){return y(E,D,[],[])};z.isEmpty=function(E){if(E==null){return true}if(z.isArray(E)||z.isString(E)||z.isArguments(E)){return E.length===0}for(var D in E){if(z.has(E,D)){return false}}return true};z.isElement=function(D){return !!(D&&D.nodeType===1)};z.isArray=c||function(D){return v.call(D)==="[object Array]"};z.isObject=function(E){var D=typeof E;return D==="function"||D==="object"&&!!E};z.each(["Arguments","Function","String","Number","Date","RegExp"],function(D){z["is"+D]=function(E){return v.call(E)==="[object "+D+"]"}});if(!z.isArguments(arguments)){z.isArguments=function(D){return z.has(D,"callee")}}if(typeof/./!=="function"){z.isFunction=function(D){return typeof D=="function"||false}}z.isFinite=function(D){return isFinite(D)&&!isNaN(parseFloat(D))};z.isNaN=function(D){return z.isNumber(D)&&D!==+D};z.isBoolean=function(D){return D===true||D===false||v.call(D)==="[object Boolean]"};z.isNull=function(D){return D===null};z.isUndefined=function(D){return D===void 0};z.has=function(E,D){return E!=null&&n.call(E,D)};z.noConflict=function(){u._=q;return this};z.identity=function(D){return D};z.constant=function(D){return function(){return D}};z.noop=function(){};z.property=function(D){return function(E){return E[D]}};z.matches=function(D){var F=z.pairs(D),E=F.length;return function(I){if(I==null){return !E}I=new Object(I);for(var H=0;H<E;H++){var J=F[H],G=J[0];if(J[1]!==I[G]||!(G in I)){return false}}return true}};z.times=function(H,G,F){var D=Array(Math.max(0,H));G=f(G,F,1);for(var E=0;E<H;E++){D[E]=G(E)}return D};z.random=function(E,D){if(D==null){D=E;E=0}return E+Math.floor(Math.random()*(D-E+1))};z.now=Date.now||function(){return new Date().getTime()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var d=z.invert(g);var p=function(H){var E=function(I){return H[I]};var G="(?:"+z.keys(H).join("|")+")";var F=RegExp(G);var D=RegExp(G,"g");return function(I){I=I==null?"":""+I;return F.test(I)?I.replace(D,E):I}};z.escape=p(g);z.unescape=p(d);z.result=function(D,F){if(D==null){return void 0}var E=D[F];return z.isFunction(E)?D[F]():E};var l=0;z.uniqueId=function(D){var E=++l+"";return D?D+E:E};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var s=/(.)^/;var a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var b=/\\|'|\r|\n|\u2028|\u2029/g;var B=function(D){return"\\"+a[D]};z.template=function(M,G,J){if(!G&&J){G=J}G=z.defaults({},G,z.templateSettings);var H=RegExp([(G.escape||s).source,(G.interpolate||s).source,(G.evaluate||s).source].join("|")+"|$","g");var I=0;var D="__p+='";M.replace(H,function(O,P,N,R,Q){D+=M.slice(I,Q).replace(b,B);I=Q+O.length;if(P){D+="'+\n((__t=("+P+"))==null?'':_.escape(__t))+\n'"}else{if(N){D+="'+\n((__t=("+N+"))==null?'':__t)+\n'"}else{if(R){D+="';\n"+R+"\n__p+='"}}}return O});D+="';\n";if(!G.variable){D="with(obj||{}){\n"+D+"}\n"}D="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+D+"return __p;\n";try{var F=new Function(G.variable||"obj","_",D)}catch(K){K.source=D;throw K}var L=function(N){return F.call(this,N,z)};var E=G.variable||"obj";L.source="function("+E+"){\n"+D+"}";return L};z.chain=function(E){var D=z(E);D._chain=true;return D};var m=function(D){return this._chain?z(D).chain():D};z.mixin=function(D){z.each(z.functions(D),function(E){var F=z[E]=D[E];z.prototype[E]=function(){var G=[this._wrapped];h.apply(G,arguments);return m.call(this,F.apply(z,G))}})};z.mixin(z);z.each(["pop","push","reverse","shift","sort","splice","unshift"],function(D){var E=i[D];z.prototype[D]=function(){var F=this._wrapped;E.apply(F,arguments);if((D==="shift"||D==="splice")&&F.length===0){delete F[0]}return m.call(this,F)}});z.each(["concat","join","slice"],function(D){var E=i[D];z.prototype[D]=function(){return m.call(this,E.apply(this._wrapped,arguments))}});z.prototype.value=function(){return this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return z})}}.call(this));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/backbone-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(){var q=this;var o=q.Backbone;var p=Array.prototype.slice;var y=Array.prototype.splice;var c;if(typeof exports!=="undefined"){c=exports}else{c=RW.Backbone={}}c.VERSION="0.9.2";var A=RW._;if(!A&&(typeof require!=="undefined")){A=require("underscore")}var g=q.jQuery||q.Zepto||q.ender;c.setDomLibrary=function(C){g=C};c.noConflict=function(){q.Backbone=o;return this};c.emulateHTTP=false;c.emulateJSON=false;var a=/\s+/;var n=c.Events={on:function(F,J,E){var D,H,G,C,I;if(!J){return this}F=F.split(a);D=this._callbacks||(this._callbacks={});while(H=F.shift()){I=D[H];G=I?I.tail:{};G.next=C={};G.context=E;G.callback=J;D[H]={tail:C,next:I?I.next:G}}return this},off:function(J,H,D){var C,K,E,G,F,I;if(!(K=this._callbacks)){return}if(!(J||H||D)){delete this._callbacks;return this}J=J?J.split(a):A.keys(K);while(C=J.shift()){E=K[C];delete K[C];if(!E||!(H||D)){continue}G=E.tail;while((E=E.next)!==G){F=E.callback;I=E.context;if((H&&F!==H)||(D&&I!==D)){this.on(C,F,I)}}}return this},trigger:function(F){var J,I,E,D,C,H,G;if(!(E=this._callbacks)){return this}H=E.all;F=F.split(a);G=p.call(arguments,1);while(J=F.shift()){if(I=E[J]){D=I.tail;while((I=I.next)!==D){I.callback.apply(I.context||this,G)}}if(I=H){D=I.tail;C=[J].concat(G);while((I=I.next)!==D){I.callback.apply(I.context||this,C)}}}return this}};n.bind=n.on;n.unbind=n.off;var k=c.Model=function(C,D){var E;C||(C={});if(D&&D.parse){C=this.parse(C)}if(E=d(this,"defaults")){C=A.extend({},E,C)}if(D&&D.collection){this.collection=D.collection}this.attributes={};this._escapedAttributes={};this.cid=A.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(C,{silent:true});this.changed={};this._silent={};this._pending={};this._previousAttributes=A.clone(this.attributes);this.initialize.apply(this,arguments)};A.extend(k.prototype,n,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(C){return A.clone(this.attributes)},get:function(C){return this.attributes[C]},escape:function(C){var D;if(D=this._escapedAttributes[C]){return D}var E=this.get(C);return this._escapedAttributes[C]=A.escape(E==null?"":""+E)},has:function(C){return this.get(C)!=null},set:function(J,I,L){var K,G,E;if(A.isObject(J)||J==null){K=J;L=I}else{K={};K[J]=I}L||(L={});if(!K){return this}if(K instanceof k){K=K.attributes}if(L.unset){for(G in K){K[G]=void 0}}if(!this._validate(K,L)){return false}if(this.idAttribute in K){this.id=K[this.idAttribute]}var H=L.changes={};var D=this.attributes;var C=this._escapedAttributes;var F=this._previousAttributes||{};for(G in K){E=K[G];if(!A.isEqual(D[G],E)||(L.unset&&A.has(D,G))){delete C[G];(L.silent?this._silent:H)[G]=true}L.unset?delete D[G]:D[G]=E;if(!A.isEqual(F[G],E)||(A.has(D,G)!=A.has(F,G))){this.changed[G]=E;if(!L.silent){this._pending[G]=true}}else{delete this.changed[G];delete this._pending[G]}}if(!L.silent){this.change(L)}return this},unset:function(C,D){(D||(D={})).unset=true;return this.set(C,null,D)},clear:function(C){(C||(C={})).unset=true;return this.set(A.clone(this.attributes),C)},fetch:function(D){D=D?A.clone(D):{};var C=this;var E=D.success;D.success=function(H,F,G){if(!C.set(C.parse(H,G),D)){return false}if(E){E(C,H)}};D.error=c.wrapError(D.error,C,D);return(this.sync||c.sync).call(this,"read",this,D)},save:function(H,G,L){var I,F;if(A.isObject(H)||H==null){I=H;L=G}else{I={};I[H]=G}L=L?A.clone(L):{};if(L.wait){if(!this._validate(I,L)){return false}F=A.clone(this.attributes)}var D=A.extend({},L,{silent:true});if(I&&!this.set(I,L.wait?D:L)){return false}var E=this;var J=L.success;L.success=function(P,M,O){var N=E.parse(P,O);if(L.wait){delete L.wait;N=A.extend(I||{},N)}if(!E.set(N,L)){return false}if(J){J(E,P)}else{E.trigger("sync",E,P,L)}};L.error=c.wrapError(L.error,E,L);var C=this.isNew()?"create":"update";var K=(this.sync||c.sync).call(this,C,this,L);if(L.wait){this.set(F,D)}return K},destroy:function(D){D=D?A.clone(D):{};var C=this;var G=D.success;var F=function(){C.trigger("destroy",C,C.collection,D)};if(this.isNew()){F();return false}D.success=function(H){if(D.wait){F()}if(G){G(C,H)}else{C.trigger("sync",C,H,D)}};D.error=c.wrapError(D.error,C,D);var E=(this.sync||c.sync).call(this,"delete",this,D);if(!D.wait){F()}return E},url:function(){var C=d(this,"urlRoot")||d(this.collection,"url")||t();if(this.isNew()){return C}return C+(C.charAt(C.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(D,C){return D},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(D){D||(D={});var F=this._changing;this._changing=true;for(var C in this._silent){this._pending[C]=true}var E=A.extend({},D.changes,this._silent);this._silent={};for(var C in E){this.trigger("change:"+C,this,this.get(C),D)}if(F){return this}while(!A.isEmpty(this._pending)){this._pending={};this.trigger("change",this,D);for(var C in this.changed){if(this._pending[C]||this._silent[C]){continue}delete this.changed[C]}this._previousAttributes=A.clone(this.attributes)}this._changing=false;return this},hasChanged:function(C){if(!arguments.length){return !A.isEmpty(this.changed)}return A.has(this.changed,C)},changedAttributes:function(E){if(!E){return this.hasChanged()?A.clone(this.changed):false}var G,F=false,D=this._previousAttributes;for(var C in E){if(A.isEqual(D[C],(G=E[C]))){continue}(F||(F={}))[C]=G}return F},previous:function(C){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[C]},previousAttributes:function(){return A.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},_validate:function(E,D){if(D.silent||!this.validate){return true}E=A.extend({},this.attributes,E);var C=this.validate(E,D);if(!C){return true}if(D&&D.error){D.error(this,C,D)}else{this.trigger("error",this,C,D)}return false}});var B=c.Collection=function(D,C){C||(C={});if(C.model){this.model=C.model}if(C.comparator){this.comparator=C.comparator}this._reset();this.initialize.apply(this,arguments);if(D){this.reset(D,{silent:true,parse:C.parse})}};A.extend(B.prototype,n,{model:k,initialize:function(){},toJSON:function(C){return this.map(function(D){return D.toJSON(C)})},add:function(D,M){var I,K,F,J,L,E,G={},C={},H=[];M||(M={});D=A.isArray(D)?D.slice():[D];for(I=0,F=D.length;I<F;I++){if(!(J=D[I]=this._prepareModel(D[I],M))){throw new Error("Can't add an invalid model to a collection")}L=J.cid;E=J.id;if(G[L]||this._byCid[L]||((E!=null)&&(C[E]||this._byId[E]))){H.push(I);continue}G[L]=C[E]=J}I=H.length;while(I--){D.splice(H[I],1)}for(I=0,F=D.length;I<F;I++){(J=D[I]).on("all",this._onModelEvent,this);this._byCid[J.cid]=J;if(J.id!=null){this._byId[J.id]=J}}this.length+=F;K=M.at!=null?M.at:this.models.length;y.apply(this.models,[K,0].concat(D));if(this.comparator){this.sort({silent:true})}if(M.silent){return this}for(I=0,F=this.models.length;I<F;I++){if(!G[(J=this.models[I]).cid]){continue}M.index=I;J.trigger("add",J,this,M)}return this},remove:function(H,F){var G,C,E,D;F||(F={});H=A.isArray(H)?H.slice():[H];for(G=0,C=H.length;G<C;G++){D=this.getByCid(H[G])||this.get(H[G]);if(!D){continue}delete this._byId[D.id];delete this._byCid[D.cid];E=this.indexOf(D);this.models.splice(E,1);this.length--;if(!F.silent){F.index=E;D.trigger("remove",D,this,F)}this._removeReference(D)}return this},push:function(D,C){D=this._prepareModel(D,C);this.add(D,C);return D},pop:function(D){var C=this.at(this.length-1);this.remove(C,D);return C},unshift:function(D,C){D=this._prepareModel(D,C);this.add(D,A.extend({at:0},C));return D},shift:function(D){var C=this.at(0);this.remove(C,D);return C},get:function(C){if(C==null){return void 0}return this._byId[C.id!=null?C.id:C]},getByCid:function(C){return C&&this._byCid[C.cid||C]},at:function(C){return this.models[C]},where:function(C){if(A.isEmpty(C)){return[]}return this.filter(function(D){for(var E in C){if(C[E]!==D.get(E)){return false}}return true})},sort:function(D){D||(D={});if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var C=A.bind(this.comparator,this);if(this.comparator.length==1){this.models=this.sortBy(C)}else{this.models.sort(C)}if(!D.silent){this.trigger("reset",this,D)}return this},pluck:function(C){return A.map(this.models,function(D){return D.get(C)})},reset:function(F,D){F||(F=[]);D||(D={});for(var E=0,C=this.models.length;E<C;E++){this._removeReference(this.models[E])}this._reset();this.add(F,A.extend({silent:true},D));if(!D.silent){this.trigger("reset",this,D)}return this},fetch:function(C){C=C?A.clone(C):{};if(C.parse===undefined){C.parse=true}var E=this;var D=C.success;C.success=function(H,F,G){E[C.add?"add":"reset"](E.parse(H,G),C);if(D){D(E,H)}};C.error=c.wrapError(C.error,E,C);return(this.sync||c.sync).call(this,"read",this,C)},create:function(D,C){var E=this;C=C?A.clone(C):{};D=this._prepareModel(D,C);if(!D){return false}if(!C.wait){E.add(D,C)}var F=C.success;C.success=function(G,I,H){if(C.wait){E.add(G,C)}if(F){F(G,I)}else{G.trigger("sync",D,I,C)}};D.save(null,C);return D},parse:function(D,C){return D},chain:function(){return A(this.models).chain()},_reset:function(C){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(E,D){D||(D={});if(!(E instanceof k)){var C=E;D.collection=this;E=new this.model(C,D);if(!E._validate(E.attributes,D)){E=false}}else{if(!E.collection){E.collection=this}}return E},_removeReference:function(C){if(this==C.collection){delete C.collection}C.off("all",this._onModelEvent,this)},_onModelEvent:function(E,D,F,C){if((E=="add"||E=="remove")&&F!=this){return}if(E=="destroy"){this.remove(D,C)}if(D&&E==="change:"+D.idAttribute){delete this._byId[D.previous(D.idAttribute)];this._byId[D.id]=D}this.trigger.apply(this,arguments)}});var w=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];A.each(w,function(C){B.prototype[C]=function(){return A[C].apply(A,[this.models].concat(A.toArray(arguments)))}});var z=c.Router=function(C){C||(C={});if(C.routes){this.routes=C.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var i=/:\w+/g;var x=/\*\w+/g;var e=/[-[\]{}()+?.,\\^$|#\s]/g;A.extend(z.prototype,n,{initialize:function(){},route:function(C,D,E){c.history||(c.history=new b);if(!A.isRegExp(C)){C=this._routeToRegExp(C)}if(!E){E=this[D]}c.history.route(C,A.bind(function(G){var F=this._extractParameters(C,G);E&&E.apply(this,F);this.trigger.apply(this,["route:"+D].concat(F));c.history.trigger("route",this,D,F)},this));return this},navigate:function(D,C){c.history.navigate(D,C)},_bindRoutes:function(){if(!this.routes){return}var D=[];for(var E in this.routes){D.unshift([E,this.routes[E]])}for(var F=0,C=D.length;F<C;F++){this.route(D[F][0],D[F][1],this[D[F][1]])}},_routeToRegExp:function(C){C=C.replace(e,"\\$&").replace(i,"([^/]+)").replace(x,"(.*?)");return new RegExp("^"+C+"$")},_extractParameters:function(C,D){return C.exec(D).slice(1)}});var b=c.History=function(){this.handlers=[];A.bindAll(this,"checkUrl")};var m=/^[#\/]/;var j=/msie [\w.]+/;b.started=false;A.extend(b.prototype,n,{interval:50,getHash:function(E){var D=E?E.location:window.location;var C=D.href.match(/#(.*)$/);return C?C[1]:""},getFragment:function(D,C){if(D==null){if(this._hasPushState||C){D=window.location.pathname;var E=window.location.search;if(E){D+=E}}else{D=this.getHash()}}if(!D.indexOf(this.options.root)){D=D.substr(this.options.root.length)}return D.replace(m,"")},start:function(E){if(b.started){throw new Error("Backbone.history has already been started")}b.started=true;this.options=A.extend({},{root:"/"},this.options,E);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var D=this.getFragment();var C=document.documentMode;var G=(j.exec(navigator.userAgent.toLowerCase())&&(!C||C<=7));if(G){this.iframe=g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(D)}if(this._hasPushState){g(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!G){g(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=D;var H=window.location;var F=H.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!F){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&F&&H.hash){this.fragment=this.getHash().replace(m,"");window.history.replaceState({},document.title,H.protocol+"//"+H.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){g(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);b.started=false},route:function(C,D){this.handlers.unshift({route:C,callback:D})},checkUrl:function(D){var C=this.getFragment();if(C==this.fragment&&this.iframe){C=this.getFragment(this.getHash(this.iframe))}if(C==this.fragment){return false}if(this.iframe){this.navigate(C)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(E){var D=this.fragment=this.getFragment(E);var C=A.any(this.handlers,function(F){if(F.route.test(D)){F.callback(D);return true}});return C},navigate:function(D,C){if(!b.started){return false}if(!C||C===true){C={trigger:C}}var E=(D||"").replace(m,"");if(this.fragment==E){return}if(this._hasPushState){if(E.indexOf(this.options.root)!=0){E=this.options.root+E}this.fragment=E;window.history[C.replace?"replaceState":"pushState"]({},document.title,E)}else{if(this._wantsHashChange){this.fragment=E;this._updateHash(window.location,E,C.replace);if(this.iframe&&(E!=this.getFragment(this.getHash(this.iframe)))){if(!C.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,E,C.replace)}}else{window.location.assign(this.options.root+D)}}if(C.trigger){this.loadUrl(D)}},_updateHash:function(C,D,E){if(E){C.replace(C.toString().replace(/(javascript:|#).*$/,"")+"#"+D)}else{C.hash=D}}});var s=c.View=function(C){this.cid=A.uniqueId("view");this._configure(C||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var f=/^(\S+)\s*(.*)$/;var u=["model","collection","el","id","attributes","className","tagName"];A.extend(s.prototype,n,{tagName:"div",$:function(C){return this.$el.find(C)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(D,C,F){var E=document.createElement(D);if(C){g(E).attr(C)}if(F){g(E).html(F)}return E},setElement:function(C,D){if(this.$el){this.undelegateEvents()}this.$el=(C instanceof g)?C:g(C);this.el=this.$el[0];if(D!==false){this.delegateEvents()}return this},delegateEvents:function(G){if(!(G||(G=d(this,"events")))){return}this.undelegateEvents();for(var F in G){var H=G[F];if(!A.isFunction(H)){H=this[G[F]]}if(!H){throw new Error('Method "'+G[F]+'" does not exist')}var E=F.match(f);var D=E[1],C=E[2];H=A.bind(H,this);D+=".delegateEvents"+this.cid;if(C===""){this.$el.bind(D,H)}else{this.$el.delegate(C,D,H)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(E){if(this.options){E=A.extend({},this.options,E)}for(var F=0,D=u.length;F<D;F++){var C=u[F];if(E[C]){this[C]=E[C]}}this.options=E},_ensureElement:function(){if(!this.el){var C=d(this,"attributes")||{};if(this.id){C.id=this.id}if(this.className){C["class"]=this.className}this.setElement(this.make(this.tagName,C),false)}else{this.setElement(this.el,false)}}});var v=function(C,D){var E=l(this,C,D);E.extend=this.extend;return E};k.extend=B.extend=z.extend=s.extend=v;var r={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(G,D,C){var E=r[G];C||(C={});var F={type:E,dataType:"json"};if(!C.url){F.url=d(D,"url")||t()}if(!C.data&&D&&(G=="create"||G=="update")){F.contentType="application/json";F.data=JSON.stringify(D.toJSON())}if(c.emulateJSON){F.contentType="application/x-www-form-urlencoded";F.data=F.data?{model:F.data}:{}}if(c.emulateHTTP){if(E==="PUT"||E==="DELETE"){if(c.emulateJSON){F.data._method=E}F.type="POST";F.beforeSend=function(H){H.setRequestHeader("X-HTTP-Method-Override",E)}}}if(F.type!=="GET"&&!c.emulateJSON){F.processData=false}return g.ajax(A.extend(F,C))};c.wrapError=function(D,E,C){return function(F,G){G=F===E?G:F;if(D){D(E,G,C)}else{E.trigger("error",E,G,C)}}};var h=function(){};var l=function(D,C,E){var F;if(C&&C.hasOwnProperty("constructor")){F=C.constructor}else{F=function(){D.apply(this,arguments)}}A.extend(F,D);h.prototype=D.prototype;F.prototype=new h();if(C){A.extend(F.prototype,C)}if(E){A.extend(F,E)}F.prototype.constructor=F;F.__super__=D.prototype;return F};var d=function(C,D){if(!(C&&C[D])){return null}return A.isFunction(C[D])?C[D]():C[D]};var t=function(){throw new Error('A "url" property or function must be specified')}}).call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/libs/backbone/brace/backbone-brace-min.js' */
/*!
 *  RW.Backbone Brace - 2014-06-27
 *  Copyright 2014 Atlassian Software Systems Pty Ltd
 *  Licensed under the Apache License, Version 2.0
 */
if(typeof RW==="undefined"){var RW={}}(function(c,d){var b="Brace";var e=c[b];var a=function(){c[b]=e;return this};if(typeof define==="function"&&define.amd){define(["underscore","backbone"],d)}else{if(typeof exports==="object"){module.exports=d(require("underscore"),require("backbone"))}else{var f=d(RW._,RW.Backbone);f.noConflict=a;c[b]=f;RW.Brace=f}}}(this,function(o,m){var k={};function f(r){if(o.isArray(r)){return o.reduce(r,function(s,t){s[t]=null;return s},{})}return r}function b(r,s){if(!r||s==null){return s}if(r===String&&o.isString(s)){return s}if(r===Number&&o.isNumber(s)){return s}if(r===Boolean&&o.isBoolean(s)){return s}if(typeof r==="string"||r instanceof String){if(typeof s!==""+r){throw"The typeof "+s+" is "+typeof s+" but expected it to be "+r}return s}if(o.isArray(r)||r===Array){if(!l(s)){throw"Array type expected, but nonnull, non-Array value provided."}return r===Array||!r[0]?s:o.map(s,o.bind(b,null,r[0]))}if(typeof r!=="function"){throw"Invalid expected type "+r+". Should be falsy, String, Array, Backbone.Collection constructor, or function."}if(s instanceof r){return s}if(h(r)){return new r(b([r.model],s))}return new r(s)}function h(s,r){return s&&(s.__super__ instanceof (r||m.Collection)||s.__super__===(r||m.Collection).prototype||s===(r||m.Collection))}function l(r){return o.has(r,"length")&&!(r instanceof String||o.has({string:1,"function":1},typeof r)||r instanceof m.Collection)}function n(t,s){var r={};o.each(t,function(v,u){if(!s[u]||p(v,s[u])){r[u]=v}else{if(!v||p(s[u],v)){return}else{throw u+" has conflicted type descriptors."}}});return r}function p(s,r){if(!r||r===s){return true}if(!s||typeof s==="string"){return false}if(s instanceof Array){return r===Array||(r instanceof Array&&p(s[0],r[0]))}if(typeof r!=="function"){return false}if(h(r)){return h(s,r)}return s.prototype instanceof r}function e(r){if(o.isObject(r)){return o.reduce(r,function(s,u,t){if(u&&o.isFunction(u.toJSON)){s[t]=u.toJSON()}else{if(o.isArray(u)){s[t]=o.map(u,function(v){if(v&&o.isFunction(v.toJSON)){return v.toJSON()}else{return v}})}}return s},r)}else{return r}}function a(s){return function r(){var t=s.call(this);return e(t)}}k.Mixins={createMethodName:function(r,s){return r+s.charAt(0).toUpperCase()+s.substr(1)},applyMixin:function(s,r){o.forEach(o.keys(r),function(A){var x=s.prototype;if("initialize"===A){var z=x.initialize;x.initialize=function(){if(z){z.apply(this,arguments)}r.initialize.apply(this,arguments)};return}if("validate"===A){var t=x.validate;x.validate=function(){if(t){var C=t.apply(this,arguments);if(C){return C}}return r.validate.apply(this,arguments)};return}if("defaults"===A){var w=x.defaults||(x.defaults={});var y=r[A];for(var v in y){if(w.hasOwnProperty(v)){throw"Mixin error: class already has default '"+v+"' defined"}w[v]=y[v]}return}if("namedAttributes"===A){var u=f(x.namedAttributes)||{};var B=f(r[A]);x.namedAttributes=o.extend(u,n(B,u));return}if("namedEvents"===A){if(!o.isArray(r[A])){throw"Expects events member on mixin to be an array"}if(!x.namedEvents){x.namedEvents=[]}x.namedEvents=o.uniq(x.namedEvents.concat(r[A]));return}if(x.hasOwnProperty(A)){throw"Mixin error: class already has property '"+A+"' defined"}x[A]=r[A]},this)}};k.AttributesMixinCreator={create:function(s,t){var r={};if(!s){s={}}if(!o.has(s,"id")){s.id=null}o.each(s,function(y,x){var z=k.Mixins.createMethodName("set",x);r[z]=function(B,A){return this.set(x,B,A)};var w=k.Mixins.createMethodName("get",x);r[w]=function(){return this.get(x)}});if(typeof t==="string"&&typeof s[t]!=="undefined"&&t!=="id"){s.id=s[t];var v=k.Mixins.createMethodName("get",t);var u=k.Mixins.createMethodName("set",t);r.getId=function(){return this[v]()};r.setId=function(x,w){return this[u](x,w)}}return r},ensureType:b};k.EventsMixinCreator={create:function(s){var r={};var t=function(v){var u=k.Mixins.createMethodName("on",v);r[u]=function(){return this.on.apply(this,[v].concat(o.toArray(arguments)))};var w=k.Mixins.createMethodName("trigger",v);r[w]=function(){return this.trigger.apply(this,[v].concat(o.toArray(arguments)))}};o.each(s,o.bind(t,this));return r}};function d(s){return function r(v,w){var x;var u=o.extend({},v);var t;if(v&&v.mixins){t=v.mixins;delete u.mixins}x=s.call(this,u,w);if(this.prototype.namedEvents){k.Mixins.applyMixin(x,{namedEvents:this.prototype.namedEvents})}if(this.prototype.namedAttributes){k.Mixins.applyMixin(x,{namedAttributes:this.prototype.namedAttributes})}if(t){o.each(v.mixins,function(y){k.Mixins.applyMixin(x,y)})}if(x.prototype.namedEvents){k.Mixins.applyMixin(x,k.EventsMixinCreator.create(x.prototype.namedEvents))}if(x.prototype.namedAttributes){x.prototype.namedAttributes=f(x.prototype.namedAttributes);k.Mixins.applyMixin(x,k.AttributesMixinCreator.create(x.prototype.namedAttributes,x.prototype.idAttribute))}if(x.prototype.toJSON){x.prototype.toJSON=a(x.prototype.toJSON)}x.extend=r;return x}}function g(v,t){var u=v.prototype;var r=t.prototype;var s=u.set;r.set=function(B,C,A){var z,y=this.namedAttributes;if(!y||B==null){return s.apply(this,arguments)}if(o.isObject(B)){z=o.clone(B);A=C}else{z={};z[B]=C}for(var x in z){if(!o.has(z,x)){continue}if(!o.has(y,x)){throw"Attribute '"+x+"' does not exist"}z[x]=b(y[x],z[x])}return s.call(this,z,A)};var w=u.get;r.get=function(x){if(this.namedAttributes&&!o.has(this.namedAttributes,x)){throw"Attribute '"+x+"' does not exist"}return w.apply(this,arguments)}}function i(v,s){var u=v.prototype;var r=s.prototype;var t=u.parse;r.parse=function(w,x){return o.pick(t(w,x),o.keys(this.namedAttributes))}}function c(r){var t=r.extend();var s=r.extend;t.extend=d(s);return t}function j(r){var s=c(r);g(r,s);i(r,s);return s}k.Model=j(m.Model);k.Collection=c(m.Collection);k.View=c(m.View);k.Router=c(m.Router);var q=function(){this.initialize.apply(this,arguments)};o.extend(q.prototype,m.Events,{initialize:function(){}});q.extend=m.Model.extend;k.Evented=c(q);return k}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/storage-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(b){console.log("RW: Init local storage");var a="rwot.";function c(){var d=false;try{d="localStorage" in window&&window.localStorage!==null}catch(f){console.log("RW: Browser doesn't support local storage")}this.supportStorage=function(){return d};this.getStorage=function(){return localStorage};this.getPrefix=function(){return a};this.getValue=function(e){if(!d){return}return localStorage[a+e]};this.getValueAsInt=function(e){if(!d){return}return parseInt(this.getValue(e),10)};this.getValueAsBoolean=function(e){var g=this.getValue(e);if(g=="false"){return false}if(g=="true"){return true}return !!g};this.setValue=function(e,g){if(!d){return}localStorage[a+e]=g};this.removeValueWithExactKey=function(e){if(!d){return}localStorage.removeItem(e)};return this}RW.storage=new c()})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/cache/cache-storage-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){console.log("RW: Init cache storage");var b="cache.";function c(){this.getCacheValue=function(d){if(!RW.storage.supportStorage()){return}return RW.storage.getValue(b+d)};this.setCacheValue=function(d,e){if(!RW.storage.supportStorage()){return}RW.storage.setValue(b+d,e)};this.clearCacheKeys=function(){if(!RW.storage.supportStorage()){return}var f=RW.storage.getPrefix()+b;var e=RW.storage.getStorage();for(var d in e){if(d.slice(0,f.length)==f){RW.storage.removeValueWithExactKey(d)}}};this.clearCacheKeysStartingWith=function(g){if(!RW.storage.supportStorage()){return}var f=RW.storage.getPrefix()+b+g;var e=RW.storage.getStorage();for(var d in e){if(d.slice(0,f.length)==f){RW.storage.removeValueWithExactKey(d)}}};return this}RW.cacheStorage=new c()})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/cache/cache-manager-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(c){var a=AJS.contextPath()+"/rest/originaltheme/1.0/";var f="/login.action?logout=true";var b="cacheSettings";var e=false;var d={category:"category",footer:"footer",globalmenu:"topmenu",usercategory:"user-category"};if(typeof String.prototype.startsWith!="function"){String.prototype.startsWith=function(g){return this.slice(0,g.length)==g}}if(typeof String.prototype.endsWith!="function"){String.prototype.endsWith=function(g){return this.indexOf(g,this.length-g.length)!==-1}}if(typeof String.prototype.contains==="undefined"){String.prototype.contains=function(g){return this.indexOf(g)!=-1}}AJS.toInit(function(){if(RW.storage.supportStorage()){RW.cacheManager.init()}if(window.location.href!==undefined&&window.location.href.endsWith(f)){RW.cacheStorage.clearCacheKeys()}});RW.cacheManager=new function(){this.doPoll=function(){var j=RW.cacheSettings;if(j!=undefined&&j.params.docache){if(!e){RW.cacheManager.listenForRWRestCalls()}RW.cacheManager.clearOutdatedCache(j)}else{if(j!=undefined&&!j.params.docache&&e){RW.cacheManager.clearCache();c(document).unbind("ajaxSend");e=false}}var k=JSON.stringify(j);if(k!=undefined){RW.cacheStorage.setCacheValue(b,k)}};this.listenForRWRestCalls=function(){c(document).unbind("ajaxSend");c(document).ajaxSend(function(m,p,l){e=true;if(g(l)){var k=l.url;k=k.replace(/[?&]{1}_=[0-9]*/,"");var j=k.substr(a.length);var n=RW.cacheStorage.getCacheValue(b);if(n!==undefined){var o=JSON.parse(n)}if(o!=undefined&&o.params!=undefined){if(o.params.category&&j.startsWith("category")){return h(k,p,l)}else{if(o.params.footer&&j.startsWith("footer")){return h(k,p,l)}else{if(o.params.globalmenu&&j.startsWith("topmenu")){return h(k,p,l)}else{if(o.params.usercategory&&j.startsWith("user-category")&&!j.contains("/admin-config")){return h(k,p,l)}}}}}}})};this.clearCache=function(){RW.cacheStorage.clearCacheKeys()};this.clearOutdatedCache=function(k){var l=RW.cacheStorage.getCacheValue(b);if(l!==undefined){var m=JSON.parse(l)}if(m!=undefined&&m.params!=undefined){for(var j in m.params){if(m.params[j]&&k.params!=undefined&&k.params[j]){if(m.lastChange!=undefined&&k.lastChange!=undefined&&m.lastChange[j]<k.lastChange[j]){RW.cacheManager.clearKey(j)}}else{if(m.params[j]){RW.cacheManager.clearKey(j)}else{if(m.lastChange!=undefined&&k.lastChange!=undefined&&m.lastChange[j]<k.lastChange[j]){RW.cacheManager.clearKey(j)}}}}}};this.clearKey=function(j){var k=a+d[j];if(RW.remoteUser!=undefined){k=RW.remoteUser+"."+k}else{k="."+k}RW.cacheStorage.clearCacheKeysStartingWith(k)};function h(j,o,k){var m=RW.cacheStorage.getCacheValue(b);if(m!==undefined){var n=JSON.parse(m);if(RW.remoteUser!=undefined){j=RW.remoteUser+"."+j}else{j="."+j}if(RW.cacheStorage.getCacheValue(j)!=undefined){o.abort();var l=JSON.parse(RW.cacheStorage.getCacheValue(j));l.cacheAbort=true;k.success(l);return}}o.done(function(p){if(o.status==200){RW.cacheStorage.setCacheValue(j,JSON.stringify(p))}});return true}function g(j){return j.type!=undefined&&j.type=="GET"&&j.url!=undefined&&j.url.startsWith(a)}this.init=function(){if(RW.cacheStorage.getCacheValue(b)==undefined){var j=RW.cacheSettings;var k=JSON.stringify(j);RW.cacheStorage.setCacheValue(b,k)}i()};function i(){var k=RW.cacheStorage.getCacheValue(b);if(k!==undefined){var j=JSON.parse(k)}if(j!=undefined&&j.params.docache){RW.cacheManager.listenForRWRestCalls()}RW.cacheManager.doPoll()}return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Users==="undefined"){RW.Users={}}(function(e){var c;var d;var b;var a;AJS.toInit(function(){if(e("#rw_category_menu").length>0){var f=new RW.Models.UserCategory.UserCategoryList();f.fetch({cache:false,data:{type:"category"},success:function(){RW.Users.categories=f;RW.PubSub.trigger("user-categories:fetched")}})}var h=e(".rw_user_category_macro");var g=e(".rw_users_space_macro");if(h.length>0){RW._.each(h,function(k){var l=e(".rw_user_category_macro_params",e(k)).data();var j=new RW.Models.UserCategory.UserCategoryItem({key:l.categoryKey,type:"category",rolesOnly:l.rolesOnly});var i={type:j.get("type"),rolesOnly:l.rolesOnly};if(l.hierarchy!=undefined&&l.hierarchy!="no_hierarchy"){i.recursive=true}e(k).html(RW.Templates.loader({type:"circle",bg:"gray"}));if(j.get("key")!==undefined){j.fetch({cache:false,data:i,success:function(){var m=new RW.Views.UserCategory.UserCategoryMacroView({model:j,macroParam:l});e(k).html(m.render());Confluence.Binder.userHover()},error:function(o,m,n){if(m.status===401){e(k).html(RW.Templates.infoBox({content:"The content of this macro can only be viewed by users who have logged in."}))}else{if(m.status===404){e(k).html(RW.Templates.errorBox({content:"Invalid category key"}))}else{e(k).html(RW.Templates.warningBox({content:"An unexpected error has occurred. We apologize for this inconvenience."}))}}}})}else{e(k).html(RW.Templates.infoBox({content:"Please specify a category key."}))}})}if(g.length>0){RW._.each(g,function(j){var k=e(".rw_users_space_macro_params",e(j)).data();if(k.shouldDisplay==true){var i;if(k.usersFromCategory){var i=new RW.Models.UserCategory.UserCategoryItem({key:String(k.usersFromCategory),type:"category",rolesOnly:k.rolesOnly})}else{var i=new RW.Models.UserCategory.UserCategoryItem({key:String(k.spaceKey),type:"space",rolesOnly:k.rolesOnly})}i.fetch({cache:false,data:{type:i.get("type"),rolesOnly:k.rolesOnly},success:function(){var l=new RW.Views.UserCategory.UserSpaceMacroView({model:i,macroParam:k});e(j).html(l.render());if(k.canEdit||i.get("userSize")>0){e(j).show()}else{e(j).remove()}Confluence.Binder.userHover()},error:function(n,l,m){e(j).show();if(l.status===401){e(j).html(RW.Templates.infoBox({content:"The content of this macro can only be viewed by users who have logged in."}))}else{if(l.status===404){e(j).html(RW.Templates.errorBox({content:"rw.category.space.key"}))}else{e(j).html(RW.Templates.warningBox({content:"An unexpected error has occurred. We apologize for this inconvenience."}))}}}})}})}e("#rw_edit_user_category_button").click(function(j){var i=e(j.currentTarget);RW.createUserCategoryDialog(i.data("categoryKey"),"category",false);return false});e("#rw_space_users_button").click(function(j){var i=e(j.currentTarget);RW.createUserCategoryDialog(i.data("spaceKey"),"space",true);return false})});RW.createUserCategoryDialog=function(g,h,f){if(f==undefined){f=false}var i=new RW.Models.UserCategory.UserCategoryItem({key:g,type:h});i.fetch({cache:false,url:i.url()+"/admin-config",data:{type:i.get("type")},success:function(){var j=new RW.Views.UserCategory.AddDialogView({model:i,includeSubCategories:!f,parentCategory:g})}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Models.UserCategory==="undefined"){RW.Models.UserCategory={}}(function(a){RW.Models.UserCategory.UserCategoryList=RW.Brace.Collection.extend({initialize:function(c,b){if(b&&b.listObject){this.model=b.listObject}else{this.model=RW.Models.UserCategory.UserCategoryItem}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category"}});RW.Models.UserCategory.CategoryRoles=RW.Brace.Collection.extend({initialize:function(b){this.model=RW.Models.UserCategory.CategoryRole;if(b&&b.key){this.key=b.key}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.key+"/role"}});RW.Models.UserCategory.UserCategoryItem=RW.Brace.Model.extend({idAttribute:"key",namedAttributes:{name:"string",key:"string",type:"string",users:"object",groups:"object",userSize:"number",allUsers:"object",visible:"boolean",rolesOnly:"boolean",roles:RW.Models.UserCategory.CategoryRoles,canEdit:"boolean",children:RW.Models.UserCategory.UserCategoryList},initialize:function(b){this.url=function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")}},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")}});RW.Models.UserCategory.CategoryRole=RW.Brace.Model.extend({idAttribute:"id",namedAttributes:{key:"string",id:"string",type:"string",user:"object",name:"string",position:"number"},url:function(){return contextPath+"/rest/originaltheme/1.0/user-category/"+this.get("key")+"/role"}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/usercategories/usercategories-views-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.UserCategory==="undefined"){RW.Views.UserCategory={}}(function(a){RW.Views.UserCategory.AddDialogView=RW.Backbone.View.extend({dialog:null,groupQuery:null,userGroupsModel:null,userQuery:null,userModel:null,roleModel:null,roleQuery:null,includeSubCategories:false,parentCategory:"",events:{"keyup #rw_form_roles":"searchRoles","click #rw_role_search_result_container li":"addRoleUser","keyup #rw_form_role_name":"updateRoleUser","click #rw_user_category_role_list .rw_delete_button":"removeRole","click .rw_add_role_button":"addRole","click .rw_cancel_role_button":"cancelRole","click .rw_save_role_button":"saveRole","click .rw_change_category_button":"changeCategory","click .rw_cancel_category_button":"cancelCategorySelection","click .rw_category_chooser ul a":"selectCategory","click .rw_check_visibility":"toggleVisibility","click .rw_check_rolesonly":"toggleRolesOnly"},initialize:function(e){var c=this;if(e&&e.includeSubCategories){this.includeSubCategories=e.includeSubCategories}if(e&&e.parentCategory){this.parentCategory=e.parentCategory}while(a("#rw_popup_dialog_admin").length>0){a("#rw_popup_dialog_admin").remove()}this.dialog=new AJS.Dialog({id:"rw_popup_dialog_admin",width:800,height:600});this.dialog.hide();if(this.model.get("type")=="space"){this.dialog.addHeader(AJS.format("Users assigned to {0}",this.model.get("name"),this.model.get("key")))}else{this.dialog.addHeader(AJS.format("Users assigned to category {0}",this.model.get("name"),this.model.get("key")))}this.dialog.addPanel();a("#rw_popup_dialog_admin").click(function(f){f.stopPropagation()});this.dialog.addButton("Done",RW._.bind(this.submitNewCategory,this));this.dialog.addLink("Cancel",function(){c.dialog.remove()});if(this.model.get("type")==="space"&&this.model.get("key")!=undefined){this.dialog.addLink("Edit macro in space layout",function(){window.open(contextPath+"/spaces/refinedwiki/edit-space-layout.action?key="+c.model.get("key"),"_blank")},"rw_left")}var d=a(RW.Templates.UserCategory.addDialog({model:this.model.toJSON()}));if(!this.includeSubCategories){a("#rw_main_category_section",d).remove()}a("#rw_popup_dialog_admin .dialog-panel-body").html(d);this.setElement(a("#rw_popup_dialog_admin .dialog-panel-body"));a(this.el).bind("keydown",function(f){if(f.which==27&&(c.$("#rw_user_search_result_container").is(":visible")||c.$("#rw_group_search_result_container").is(":visible")||c.$("#rw_role_search_result_container").is(":visible"))){c.$("#rw_user_search_result_container").hide();c.$("#rw_group_search_result_container").hide();c.$("#rw_role_search_result_container").hide();return false}});this.render();if(RW.confluenceVersion>=5&&this.model.get("type")=="space"){var b=a('<span id="rw_space_user_info" data-tooltip="'+"Please note: The Users in space macro needs to be present to be able to display this functionality. Make sure the Users in space macro is added to your space layout or added to a page."+'" class="rw_help_sign rw_icon rw_iconfont_question"></span>');a(".dialog-title",this.dialog.popup.element).append(b);RW.applyTooltip("#rw_space_user_info",{gravity:"n"})}},render:function(){var d=a(RW.Templates.UserCategory.addDialog({model:this.model.toJSON()}));if(!this.includeSubCategories){a("#rw_main_category_section",d).remove()}this.$el.html(d.html());var h=new RW.Models.UserSearchWrapper({type:"user"});if(this.model.get("type")=="category"){var i="rw.user.category.users.desc"}else{if(this.model.get("type")=="space"){var i="rw.user.space.users.desc"}}var c=new RW.Views.UserSearchView({model:this.model,title:"Users",description:AJS.I18n.getText(i),searchWrapperModel:h});this.$("#rw_role_user_group_section").prepend(c.render());var f=new RW.Models.UserSearchWrapper({type:"group"});if(this.model.get("type")=="category"){var e="rw.user.category.groups.desc"}else{if(this.model.get("type")=="space"){var e="rw.user.space.groups.desc"}}var g=new RW.Views.UserSearchView({model:this.model,title:"User groups",description:AJS.I18n.getText(e),searchWrapperModel:f});this.$("#rw_role_user_group_section").prepend(g.render());this.dialog.show();var b=this;this.$("#rw_user_category_role_list").sortable({update:function(n,l){var k=l.item.index();var j=a(l.item).data("roleKey");var m=b.model.get("roles").get(j);m.save({},{url:m.url()+"?position="+k+"&roleKey="+j+"&type="+m.get("type")})}});this.$("#rw_user_category_role_list").disableSelection();if(this.model.get("type")=="space"){b.dialog.addHeader(AJS.format("Users assigned to {0}",b.model.get("name"),b.model.get("key")))}else{b.dialog.addHeader(AJS.format("Users assigned to category {0}",b.model.get("name"),b.model.get("key")))}RW.hideLoader()},addRoleUser:function(g){var i=a(g.currentTarget).data("name");var d=RW.htmlDecode(a(".rw_search_item_title",g.currentTarget).html());var b=a("#rw_form_role_name").val();var h={user:{username:i,fullName:d},name:b};var c=a("img",a(g.currentTarget)).attr("src");var f=a(RW.Templates.UserCategory.role({role:h,fullProfilePicUrl:c}));a(".rw_delete_button",f).remove();this.$("#rw_role_user_result_container").html(f);this.$("#rw_form_roles").val(d);a("#rw_role_search_result_container").html("");a("#rw_role_search_result_container").hide()},updateRoleUser:function(){this.$("#rw_form_role_name").parent().removeClass("rw_error");var b=a("#rw_form_role_name").val();this.$("#rw_role_user_result_container .rw_user_category_role").html(RW.htmlEncode(b))},addRole:function(c){var b=this;this.$("#rw_role_suggestions_container").html("");this.$("#rw_form_roles").val("");this.$("#rw_form_role_name").val("");this.$("#rw_role_user_result_container").html("");this.$(".rw_add_role_wrapper").slideDown(250);this.$("#rw_add_role_button_wrapper").slideUp(250);this.$("#rw_role_user_group_section").hide();this.$("#rw_user_category_role_list").hide();a.get(contextPath+"/rest/originaltheme/1.0/user-category/"+this.model.get("key")+"/role/suggestion?type="+this.model.get("type"),{},function(d){RW._.each(d,function(g,e){var f=a(RW.Templates.UserCategory.resultTag({name:g}));a("span",f).css("padding-right","5px");f.css("cursor","pointer");a(".rw_delete_button",f).remove();a("span",f).attr("title",g);f.click(function(h){b.$("#rw_form_role_name").val(g);b.updateRoleUser()});b.$("#rw_role_suggestions_container").append(f);if((e+1)%3==0){b.$("#rw_role_suggestions_container").append("<div style='clear:both'></div>")}})});return false},cancelRole:function(b){this.$(".rw_add_role_wrapper").slideUp(250);this.$("#rw_add_role_button_wrapper").slideDown(250);this.$("#rw_role_user_group_section").show();this.$("#rw_user_category_role_list").show();return false},saveRole:function(i){var f={username:this.$("#rw_role_user_result_container .rw_user_role").data("username")};var c=this.$("#rw_form_role_name").val();var b=this.model.get("roles").length;var g=false;if(RW._.isEmpty(c)){this.$("#rw_form_role_name").parent().addClass("rw_error");g=true}else{this.$("#rw_form_role_name").parent().removeClass("rw_error")}if(RW._.isEmpty(f.username)){this.$("#rw_form_roles").parent().addClass("rw_error");g=true}else{this.$("#rw_form_roles").parent().removeClass("rw_error")}if(g){return false}var h=new RW.Models.UserCategory.CategoryRole({key:this.model.get("key"),type:this.model.get("type"),user:f,name:c,position:b});var d=this;h.save({},{type:"POST",success:function(e){d.model.get("roles").add(h);d.render()}});return false},removeRole:function(g){var c=a(g.currentTarget).closest("li");var h=c.data("username");var d=c.data("roleKey");var f=this.model.get("roles").get(d);var b=this;f.destroy({url:f.url()+"?roleKey="+d,success:function(e){b.render()}})},searchRoles:function(f){if(f.which!=13){var b=this;f.stopPropagation();this.$("#rw_form_roles").parent().removeClass("rw_error");var c=this.$("#rw_form_roles").val();if(this.roleQuery!=c){this.roleQuery=c;if(RW._.isEmpty(this.roleModel)){this.roleModel=new RW.Models.UserSearchWrapper({type:"user",query:c})}else{this.roleModel.set("query",c)}if(!RW._.isEmpty(c)){var d={reset:true,cache:false,success:function(g){var e=a(RW.Templates.Users.searchResult({results:b.roleModel.toJSON().result}));b.$("#rw_role_search_result_container").html(e);b.$("#rw_role_search_result_container").show();RW.startKeyable(b.$("#rw_role_search_result_container"),null,"search")}};this.roleModel.fetch(d)}else{this.$("#rw_"+type+"_search_result_container").html("");this.$("#rw_"+type+"_search_result_container").hide()}}}},changeCategory:function(d){var b=this;b.$(".rw_change_category_button").hide();if(b.$(".rw_category_chooser ul").children().length==0){var c=new RW.Models.AbstractCategory();c.fetch({cache:false,url:contextPath+"/rest/originaltheme/1.0/category/"+b.parentCategory,data:{recursive:"true","include-children":"false"},success:function(){var e=a(RW.Templates.UserCategory.categoryItem({category:c.toJSON()}));a("a[data-category-key="+b.model.get("key")+"]",e).addClass("rw_selected");b.$(".rw_category_chooser ul").html(e);b.$(".rw_category_chooser").slideDown(250);b.$("#rw_main_dialog_section").slideUp(250)}})}else{b.$(".rw_category_chooser").slideDown(250);b.$("#rw_main_dialog_section").slideUp(250)}},cancelCategorySelection:function(b){this.$(".rw_change_category_button").show();this.$("#rw_main_dialog_section").slideDown(250);this.$(".rw_category_chooser").slideUp(250)},selectCategory:function(f){var b=this;RW.showLoader();var c=a(f.currentTarget).data("category-key");var d=new RW.Models.UserCategory.UserCategoryItem({key:c,type:"category"});d.fetch({cache:false,data:{type:d.get("type")},url:d.url()+"/admin-config",success:function(){b.model=d;b.render()}})},toggleVisibility:function(c){var b=a(c.currentTarget).prop("checked");this.model.set("visible",b);if(!b){this.$(".rw_check_rolesonly").disable();this.$(".rw_check_rolesonly_text").addClass("rw_text_gray")}else{this.$(".rw_check_rolesonly").enable();this.$(".rw_check_rolesonly_text").removeClass("rw_text_gray")}},toggleRolesOnly:function(c){var b=a(c.currentTarget).prop("checked");this.model.set("rolesOnly",b)},submitNewCategory:function(c){var b=this;c.remove();if(!RW._.isEmpty(b.model)&&(!RW._.isEmpty(b.model.get("users"))||!RW._.isEmpty(b.model.get("groups"))||(!RW._.isEmpty(b.model.get("roles"))&&!RW._.isEmpty(b.model.get("roles").models)))){var d=b.model.get("type");b.model.save({},{success:function(){if(!RW._.isEmpty(RW.Users.categories)){RW.Users.categories.remove(b.model.get("key"));RW.Users.categories.add(b.model)}if(RW.cacheManager){RW.cacheManager.clearKey("usercategory")}RW.PubSub.trigger("user-category:updated",{userCategory:b.model})}})}else{if(!RW._.isEmpty(b.model)){b.model.destroy({url:b.model.url()+"?type="+b.model.get("type"),success:function(){RW.PubSub.trigger("user-category:updated",{userCategory:b.model})}});if(!RW._.isEmpty(RW.Users.categories)){RW.Users.categories.remove(b.model.get("key"))}}}}});RW.Views.UserCategory.UserCategoryButtonView=RW.Backbone.View.extend({categoryKey:"",tooltip:"",events:{"click .rw_user_category_link":"toggleDropDown"},initialize:function(c){if(c&&c.categoryKey){this.categoryKey=c.categoryKey}if(c&&c.tooltip){this.tooltip=c.tooltip}var b=a(RW.Templates.UserCategory.button({tooltip:this.tooltip}));this.setElement(b)},render:function(){var b=a(RW.Templates.UserCategory.button({tooltip:this.tooltip}));this.$el.html(b.html());return this.$el},toggleDropDown:function(){var b=this;a("#rw_wrapper .rw_user_category_dd").hide();var c=a(".rw_user_category_link",b.$el.parent());var d=new RW.Views.UserCategory.UserCategoryDDView({categoryKey:b.categoryKey,ddButton:c});a("#rw_wrapper").append(d.render());return false}});RW.Views.UserCategory.UserCategoryDDView=RW.Backbone.View.extend({categoryKey:"",$ddButton:undefined,tooltip:"",events:{"click .rw_user_category_dd":"wrapperClick",},initialize:function(e){var b=this;if(e&&e.ddButton){this.$ddButton=e.ddButton}if(e&&e.categoryKey){this.categoryKey=e.categoryKey}var c=RW.Templates.UserCategory.dropDown();var d=a(c);this.setElement(d)},render:function(){var d=a(RW.Templates.UserCategory.dropDown());this.$el.html(d.html());var c=this;var b=RW.Users.categories.get(this.categoryKey);if(b!==undefined){c.$(".rw_user_category_dd").html(RW.Templates.loader({type:"circle",bg:"gray"}));b.fetch({cache:false,data:{type:b.get("type")},success:function(){var f=new RW.Views.UserCategory.UserCategoryView({model:b});c.$(".rw_user_category_dd").html(f.render());Confluence.Binder.userHover()}})}else{var e=new RW.Views.UserCategory.UserCategoryView({categoryKey:this.categoryKey});this.$(".rw_user_category_dd").append(e.render())}a("body").bind("click",RW._.bind(this.removeDD,this));a("#rw_category_dropdown_wrapper").bind("click",RW._.bind(this.removeDD,this));this.adjustDropDownPosition();this.$ddButton.closest(".rw_has_user_category").addClass("rw_dd_open");this.tooltip=this.$ddButton.attr("data-tooltip");this.$ddButton.attr("data-tooltip","");RW.removeTooltip();return this.$el},wrapperClick:function(b){b.stopPropagation()},removeDD:function(){this.$ddButton.attr("data-tooltip",this.tooltip);this.$ddButton.closest(".rw_has_user_category").removeClass("rw_dd_open");this.remove()},adjustDropDownPosition:function(){this.$(".rw_user_category_dd").css("left",this.$ddButton.offset().left+(this.$ddButton.outerWidth()/2)-200).css("top",this.$ddButton.offset().top+this.$ddButton.outerHeight())}});RW.Views.UserCategory.UserCategoryInline=RW.Backbone.View.extend({events:{},initialize:function(d){var b=this;var c=a(RW.Templates.UserCategory.inline({categoryName:""}));this.setElement(c)},render:function(){var d=this.model.get("name");var b=a(RW.Templates.UserCategory.inline({categoryName:d}));this.$el.html(b.html());var c=new RW.Views.UserCategory.UserCategoryView({model:this.model});this.$(".rw_user_category_inline").append(c.render());return this.$el}});RW.Views.UserCategory.UserCategoryView=RW.Backbone.View.extend({categoryKey:"",events:{"click .rw_edit_button":"editUserCategory"},initialize:function(d){if(d&&d.categoryKey){this.categoryKey=d.categoryKey}var c;if(this.model!==undefined){c=this.model.toJSON()}else{c={canEdit:true}}var b=a(RW.Templates.UserCategory.view({model:c}));this.setElement(b);this.initSubscriptions()},initSubscriptions:function(){var b=this;RW.PubSub.on("user-category:updated",function(c){if(b.model===undefined){b.model=new RW.Models.UserCategory.UserCategoryItem({key:b.categoryKey,type:"category"})}if(c!==undefined&&c.userCategory!==undefined&&c.userCategory.get("key")===b.model.get("key")&&c.userCategory.get("type")===b.model.get("type")){b.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));b.model=new RW.Models.UserCategory.UserCategoryItem({key:b.model.get("key"),type:"category"});b.model.fetch({cache:false,data:{type:b.model.get("type")},success:function(){b.render()}})}})},render:function(){var c;if(this.model!==undefined){c=this.model.toJSON()}else{c={canEdit:true}}var b=a(RW.Templates.UserCategory.view({model:c}));this.$el.html(b.html());return this.$el},editUserCategory:function(b){if(this.model===undefined){RW.createUserCategoryDialog(this.categoryKey,"category",true)}else{RW.createUserCategoryDialog(this.model.get("key"),this.model.get("type"),true)}return false}});RW.Views.UserCategory.UserCategoryMacroView=RW.Backbone.View.extend({macroParam:null,events:{"click .rw_item_link":"toggleTreeItem"},initialize:function(c){if(c.macroParam!==undefined){this.macroParam=c.macroParam}var b=a(RW.Templates.UserCategory.categoryMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.setElement(b);this.initSubscriptions()},initSubscriptions:function(){var b=this;RW.PubSub.on("user-category:updated",function(){b.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));b.model=new RW.Models.UserCategory.UserCategoryItem({key:b.model.get("key"),type:"category"});var c={type:b.model.get("type")};if(b.macroParam.hierarchy!=undefined&&b.macroParam.hierarchy!="no_hierarchy"){c.recursive=true}b.model.fetch({cache:false,data:c,success:function(){b.render()}})})},render:function(){var b=a(RW.Templates.UserCategory.categoryMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.$el.html(b.html());return this.$el},toggleTreeItem:function(b){a(b.currentTarget).parent().toggleClass("rw_closed");return false}});RW.Views.UserCategory.UserSpaceMacroView=RW.Backbone.View.extend({macroParam:null,events:{"click .rw_configure_button":"editUsers"},initialize:function(c){if(c.macroParam!==undefined){this.macroParam=c.macroParam}var b=a(RW.Templates.UserCategory.spaceMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.setElement(b);this.initSubscriptions()},initSubscriptions:function(){var b=this;RW.PubSub.on("user-category:updated",function(c){if(c!==undefined&&c.userCategory!==undefined&&c.userCategory.get("key")===b.model.get("key")&&c.userCategory.get("type")===b.model.get("type")){b.$el.html(RW.Templates.loader({type:"circle",bg:"gray"}));b.model=new RW.Models.UserCategory.UserCategoryItem({key:b.macroParam.spaceKey,type:"space"});b.model.fetch({cache:false,data:{type:b.model.get("type")},success:function(){b.render()}})}})},render:function(){var b=a(RW.Templates.UserCategory.spaceMacro({model:this.model.toJSON(),macroParam:this.macroParam}));this.$el.html(b.html());return this.$el},editUsers:function(b){RW.createUserCategoryDialog(this.macroParam.spaceKey,"space",true);return false}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/keyable-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Keyable==="undefined"){RW.Keyable={}}(function(b){var a;RW.startKeyable=function(c,f,e,d){if(typeof a!="undefined"){RW.quitKeyable()}a=c.keyable(f,e,d)};RW.quitKeyable=function(){if(typeof a!="undefined"){a.quit()}try{RW.stopMenuKeyNavigation()}catch(c){}};b.fn.keyable=function(k,L,H){var E=b(this);var h=null;var q=null;var f=null;var y=null;var j=null;var v=null;var F=null;var D=null;var x=null;var e=true;var i=false;var n=false;j=y=b("li:visible",E);if(typeof H!="undefined"&&H!=null){H.addClass("rw_selected");E.addClass("rw_key_nav")}switch(L){case"category_menu":r();break;case"blog_post_popup":p();break;case"category_dropdown_menu":c();break}switch(k){case"multi_column":if(L==="category_dropdown_menu"){q=b(".rw_dd_section",E)}else{q=b("ul",E)}break}function B(N){x=N;D=null;e=true;if(h!=null){F=h;h=null}else{F=b("li.rw_selected",E)}switch(L){case"category_menu":I();break;case"category_dropdown_menu":if(v!==null&&!v.data("loadCategory")){RW.Keyable.prevItem=v}t();break;case"page_tree":u();break;case"menu_dropdown":l();break;case"blog_post_popup":p();break;case"search":K();break;case"sidebar":w();break;case"sidebar_dd":C();break}switch(k){case"multi_column":m();break;case"horizontal":d();break}var M=j.index(F);E.addClass("rw_key_nav");if(e){if(D==null){if(M===-1){if(x===40){D=0}else{if(x===38){D=j.length-1}}}else{if((M===0)&&x===38){if(L!="page_tree"){D=j.length-1}else{D=M}}else{if((M+1===j.length)&&x===40){D=0}else{if(x===40){D=M+1}else{if(x===38){D=M-1}}}}}}b("li.rw_selected",E).removeClass("rw_selected");v=j.eq(D);v.addClass("rw_selected")}switch(L){case"category_menu":s();break;case"category_dropdown_menu":A();break;case"page_tree":if(e){o()}break;case"menu_dropdown":z();break}J()}function m(){if(F.length!=0){for(var M=0;M<q.length;M++){if(b("li",q[M]).index(F)!==-1){f=q[M]}}}else{f=q[0]}j=b("li",f);if(x===37||x===39){var O=j.index(F);var N=q.index(f);if(x===37){if(N===0){f=q[q.length-1]}else{f=q[N-1]}}else{if(x===39){if(N===(q.length-1)){f=q[0]}else{f=q[N+1]}}}j=b("li",f);if(O===-1){D=0}else{if(O>=j.length){D=(j.length-1)}else{D=O}}}}function d(){if(x===39){x=40}else{if(x===37){x=38}else{e=false}}}function r(){if(RW.inCategoryDropDown){var M=RW.hideCategory();b("#"+M,RW.category.object).addClass("rw_selected")}else{if(b("li.rw_selected",E).length===0){b(j[0]).addClass("rw_selected");E.addClass("rw_key_nav");RW.category.scrollContainer.animate({scrollLeft:"0px"},200)}}}function c(){if(RW.category.collapsedSubCategories){var M=b("#rw_category_dropdown_wrapper .rw_dd_category");b.each(M,function(){if(b("ul",this).is(":empty")&&b(".rw_dd_category",this).length===0){b("ul",this).append('<li data-load-category="true"></li>').data("empty",true)}})}}function I(){if(x===40){if(b(".rw_dropdown_btn",F).length>0){b(".rw_dropdown_btn",F).trigger("click")}}}function s(){if(RW.category.scrolling&&b("li.rw_selected",E).length>0){if(D===0){RW.category.scrollContainer.animate({scrollLeft:"0"},100)}else{if(D===(y.size()-1)){RW.category.scrollContainer.animate({scrollLeft:"+=99999"},100)}else{if(RW.category.scrollContainer.offset().left+E.width()<b(".rw_selected",E).offset().left+b(".rw_selected",E).width()){RW.category.scrollContainer.animate({scrollLeft:"+=400"},100)}else{if(RW.category.scrollContainer.offset().left>b(".rw_selected",E).offset().left){RW.category.scrollContainer.animate({scrollLeft:"-=400"},100)}}}}}}function t(){if(F.length===0&&(x===39||x===37)){var O=RW.hideCategory();var Q=b("#"+O,RW.category.object);var N;var P=b("li",RW.category.object);var M=P.index(Q);if(x===37&&M===0){N=P[P.length-1]}else{if(x===37){N=P[M-1]}else{if(x===39&&M===(P.length-1)){N=P[0]}else{N=P[M+1]}}}RW.startCategoryKeyNavigation(b(N))}if(j.index(F)===0&&x===38){var O=RW.hideCategory();var Q=b("#"+O,RW.category.object);RW.startCategoryKeyNavigation(Q)}}function A(){if(RW.category.collapsedSubCategories&&v.data("loadCategory")){var M=v.closest(".rw_dd_category");v.remove();if(M.hasClass("rw_dd_category_collapsed")){b("a.rw_item_expand",M).trigger("click")}}}function u(){var M=b("li:visible:last",E);if(x===39){e=false;if(b("> .rw_icon_content .rw_icon",F).hasClass("rw_icon_plus")){b("> .rw_icon_content .rw_item_icon",F).trigger("click")}}else{if(x===37){e=false;if(b("> .rw_icon_content .rw_icon",F).hasClass("rw_icon_minus")){b("> .rw_icon_content .rw_item_icon",F).trigger("click")}}else{if(x===40){if(b("> .rw_icon_content .rw_item_icon",F).attr("id")==b("> .rw_icon_content .rw_item_icon",M).attr("id")){e=false}}}}}function K(){if(x===39||x===37){e=false}}function w(){if(x===39||x===37){e=false}if(x===37){var M=b(">a",F);RW.sideMenu.executeLink(M)}}function C(){if(x===39||x===37){e=false}if(x===39){RW.sideMenu.quitDDKeyNav(b("#"+E.data("owner")).parent())}}function o(){if(n==v){return}if(x===40||x==38){if(!(b(v).closest("ul").is(":visible"))){if(n==null){n=v}B(x)}}else{n=null}}function p(){var M=b(".rw_prev",E).parent();var N=b(".rw_next",E).parent();if(x===39){if(!N.hasClass("rw_transparent")){N.click()}}else{if(x===37){if(!M.hasClass("rw_transparent")){M.click()}}}}function l(){var M=j.index(F);if(M===0&&x===38){if(parseInt(AJS.version)>=5){b("#rw_menu_bar").click();RW.startConf5MenuKeyNavigation()}else{RW.startMenuKeyNavigation()}}}function z(){if(parseInt(AJS.version)>=5){b(".active",E).removeClass("active");b("a",v).addClass("active")}}function J(){if(!RW.isScrolling){RW.scrollToElementWithOffsetAndDelay(v,250,100,{before:function(){i=true},complete:function(){i=false},error:function(){i=false}})}}var g=function(O){if(O.which==13){if(b("li.rw_selected",E).length===1){if(L=="page_tree"){window.location.href=b("li.rw_selected a",E).attr("href");if(L=="page_tree"){RW.showLoader()}}else{if(L=="menu_dropdown"){var N=b("li.rw_selected a",E).data("events");if(N!=null&&typeof(N.click)!==undefined){b("li.rw_selected a",E).trigger("click")}else{window.location.href=b("li.rw_selected a",E).attr("href")}}else{if(L=="sidebar"||L=="sidebar_dd"){RW.sideMenu.executeLink(b("li.rw_selected > a",E));return false}else{b("li.rw_selected a",E).trigger("click")}}}}O.preventDefault();return false}else{if(O.which===37||O.which===38||O.which===39||O.which===40){B(O.which);if(L=="search"&&(O.which===37||O.which===39)){return true}else{O.preventDefault();return false}}}if(O.which===27){if(L==="blog_post_popup"){var M=b(".rw_del",E).parent();M.click()}}};var G=function(){if(!i){h=b(this);E.removeClass("rw_key_nav");b("li.rw_selected",E).removeClass("rw_selected")}};this.quit=function(){b("li.rw_selected",E).removeClass("rw_selected");E.removeClass("rw_key_nav");b(document).unbind("keydown",g);b("li",E).unbind("mouseenter",G)};b(document).keydown(g);b("iframe#rw_popup_iframe_id").load(function(){b(document.activeElement.contentWindow.document).keydown(g);b(this).keydown(g)});b("li",E).mouseenter(G);return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/categories/category-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.category==="undefined"){RW.category={}}(function(B){var i="rw_category_key_";var K="single_column";var u="multi_column";var o="dynamic_column";var f=340;var S=440;var L=180;var a="/plugins/servlet/rw-resources/categories/";var t;var A;var p=false;var C=false;var r;var O;var k;var v;var H;var w;var F;var b;var n;var P=B('<div class="rw_dd_section" ></div>');var G;var c=B('<div class="rw_popup_content" ></div>');var I;var j;var N;var J;var d;var E;var e;var y;var D;var s;var Q;var m;AJS.toInit(function(){RW.category.object=B("#rw_category_menu");if(RW.category.object.length>0){RW.category.scrollContainer=B("#rw_category_menu_scroll_container",RW.category.object);if(RW.category.scrollContainer.length>0){RW.category.scrollEnabled=true}else{RW.category.scrollEnabled=false}r=B("#rw_main");O=B("#rw_category_dropdown_wrapper",r);k=B("#rw_category_dropdown_container",r);v=B("#rw_category_dropdown_loader",r);T(B("ul",RW.category.object))}});function T(U){var V=B("#rw_category_menu_parameters");d=B("#rw_category_dd_disabled",V).html();dropDownlayout=B("#rw_category_dd_layout",V).html();J=B("#rw_show_category_logo",V).html();j=B("#rw_show_space_logo",V).html();N=B("#rw_show_space_icon",V).html();e=B("#rw_active_category_key",V).html();y=B("#rw_is_dashboard",V).html();D=B("#rw_min_column_width",V).html();s=B("#rw_exclude_archived_spaces",V).html();Q=B("#rw_manual_permissions",V).html();m=B("#rw_disable_subdashboards",V).html();if(typeof m=="string"){m=(m=="true")}if(D!=null&&D!=""&&D!="0"){f=parseInt(D);S=f+100}if(B("#rw_sub_category_collapsed",V).html()==="true"){RW.category.collapsedSubCategories=true}else{RW.category.collapsedSubCategories=false}if(dropDownlayout==undefined||dropDownlayout==""){dropDownlayout=o}if(y==="true"){B("#rw_dashboard_link",RW.category.object).addClass("rw_active")}RW.bindLink(B("#rw_dashboard_link a",RW.category.object),contextPath+"/dashboard.action",false,RW.category.object);B.ajax({type:"GET",dataType:"json",url:contextPath+"/rest/originaltheme/1.0/category?exclude-archived-spaces="+s,cache:false,success:function(W){if(W!=undefined&&W.length>0){B.each(W,function(){R(this,U)});if(RW.category.scrollEnabled&&RW.category.scrollContainer.width()>0){h()}RW.category.object.trigger("loaded")}else{if(RW.isConfluenceAdministrator){var X=B('<li><a title="'+"Organize Spaces & Categories"+'"class="rw_edit_button"><span class="rw_item_left"><span class="rw_item_logo"></span><span class="rw_item_name">'+"Organize Spaces & Categories"+'</span></span><span class="rw_item_right"></span></a></li>');RW.bindLink(B("a",X),contextPath+"/admin/spaces/organize-spaces.action",false,RW.category.object);U.append(X)}}}})}function R(Y,U){if(H==undefined){H=B(B("#rw_category_menu_item_template").html())}var ab=H.clone(),V=B(".rw_item_name",ab),X=B("a",ab),Z=B(".rw_item_logo",ab),W=B(".rw_item_icon",ab);if(Y.nameKey===e){ab.addClass("rw_active")}ab.attr("id",i+RW.htmlEncode(Y.nameKey));V.html(RW.htmlEncode(Y.name));if(Y.link!=undefined){var aa=Y.link;if(aa.target=="_blank"){W.addClass("rw_icon_container_10 rw_target_blank");RW.bindLink(X,aa.url,true,RW.category.object)}else{RW.bindLink(X,aa.url,false,RW.category.object);if(d!=="true"){W.addClass("rw_icon_container_16 rw_dropdown_btn").categoryDropDown(contextPath,dropDownlayout)}}}else{RW.bindLink(X,contextPath+"/category/"+RW.htmlEncode(Y.nameKey),false,RW.category.object);if(d!=="true"){W.addClass("rw_icon_container_16 rw_dropdown_btn").categoryDropDown(contextPath,dropDownlayout)}}if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){X.attr("title",Y.name+" "+"( Type \'n\' )")}if(J==="true"&&Y.logo!=undefined&&Y.logo.filePath!=undefined){Z.addClass("rw_image_container").html('<img src="'+contextPath+a+Y.logo.filePath+'" />');X.addClass("rw_has_logo")}U.append(ab)}function h(){RW.category.scrollContainer.height(RW.category.object.height()+50);B("ul",RW.category.object).width(10000);B("ul",RW.category.object).width(10+B("li:last",RW.category.object).offset().left+B("li:last",RW.category.object).width()-RW.category.object.offset().left);RW.category.scrollContainer.scroll(x);B(window).resize(x);x();M()}function x(){var U=g();var V=l();if(U||V){RW.category.scrolling=true}else{RW.category.scrolling=false}if(RW.inCategoryDropDown){RW.hideCategory()}}function g(){var V=B("ul",RW.category.scrollContainer).width()-RW.category.scrollContainer.width();if(V>0&&V>(RW.category.scrollContainer.scrollLeft()+2)){if(!p){A=B(B("#rw_category_menu_right_button_template").html());RW.category.object.append(A);var U=parseInt((RW.category.object.height()-18)/4);A.height(RW.category.object.height());B("a",A).css("padding",U+"px 0px").css("margin",U+"px 0px 0px 0px");RW.category.scrollContainer.css("margin-right","25px");B("a",A).click(z);A.fadeIn(300);p=true}else{A.fadeIn(300)}return true}else{if(p){A.fadeOut(300)}}return false}function l(){if(RW.category.scrollContainer.scrollLeft()>0){if(!C){t=B(B("#rw_category_menu_left_button_template").html());RW.category.object.prepend(t);var U=parseInt((RW.category.object.height()-18)/4);t.height(RW.category.object.height());B("a",t).css("padding",U+"px 0px").css("margin",U+"px 0px 0px 0px");RW.category.scrollContainer.css("margin-left","25px");B("a",t).click(q);t.fadeIn(300);C=true}else{t.fadeIn(300)}return true}else{if(C){t.fadeOut(300)}}return false}function z(){RW.category.scrollContainer.animate({scrollLeft:"+=400px"},200)}function q(){RW.category.scrollContainer.animate({scrollLeft:"-=400px"},200)}function M(){if(RW.category.scrolling){var U=RW.category.getScrollPositionForItem(B(".rw_active",RW.category.object));if(U>0){RW.category.scrollContainer.animate({scrollLeft:(U+100)},0)}}}RW.category.getScrollPositionForItem=function(U){if(U.length==0){return 0}else{return(U.offset().left+U.width())-(RW.category.scrollContainer.offset().left+RW.category.scrollContainer.width())}};B.fn.categoryDropDown=function(af,aj){var X;var an;var az;var am;var ay;var ar;var ad=false;var al=B("<div class='rw_expand_all_section'><a style='display:none;' class='rw_expand_all'></a></div>");var ap=false;var aw;RW.showCategory=function(aD,aE,aF){var aB=false;if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(aD)&&RW.Users.categories.get(aD).get("visible")==true){ap=true}else{ap=false}X=aD;var aA=B("#"+i+X+" a:first",RW.category.object);az=r.offset();am=RW.category.object.offset();ay=aA.offset();var aC=1;if(aj==u){W()}else{if(aj==K){ag()}else{aj=o;ag()}}O.css("top",am.top+RW.category.object.height()-B("#rw_wrapper").offset().top);RW.inCategoryDropDown=true;RW.hideUserCategories();B("a.rw_category_dropdown_visible",RW.category.object).removeClass("rw_category_dropdown_visible rw_corners_top");aA.addClass("rw_category_dropdown_visible rw_corners_top");O.show();k.hide();v.show();RW.category.recursive=aE||!RW.category.collapsedSubCategories;B.ajax({type:"GET",dataType:"json",url:af+"/rest/originaltheme/1.0/category/"+aD+"?include-children=true&recursive="+RW.category.recursive+"&exclude-archived-spaces="+s,cache:false,success:function(aL){k.html("");an=c.clone();if(ap){O.addClass("rw_has_user_category")}var aJ=aL.subCategories;var aK;if(aL.children&&aL.children.length>0){var aK=aL.children}if((aK===undefined||aK.length==0)&&(aJ===undefined||aJ.length==0)){an.html("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>");k.append(an);k.show();v.hide();RW.startKeyable(k,K,"category_dropdown_menu");return}if(aJ===undefined||aJ.length===0){if(n==undefined){n=B(B("#rw_section_template").html())}if(aj==u||aj==o){if(aK.length<5){var aI=n.clone();aI.addClass("rw_dd_section");aI.css("float","none");ax(aK,aI);an.append(aI);ar=K}else{if(aK.length<17){if(aj==o){ac(2)}var aN=au(2)+"px";var aH=Math.ceil(aK.length/2);at(aK,an,aH,aN);ar=u}else{if(aj==o){W()}var aG=av();var aH=Math.ceil(aK.length/aG);var aN=au(aG)+"px";at(aK,an,aH,aN);ar=u}}}else{var aI=n.clone();aI.addClass("rw_dd_section");aI.css("float","none");ax(aK,aI);an.append(aI);ar=K}}else{if(aj==o){var aG=1;if(aJ!==undefined){aG=aJ.length;if(aK!==undefined){if(aK.length>5){aG=av()}else{aG++}}}if(aG===1){ae(aJ,aK,an)}else{if(aG>1&&aG<4){ac(aG);ai(aJ,aK,an)}else{W();ai(aJ,aK,an)}}}else{if(aj==u){ai(aJ,aK,an)}else{if(aj==K){ae(aJ,aK,an)}}}if(RW.category.collapsedSubCategories){aB=true}}k.append(an);if(aB){var aM=B(".rw_expand_all",al);if(RW.category.recursive){aM.html("Collapse all")}else{aM.html("Expand all")}aM.click(function(){if(aM.html()=="Expand all"){aM.html("Collapse all");RW.showCategory(aD,true)}else{aM.html("Expand all");RW._.each(B(".rw_item_expand",k),function(aO){if(B(aO).closest(".rw_dd_category").hasClass("rw_dd_category_expanded")){aO.click()}});V()}});aM.show();an.append(al)}if(b==undefined){b=B(B("#rw_clear_template").html())}an.append(b.clone());k.show();v.hide();V();RW.startKeyable(k,ar,"category_dropdown_menu");U(k,aD,aJ,aA,aL.canEdit);if(aE){RW._.each(B(".rw_item_expand",k),function(aO){if(B(aO).closest(".rw_dd_category").hasClass("rw_dd_category_collapsed")){aO.click()}});V()}}})};function U(aD,aF,aE,aA,aC){aw=[];RW._.each(aE,function(aH){if(aC){ak(aw,aH)}else{Z(aw,aH)}});if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(aF)!==undefined){var aG=B(".rw_popup_content",B("#rw_category_dropdown_container")).children().first().css("width");var aB=RW.Users.categories.get(aF);B("#rw_category_dropdown_users").html(RW.Templates.loader({type:"circle",bg:"gray"}));aB.fetch({cache:false,data:{type:aB.get("type"),rolesOnly:aB.get("rolesOnly")},success:function(){var aH=new RW.Views.UserCategory.UserCategoryInline({model:aB});B("#rw_category_dropdown_users").html(aH.render());Confluence.Binder.userHover();V()}})}aq(aC)}function aq(aA){RW._.each(aw,function(aC){if(!RW._.isEmpty(RW.Users.categories)&&!B("#rw_sub_category_key_"+aC.nameKey+" > h2").hasClass("rw_has_user_category")){var aB=RW.Users.categories.get(aC.nameKey);if(aB!==undefined&&aB.get("visible")==true){var aD=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:aC.nameKey,tooltip:"Users"});B("#rw_sub_category_key_"+aC.nameKey+" > h2 .rw_sub_category_link").append(aD.render());B("#rw_sub_category_key_"+aC.nameKey+" > h2").addClass("rw_has_user_category")}else{if(aA){var aD=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:aC.nameKey,tooltip:"Manage users"});B("#rw_sub_category_key_"+aC.nameKey+" > h2 .rw_sub_category_link").append(aD.render());B("#rw_sub_category_key_"+aC.nameKey+" > h2").addClass("rw_has_user_category");B("#rw_sub_category_key_"+aC.nameKey+" > h2").addClass("rw_hidden_mode")}}}});RW.applyTooltip("#rw_category_dropdown_container .rw_user_category_link",{gravity:"n"})}function Z(aB,aA){if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(aA.nameKey)!==undefined){aB.push(aA)}if(aA.subCategories!==undefined){RW._.each(aA.subCategories,function(aC){Z(aB,aC)})}}function ak(aB,aA){aB.push(aA);if(aA.subCategories!==undefined){RW._.each(aA.subCategories,function(aC){ak(aB,aC)})}}RW.hideUserCategories=function(){B("#rw_wrapper .rw_user_category_dd").hide();O.removeClass("rw_has_user_category");B("#rw_category_dropdown_users",O).html("");B("#rw_category_dropdown_users",O).css("min-height","0px")};RW.hideCategory=function(){RW.hideUserCategories();B("a.rw_category_dropdown_visible",RW.category.object).removeClass("rw_category_dropdown_visible rw_corners_top");O.hide();k.html("");RW.inCategoryDropDown=false;B(document).unbind("click",RW.hideCategory);RW.quitKeyable();return i+X};RW.category.toggleSubCategory=function(aA){aA.toggleClass("rw_dd_category_collapsed");aA.toggleClass("rw_dd_category_expanded");V()};function V(){if(ap){B("#rw_category_dropdown_users",O).css("min-height","0px")}if(ar===u){B(".rw_dd_section",an).css("height","auto");B(".rw_dd_section",an).height(an.height())}if(ap){B("#rw_category_dropdown_users",O).css("min-height",O.height())}}function aa(){var aB=r.width()+az.left;var aA=ay.left+O.width()-20;if(r.width()<O.width()){W()}else{if(aA>aB){O.css("left",aB-O.width())}else{O.css("left",ay.left-20)}}}function W(){O.css("left",az.left);O.css("width",r.width())}function ac(aA){O.css("left",az.left);O.css("width",(aA*f)+((aA-1)*20));aa()}function ag(){if(ap){O.css("width",S+L)}else{O.css("width",S)}aa()}function ae(aC,aD,aA){ar=K;var aE=P.clone();aE.css("width","100%");if(aD){if(n==undefined){n=B(B("#rw_section_template").html())}var aB=n.clone();ax(aD,aB);aE.append(aB)}B.each(aC,function(aF){if(aF==0&&aD==null){ab(this,aE,false,false)}else{ab(this,aE,true,false)}});aA.append(aE)}function ai(aG,aC,aA){ar=u;var aH=0;var aL=0;var aI=av();var aF=1;var aE=aG.length;if(aE<aI){if(aC&&aC.length>5){aF=aI-aE;aE=aI}else{if(aC){aE++}}}if(aE>aI){aE=aI}var aB=au(aE)+"px";if(aC){if(aF==1){var aD=P.clone();aD.css("width",aB);aD.attr("id","rw_dd_section_"+aH);if(n==undefined){n=B(B("#rw_section_template").html())}var aJ=n.clone();ax(aC,aJ);aD.append(aJ);aA.append(aD);aH++;aL++}else{var aK=Math.ceil(aC.length/aF);at(aC,an,aK,aB);aH=aF;aL=aF}}B.each(aG,function(){if(aH===aE){if(aC){aH=1}else{aH=0}}if(aL>=aE){ab(this,B("#rw_dd_section_"+aH,aA),true,false,true)}else{var aM=P.clone();aM.attr("id","rw_dd_section_"+aH);if(aH!==0){aM.css("padding-left","15px").css("margin-left","14px").css("border-left","1px solid")}aM.css("width",aB);ab(this,aM,false,false);aA.append(aM)}aH++;aL++})}function ab(aH,aA,aI,aC,aK){if(F==undefined){F=B(B("#rw_category_section_template").html())}var aJ=F.clone();aJ.attr("id","rw_sub_category_key_"+RW.htmlEncode(aH.nameKey));if(aI){aJ.addClass("rw_padding_top")}if(aC){aJ.addClass("rw_padding_left")}var aG=B("h2",aJ);var aF=B("h2 a.rw_sub_category_link",aJ);var aE=B("ul",aJ);if(aK){aJ.css("padding-top","25px");aG.addClass("rw_new_row")}aF.html(RW.htmlEncode(aH.name));if(!m){aF.attr("href",af+"/category/"+RW.htmlEncode(aH.nameKey))}if(aH&&aH.children){ax(aH.children,aE)}if(RW.category.collapsedSubCategories){var aB=B('<a class="rw_item_expand"><span></span></a>');aG.prepend(aB);aF.addClass("rw_has_expand");aJ.addClass("rw_dd_category_collapsed");if(RW.category.recursive){aJ.data("loaded",true)}var aD=aB;if(m){aD=B(aF.closest("h2"));aD.addClass("rw_category_title_link")}aD.click(function(){var aM=this;if(m){aM=B(this).children(".rw_item_expand")}if(!aJ.data("loaded")){var aL=B(RW.Templates.loader({type:"circle",bg:"gray"}));aJ.append(aL);B.ajax({type:"GET",dataType:"json",url:af+"/rest/originaltheme/1.0/category/"+RW.htmlEncode(aH.nameKey)+"?include-children=true&recursive="+!RW.category.collapsedSubCategories+"&exclude-archived-spaces="+s,cache:false,success:function(aN){aJ.find(".rw_loader_box").remove();aJ.data("loaded",true);if(aN==undefined){return}if((aN.children==undefined||aN.children.length==0)&&(aN.subCategories==undefined||aN.subCategories.length==0)){aE.append("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>")}else{if(aN&&aN.children){ax(aN.children,aE)}if(aN&&aN.subCategories!=null){B.each(aN.subCategories,function(){ab(this,aJ,true,true)})}}RW.category.toggleSubCategory(B(aM).parent().parent());if(RW.Keyable.prevItem!=undefined){RW.startKeyable(k,ar,"category_dropdown_menu",RW.Keyable.prevItem)}if(aN.canEdit){ak(aw,aN)}else{Z(aw,aN)}aq(aN.canEdit)}})}else{RW.category.toggleSubCategory(B(aM).parent().parent())}})}else{if((aH.children===undefined||aH.children.length===0)&&(aH.subCategories===undefined||aH.subCategories.length===0)){B("ul",aJ).append("<span class='rw_info_text'>"+"There are no spaces at the moment."+"</span>")}}aA.append(aJ);if(aH&&aH.subCategories!=null){B.each(aH.subCategories,function(){ab(this,aJ,true,true)})}}function ax(aB,aA){aA.addClass("rw_content_list");B.each(aB,function(aC){ao(this,aA,aC)});RW.adjustIconTextSpace(aA)}function ao(aC,aA,aB){if(aC.type=="space"){Y(aC,aA,aB)}else{if(aC.type=="link"){ah(aC,aA,aB)}}}function ah(aE,aG,aD){if(aE==undefined){return}var aH=B('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>'),aF=B(".rw_item_icon",aH),aC=B(".rw_item_content",aH),aB=B("a",aH);if(aD%2===0){aH.addClass("rw_alternating")}aH.attr("id","rw_link_id_"+RW.htmlEncode(aE.key));aC.html(RW.htmlEncode(aE.title));if(aE.icon==undefined){aF.remove()}else{aF.addClass("rw_icon_"+aE.icon)}if(aE.target==true){aB.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');aB.attr("target","_blank");aC.addClass("rw_icon_right")}var aA=RW.htmlEncodeUrl(aE.url);aB.attr("href",aA).click(function(){ad=true;if(k.hasClass("rw_key_nav")){if(aE.target==true){window.open(aA)}else{window.location=aA}k.hide();v.show();return false}else{return true}});aG.append(aH)}function Y(aH,aA,aG){if(w==undefined){w=B(RW.Templates.contentItem())}var aD=w.clone(),aC=B(".rw_item_content",aD),aB=B(".rw_item_favourite",aD),aF=B("a",aD),aE=aH.key;if(aG%2===0){aD.addClass("rw_alternating")}aD.attr("id","rw_space_key_"+RW.htmlEncode(aE));aC.html(RW.htmlEncode(aH.title));aF.attr("href",af+"/display/"+aE).click(function(){ad=true;if(k.hasClass("rw_key_nav")){window.location=af+"/display/"+aE;k.hide();v.show();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(aH.favourite){aB.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{aB.addClass("rw_gray_star").attr("title","Add to your favourite list")}aB.click(function(aI){RW.addOrRemoveFav(aE,this);aI.stopPropagation();return false});aC.addClass("rw_icon_right")}else{aB.remove()}if(j==="true"&&typeof(aH.logo)!=="undefined"){aF.prepend('<span class="rw_item_icon"><img src="'+af+aH.logo+'" class="rw_space_logo" /></span>')}else{if(N==="true"){aF.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}}aA.append(aD)}function at(aC,aA,aH,aB){var aD=P.clone();aD.width(aB);if(n==undefined){n=B(B("#rw_section_template").html())}var aG=n.clone();aG.addClass("rw_content_list");var aF=0;var aI=0;var aE=aC.length-1;B.each(aC,function(){ao(this,aG,aF);if(aF==(aH-1)&&aI!=aE){aF=0;aD.append(aG);aA.append(aD);aD=P.clone();aD.css("padding-left","30px");aD.width(aB);aG=n.clone();aG.addClass("rw_content_list")}else{aF++}aI++});aD.append(aG);aA.append(aD)}function av(){return Math.floor(r.width()/(f+30))}function au(aB){var aA=O.width()-40;if(ap){var aA=aA-L}switch(aB){case 1:columnWidth=aA;break;case 2:columnWidth=(aA-30)/2;break;case 3:columnWidth=(aA-60)/3;break;case 4:columnWidth=(aA-90)/4;break;case 5:columnWidth=(aA-120)/5;break;case 6:columnWidth=(aA-150)/6;break;case 7:columnWidth=(aA-180)/7;break;case 8:columnWidth=(aA-210)/8;break;case 9:columnWidth=(aA-240)/9;break;case 10:columnWidth=(aA-270)/10;break;case 11:columnWidth=(aA-300)/11;break;case 12:columnWidth=(aA-330)/12;break;case 13:columnWidth=(aA-360)/13;break;case 14:columnWidth=(aA-390)/14;break;case 15:columnWidth=(aA-420)/15;break;default:columnWidth=(aA-450)/16}return columnWidth-1}B(this).click(function(){var aA=B(this).closest("a");RW.showCategory(aA.closest("li").attr("id").replace(i,""),false);aA.addClass("rw_category_dropdown_visible rw_corners_top");B(document).bind("click",function(){if(!ad){RW.hideCategory()}else{ad=false}});return false});B(document).ready(function(){O.click(function(aA){if(!ad){aA.stopPropagation()}})})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/attachments-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(e){RW.inAttachments=false;var d=false;var b;AJS.toInit(function(){e("#rw_attachment_dialog_button").click(RW.showAttachments)});function c(){var g=contextPath+"/pages/view-attachments.action?pageId="+AJS.params.pageId;var f=RW.openIframeDialog(g,"Attachments ","",true);f.addButton("Done",function(){f.remove();RW.hideLoader()});f.show();return f}function a(){if(AJS.params.pageId!=undefined){c()}}RW.showAttachments=function(){if(AJS.params.pageId!=undefined){c()}return false};RW.hideAttachments=function(){RW.inAttachments=false;b.remove();RW.quitKeyable();return false}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/fullscreen-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(b){RW.inFullscreen=false;var a=false;var c=function(d){d.stopPropagation()};AJS.toInit(function(){b("#rw_open_fullscreen").click(RW.openFullscreen);b("#rw_close_fullscreen").click(RW.closeFullscreen)});RW.openFullscreen=function(){if(b("#rw_main_column").length!=0){RW.inFullscreen=true;if(b("#rw_side_menu").length>0){if(b("#rw_wrapper").hasClass("rw_has_side_menu")){a=true;b("#rw_wrapper").removeClass("rw_has_side_menu")}b("#rw_side_menu").hide()}b("#rw_main_column").addClass("rw_in_fullscreen");b("#rw_fullscreen_bg").show();b("#rw_open_fullscreen").hide();b("#rw_close_fullscreen").show();window.scroll(0,0)}};RW.closeFullscreen=function(){RW.inFullscreen=false;if(b("#rw_side_menu").length>0){if(a){b("#rw_wrapper").addClass("rw_has_side_menu")}b("#rw_side_menu").show()}b("#rw_main_column").removeClass("rw_in_fullscreen");b("#rw_fullscreen_bg").hide();b("#rw_open_fullscreen").show();b("#rw_close_fullscreen").hide()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/global/favorite-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(d){RW.inFavPageAndSpace=false;var b;var a;var k;var j;var g;var c;function i(l,m){m.html("");m.addClass("rw_content_list");d.each(l,function(n){f(this,m,n)})}function f(s,m,r){if(c==undefined){c=d(RW.Templates.contentItem())}var p=c.clone(),l=d(".rw_item_content",p),o=d(".rw_item_favourite",p),q=d("a",p),n=s.id;q.prepend('<span class="rw_item_icon rw_icon_text rw_icon_container_20"></span>');if(r%2===0){p.addClass("rw_alternating")}l.html(s.name);l.append(' <span class="rw_small_text">('+s.spaceName+")</span>");q.attr("href",s.url).click(function(){linkedClicked=true;if(a.hasClass("rw_key_nav")){window.location=s.url;k.showLoader();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(s.favourite){o.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{o.addClass("rw_gray_star").attr("title","Add to your favourite list")}o.click(function(t){RW.addOrRemoveFavPage(n,this);t.stopPropagation();return false});l.addClass("rw_icon_right")}else{o.remove()}m.append(p)}function h(m,l){l.html("");l.addClass("rw_content_list");d.each(m,function(n){e(this,l,n)})}function e(s,l,r){if(g==undefined){g=d(RW.Templates.contentItem())}var o=g.clone(),n=d(".rw_item_content",o),m=d(".rw_item_favourite",o),q=d("a",o),p=s.key;if(r%2===0){o.addClass("rw_alternating")}o.attr("id","rw_space_key_"+p);n.html(s.name);q.attr("href",contextPath+"/display/"+p).click(function(){linkedClicked=true;if(a.hasClass("rw_key_nav")){window.location=contextPath+"/display/"+p;k.showLoader();return false}else{return true}});if(typeof RW.remoteUser!="undefined"){if(s.favourite){m.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{m.addClass("rw_gray_star").attr("title","Add to your favourite list")}m.click(function(t){RW.addOrRemoveFav(p,this);t.stopPropagation();return false});n.addClass("rw_icon_right")}else{m.remove()}if(s.logo!=undefined){q.prepend('<span class="rw_item_icon"><img src="'+s.logo+'" class="rw_space_logo" /></span>')}else{q.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}l.append(o)}RW.showFavourite=function(l){if(j==undefined){j=d(d("#rw_section_with_heading_template").html())}if(k==undefined){k=new RW.ui.popup("rw_favorite_popup","Favourite");k.closeButton.click(RW.hideFavourite);k.closeButton.html("Close");k.obj.click(function(m){m.stopPropagation()})}a=k.container;RW.closePopups();k.show();k.showLoader();RW.inFavPageAndSpace=true;d.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/space",type:"GET",dataType:"json",cache:false,success:function(o){var n=j.clone(),m=d("h2",n),p=d("ul",n);n.addClass("rw_left").css("padding-right","20px").width(370);m.html("Spaces");if(o.spaces.length>0){h(o.spaces,p)}else{p.after(d(d("#rw_favourite_no_spaces_template").html()).clone()).remove()}a.append(n)},}).done(function(){d.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/page",type:"GET",dataType:"json",cache:false,success:function(m){var p=j.clone(),o=d("h2",p),n=d("ul",p);p.addClass("rw_left").width(370);o.html("Pages");if(m.pages.length>0){i(m.pages,n)}else{n.after(d(d("#rw_favourite_no_pages_template").html()).clone()).remove()}a.append(p)}}).done(function(){a.append('<div style="clear:both;" ></div>');var n=d("li",a);var m=d(n[0]);if(l!=undefined&&l.which==1){m=null}RW.startKeyable(a,"multi_column",null,m);k.hideLoader();d(document).bind("click",RW.hideFavourite)})});RW.PubSub.trigger("favourite-popup:show")};RW.hideFavourite=function(){k.hide();k.clear();RW.inFavPageAndSpace=false;d(document).unbind("click",RW.hideFavourite);RW.quitKeyable();RW.PubSub.trigger("favourite-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/leftcolumn-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){AJS.toInit(function(){if(RW.confluenceVersion<5){RW.leftColumnHidden=false;RW.hideLeftColumn=function(){d();c("closed")};RW.showLeftColumn=function(){b();c("open")};function c(e){AJS.safe.ajax({url:contextPath+"/ajaxactions/left-column-state.action",type:"POST",data:{value:e},success:function(f){},error:function(f){}})}function d(){RW.leftColumnHidden=true;a("#rw_left_column").hide();a("#rw_main_column").css("margin-left","16px");a("#rw_left_column_show_button").show();a("#rw_left_column_show_button").height(a("#rw_main_column").height());a("#rw_hide_left_column").hide();a("#rw_show_left_column").show()}function b(){RW.leftColumnHidden=false;a("#rw_left_column").show();a("#rw_left_column_show_button").hide();a("#rw_hide_left_column").show();a("#rw_show_left_column").hide();a("#rw_main_column").css("margin-left","23%")}a("#rw_hide_left_column").click(RW.hideLeftColumn);a("#rw_show_left_column, #rw_left_column_show_button").click(RW.showLeftColumn);if(RW.leftColumnState=="closed"){d()}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/global/menubar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(g){var d;var f;var c;var b;AJS.toInit(function(){d=g("#rw_menu_bar_wrapper");f=g("#rw_menu_bar_button",d);c=g("#rw_menu_bar_icon",d);if(RW.confluenceVersion>=5&&c.length>0){var i=g(".space-logo",c);if(i.length>0){i.attr("title",i.attr("data-name")).click(function(){window.location=contextPath+"/display/"+g(this).attr("data-key")})}}if(f.length>0){b=g("#rw_menu_bar_content",d);f.click(function(){a()});if(d.hasClass("rw_closed")){f.attr("title","Show menu")}else{f.attr("title","Hide menu")}if(f.offset().left+f.width()>g(window).width()){var h=g(window).width()-(d.offset().left+d.width());h=h-10;f.css("margin-right",-h)}}});function e(h){g.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/menubar/state?value="+h,type:"PUT",dataType:"json",cache:false,success:function(i){},error:function(i){}})}function a(){if(d.hasClass("rw_closed")){f.attr("title","Hide menu");e("open")}else{f.attr("title","Show menu");e("closed")}d.toggleClass("rw_closed")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/globalmenu/globalmenu-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(e){RW.inTopMenu=false;var l;var k;var d;var f;var m;var h=false;var a;var c;AJS.toInit(function(){e("#rw_top_menu_button").click(n);if(!((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!==false)){e("#rw_top_menu_button").removeAttr("title")}if(e("#rw_side_menu").length>0){j();b()}});function n(){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu()}return false}function j(){if(!h){h=true;l=e(e("#rw_section_template").html());k=e(e("#rw_icon_text_item").html());a=e(e("#rw_popup_loader_template").html());f=e("#rw_top_menu_items_container");m=e("#rw_top_menu_button");c=e('<li><a id="rw_custom_links" href="#" title="" class="rw_has_dd rw_tooltip" data-dd="rw_custom_links-dd" data-tooltip=""><span class="rw_item_icon rw_iconfont_more"></span></a><nav id="rw_custom_links-dd" class="rw_side_menu_dd" data-owner="rw_custom_links"><div class="rw_section"><ul></ul></div></nav></li>')}}function i(o){RW.scrollToElementWithOffset(e("#rw_top_menu"),100);if(f.offset().left<0){f.css("left","0")}f.html(a.clone());e.ajax({url:contextPath+"/rest/originaltheme/1.0/topmenu",type:"GET",dataType:"json",cache:false,success:function(s){f.html("");var q=false;if(s.defaultItems.length!=0){var u=l.clone();e.each(s.defaultItems,function(){u.append(g(this))});f.append(u);q=true}if(s.confluenceItems.length!=0){var w=l.clone();e.each(s.confluenceItems,function(){w.append(g(this))});f.append(w);q=true}if(s.customItems.length!=0){var v=l.clone();if(q){v.addClass("rw_section")}e.each(s.customItems,function(){v.append(g(this))});f.append(v)}if(RW.isConfluenceAdministrator){var p=l.clone();if(q){p.addClass("rw_section")}var t=k.clone();t.css("opacity","0.6");e("span.rw_item_content",t).html("Manage global menu");e("a",t).attr("title",RW.htmlDecode("Manage global menu"));RW.bindLink(e("a",t),contextPath+"/admin/topmenu/edit-topmenu.action",false,f);p.append(t);f.append(p)}if(o){var r=e("li",f);RW.startKeyable(f,null,null,e(r[0]))}else{RW.startKeyable(f,null,null)}e(document).bind("click",RW.hideTopMenu)},error:function(p){if(p.status!=0){console.log(p.status+" "+p.statusText);RW.hideTopMenu()}}})}function g(q){var p=k.clone();var o;var s=e("a",p);e("span.rw_item_content",p).html(q.name);s.attr("title",RW.htmlDecode(q.name));if(q.id){s.attr("id",q.id)}if(q.type==="custom"){if(q.icon!=null){e("span.rw_item_icon img",p).attr("src",q.icon).show()}else{e("span.rw_item_icon",p).addClass("rw_no_icon_link")}o=q.url}else{e("span.rw_item_icon",p).addClass("rw_"+q.nameKey);o=q.url;if(q.id){s.addClass("rw_item_"+q.id)}else{s.addClass("rw_item_"+q.nameKey)}}if(q.target==="_blank"){e("span.rw_item_content",p).addClass("rw_blank")}if(q.nameKey==="activity_popup"){s.click(RW.showActivitiyStream)}else{if(q.nameKey==="favourite_content"){s.click(RW.showFavourite)}else{var r=false;if(q.target==="_blank"){r=true}RW.bindLink(s,o,r,f)}}return p}function b(o){var p=e("#rw_side_menu_container");e.ajax({url:contextPath+"/rest/originaltheme/1.0/topmenu",type:"GET",dataType:"json",cache:false,success:function(q){var u=false;if(q.defaultItems.length!=0){var r=l.clone();e.each(q.defaultItems,function(){r.append(g(this))});p.append(r)}if(q.confluenceItems.length!=0){var t=l.clone();e.each(q.confluenceItems,function(){if(this.id==="space-directory-link"||this.id==="confluence-questions-link"||this.nameKey==="header-teamcalendars-link"){t.append(g(this))}else{u=true;e("ul",c).append(g(this))}});p.append(t)}if(q.customItems.length!=0){var s=l.clone();e.each(q.customItems,function(){if(this.icon===undefined){u=true;e("ul",c).append(g(this))}else{s.append(g(this))}});p.append(s)}if(u){e(">ul:last-child",p).append(c);RW.sideMenu.bindDDEvents(e("a.rw_has_dd",c))}RW.PubSub.trigger("topmenu:loaded")},error:function(q){if(q.status!=0){console.log(q.status+" "+q.statusText);RW.hideTopMenu()}}})}RW.hideTopMenu=function(){f.hide();RW.inTopMenu=false;m.removeClass("rw_active active");RW.quitKeyable();e(document).unbind("click",RW.hideTopMenu)};RW.showTopMenu=function(o){j();if(f.length>0){RW.closePopups();m.addClass("rw_active active");f.show();RW.inTopMenu=true;i(o)}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){AJS.toInit(function(){a("#rw_search_query").val("Search").originalThemeSearch(true);a("#rw_blogpost_query").originalThemeSearch(false)});a.fn.originalThemeSearch=function(y){inSearchResult=false;var z=null;var k=false;var h=null;var B=false;var v;var t;var x=a(this);var d;var c;var j;var p;var q;var n=false;var A=a(this);x.focus(f);if(y){AJS.whenIType("gg").execute(function(){a("#rw_search_query").trigger("focus")})}function f(){h=undefined;if(!k){k=true;c=a(this).closest(".rw_search");j=a(".rw_search_form",c);p=a(".rw_search_result_container",c);var D=a(".rw_search_parameters",c);if(D.length>0){q="";a("input",D).each(function(){q+="&"+a(this).attr("name")+"="+a(this).attr("value")})}x.val("");j.keypress(function(E){if(E.which==13){return false}});x.keyup(function(E){if(E.which==13){if(a("li.rw_selected",p).length===0&&x.val().length>0){j.submit()}if(x.val().length>0){m()}E.stopPropagation()}else{if(E.which==39||E.which==37){}else{if(E.which==27){if(inSearchResult){d()}x.blur();if(RW.inSearch){RW.hideSearch()}if(RW.inStickyBar){RW.hideSearchStickyBar()}}else{o();if(a(this).val().length>1){u(a(this).val())}else{if((a(c.context).attr("id")=="rw_search_popup_query"||a(c.context).attr("id")=="rw_search_query")&&RW.confluenceVersion>=5.2){if(a("#rw_more_recently_viewed").length==0&&a(this).val().length==0){w();i()}else{h=undefined;if(a(this).val().length==1){d()}}E.stopPropagation()}else{h=undefined;d()}}}}}});a(this).click(function(E){E.stopPropagation()});if(c.data("custom")){var C=c.parent();a("#rw_wrapper").append(p);p.css("top",C.offset().top+C.height()-a("#rw_main").offset().top);p.css("left",C.offset().left)}}if(a(this).val().length==0&&(a(c.context).attr("id")=="rw_search_popup_query"||a(c.context).attr("id")=="rw_search_query")&&RW.confluenceVersion>=5.2){i()}}function u(C){if(h!=C){h=C;if(B===false){s(h)}}}function s(D){B=true;var C="query="+encodeURIComponent(D);if(typeof q!="undefined"){C+=q}a.ajax({url:contextPath+"/json/contentnamesearch.action",type:"GET",data:C,dataType:"json",cache:false,success:function(E){if(typeof E.errorMessage==="undefined"&&E.statusMessage==null){w();a.each(E.contentNameMatches,function(F){if(F+1===E.contentNameMatches.length){g(this,true)}else{g(this,false)}});if(h!=D){s(h)}else{B=false}r();if(RW.searchMode=="confluence"){RW.startKeyable(p,null,"search")}else{RW.startKeyable(p,null,"search",p.find("ul:first-child li:first-child"))}}else{if(E.statusMessage!=null){p.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+E.statusMessage+"</div>");r();B=false}else{p.html("<div class='rw_warning_box' style='margin:0px 5px;'>"+E.errorMessage+"</div>");r();B=false}}},error:function(E){}})}function o(){if(typeof v==="undefined"){v=a(a("#rw_section_template").html())}if(typeof t==="undefined"){t=a(a("#rw_search_item").html())}}function w(){p.html("")}function r(){if(!inSearchResult){inSearchResult=true;p.show();a(document).bind("click",d)}}function g(D,C){var E=v.clone();a.each(D,function(F){E.append(l(this))});if(C){E.addClass("rw_last_section")}p.append(E)}function m(){p.html("<div id='rw_search_loader'><div class='rw_popup_loader_image'></div></div>")}function l(F){var D=t.clone();var C=F.href;a("span.rw_search_item_title",D).html(F.name);if(F.spaceName!=undefined){a("span.rw_search_item_space",D).html(F.spaceName)}else{a("span.rw_search_item_space",D).remove()}if(F.className==="admin-item"){a("span.rw_search_item_title",D).addClass("aui-iconfont-configure")}a("a",D).addClass(F.className);if(RW.userDashboardRedirection&&C.indexOf("/display/~")>=0){var E=C.substr(C.indexOf("~")+1,C.length);if(E.indexOf("/")==-1){C=contextPath+"/users/view-user-dashboard.action?username="+C.substr(C.indexOf("~")+1,C.length)}}if(F.className=="search-for"){C=e(C)}a("a",D).attr("href",C).click(function(G){n=true;if(p.hasClass("rw_key_nav")){window.location=C;G.stopPropagation();return false}else{return true}});if(F.icon!=null){D.prepend("<img src='"+F.icon+"' height='16px' />")}return D}function d(){if(!n){inSearchResult=false;w();p.hide();RW.quitKeyable();a(document).unbind("click",d)}else{n=false}}function e(C){if(q!==undefined){C=C+q}return C}function i(){if(a("#rw_more_recently_viewed",p).length===0&&RW.remoteUser!=undefined){o();var C=new b();A.addClass("rw_loading");C.fetch({cache:false,success:function(){A.removeClass("rw_loading");var D=[];RW._.each(C.toJSON(),function(G){var F={};F.id=G.id.toString();F.href=contextPath+G.url;F.className="content-type-"+G.type;F.name=RW.htmlEncode(G.title);F.spaceName=RW.htmlEncode(G.space);F.spaceKey="";D.push(F)});if(D.length>0){p.html('<span class="rw_search_result_title">'+"Recently viewed pages"+"</span>");g(D,false);r();var E=RW.Templates.moreRecentlyViewed();p.append(E);RW.startKeyable(p,null,"search");a("#rw_more_recently_viewed").bind("click",function(){a("#view-user-history-link").click();RYQ.util.analytics.trackQuickNavRecentlyDialogOpen()})}}})}}};var b=RW.Backbone.Model.extend({url:function(){return contextPath+"/rest/recentlyviewed/1.0/recent?limit=7"}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/legacy/stickybar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(h){var d=false;var a=false;var i=false;var g=false;var c;var e=true;AJS.toInit(function(){c=h("#rw_sticky_bar");if(c.length>0){if(h("#rw_search_container_sticky_bar").length>0){a=true}if(h("#rw_top_menu_container_sticky_bar").length>0){i=true}d=c.hasClass("show_on_scroll");if(d&&RW.scrollSearchActive){c.hide();e=false;h(window).scroll(function(){var l=h(document).scrollTop();if(l>100&&!e){k()}else{if(l<100&&e){j();b()}}})}h("#rw_sticky_bar_show").click(f);h("#rw_sticky_bar_hide").click(b)}});function k(){c.show();e=true}function j(){c.hide();e=false}function f(){f(false)}function f(l){RW.inStickyBar=true;if(a){h("#rw_search_container_sticky_bar").append(h("#rw_search"))}if(i){h("#rw_top_menu_container_sticky_bar").append(h("#rw_top_menu"))}if(l==true){c.css({"margin-top":"0px"})}else{c.animate({marginTop:"0px"},300)}if(a){if(l==true){h("#rw_search_query").focus()}else{setTimeout(function(){h("#rw_search_query").focus()},300)}}h("#rw_sticky_bar_show").hide();h("#rw_sticky_bar_hide").show();h("#rw_top").addClass("ie7_search_fix");h("#rw_main_top_left").addClass("ie7_search_fix")}function b(){RW.inStickyBar=false;if(a){h("#rw_search_container").append(h("#rw_search"));h("#rw_search_query").blur()}if(i){h("#rw_top_menu_container").append(h("#rw_top_menu"))}c.animate({marginTop:"-62px"},300);h("#rw_sticky_bar_show").show();h("#rw_sticky_bar_hide").hide();h("#top").removeClass("ie7_search_fix");h("#rw_main_top_left").removeClass("ie7_search_fix")}RW.showSearchStickyBar=function(){if(a){k();f(true)}};RW.hideSearchStickyBar=function(){if(a){b();if(d&&h(document).scrollTop()<100){j()}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/blogs/blog-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(z){if(typeof RW.blogs==="undefined"){RW.blogs={}}var N;var r;var q;var C;var K;var o;var i;var A;var t;var x;var m;var O;var d;var M;var G;var h;var H;var P=null;var b;var c=false;var J=false;var g={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};var B=new Array();AJS.toInit(function(){if(z("#rw_blogpost_nav").length>0){n()}if(z("#rw_blog_calendar").length>0){E()}if(z("#rw_blog_mode").length>0){y()}});function y(){if(z("#rw_share_navigation").length>0){z("#shareContentLink").parent().appendTo("#rw_share_navigation");z("#shareContentLink").click(function(){RW.scrollToElement(z("#rw_share_navigation"))})}if(z("#rw_blog_chooser").length>0){D()}if(z("#rw_blog_admin_button").length>0){e()}z("#rw_blogpost_permalink").click(function(V){if(!P){U()}P.show();z("#link-page-popup-form #link-popup-field-tiny-link").select();return AJS.stopEvent(V)});if(z("#rw_blog_watch_start").length>0){z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch",type:"GET",dataType:"json",data:{key:z("#rw_space_key").html()},cache:false,success:function(V){if(V==true){z("#rw_blog_watch_stop").show()}else{z("#rw_blog_watch_start").show()}},error:function(V){if(V.status!=0){M.html("<div class='rw_warning_box'>"+V.status+" "+V.statusText+"</div>").show()}}})}z("#rw_blog_watch_start").click(function(V){z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch/add?key="+z("#rw_space_key").html(),type:"PUT",dataType:"json",cache:false,success:function(W){z("#rw_blog_watch_start").hide();z("#rw_blog_watch_stop").show()},error:function(W){if(W.status!=0){M.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}});V.preventDefault()});z("#rw_blog_watch_stop").click(function(V){z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/watch/remove?key="+z("#rw_space_key").html(),type:"PUT",dataType:"json",cache:false,success:function(W){z("#rw_blog_watch_stop").hide();z("#rw_blog_watch_start").show()},error:function(W){if(W.status!=0){M.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}});V.preventDefault()});RW.initLabelClickEvent(z("#labels-section .label-list"),true);if(z("#rw_blog_posts").length>0){Q(z("#rw_blog_posts"),z("#rw_blog_keys").html(),z("#rw_blog_author").html(),0,10)}if(z("#rw_blog_menu").length>0){F(z("#rw_blog_menu"))}if(z("#rw_blog_contributors").length>0){R(z("#rw_blog_contributors"))}if(z("#rw_blog_post_title").length>0){z("#rw_blog_post_title").css("left",z("#rw_blog_post_title").offset().left+10).css("position","absolute")}z("#show-resolved-comments").live("click",function(){z("#rw_blog_admin_button").trigger("click")})}function n(){C=z(z("#rw_blogpost_nav_button").html());M=z("#rw_blogpost_nav");h=z("#rw_blogpost_id",M).html();z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+h+"/navigation",type:"GET",dataType:"json",cache:false,success:function(V){if(typeof(V.links)!=="undefined"&&V.links.length>0){z.each(V.links,function(){var X=C.clone();var W=this.url;z("span",X).html(this.name).addClass("rw_"+this.key);X.attr("title",RW.htmlDecode(this.title));X.click(function(){window.location=W});M.append(X)})}},error:function(V){if(V.status!=0){M.html("<div class='rw_warning_box'>"+V.status+" "+V.statusText+"</div>").show()}}})}function E(){var W=z("#rw_blog_calendar_wrapper");r=z(z("#rw_blog_calendar_item",W).html());N=z(z("#rw_blog_calendar_section",W).html());q=z(z("#rw_blog_calendar_loader",W).html());h=z("#rw_blogpost_id",W).html();d=z("#rw_blog_calendar",W);H=z("#rw_space_key",W).html();var X;var Z;if(z("#rw_calendar_year",W).length>0){X=z("#rw_calendar_year",W).html()}if(z("#rw_calendar_month",W).length>0){Z=z("#rw_calendar_month",W).html()}if(typeof(h)==="undefined"){h=""}var Y=N.clone();Y.addClass("rw_blog_calendar_months");var V=q.clone();V.addClass("rw_corners");Y.append(V);d.append(Y);z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar",data:{key:H,id:h,month:Z,year:X},type:"GET",dataType:"json",cache:false,success:function(aa){if(typeof(aa.months)!=="undefined"&&aa.months.length>0){V.remove();w(aa,false,Y)}else{V.remove();d.remove()}},error:function(aa){if(aa.status!=0){d.html("<div class='rw_warning_box'>"+aa.status+" "+aa.statusText+"</div>").show()}}})}function p(Y,X,W){W.remove();var V=q.clone();V.addClass("rw_corners_top");z("ul.rw_blog_calendar_months",d).prepend(V);z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/next",data:{key:H,month:X,year:Y},type:"GET",dataType:"json",cache:false,success:function(Z){V.remove();if(typeof(Z.months)!=="undefined"&&Z.months.length>0){w(Z,true,z("ul.rw_blog_calendar_months",d))}else{z("li:first > a",d).addClass("rw_corners_top");z("li:last > a",d).addClass("rw_corners_bottom")}},error:function(Z){if(Z.status!=0){d.html("<div class='rw_warning_box'>"+Z.status+" "+Z.statusText+"</div>").show()}}})}function T(Y,X,W){W.remove();var V=q.clone();V.addClass("rw_corners_bottom");z("ul.rw_blog_calendar_months",d).append(V);z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/prev",data:{key:H,month:X,year:Y},type:"GET",dataType:"json",cache:false,success:function(Z){V.remove();if(typeof(Z.months)!=="undefined"&&Z.months.length>0){w(Z,false,z("ul.rw_blog_calendar_months",d))}else{z("li:first > a",d).addClass("rw_corners_top");z("li:last > a",d).addClass("rw_corners_bottom")}},error:function(Z){if(Z.status!=0){d.html("<div class='rw_warning_box'>"+Z.status+" "+Z.statusText+"</div>").show()}}})}function a(Y,X,W){H=z("#rw_space_key").html();if(z("ul",W).length===0){W.toggleClass("rw_open");var V=q.clone();W.append(V);z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/calendar/"+Y+"/"+X,data:{key:H},type:"GET",dataType:"json",cache:false,success:function(Z){if(typeof(Z.posts)!=="undefined"&&Z.posts.length>0){k(Z.posts,W)}V.remove()},error:function(Z){if(Z.status!=0){W.html("<div class='rw_warning_box'>"+Z.status+" "+Z.statusText+"</div>").show()}}})}else{u(W)}}function u(W){var V=z("ul",W);if(V.length!=0){if(V.is(":visible")){V.hide()}else{V.show()}W.toggleClass("rw_open")}}function w(Z,ae,W){var ad,ab,ac,Y,V=1;z.each(Z.months,function(){var ag=r.clone(),af=this.year,ah=this.month;z("span",ag).html(this.title);z("a",ag).attr("title",this.title).click(function(){a(af,ah,ag)}).addClass("rw_first_level");if(typeof(this.posts)!=="undefined"&&this.posts.length>0){ag.addClass("rw_open");k(this.posts,ag)}if(ae){W.prepend(ag);if(V==Z.months.length){ad=af;ab=ah}}else{W.append(ag);if(V==1){ad=af;ab=ah}if(V==Z.months.length){ac=af;Y=ah}}V++});if(Z.hasNext){var aa=r.clone();aa.addClass("rw_blog_calendar_next");z("a",aa).click(function(){p(ad,ab,aa)}).addClass("rw_first_level");W.prepend(aa)}if(Z.hasPrev){var X=r.clone();X.addClass("rw_blog_calendar_prev");z("a",X).click(function(){T(ac,Y,X)}).addClass("rw_first_level");W.append(X)}j()}function k(W,V){var X=N.clone();z.each(W,function(){var Z=r.clone();var Y=this.url;z("span",Z).html(this.title);z("a",Z).attr("title",RW.htmlDecode(this.title));Z.click(function(){window.location=Y});if(h==this.id){Z.addClass("rw_active")}X.append(Z)});V.append(X)}function j(){z("li:first > a.rw_first_level",d).addClass("rw_corners_top");z("li:last > a.rw_first_level",d).addClass("rw_corners_bottom")}function D(){z("#rw_blog_chooser_button").click(s)}function s(){if(c){L()}else{f()}}function f(){c=true;if(o==undefined){o=z(z("#rw_section_template").html())}var V=o.clone();if(i==undefined){i=z(z("#rw_icon_text_item").html())}if(G==undefined){G=z("#rw_blog_chooser_items_container")}if(K==undefined){K=z(z("#rw_popup_loader_template").html())}G.html("");G.show().append(K.clone());z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(W){G.html("");if(typeof(W.blogs)!=="undefined"&&W.blogs.length>0){z.each(W.blogs,function(){V.append(S(this,false))});G.append(V)}else{var X=z('<div class="rw_no_items rw_blogs rw_corners"><div>');X.html("No blogs found");G.append(X)}z(document).bind("click",L)},error:function(W){z(document).bind("click",L);if(W.status!=0){G.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}})}function L(){G.hide();z(document).unbind("click",L);c=false}function S(X,Y){if(i==undefined){i=z(z("#rw_icon_text_item").html())}var W=i.clone();var V;var Z=z("a",W);if(Y){z("span.rw_item_content",W).append("<h3>"+X.name+"</h3>");if(X.description!=null){z("span.rw_item_content",W).append(X.description)}}else{z("span.rw_item_content",W).html(X.name)}Z.attr("title",RW.htmlDecode(X.name));if(X.logoPath!=null){z("span.rw_item_icon img",W).attr("src",X.logoPath).show()}else{z("span.rw_item_icon",W).addClass("rw_iconfont_blog")}if(X.nameKey===H){z("span.rw_item_content",W).addClass("rw_active")}V=contextPath+"/blog/"+X.nameKey;Z.attr("href",V).click(function(){if(Y){J=true}if(b!=undefined&&b.container.hasClass("rw_key_nav")){window.location=V;if(Y){b.showLoader()}}});return W}function e(){z("#rw_blog_admin_button").click(v)}function v(){z("#rw_blog_admin_button").toggleClass("rw_active");z("#rw_blog_admin_menu").toggle()}function U(){P=new AJS.Dialog(600,210,"link-page-popup").addHeader("Link to this page").addPanel("Link to this page","<form id='link-page-popup-form' class='aui'><fieldset></fieldset></form>").addCancel("Close",function(X){P.hide();return false});var V=[{label:"Link",id:"link",value:z("link[rel=canonical]").attr("href")},{label:"Tiny link",id:"tiny-link",value:z("link[rel=shortlink]").attr("href")}];z.each(V,function(){z("#link-page-popup-form fieldset").append(AJS.format("<div class='field-group'><label for=''link-popup-field-{0}''>{1}:</label><input id=''link-popup-field-{0}'' readonly=''readonly'' value='''' class=''text'' type=''text''></div>",this.id,this.label)).find("input:last").val(this.value)});var W=z("#link-page-popup-form fieldset input.text");W.focus(function(){z(this).select()});W.mouseup(function(X){X.preventDefault()})}function Q(V,aa,ab,W,ac){if(A==undefined){A=z(RW.Templates.loader({type:"circle",bg:"gray"}))}if(m==undefined){m=z(z("#rw_button_template").html())}var X=true;if(aa===""){var ae=z('<div class="rw_no_items rw_news rw_corners"><div>');ae.html("No blogs found");V.append(ae);return}if(aa.indexOf(",")===-1){X=false}var Z=undefined;var Y=0;var ad=A.clone();V.append(ad);z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post",type:"GET",data:{"start-index":W,"max-results":ac,keys:aa,labels:"",authors:ab,"body-type":"excerpts","profile-pic":true,"all-info":true},dataType:"json",cache:false,success:function(af){ad.remove();if(typeof(af.blogPosts)!=="undefined"&&af.blogPosts.length>0){var ah=0;z.each(af.blogPosts,function(){if(B[ah]==undefined){B[ah]=af.blogPosts}else{B[ah]=B[ah].concat(af.blogPosts)}ah=ah+1});ah=0;z.each(af.blogPosts,function(){if(Z==undefined&&ah==0){Z=this}I(V,this,X,ah);ah=ah+1});Y=ah;if(af.hasMore){if(t==undefined){t=z(z("#rw_load_more_template").html())}var ag=t.clone();ag.click(function(){Q(V,aa,ab,W+ac,ac);z(this).remove();return false});V.append(ag)}Confluence.Binder.userHover()}else{if(W===0){var ai=z('<div class="rw_no_items rw_news rw_corners"><div>');ai.html("No blogs found");V.append(ai)}}},error:function(af){V.html("<div class='rw_warning_box'>"+af.status+" "+af.statusText+"</div>").show()}})}function I(W,ad,Y,ae){if(x==undefined){x=z(z("#rw_blogpost_listing_template").html())}if(O==undefined){O=z(z("#rw_blogpopup_button_template").html())}var aj=x.clone(),ab=z(".rw_blogpost_heading_link",aj),ag=z(".wiki-content",aj),X=z(".page-metadata",aj),ah=z(".rw_logo_block a",aj),aa=z(".rw_logo_block img",aj),V=z(".rw_buttons_section",aj);ab.html(ad.title).click(function(){window.location=ad.url});X.html(ad.date);if(ad.bodyContent){ag.html(ad.bodyContent);z("img.confluence-embedded-image",ag).each(function(){var ak=z(this);ak.fancybox(g);ak.removeAttr("width")})}if(!ad.author.anonymous){ah.attr("data-username",ad.author.username);ah.attr("href",contextPath+"/display/~"+ad.author.username)}else{ah.removeClass("userLogoLink")}aa.attr("src",ad.author.profilePic);var ac=m.clone();ac.click(function(){window.location=ad.url}).addClass("rw_button_group_left");z("span",ac).addClass("rw_read").html("Read more").attr("title","Read more");V.append(ac);var ai=m.clone();ai.click(function(){window.location=ad.commentUrl});if(ad.canEdit){ai.addClass("rw_button_group_middle")}else{ai.addClass("rw_button_group_right")}z("span",ai).addClass("rw_comment_gray").html(ad.commentTitle).attr("title",ad.commentTitle);V.append(ai);if(ad.canEdit){var af=m.clone();af.click(function(){window.location=contextPath+"/pages/editblogpost.action?pageId="+ad.id}).addClass("rw_button_group_right");z("span",af).addClass("rw_edit_gray").html("Edit").attr("title","Edit");V.append(af)}var Z=O.clone();Z.click(function(){RW.openBlogPostPopup(ad,ae,ae,B);return false}).attr("title","View in popup");aj.prepend(Z);if(Y&&ad.blog!=null){if(ad.blog.logoPath!=null){z(".rw_blog_info_icon img",aj).attr("src",ad.blog.logoPath).show()}else{z(".rw_blog_info_icon",aj).addClass("rw_iconfont_blog");z(".rw_blog_info_icon img",aj).remove()}z(".rw_blog_info_text",aj).html(ad.blog.name);z(".rw_blog_info",aj).click(function(){window.location=contextPath+"/blog/"+ad.blog.nameKey})}else{z(".rw_blog_info",aj).remove()}W.append(aj)}function F(V){if(A==undefined){A=z(RW.Templates.loader({type:"circle",bg:"gray"}))}V.addClass("rw_side_menu_container rw_corners");V.append(A.clone());z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(W){V.html("");V.append(RW.getSideMenuTitle("Blogs"));if(typeof(W.blogs)!=="undefined"&&W.blogs.length>0){if(o==undefined){o=z(z("#rw_section_template").html())}var X=o.clone();z.each(W.blogs,function(){X.append(S(this,false))});X.addClass("rw_side_menu");X.addClass("rw_corners");z("li:first-child a",X).addClass("rw_corners_top");z("li:last-child a",X).addClass("rw_corners_bottom");V.append(X)}else{V.remove()}},error:function(W){if(W.status!=0){V.html("<div class='rw_warning_box'>"+W.status+" "+W.statusText+"</div>").show()}}})}function R(V){if(A==undefined){A=z(RW.Templates.loader({type:"circle",bg:"gray"}))}var W=z("#rw_blog_keys").html();V.addClass("rw_side_menu_container rw_corners");V.append(A.clone());z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/authors",data:{"start-index":0,"max-results":50,keys:W},type:"GET",dataType:"json",cache:false,success:function(X){V.html("");V.append(RW.getSideMenuTitle("Recent contributors"));if(typeof(X.authors)!=="undefined"&&X.authors.length>0){if(o==undefined){o=z(z("#rw_section_template").html())}var Y=o.clone();z.each(X.authors,function(){Y.append(l(this))});Y.addClass("rw_side_menu");Y.addClass("rw_corners");z("li:first-child a",Y).addClass("rw_corners_top");z("li:last-child a",Y).addClass("rw_corners_bottom");V.append(Y)}else{V.remove()}},error:function(X){if(X.status!=0){V.html("<div class='rw_warning_box'>"+X.status+" "+X.statusText+"</div>").show()}}})}function l(X){if(i==undefined){i=z(z("#rw_icon_text_item").html())}var W=i.clone();var V;var Y=z("a",W);z("span.rw_item_content",W).html(X.fullName);Y.attr("title",X.fullName);if(X.profilePic!=null){z("span.rw_item_icon img",W).attr("src",X.profilePic).show()}else{z("span.rw_item_icon",W).addClass("rw_no_contributer_icon")}V=contextPath+"/blog/view-blogs.action?author="+X.username;Y.click(function(){window.location=V});return W}RW.blogs.showBlogsPopup=function(){if(o==undefined){o=z(z("#rw_section_template").html())}if(b==undefined){b=new RW.ui.popup("rw_blogs_popup","Blogs");b.closeButton.click(RW.blogs.hideBlogsPopup);b.closeButton.html("Close");b.obj.click(function(V){if(!J){V.stopPropagation()}})}RW.closePopups();RW.blogs.inBlogsPopup=true;b.show();b.showLoader();b.obj.addClass("rw_dd_large");z.ajax({url:contextPath+"/rest/originaltheme/1.0/blog",type:"GET",dataType:"json",cache:false,success:function(W){var X=o.clone();b.hideLoader();if(typeof(W.blogs)!=="undefined"&&W.blogs.length>0){z.each(W.blogs,function(){X.append(S(this,true))});b.content(X);b.container.append("<div style='clear:both;'></div>")}else{var Y=z('<div class="rw_no_items rw_blogs rw_corners"><div>');Y.html("No blogs found");b.content(Y)}var V=z("li",b.container);if(V.length>0){RW.startKeyable(b.container,null,null,z(V[0]))}else{RW.startKeyable(b.container,null,null)}z(document).bind("click",RW.blogs.hideBlogsPopup)},error:function(V){z(document).bind("click",RW.blogs.hideBlogsPopup);if(V.status!=0){b.content("<div class='rw_warning_box'>"+V.status+" "+V.statusText+"</div>")}}})};RW.blogs.hideBlogsPopup=function(){if(!J){b.hide();b.clear();RW.blogs.inBlogsPopup=false;z(document).unbind("click",RW.blogs.hideBlogsPopup);RW.quitKeyable()}else{J=false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/activitystream/activitystream-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(y){var x="/images/icons/profilepics/anonymous.png";RW.activity={};var U,k,G,u,M,F,n,I,O,c,a,f,A,p,m;var s=false,H=false,B=[],z=[],W;var t;var Q="my",K="all",e="network",P="team",l="popular";var d={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};AJS.toInit(function(){M=y('<div><span class="icon icon-like"></span><span class="count"></span></div>');F=y('<div><span class="icon icon-comment"></span><span class="count"></span></div>');if(y("#rw_activity_macro_wrapper").length>0){U=y(RW.Templates.Activity.item());k=y(RW.Templates.Activity.set());G=y(RW.Templates.Activity.popularSet());u=y(RW.Templates.Activity.popularItem());n=y(RW.Templates.Activity.empty());I=y(RW.Templates.Activity.loadMoreButton());c=y(RW.Templates.Activity.replyButton());a=y(RW.Templates.loader({type:"circle",bg:"gray"}));for(var X=0;X<y(".rw_activity_macro","#main").length;X++){var Y=y(y(".rw_activity_macro","#main")[X]);Y.data("categories-loaded",false);Y.data("hasmore","false");Y.data("linkclicked","false");Y.data("category","");y("#rw_activity_menu",Y).attr("id","rw_activity_menu_"+X);y(".rw_activity_menu_button",Y).attr("aria-owns","rw_activity_menu_"+X);o(y("#typesVarActivity",Y).html(),Y);C(Y)}}});function C(Y){y(".rw_option_popular",Y).show();var X=Y.data("option");y(".rw_activity_menu_button",Y).html(y(".rw_option_"+X+" a",Y).html());y(".rw_activity_menu a",Y).click(function(){y(".rw_activity_menu_button",Y).html(y(this).html());RW.activity.filterBySpaces(y(this).data("option"),"",Y)});y(".rw_activity_menu_button",Y).click(function(ab){g(Y);if(RW.confluenceVersion<5){var aa=y(this);aa.addClass("rw_active");y("#"+aa.attr("aria-owns")).addClass("rw_open");var Z=function(){aa.removeClass("rw_active");y("#"+aa.attr("aria-owns")).removeClass("rw_open");y(document).unbind("click",Z)};setTimeout(function(){y(document).bind("click",Z)},100)}});W=y("#selectedTeamVarActivity",Y).html();Y.data("category",W);if(W.length>0){g(Y)}r(y("#typesVarActivity",Y).html(),y("#selectedTabVarActivity",Y).html(),W,0,Y);V(Y);y(window).resize(function(){V(Y)})}function V(X){if(X.width()<400){X.addClass("rw_small")}else{X.removeClass("rw_small")}}function r(ae,al,ad,Z,ak){var Y=y("#rw_activity_macro_container",ak);var X=false;var aa=false;var ag=y("#spacesVarActivity",ak).html();var aj=y("#stepSizeVarActivity",ak).html();var ab=y("#categoryKeyVarActivity",ak).html();var ai=y("#authorsVarActivity",ak).html();var ac=y("#labelsVarActivity",ak).html();if(Z==0){Y.html(a.clone())}if(ab==""){ab=ad}if(al==Q){X=true}if(al==e){aa=true}if(al!=l){y("#rw_filter_button, #rw_content_types_container",ak).removeClass("rw_hidden");y.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/?types="+ae+"&category-key="+ab+"&labels="+ac+"&spaces="+ag+"&authors="+ai+"&favourite="+X+"&network="+aa+"&start-index="+Z+"&max-results="+aj,type:"GET",dataType:"json",cache:false,success:function(an){y("#rw_load_more_activity_link",ak).remove();if(Z==0){Y.html("")}ak.data("hasmore",an.hasMore);if(an.activitySets.length>0){y.each(an.activitySets,function(){D(this,Y,false)});if(ak.data("hasmore")){var ao=I.clone();var am=parseInt(Z)+parseInt(aj);ao.click(function(){y("span",this).hide();y(".rw_loader_128_image",this).show();r(ae,al,ad,am,ak);return false});Y.append(ao)}Confluence.Binder.userHover()}else{if(Z==0){Y.append(n.clone())}}},error:function(am){if(am.status!=0){y(ak).html("<div class='rw_warning_box'>"+am.status+" "+am.statusText+"</div>").show();y("#rw_activity_macro_loader").hide()}}})}else{y("#rw_filter_button, #rw_content_types_container",ak).addClass("rw_hidden");var ah=parseInt(Z)+parseInt(aj);var af=contextPath+"/rest/popular/1/stream/content?days=7&pageSize="+ah;y.ajax({url:af,type:"GET",dataType:"json",cache:false,success:function(an){Y.html("");if(an.streamItems.length>0){y.each(an.streamItems,function(){L(this,Y,false)});Confluence.Binder.userHover();if(an.streamItems.length>=ah){var ao=I.clone();var am=parseInt(Z)+parseInt(aj);ao.click(function(){r(ae,al,ad,am,ak);return false});Y.append(ao)}}else{Y.append(n.clone())}},error:function(am){if(am.status!=0){y(ak).html("<div class='rw_warning_box'>"+am.status+" "+am.statusText+"</div>").show();y("#rw_activity_macro_loader").hide()}}})}}function g(Y){var X=y(".rw_option_categories","#"+y(".rw_activity_menu_button",Y).attr("aria-owns"));if(!Y.data("categories-loaded")){X.append("<li><a>Loading...</a></li>");y.ajax({url:contextPath+"/rest/originaltheme/1.0/category",type:"GET",dataType:"json",cache:false,success:function(Z){X.html("");Y.data("categories-loaded",true);if(typeof(Z)!=="undefined"&&Z.length>0){y.each(Z,function(){b(this,X,Y)})}else{X.remove()}},error:function(Z){}})}}function b(Y,X,ab){if(m==undefined){m=y(RW.Templates.item())}var aa=m.clone(),Z=y("a",aa);aa.attr("id","rw_team_"+Y.nameKey);if(ab.data("category")===Y.nameKey){y(".rw_activity_menu_button",ab).html(RW.htmlEncode(Y.name))}if(Y.isCategory){aa.addClass("rw_is_category")}Z.html(RW.htmlEncode(Y.name)).click(function(){y(".rw_activity_menu_button",ab).html(y(this).html());RW.activity.filterBySpaces("team",Y.nameKey,ab)});X.append(aa)}function D(X,Y,ab){if(k==undefined){k=y(RW.Templates.Activity.set())}var af=k.clone(),aa=y(".rw_author",af),ac=y(".rw_activity_items",af),ae=y(".userLogoLink",af);var Z=y("a",aa);var ad=y("img",ae);if(X.author!=undefined){if(X.author.username==RW.remoteUser){af.addClass("rw_activity_set_my")}Z.html(X.author.fullName);if(!X.author.anonymous){Z.attr("data-username",RW.htmlDecode(X.author.username)).attr("href",contextPath+"/display/~"+RW.htmlDecode(X.author.username))}else{Z.removeClass("confluence-userlink")}if(!X.author.anonymous){ae.attr("data-username",RW.htmlDecode(X.author.username));ae.attr("href",contextPath+"/display/~"+RW.htmlDecode(X.author.username))}else{ae.removeClass("userLogoLink")}ad.attr("title",RW.htmlDecode(X.author.username)).attr("alt","User icon: "+RW.htmlDecode(X.author.username)).attr("src",X.author.profilePic)}y.each(X.items,function(){if(ab){ac.append(T(this,Y))}else{ac.append(E(this))}});Y.append(af)}function E(ai){var Z=U.clone(),af=y(".rw_activity_item_icon",Z),Y=y(".rw_activity_link",Z),ad=y(".rw_activity_space_name",Z),ah=y(".rw_summary",Z),X=y(".rw_thumbnail",Z),ae=y(".rw_activity_view_diff",Z),ac=y(".rw_date",Z);af.addClass(ai.iconClass);if(ai.type!="status"){Y.attr("href",ai.url);Y.attr("title",RW.htmlDecode(ai.title));Y.prepend(ai.title)}else{y(".rw_ellipsis",Z).removeClass("rw_ellipsis").addClass("rw_status");Y.before(ai.title);Y.remove()}ac.html(ai.date);if(ai.spaceName!=undefined&&ai.spaceName!=""){ad.html("("+ai.spaceName+")");ad.attr("title",RW.htmlDecode(ai.spaceName));Y.attr("title",RW.htmlDecode(ai.title)+" ("+RW.htmlDecode(ai.spaceName)+")")}if(ai.description.length>0){ah.html(ai.description);ae.html("");if(ai.commentPermission){var ag=ai.url.replace("focusedCommentId","replyToComment");var ab=c.clone();ab.html("Reply");ab.attr("href",ag);ab.attr("title","Reply");ah.append(ab)}}if(ai.changeComment!=undefined&&ai.changeComment!=""){ah.html(RW.htmlEncode(ai.changeComment))}if(ai.changeUrl!==undefined&&ai.newContent===false){var aa=c.clone();aa.html("View Changes");aa.addClass("rw_view_change_button");var Y=contextPath+ai.changeUrl;aa.attr("href",Y);ac.append(aa)}if(ai.thumbnail!=undefined){X.append("<img data-image-src='"+contextPath+ai.thumbnail.imageUrl+"' src='"+ai.thumbnail.url+"' />");y("img",X).fancybox(d)}return Z}function T(ab,X){if(f==undefined){f=y(y("#rw_icon_text_item").html())}var Y=f.clone(),Z=y(".rw_item_icon",Y),ac=y(".rw_item_content",Y),aa=y("a",Y);Z.addClass(ab.iconClass).addClass("rw_icon_container_16");if(ab.type!="status"){ac.html('<span class="rw_ellipsis">'+ab.title+"</span>");if(ab.spaceName!=undefined&&ab.spaceName!=""){y(".rw_ellipsis",ac).append(" <span class='rw_small_text'>("+ab.spaceName+")</span>")}aa.attr("href",ab.url).click(function(){H=true;if(X.hasClass("rw_key_nav")){window.location=ab.url;t.showLoader();return false}else{return true}}).attr("title",RW.htmlDecode(ab.title));if(ab.description.length>0){ac.append("<span class='rw_small_text'>"+ab.description+"</span><br/>")}if(ab.changeComment!=undefined&&ab.changeComment!=""){ac.append("<span class='rw_small_text'>"+RW.htmlEncode(ab.changeComment)+"</span><br/>")}}else{ac.html(ab.title);Y.append("<div class='rw_no_link'>"+aa.html())+"</div>";aa.remove()}ac.append('<div class="rw_date">'+ab.date+"</div>");return Y}function L(ab,X,ac){if(G==undefined){G=y(RW.Templates.Activity.popularSet())}var ae=G.clone(),Y=y(".rw_activity_items",ae),aa=y(".userLogoLink",ae),Z=y("img",aa);var ad=ab.author.userName;if(ad!=""){aa.attr("data-username",ad);aa.attr("href",contextPath+"/display/~"+ad)}else{aa.removeClass("userLogoLink")}Z.attr("title",ad).attr("alt","User icon: "+ad).attr("src",ab.author.avatarUrl);if(ac){Y.append(S(ab,X))}else{Y.append(q(ab))}X.append(ae)}function q(ai){var X=u.clone(),af=y(".rw_activity_item_icon",X),ae=y(".rw_activity_link",X),Y=y(".rw_popularity_data",X),ab=y(".rw_author",X),Z=y(".rw_date",X);af.addClass(ai.iconCssClass);ae.attr("href",ai.url);ae.attr("title",ai.title);ae.html(RW.htmlEncode(ai.title));if(ai.numberOfComments>0){var ah=F.clone(),ad=y(".count",ah);ad.html(ai.numberOfComments);Y.append(ah)}if(ai.numberOfLikes>0){var ag=M.clone(),ad=y(".count",ag);ad.html(ai.numberOfLikes);Y.append(ag)}Z.html(ai.friendlyDate);var aa=y("a",ab);aa.html(ai.author.fullName);var ac=ai.author.userName;if(ac!=""){aa.attr("data-username",ac).attr("href",contextPath+"/display/~"+ac)}else{aa.removeClass("confluence-userlink")}return X}function S(ag,X){if(f==undefined){f=y(y("#rw_icon_text_item").html())}var Y=f.clone(),ac=y(".rw_item_icon",Y),ae=y(".rw_item_content",Y),ab=y("a",Y);ac.addClass(ag.iconCssClass).addClass("rw_icon_container_16");ae.html(RW.htmlEncode(ag.title));ab.click(function(){H=true;if(X.hasClass("rw_key_nav")){window.location=ag.url;t.showLoader();return false}}).attr("title",ag.title).attr("href",ag.url);var Z=y('<span class="rw_popularity_data"></span>');if(ag.numberOfComments>0){var af=F.clone(),aa=y(".count",af);aa.html(ag.numberOfComments);Z.append(af)}if(ag.numberOfLikes>0){var ad=M.clone(),aa=y(".count",ad);aa.html(ag.numberOfLikes);Z.append(ad)}ae.append(Z);ae.append(' <span class="rw_date_time">'+ag.friendlyDate+", "+ag.author.fullName+"</span>");return Y}function o(X,Z){y("#rw_content_types a.rw_checkbox_select",Z).click(function(aa){aa.preventDefault();if(y(this).parent().is(".rw_type_all")){y('#rw_content_types input[type="checkbox"]:checked',Z).each(function(){y(this).parent().removeClass("rw_active");y(this).parent().find("input").attr("checked",false)});y("#rw_filter_button",Z).removeClass("rw_filter_on");y("#rw_filter_button #rw_filter_button_off",Z).show();y("#rw_filter_button #rw_filter_button_on",Z).hide()}else{y("#rw_content_types li.rw_type_all",Z).removeClass("rw_active");y("#rw_content_types li.rw_type_all",Z).find("input").attr("checked",false);y("#rw_filter_button",Z).addClass("rw_filter_on");y("#rw_filter_button #rw_filter_button_off",Z).hide();y("#rw_filter_button #rw_filter_button_on",Z).show()}y(this).parent().addClass("rw_active");y(this).parent().find("input").attr("checked",true);v(true,Z)});y("#rw_content_types .rw_checkbox_deselect",Z).click(function(ab){ab.preventDefault();y(this).parent().removeClass("rw_active");y(this).parent().find("input").attr("checked",false);var aa=0;y('#rw_content_types input[type="checkbox"]:checked',Z).each(function(){aa=aa+1});if(aa==0){y("#rw_content_types li.rw_type_all",Z).addClass("rw_active");y("#rw_content_types li.rw_type_all",Z).find("input").attr("checked",true);y("#rw_filter_button",Z).removeClass("rw_filter_on");y("#rw_filter_button #rw_filter_button_off",Z).show();y("#rw_filter_button #rw_filter_button_on",Z).hide()}v(true,Z)});y("#rw_filter_button",Z).click(function(){y(this).toggleClass("active");y("#rw_content_types_container",Z).toggle()});y('#rw_content_types input[type="checkbox"]:checked',Z).each(function(){y(this).parent().removeClass("rw_active");y(this).parent().find("input").attr("checked",false)});if(X.length>0){typeList=X.split(",");for(i=0;i<typeList.length;i++){var Y=typeList[i];y("#rw_content_types li.rw_type_"+Y,Z).addClass("rw_active");y("#rw_content_types li.rw_type_"+Y,Z).find("input").attr("checked",true)}y("#rw_filter_button",Z).addClass("rw_filter_on");y("#rw_filter_button #rw_filter_button_off",Z).hide();y("#rw_filter_button #rw_filter_button_on",Z).show()}else{y("#rw_content_types li.rw_type_all",Z).addClass("rw_active");y("#rw_content_types li.rw_type_all",Z).find("input").attr("checked",true)}}function v(aa,ab){var Y="";var Z="";var X="";if(!y("#rw_content_types li.rw_type_all",ab).find("input").attr("checked")){y('#rw_content_types input[type="checkbox"]:checked',ab).each(function(){if(y(this).val().length>0){Y+=y(this).val()+","}});if(Y.length>0){Y=Y.substring(0,Y.length-1)}}if(ab.data("option")!=undefined){Z=ab.data("option")}if(ab.data("category")!=undefined){X=ab.data("category")}r(Y,Z,X,0,ab);if(aa){N(Y)}}function j(X){y.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/selectedtab?value="+X,type:"PUT",dataType:"json",cache:false,success:function(Y){}})}function J(X){y.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/selectedteam?value="+X,type:"PUT",dataType:"json",cache:false,success:function(Y){}})}function N(Z){var X=y("meta[id=atlassian-token]");var Y=X.attr("content");y.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream/filter?value="+Z,type:"PUT",dataType:"json",cache:false,success:function(aa){},error:function(aa){}})}function w(ah,Y,ad,ab,ae,X,aa,Z,ag,ac,af){if(A==undefined){A=y(y("#rw_popup_loader_template").html())}Y.append(A);y.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/",data:{types:ad,"category-key":ab,spaces:ae,favourite:X,network:aa,"start-index":Z,"max-results":ag,authors:af},type:"GET",dataType:"json",cache:false,success:function(aj){y(".rw_popup_loader",Y).remove();if(aj.activitySets.length>0){y.each(aj.activitySets,function(){D(this,Y,true)});if(aj.hasMore){if(O==undefined){O=y(y("#rw_load_more_section_template").html())}var al=O.clone();al.addClass("rw_load_more_section");y("a",al).click(function(am){y(this).parent().parent().remove();w(am,Y,ad,ab,ae,X,aa,Z+ag,ag,y(this).parent().hasClass("rw_selected"),af);return false});Y.append(al)}Confluence.Binder.userHover()}else{if(Z==0){if(n==undefined){n=y(RW.Templates.Activity.empty())}Y.append(n.clone())}}if(ac){var ai=y("li",Y);if(ai.size()>(Z+ag)){RW.startKeyable(Y,null,null,y(ai.get(Z)))}else{RW.startKeyable(Y,null,null,y(ai.get(Z-1)))}}else{var ai=y("li",Y);var ak=y(ai.get(Z));if(ah!=null&&ah!=undefined&&ah.which==1){ak=null}RW.startKeyable(Y,null,null,ak)}},error:function(ai){if(ai.status!=0){t.content("<div class='rw_warning_box'>"+ai.status+" "+ai.statusText+"</div>")}}})}function R(Z,ac,X,aa){if(A==undefined){A=y(y("#rw_popup_loader_template").html())}Z.append(A);var Y=parseInt(ac)+parseInt(X);var ab=contextPath+"/rest/popular/1/stream/content?days=7&pageSize="+Y;y.ajax({url:ab,type:"GET",dataType:"json",cache:false,success:function(af){Z.html("");if(af.streamItems.length>0){y.each(af.streamItems,function(){L(this,Z,true)});Confluence.Binder.userHover();if(af.streamItems.length>=Y){if(O==undefined){O=y(y("#rw_load_more_section_template").html())}var ag=O.clone();ag.addClass("rw_load_more_section");var ad=parseInt(ac)+parseInt(X);y("a",ag).click(function(){y(this).parent().parent().remove();R(Z,ad,X,y(this).parent().hasClass("rw_selected"));return false});Z.append(ag)}}else{if(ac==0){if(n==undefined){n=y(RW.Templates.Activity.empty())}Z.append(n.clone())}}if(aa){var ae=y("li",Z);if(ae.size()>(ac+X)){RW.startKeyable(Z,null,null,y(ae.get(ac)))}else{RW.startKeyable(Z,null,null,y(ae.get(ac-1)))}}else{RW.startKeyable(Z,null,null)}},error:function(ad){if(ad.status!=0){y("#rw_activity_macro_wrapper").html("<div class='rw_warning_box'>"+ad.status+" "+ad.statusText+"</div>").show();y("#rw_activity_macro_loader").hide()}}})}function h(Y,Z,ac,X,aa,ab){if(p==undefined){p=y(y("#rw_section_template").html())}if(m==undefined){m=y(RW.Templates.item())}y.ajax({url:contextPath+"/rest/originaltheme/1.0/label/teamlabel",type:"GET",dataType:"json",cache:false,success:function(af){var aj=p.clone();aj.addClass("rw_horizontal_menu rw_margin_bottom");if(typeof RW.remoteUser!="undefined"){var ak=m.clone();y("a",ak).html("Popular").click(function(){RW.clearActiveMenuItems(Y);y(this).parent().addClass("rw_active");y(".rw_activity_popup_items",Y).html("");R(y(".rw_activity_popup_items",Y),ac,X,false);j(l)});if(aa==l){RW.setActiveMenuItem(ak)}aj.append(ak);var ae=m.clone();y("a",ae).html("Favourite").click(function(al){RW.clearActiveMenuItems(Y);y(this).parent().addClass("rw_active");y(".rw_activity_popup_items",Y).html("");w(al,y(".rw_activity_popup_items",Y),Z,"","",true,false,ac,X,false);j(Q)});if(aa==Q){RW.setActiveMenuItem(ae)}aj.append(ae);var ai=m.clone();y("a",ai).html("Network").click(function(al){RW.clearActiveMenuItems(Y);RW.setActiveMenuItem(y(this).parent());y(".rw_activity_popup_items",Y).html("");w(al,y(".rw_activity_popup_items",Y),Z,"","",false,true,ac,X,false);j(e)});if(aa==e){RW.setActiveMenuItem(ai)}aj.append(ai)}if(typeof(af.items)!=="undefined"&&af.items.length>0){var ah=m.clone();ah.addClass("rw_has_dd");y("a",ah).html("Category").addClass("rw_dd_link");var ad=p.clone();ad.addClass("rw_dd");y.each(af.items,function(){var am=m.clone();var al=this.key;y("a",am).html(this.value).click(function(an){RW.clearActiveMenuItems(Y);RW.setActiveMenuItem(y(this).parent().parent().parent());RW.setActiveMenuItemDD(y(this).parent());y(".rw_activity_popup_items",Y).html("");w(an,y(".rw_activity_popup_items",Y),Z,al,"",false,false,ac,X,false);j(P);J(al)});if(ab==al&&aa==P){RW.setActiveMenuItemDD(am)}ad.append(am)});ah.append("<div style='clear:both;'></div>");ah.append(ad);if(aa==P){RW.setActiveMenuItem(ah)}aj.append(ah)}var ag=m.clone();y("a",ag).html("All").click(function(al){RW.clearActiveMenuItems(Y);RW.setActiveMenuItem(y(this).parent());y(".rw_activity_popup_items",Y).html("");w(al,y(".rw_activity_popup_items",Y),Z,"","",false,false,ac,X,false);j(K)});if(aa==K){RW.setActiveMenuItem(ag)}aj.append(ag);Y.prepend(aj)},error:function(ad){if(ad.status!=0){t.content("<div class='rw_warning_box'>"+ad.status+" "+ad.statusText+"</div>")}}})}RW.activity.filterBySpaces=function(Z,Y,aa){var X=y(".rw_activity_menu",aa);aa.data("option",Z);if(Y!=""){aa.data("category",Y);J(Y)}else{aa.data("category","")}j(Z);v(false,aa)};RW.showActivitiyStream=function(ah,ai,ab){if(typeof ai!="string"){ai=""}if(typeof ab!="string"){ab=""}if(t==undefined){t=new RW.ui.popup("rw_activity_popup","Activity stream");t.closeButton.click(RW.hideActivitiyStream);t.closeButton.html("Close");t.obj.click(function(ak){if(!H){ak.stopPropagation()}})}var aj=y(".rw_popup_top h1",t.obj);if(ai==""){aj.html("Activity stream")}else{aj.html(RW.htmlEncode(ab)+" : "+"Network")}RW.closePopups();RW.activity.inActivityPopup=true;t.show();t.hideLoader();var Y=t.container;var ac=y("<div class='rw_activity_popup_items'></div>");Y.append(ac);var ae="";var ad="";var af="";var X=false;var aa=false;var Z=0;var ag=10;y.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/activitystream",type:"GET",dataType:"json",cache:false,success:function(ak){var al;var am;if(typeof(ak.selectedType)!=="undefined"){al=ak.selectedType}if(typeof(ak.selectedCategory)!=="undefined"){am=ak.selectedCategory}if(al==l){h(Y,ae,Z,ag,l,am);R(ac,Z,ag,false)}else{if(al==Q){X=true}else{if(al==e){aa=true}else{if(al==P){ad=am}else{al=K}}}if(ai==""){h(Y,ae,Z,ag,al,am)}if(ai==""){w(ah,ac,ae,ad,af,X,aa,Z,ag,false)}else{ai=ai.replace("[","");ai=ai.replace("]","");if(ai==""){ai=false}w(ah,ac,ae,"",af,false,false,Z,ag,false,ai)}}y(document).bind("click",RW.hideActivitiyStream)},error:function(ak){if(ak.status!=0){t.content("<div class='rw_warning_box'>"+ak.status+" "+ak.statusText+"</div>")}}});RW.PubSub.trigger("activity-popup:show")};RW.hideActivitiyStream=function(){if(!H){t.hide();t.clear();RW.activity.inActivityPopup=false;y(document).unbind("click",RW.hideActivitiyStream);RW.quitKeyable()}else{H=false}RW.PubSub.trigger("activity-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/spaces-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(w){RW.spaces={};var z;var J;var s;var o;var B;var y;var h;var q;var A=[];var d=false;AJS.toInit(function(){if(w("#rw_spaces_macro").length>0){z=w(RW.Templates.Spaces.categoryItem({}));J=w(RW.Templates.Spaces.categorySection());s=w(RW.Templates.contentItem());o=w(RW.Templates.Spaces.section());B=w(RW.Templates.Spaces.empty());y=w(RW.Templates.loader({type:"circle",bg:"gray"}));h=w(RW.Templates.item());for(var M=0;M<w(".rw_spaces_macro","#main").length;M++){var L=w(w(".rw_spaces_macro","#main")[M]);L.data("closedcategories",w("#spacesVarClosedCategories",L).html());L.data("showlogo",w("#spacesVarShowLogo",L).html());L.data("excludearchivedspaces",w("#spacesVarExcludeArchivedSpaces",L).html());L.data("includelinks",w("#spacesVarIncludeLinks",L).html());L.data("excludeDescriptions",w("#spacesVarExcludeDescriptions",L).html());q=w("#spacesVarManualPermissions",L).html();L.data("isspacedirectory",false);w("#rw_spaces_menu",L).attr("id","rw_spaces_menu_"+M);w(".rw_spaces_menu_button",L).attr("aria-owns","rw_spaces_menu_"+M);x(L)}}});function x(L){var M=L.data("option");w(".rw_spaces_menu_button",L).html(w(".rw_option_"+M+" a",L).html());w(".rw_spaces_menu a",L).click(function(){w(".rw_spaces_menu_button",L).html(w(this).html());RW.spaces.filterSpaces(w(this).data("option"),L)});w(".rw_spaces_menu_button",L).click(function(){e(L);if(RW.confluenceVersion<5){var N=w(this);N.addClass("rw_active");w("#"+N.attr("aria-owns")).addClass("rw_open");var O=function(){N.removeClass("rw_active");w("#"+N.attr("aria-owns")).removeClass("rw_open");w(document).unbind("click",O)};setTimeout(function(){w(document).bind("click",O)},100)}});selectedTeamLabel=w("#spacesVarSelectedTeam",L).html();L.data("category",selectedTeamLabel);if(selectedTeamLabel.length>0){e(L)}if(w("#spacesVarCategoryKey",L).length>0){G(w("#spacesVarCategoryKey",L).html(),w("#rw_spaces_macro_container",L),L)}else{L.data("selectedteamlabel",w("#spacesVarSelectedTeam",L).html());if(w("#spacesVarSpaceDirectory",L).html()==="true"){L.data("isspacedirectory",true)}if(w("#spacesVarTeamLabelIsCategoryTeamLabel",L).html()==="true"){I(w("#spacesVarSpacesSelectedTab",L).html(),L.data("selectedteamlabel"),"",L.data("isspacedirectory"),L)}else{I(w("#spacesVarSpacesSelectedTab",L).html(),"",L.data("selectedteamlabel"),L.data("isspacedirectory"),L)}if(L.data("isspacedirectory")){e(L)}}}function u(L){return{closedCategories:L.data("closedcategories"),showLogo:L.data("showlogo"),excludeArchivedSpaces:L.data("excludearchivedspaces"),includeLinks:(L.data("includelinks")==="true"),isSpaceDirectory:L.data("isspacedirectory"),excludeDescriptions:L.data("excludeDescriptions"),showDashboards:L.data("showDashboards"),disabledSubdashboards:L.data("disabledSubdashboards")}}function n(M){var L=w("#rw_spaces_macro_container",M);L.html(y);w.ajax({url:contextPath+"/rest/originaltheme/1.0/category?include-children=true&recursive=true&exclude-archived-spaces="+M.data("excludearchivedspaces")+"&exclude-links="+(M.data("includelinks")!=="true"),type:"GET",dataType:"json",cache:false,success:function(N){L.html("");if(typeof(N)!=="undefined"&&N.length>0){K(N,w("#rw_spaces_macro_container",M),u(M),M)}t(w("#rw_spaces_macro_container",M),M);if((typeof(N)==="undefined"||N.length==0)){L.html(B.clone())}},error:function(N){if(N.status!=0){L.html("<div class='rw_warning_box'>"+N.status+" "+N.statusText+"</div>").show()}}})}function t(N,L){var M=w("<div></div>");r(M,L);N.append(M)}function f(M){var L=w("#rw_spaces_macro_container",M);L.html(y);w.ajax({url:contextPath+"/rest/originaltheme/1.0/category?exclude-archived-spaces="+M.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(N){L.html("");if(typeof(N)!=="undefined"&&N.length>0){g(N,L,M,u(M))}k(L,M,u(M))},error:function(N){if(N.status!=0){L.html("<div class='rw_warning_box'>"+N.status+" "+N.statusText+"</div>").show()}}})}function G(M,L,O){L.html(y);var N=u(O).closedCategories!=="true";w.ajax({url:contextPath+"/rest/originaltheme/1.0/category/"+M+"/?include-children=true&recursive="+N+"&exclude-archived-spaces="+O.data("excludearchivedspaces")+"&exclude-links="+(O.data("includelinks")!=="true"),type:"GET",dataType:"json",cache:false,success:function(P){L.html("");if((typeof(P.children)==="undefined"||P.children.length==0)&&(typeof(P.subCategories)==="undefined"||P.subCategories.length==0)){L.html(B.clone())}else{b(P,L,u(O),O)}},error:function(P){if(P.status!=0){L.html("<div class='rw_warning_box'>"+P.status+" "+P.statusText+"</div>").show()}}})}function j(N,M){var L=w("#rw_spaces_macro_container",M);L.html(y);w.ajax({url:contextPath+"/rest/originaltheme/1.0/label/space?label="+N+"&exclude-archived-spaces="+M.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(O){L.html("");a(O,L,u(M))},error:function(O){if(O.status!=0){L.html("<div class='rw_warning_box'>"+O.status+" "+O.statusText+"</div>").show()}}})}function E(M){var L=w("#rw_spaces_macro_container",M);L.html(y);w.ajax({url:contextPath+"/rest/originaltheme/1.0/favourite/spaces?exclude-archived-spaces="+M.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(N){L.html("");if(typeof(N)!=="undefined"&&N.length>0){a({children:N},L,u(M))}else{L.html(B.clone())}},error:function(N){if(N.status!=0){L.html("<div class='rw_warning_box'>"+N.status+" "+N.statusText+"</div>").show()}}})}function r(L,M){L.html(y);w.ajax({url:contextPath+"/rest/originaltheme/1.0/space/uncategorized?exclude-archived-spaces="+M.data("excludearchivedspaces"),type:"GET",dataType:"json",cache:false,success:function(N){L.html("");if(typeof(N)!=="undefined"&&N.length>0){a({children:N},L,u(M))}else{if(M.data("closedcategories")==="true"){L.html(B.clone())}}},error:function(N){if(N.status!=0){L.html("<div class='rw_warning_box'>"+N.status+" "+N.statusText+"</div>").show()}}})}function e(L){if(L.data("isspacedirectory")){var M=w(".rw_space_filter_menu",L)}else{var M=w(".rw_option_categories","#"+w(".rw_spaces_menu_button",L).attr("aria-owns"))}if(!L.data("categories-loaded")){if(!L.data("isspacedirectory")){M.append("<li><a>Loading...</a></li>")}w.ajax({url:contextPath+"/rest/originaltheme/1.0/category",type:"GET",dataType:"json",cache:false,success:function(N){L.data("categories-loaded",true);if(!L.data("isspacedirectory")){M.html("")}if(typeof(N)!=="undefined"&&N.length>0){w.each(N,function(){if(this.url==undefined||this.url==""){m(this,M,L)}})}else{if(!L.data("isspacedirectory")){M.remove()}}if(L.data("isspacedirectory")){w("li:last-child a",M).addClass("rw_corners_bottom")}},error:function(N){}})}}function p(L){w.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/spaces/selectedtab?value="+L,type:"PUT",dataType:"json",cache:false,success:function(M){}})}function D(L){w.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/spaces/selectedteam?value="+L,type:"PUT",dataType:"json",cache:false,success:function(M){}})}function m(P,L,M){var O=h.clone(),N=w("a",O);O.attr("id","rw_team_"+RW.htmlEncode(P.nameKey));if(M.data("selectedteamlabel")===P.nameKey){if(M.data("isspacedirectory")){O.addClass("rw_active")}else{w(".rw_spaces_menu_button",M).html(RW.htmlEncode(P.name))}}N.html(RW.htmlEncode(P.name)).click(function(){w(".rw_spaces_menu_button",M).html(w(this).html());RW.spaces.filterSpaces("team",M,P.nameKey,"",M.data("isspacedirectory"))});L.append(O)}function K(N,L,M,O){if(typeof(N)!=="undefined"){w.each(N,function(){C(this,L,M,O)})}}function g(N,L,O,M){if(typeof(N)!=="undefined"){w.each(N,function(){var P=this.nameKey;var R;if(M.showDashboards){R=w(RW.Templates.Spaces.categoryItemWithDashboard({}))}else{R=z.clone()}var W=w("div.rw_spaces_category_title",R),V=w("div.rw_spaces_category_title span",R),U=w("div.rw_spaces_subcategories",R),P=this.nameKey,Q=w(".rw_item_expand",R);RW.spaces.toggleCategorySection(W);V.html(RW.htmlEncode(this.name));if(this.link!=undefined){var T=this.link.url;V.addClass("rw_custom_link");if(this.link.target!=undefined){V.append('<span class="rw_new_window"></span>');W.click(function(){window.open(T)})}else{W.click(function(){window.location=T})}}else{var S;if(M.showDashboards){S=Q}else{S=W}S.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(X){G(P,U,O);W.unbind(X)});if(M.showDashboards){W.click(function(){window.location=contextPath+"/category/"+P})}}RW.PubSub.on("user-categories:fetched",function(){var Y=O.data("showUsers");if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(P)&&Y==true&&!W.hasClass("rw_has_user_category")){var X=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:P});V.after(X.render());W.addClass("rw_has_user_category")}});if(!RW._.isEmpty(RW.Users.categories)){RW.PubSub.trigger("user-categories:fetched")}L.append(R)})}}function C(N,L,O,P){if(N.link!==undefined){}else{if(O.closedCategories!=="true"&&(N.children===undefined||N.children.length===0)&&(N.subCategories===undefined||N.subCategories.length===0)){return}else{if(O.closedCategories!=="true"&&(N.children===undefined||N.children.length===0)&&!v(N.subCategories)){return}}}var X;var U=false;if(!O.showDashboards||(N.parentKey!==undefined&&O.disabledSubdashboards)){X=z.clone()}else{X=w(RW.Templates.Spaces.categoryItemWithDashboard({}));U=true}var W=w("div.rw_spaces_category_title",X),V=w("div.rw_spaces_category_title span",X),R=w("ul.rw_content_list",X),T=w("div.rw_spaces_subcategories",X),M=w(".rw_item_expand",X);if(O.closedCategories==="true"){RW.spaces.toggleCategorySection(W)}V.html(RW.htmlEncode(N.name));if(N.link!=undefined){var S=N.link.url;V.addClass("rw_custom_link");if(N.link.target!=undefined){V.append('<span class="rw_new_window"></span>');W.click(function(){window.open(S)})}else{W.click(function(){window.location=S})}}else{var Q;if(U){Q=M}else{Q=W}Q.click(function(){var Y=w(".rw_spaces_category_content",X);if(w("ul.rw_content_list",Y).children().length==0&&w("div.rw_spaces_subcategories",Y).children().length==0){w(".rw_no_items",L).remove();G(N.nameKey,Y,P)}RW.spaces.toggleCategorySection(this)});if(U){W.click(function(){window.location=contextPath+"/category/"+N.nameKey})}}if(O.closedCategories!=="true"&&(N.children===undefined||N.children.length===0)&&(N.subCategories===undefined||N.subCategories.length===0)){if(N.link===undefined){R.append(B.clone())}}else{l(N.children,R,O);K(N.subCategories,T,O,P)}RW.PubSub.on("user-categories:fetched",function(){var Z=P.data("showUsers");if(!RW._.isEmpty(RW.Users.categories)&&RW.Users.categories.get(N.nameKey)&&Z==true&&!W.hasClass("rw_has_user_category")){var Y=new RW.Views.UserCategory.UserCategoryButtonView({categoryKey:N.nameKey});V.after(Y.render());W.addClass("rw_has_user_category")}});if(!RW._.isEmpty(RW.Users.categories)){RW.PubSub.trigger("user-categories:fetched")}L.append(X)}function v(L){for(i=0;i<L.length;i++){var M=L[i];if(M.children.length>0){return true}else{return v(M.subCategories)}}return false}function b(Q,L,N,O){var P=J.clone(),M=w("ul.rw_content_list",P),R=w("div.rw_spaces_subcategories",P);l(Q.children,M,N);K(Q.subCategories,R,N,O);L.append(P)}function c(O,L,N,M){if(O.type=="space"){F(O,L,N,M)}else{if(O.type=="link"){H(O,L,N,M)}}}function H(P,R,O,M){if(P==undefined){return}var S=w('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>'),Q=w(".rw_item_icon",S),N=w(".rw_item_content",S),L=w("a",S);if(O%2===0){S.addClass("rw_alternating")}S.attr("id","rw_link_id_"+P.key);N.html(RW.htmlEncode(P.title));if(P.icon!=undefined){Q.addClass("rw_icon_"+P.icon)}else{Q.remove()}if(P.target=="_blank"){L.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');L.attr("target","_blank");N.addClass("rw_icon_right")}L.attr("href",P.url).click(function(){linkedClicked=true;if(dropDownContainer.hasClass("rw_key_nav")){if(P.target=="_blank"){window.open(P.url)}else{window.location=P.url}dropDownContainer.hide();dropDownLoader.show();return false}else{return true}});R.append(S)}function F(L,M,P,O){var N=s.clone(),T=w("a",N),Q=w("span.rw_item_content",N),R=w("span.rw_item_favourite",N),S=L.key;Q.html(RW.htmlEncode(L.title));if(P%2===0){N.addClass("rw_alternating")}if(userIsLoggedIn){if(L.favourite){R.addClass("rw_yellow_star").attr("title","Remove from your favourite list")}else{R.addClass("rw_gray_star").attr("title","Add to your favourite list")}R.click(function(U){RW.addOrRemoveFav(S,this);U.stopPropagation();return false});Q.addClass("rw_icon_right")}else{R.remove()}T.attr("href",contextPath+"/display/"+S);if(O.excludeDescriptions!="true"&&L.description!=undefined&&L.description!=""){T.append('<span class="rw_space_description rw_small_text">'+L.description+"</span>")}if(O.showLogo==="true"&&typeof(L.logo)!=="undefined"){T.prepend('<span class="rw_item_icon"><img src="'+contextPath+L.logo+'" class="rw_space_logo" /></span>')}else{T.prepend('<span class="rw_item_icon rw_icon_container_20 rw_icon_space"></span>')}M.append(N)}function l(N,L,M){if(typeof(N)!=="undefined"){w.each(N,function(O){c(this,L,O,M)})}}function a(O,L,N){var P=o.clone(),M=w("ul.rw_content_list",P);if(typeof(O.children)!=="undefined"){w.each(O.children,function(Q){c(this,M,Q,N)})}L.append(P)}function k(L,P,O){var U;if(O.showDashboards){U=w(RW.Templates.Spaces.categoryItemWithDashboard({}))}else{U=z.clone()}var T=w("div.rw_spaces_category_title",U),R=w("div.rw_spaces_category_title span",U),Q=w("ul.rw_content_list",U),S=w("div.rw_spaces_subcategories",U),M=w(".rw_item_expand",U),N=this.nameKey;U.addClass("rw_uncategorized_spaces");RW.spaces.toggleCategorySection(T);R.html(unCategorizedSpaces);T.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(V){r(Q,P);T.unbind(V)});M.click(function(){RW.spaces.toggleCategorySection(this)}).click(function(V){r(Q,P);M.unbind(V)});L.append(U)}function I(L,P,N,O,M){w("#rw_spacelist_menu .rw_active",M).removeClass("rw_active");w("#rw_spacelist_menu .rw_active_team",M).removeClass("rw_active_team");if(L==="team"){if(O){w("#rw_spacelist_menu #rw_team_"+N,M).addClass("rw_active")}else{w("#rw_spacelist_menu #rw_spacelist_team",M).addClass("rw_active");w("#rw_spacelist_menu #rw_team_"+N,M).addClass("rw_active_team")}if(P!==""){G(P,w("#rw_spaces_macro_container",M),M)}else{j(N,M)}}else{if(L==="my"){w("#rw_spacelist_menu #rw_spacelist_my",M).addClass("rw_active");E(M)}else{w("#rw_spacelist_menu #rw_spacelist_all",M).addClass("rw_active");if(M.data("closedcategories")==="true"){f(M)}else{n(M)}}}}RW.spaces.filterSpaces=function(L,M){RW.spaces.filterSpaces(L,M,"","",false)};RW.spaces.filterSpaces=function(L,M,N){RW.spaces.filterSpaces(L,M,"",N,false)};RW.spaces.filterSpaces=function(L,M,P,N,O){I(L,P,N,O,M);p(L);if(L==="team"){if(P!==""){D(P)}else{D(N)}}};RW.spaces.toggleCategorySection=function(L){w(L).closest(".rw_category").toggleClass("rw_closed")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/news/news-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(i){RW.news={};var n="blog";var k="/pages/view-page-simple.action?pageId=";var o;var e;var m;var g;var a;var j;var b=0;var d=2;var p=[];var f={padding:0,speedIn:500,speedOut:500,overlayShow:true,overlayOpacity:0.5,dataAttr:"image-src"};AJS.toInit(function(){o=i(RW.Templates.News.item());e=i(RW.Templates.News.itemSimple());g=i(RW.Templates.News.loadMoreButton());m=i(RW.Templates.News.empty());a=i(RW.Templates.loader({type:"circle",bg:"gray"}));j=i(RW.Templates.News.popupButton());i("#main .rw_news_macro").each(function(q){c(i(this),0,q)})});function c(r,z,t){var q=i(".rw_news_container",r);if(z==0){q.append(a.clone())}var y=i("#contentVarNews",r).html();var u=i("#stepSizeVarNews",r).html();var A=i("#spacesVarNews",r).html();var x=i("#labelsVarNews",r).html();var D=i("#profilePicVarNews",r).html();var C=i("#typeVarNews",r).html();var s=i("#showSpaceNameVarNews",r).html();var B=i("#popupVarNews",r).html();var v=i("#themeVarNews",r).html();var w=i("#categoriesVarNews",r).html();y="excerpts";i.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/",type:"GET",data:{"start-index":z,"max-results":u,keys:A,labels:x,"body-type":y,"profile-pic":D,"all-info":true,"blog-mode":C=="blog","category-keys":w},dataType:"json",cache:false,success:function(E){i(".rw_load_more_link",q).remove();var G=E.hasMore;if(z==0){q.html("")}if(typeof(E.blogPosts)!=="undefined"&&E.blogPosts.length>0){if(p[t]==undefined){p[t]=E.blogPosts}else{p[t]=p[t].concat(E.blogPosts)}i.each(E.blogPosts,function(H){if(B=="true"&&z==0&&H==0){var J=this;var I=j.clone();I.click(function(){RW.openBlogPostPopup(J,0,t,p);return false}).attr("title","View in popup");i(".rw_macro_title h2",r).append(I)}if(v==="simple"){l(this,q,s,B,C,z+H,t)}else{h(this,q,s,B,C,z+H,t)}if(H+z==0&&i("#firstExpandedVarNews",r).html()=="true"){i(".rw_news_item_btn",q.last()).click()}});if(G){var F=g.clone();F.click(function(){i("span",this).hide();i(".rw_loader_128_image",this).show();c(r,z+E.blogPosts.length,t);return false});q.append(F)}Confluence.Binder.userHover()}else{if(z===0){q.after(m.clone()).remove()}}i(".rw_news_item_btn:first",q).addClass("rw_corners_top");if(!G){i(".rw_news_item_btn:last",q).addClass("rw_corners_bottom");i(".rw_news_item:last",q).css("border","0px")}},error:function(E){q.html("<div class='rw_warning_box'>"+E.status+" "+E.statusText+"</div>").show()}})}function h(t,A,I,r,u,H,D){var F=o.clone(),E=i(".rw_caption",F),G=i(".rw_date",F),B=i(".rw_item_icon img",F),w=i(".rw_item_content",F),C=i(".wiki-content",F),y=i(".rw_read_more_page",F),q=i(".rw_read_more_popup",F),x=i(".rw_comments_link",F),s=i(".rw_space_name",F),v=i(".rw_news_item_btn",F),z=i(".rw_user_link",F);E.html(t.title);E.attr("href",t.url);E.attr("title",RW.htmlDecode(t.title));E.click(function(J){window.location=t.url;J.stopPropagation()});G.html(t.date);if(u===n&&t.blog!=undefined){s.html(t.blog.name).addClass("rw_blog_name").attr("title",t.blog.name).click(function(J){window.location=contextPath+"/blog/"+t.blog.nameKey;J.stopPropagation()})}else{if(I){s.html(t.spaceName)}else{s.remove()}}if(t.author.profilePic){if(!t.author.anonymous){B.parent().attr("data-username",t.author.username)}else{B.parent().removeClass("userLogoLink")}B.attr("src",t.author.profilePic);w.addClass("rw_has_icon")}else{B.remove()}if(!t.author.anonymous){z.attr("href",contextPath+"/display/~"+t.author.username);z.attr("data-username",t.author.username)}else{z.removeClass("confluence-userlink")}z.html(t.author.fullName);if(t.bodyContent){C.html(t.bodyContent);i("img.confluence-embedded-image",C).each(function(){var J=i(this);J.fancybox(f);J.removeAttr("width")})}y.attr("href",t.url);if(r=="true"){q.click(function(){RW.openBlogPostPopup(t,H,D,p);return false})}else{q.remove()}x.attr("href",t.commentUrl).attr("title",t.commentTitle);i("span",x).html(t.commentTitle);A.append(F)}function l(t,A,H,r,u,G,C){var E=e.clone(),D=i(".rw_caption",E),F=i(".rw_date",E),y=i(".rw_user_link img",E),B=i(".wiki-content",E),x=i(".rw_read_more_page",E),q=i(".rw_read_more_popup",E),w=i(".rw_comments_link",E),s=i(".rw_space_name",E),v=i(".rw_news_item_btn",E),z=i(".rw_user_link",E);D.html(t.title);D.attr("href",t.url);D.attr("title",RW.htmlDecode(t.title));F.html(t.date);if(u===n&&t.blog!=undefined){s.html(t.blog.name).addClass("rw_blog_name").attr("title",t.blog.name).click(function(I){window.location=contextPath+"/blog/"+t.blog.nameKey;I.stopPropagation()})}else{if(H){s.html(t.spaceName)}else{s.remove()}}if(t.author.profilePic){y.attr("src",t.author.profilePic);z.addClass("rw_has_icon")}else{y.remove()}if(!t.author.anonymous){z.attr("href",contextPath+"/display/~"+t.author.username);z.attr("data-username",t.author.username)}else{z.removeClass("confluence-userlink")}i("span",z).html(t.author.fullName);if(t.bodyContent){B.html(t.bodyContent);i("img.confluence-embedded-image",B).each(function(){var I=i(this);I.fancybox(f);I.removeAttr("width")})}x.attr("href",t.url);if(r=="true"){q.click(function(){RW.openBlogPostPopup(t,G,C,p);return false})}else{q.remove()}w.attr("href",t.commentUrl).attr("title",t.commentTitle);i("span",w).html(t.commentTitle);A.append(E)}RW.openBlogPostPopup=function(v,q,r,u){var t=RW.openIframeDialog(contextPath+k+v.id,RW.htmlDecode(v.title));if(q!=0){t.addButton("<span class='rw_next'>"+"Next"+"</span>",function(){t.remove();RW.openBlogPostPopup(u[r][q-1],q-1,r,u)},"rw_button rw_right")}else{t.addButton("<span class='rw_next'>"+"Next"+"</span>",function(){return false},"rw_button rw_right rw_transparent")}if(u[r].length!=q+1){t.addButton("<span class='rw_prev'>"+"Previous"+"</span>",function(){t.remove();RW.openBlogPostPopup(u[r][q+1],q+1,r,u)},"rw_button rw_right")}else{t.addButton("<span class='rw_prev'>"+"Previous"+"</span>",function(){return false},"rw_button rw_right rw_transparent")}t.addButton("<span class='rw_comment_gray'>"+v.commentTitle+"</span>",function(){window.location=v.commentUrl},"rw_button rw_left");if(v.canEdit){t.addButton("<span class='rw_edit_gray'>"+"Edit"+"</span>",function(){window.location=contextPath+"/pages/editblogpost.action?pageId="+v.id},"rw_button rw_left")}try{RW.startKeyable(i("#rw_popup_dialog"),null,"blog_post_popup",i(".rw_button rw_right"))}catch(s){}};RW.news.toggleNewsItem=function(q){if(i(q).parent().hasClass("rw_open")){i(q).parent().removeClass("rw_open");i(q).parent().find(".rw_news_item_content").hide()}else{i(q).parent().addClass("rw_open");i(q).parent().find(".rw_news_item_content").show()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/news/space-news-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(g){RW.spacenews={};var f;var h;var j;var i;var b=0;var d=2;var c=false;AJS.toInit(function(){f=g(g("#rw_space_news_container_template").html());h=g(g("#rw_space_news_item_template").html());j=g(g("#rw_space_news_load_more_button").html());i=g(g("#rw_section_template").html());velocityCount=0;g("#main .rw_space_news_macro").each(function(l){if(l===0){k(g("#rw_space_news_macro",g(this)),b,true)}else{k(g("#rw_space_news_macro",g(this)),b,false)}})});function k(q,m,n){var o=g("#spaceKeyVarSpaceNews",q.parent()).html();var l=g("#stepSizeVarNews",q.parent()).html();var p=g("#collapsedVarSpaceNews",q.parent()).html();var r=g("#labelsVarSpaceNews",q.parent()).html();if(!RW._.isEmpty(l)){l=g.trim(l)}if(o==undefined||o==""){if(parent!=undefined){if(parent.parent!=undefined&&(parent.parent.RW.spaceLayoutKey!=undefined&&parent.parent.RW.spaceLayoutKey!="")){o=parent.parent.RW.spaceLayoutKey}else{if(parent.RW.spaceLayoutKey!=undefined&&parent.RW.spaceLayoutKey!=""){o=parent.RW.spaceLayoutKey}}}}if(o==undefined||o==""){return}a(q,m,n,o,l,p,r)}function a(r,m,n,p,l,q,s,o){g.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/blog/post",data:{"start-index":m,"max-results":l,keys:p,labels:s,"profile-pic":false},dataType:"json",cache:false,success:function(u){g(".rw_load_more_link",r).remove();c=u.hasMore;if(typeof(u.blogPosts)!=="undefined"&&u.blogPosts.length>0){if(m==0){if(o){var y=i.clone();y.addClass("rw_flyout_items");y.attr("id","rw_space_news_list");r.append(y)}else{r.append(f.clone())}}var x=g("ul",r);g.each(u.blogPosts,function(){velocityCount++;e(this,x)});if(c){var v=j.clone();v.click(function(){g("span",this).hide();g(".rw_loader_128_image",this).show();a(r,m+u.blogPosts.length,n,p,l,q,s,o);return false});x.append(v)}else{g("li:last-child a",x).addClass("rw_corners_bottom")}if(n){var A=g(".rw_sidebar_icon",r.parent());var w=A.attr("data-tooltip");var z={getContent:function(){var B=g("<div></div>");B.append("<h5>"+w+"</h5>");a(B,m,n,p,l,q,s,true);return B}};var t=RW.sidebar.createFlyout(A,"rw_flyout_space_news",z)}}else{if(m==0){r.parent().find(".rw_sidebar_icon").remove()}}},error:function(t){if(t.status!=0){g("#rw_space_news_macro",r).html("<div class='rw_warning_box'>"+t.status+" "+t.statusText+"</div>").show()}}})}function e(n,l){var p=h.clone(),o=g("a",p),q=g("a span",p),m=g(".rw_date",p);o.attr("title",n.title);o.attr("href",n.url);q.html(n.title);m.html(n.date);if(velocityCount%2==0){o.addClass("rw_space_news_alternating")}l.append(p)}RW.spacenews.showSpaceNews=function(l){var m=g(l).parent();m.find("#rw_space_news_container").show();m.find("#rw_space_news_show").hide();m.find("#rw_space_news_hide").show()};RW.spacenews.hideSpaceNews=function(l){var m=g(l).parent();m.find("#rw_space_news_container").hide();m.find("#rw_space_news_show").show();m.find("#rw_space_news_hide").hide()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/base-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(f){var b;var c;AJS.toInit(function(){if(RW.confluenceVersion>=5){d()}else{j()}f("#rw_toolbar .rw_toolbar_dropdown_button").click(function(){h(f(this));return false});f("#rw_toolbar .ajs-button a").click(function(){a()});var o=f("#action-menu-link").next();o.css({margin:0,right:"auto",left:0});if(f("#user-menu-link").outerWidth()>f("#browse_and_user_menu div.user").outerWidth()){f("#browse_and_user_menu div.user").css("width",f("#user-menu-link").outerWidth()-2)}if(f("#rw_page_optional_functions").length>0){if(RW.confluenceVersion>=5){m()}else{e()}}if(RW.userDashboardRedirection){f("a.confluence-userlink, a.userLogoLink").live("click",function(){var p=f(this).attr("data-username");if(p!=undefined&&p!=""&&f(this).attr("href").indexOf("editmyprofilepicture.action")==-1){window.location=contextPath+"/users/view-user-dashboard.action?username="+p;return false}})}});var k=function(o){f("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");f(this).addClass("dropdown_open")};function h(o){i();o.parent().addClass("dropdown_open");f("#rw_toolbar .toolbar-dropdown-menu-item").bind("mouseenter",k);f(document).bind("click",a)}var a=function(){f("#rw_toolbar li.dropdown_open").removeClass("dropdown_open");f("#rw_toolbar .toolbar-dropdown-menu-item").unbind("mouseenter",k);f(document).unbind("click",a)};function i(){a();try{if(AJS.InlineDialog.current!=null){AJS.InlineDialog.current.hide()}}catch(o){}}function d(){f("#rw_toolbar .toolbar-dropdown-menu-item").each(function(){dd=f(".ajs-drop-down",this);if(!dd.length){return}dd=dd[0];dd.hide=function(){};dd.show=function(){}});var p=f("#action-view-storage-link");if(p.length>0){var o=f("#action-view-storage-link").clone();p.after(o);p.remove();o.click(function(q){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");q.preventDefault();return false})}}var g=function(o){f.ajax({type:"PUT",url:o,dataType:"json",cache:false,success:function(p){},error:function(p){alert("Server error while updating watching page")},}).done(function(){if(c.length>0){f("span",c).toggleClass("rw_watching");f("span",c).toggleClass("rw_not_watching");if(f("span",c).hasClass("rw_watching")){c.attr("title","Stop watching")}else{c.attr("title","Watch")}}})};function m(){var o=f("#rw_page_optional_functions");b=f("#rw_page_optional_favourite",o);c=f("#rw_page_optional_watch",o);if(b.length>0){f.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/",dataType:"json",cache:false,success:function(q){if(q.result){f("span",b).addClass("rw_yellow_star");f("span",b).attr("title","Remove from your favourite list")}else{f("span",b).addClass("rw_gray_star");f("span",b).attr("title","Add to your favourite list")}b.show();b.click(function(){RW.addOrRemoveFavPage(AJS.params.pageId,f("span",this))})},error:function(q){}})}if(c.length>0){if(f("#space-watching").length>0){f("span",c).addClass("rw_space_watching");c.show().attr("title","Watching space");c.click(function(){if(RW.confluenceVersion<5){window.location=contextPath+"/spaces/viewspacecontent.action?key="+AJS.params.spaceKey}else{window.location=contextPath+"/users/viewnotifications.action"}})}else{var p;f.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/",dataType:"json",cache:false,success:function(q){if(q.result){f("span",c).addClass("rw_watching");p=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove";c.attr("title","Stop watching")}else{f("span",c).addClass("rw_not_watching");p=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";c.attr("title","Watch")}c.show();c.click(function(){g(p)})},error:function(q){}})}}}var n=new Array();RW.addOrRemoveFav=function(q,r){if(n[r.id]==null){n[r.id]=true;var p;var s;var o;if(f(r).hasClass("rw_yellow_star")){p=contextPath+"/rest/originaltheme/1.0/space/"+q+"/favourite/remove";s="rw_gray_star";o="rw_yellow_star";f(r).removeClass("rw_yellow_star");f(r).attr("title","Add to your favourite list")}else{p=contextPath+"/rest/originaltheme/1.0/space/"+q+"/favourite/add";s="rw_yellow_star";o="rw_gray_star";f(r).removeClass("rw_gray_star");f(r).attr("title","Remove from your favourite list")}f.ajax({type:"PUT",url:p,dataType:"json",cache:false,success:function(t){},error:function(t){n[r.id]=null;f(r).addClass(o)},}).done(function(){f(r).addClass(s);n[r.id]=null;if(RW.cacheStorage){var t=RW.remoteUser+"."+AJS.contextPath()+"/rest/originaltheme/1.0/category";RW.cacheStorage.clearCacheKeysStartingWith(t)}})}};RW.addOrRemoveFavPage=function(o,r){var q;var s;var p;if(f(r).hasClass("rw_yellow_star")){q=contextPath+"/rest/originaltheme/1.0/page/"+o+"/favourite/remove";s="rw_gray_star";p="rw_yellow_star";f(r).removeClass("rw_yellow_star");f(r).attr("title","Add to your favourite list")}else{q=contextPath+"/rest/originaltheme/1.0/page/"+o+"/favourite/add";s="rw_yellow_star";p="rw_gray_star";f(r).removeClass("rw_gray_star");f(r).attr("title","Remove from your favourite list")}f.ajax({type:"PUT",url:q,dataType:"json",cache:false,success:function(t){},error:function(t){f(r).addClass(p)},}).done(function(){f(r).addClass(s);if(o===AJS.params.pageId){f("#page-favourite span").toggleClass("selected");f("#page-favourite span").toggleClass("ie-page-favourite-selected");if(!f("span",b).hasClass(s)){f("span",b).removeClass(p).addClass(s)}}})};RW.showPopupLoader=function(){f(".rw_popup_container").hide();f(".rw_popup_loader").show()};RW.addNewsOnDashboard=function(p,o){f(p).hide().parent().find(".news_on_dashboard_loader").show();f.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+o+"/dashboard/add",type:"PUT",cache:false,success:function(q){f(p).parent().find(".news_is_visible").show();f(p).parent().find(".news_on_dashboard_loader").hide()},error:function(q){}})};RW.removeNewsOnDashboard=function(p,o){f(p).hide().parent().find(".news_on_dashboard_loader").show();f.ajax({url:contextPath+"/rest/originaltheme/1.0/blog/post/"+o+"/dashboard/remove",type:"PUT",cache:false,success:function(q){f(p).parent().find(".news_is_not_visible").show();f(p).parent().find(".news_on_dashboard_loader").hide()},error:function(q){}})};function j(){f("#rw_toolbar .toolbar-dropdown-menu-item").each(function(){dd=f(".ajs-drop-down",this);if(!dd.length){return}dd=dd[0];dd.hide=function(){};dd.show=function(){}});var r=f("#action-view-storage-link");if(r.length>0){var o=f("#action-view-storage-link").clone();r.after(o);r.remove();o.click(function(v){window.open(this.href,(this.id+"-popupwindow").replace(/-/g,"_"),"width=800, height=600, scrollbars, resizable");v.preventDefault();return false})}f("#page-favourite").unbind().click(function(x){x.stopPropagation();var w=f(this).find("span");if(w.hasClass("waiting")){return AJS.stopEvent(x)}w.addClass("waiting");var v=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/add";if(w.hasClass("selected")){v=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/favourite/remove"}f.ajax({type:"PUT",url:v,dataType:"json",cache:false,success:function(y){},error:function(y){alert("Server error while updating favourite")},}).done(function(){w.removeClass("waiting");w.toggleClass("selected");w.toggleClass("ie-page-favourite-selected");if(b.length>0){f("span",b).toggleClass("rw_yellow_star");f("span",b).toggleClass("rw_gray_star");if(f("span",b).hasClass("rw_yellow_star")){f("span",b).attr("title","Remove from your favourite list")}else{f("span",b).attr("title","Add to your favourite list")}}});return AJS.stopEvent(x)});var t=f("#page-watch").unbind().find("span");if(f("#page-unwatch").length==0){var q=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";if(t.hasClass("selected")){q=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove"}t.click(function(v){l(q,t,null);t.addClass("waiting");return AJS.stopEvent(v)})}else{var u=f("#page-unwatch").unbind().find("span");var s=f(t.parent().parent("li"));var p=f(u.parent().parent("li"));if(t.hasClass("inactive")){s.addClass("hidden")}if(u.hasClass("inactive")){p.addClass("hidden")}u.click(function(v){l(contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove",u,t);u.addClass("waiting");return AJS.stopEvent(v)});t.click(function(v){l(contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add",t,u);t.addClass("waiting");return AJS.stopEvent(v)})}}var l=function(o,p,q){p.addClass("waiting");f.ajax({type:"PUT",url:o,dataType:"json",cache:false,success:function(r){},error:function(r){alert("Server error while updating watching page")},}).done(function(){if(f("#page-unwatch").length==0){p.removeClass("waiting");p.toggleClass("selected");p.toggleClass("ie-page-watching-selected")}else{p.removeClass("waiting");p.toggleClass("inactive");q.toggleClass("inactive");p.parent().parent("li").toggleClass("hidden");q.parent().parent("li").toggleClass("hidden")}if(c.length>0){f("span",c).toggleClass("rw_watching");f("span",c).toggleClass("rw_not_watching");if(f("span",c).hasClass("rw_watching")){c.attr("title","Stop watching")}else{c.attr("title","Watch")}}})};function e(){var o=f("#rw_page_optional_functions");b=f("#rw_page_optional_favourite",o);c=f("#rw_page_optional_watch",o);var p=f("#page-favourite span");var q=f("#page-watch span");var t=f("#page-unwatch span");var s=f("#space-watching");if(b.length>0){if(p.hasClass("selected")){f("span",b).addClass("rw_yellow_star");f("span",b).attr("title","Remove from your favourite list")}else{f("span",b).addClass("rw_gray_star");f("span",b).attr("title","Add to your favourite list")}b.show();b.click(function(){RW.addOrRemoveFavPage(AJS.params.pageId,f("span",this))})}if(c.length>0){if(s.length>0){f("span",c).addClass("rw_space_watching");c.show().attr("title","Watching space");c.click(function(){window.location=contextPath+"/spaces/viewspacecontent.action?key="+AJS.params.spaceKey})}else{var r;if(q.hasClass("inactive")){f("span",c).addClass("rw_watching");r=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/remove";c.attr("title","Stop watching")}else{f("span",c).addClass("rw_not_watching");r=contextPath+"/rest/originaltheme/1.0/page/"+AJS.params.pageId+"/watch/add";c.attr("title","Watch")}c.show();c.click(function(){l(r,t,q)})}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/shortcuts-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(b){AJS.toInit(function(){var d=false;var e=false;var f=false;var c=false;b(document).keydown(function(h){if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!b(h.target).is("input, textarea, select")&&!h.metaKey&&!h.ctrlKey&&!h.shiftKey&&!h.altKey){if(h.which==71){c=true}if(h.which==78&&!f&&!c){var g=b(".ic-display-comment-view");if(!g||g.length===0){f=true;RW.openMainKeyNavigation()}}}}});b(document).keypress(function(g){var h=String.fromCharCode(g.which);if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!b(g.target).is("input, textarea, select")){if(h=="/"){RW.showSearch()}else{if(h=="?"){Confluence.KeyboardShortcuts.openDialog()}}}}});b(document).keyup(function(h){if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){if(!b(h.target).is("input, textarea, select")){if(h.which==71&&c){setTimeout(function(){c=false},700)}if(h.shiftKey&&h.which==70){if(typeof RW.remoteUser!="undefined"){if(RW.inFavPageAndSpace){RW.hideFavourite()}else{RW.showFavourite()}}}else{if((h.altKey&&h.which==53||h.which==56)||h.which==219){if(RW.leftColumnHidden){RW.showLeftColumn()}else{RW.hideLeftColumn()}}else{if(h.which==70&&!h.ctrlKey&&!h.altKey){if(RW.inFullscreen){RW.closeFullscreen()}else{RW.openFullscreen()}}else{if(h.which==80){var g=b(".ic-display-comment-view");if(!g||g.length===0){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu(true)}}}else{if(h.shiftKey&&h.which==65){if(RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{RW.showActivitiyStream()}}else{if(h.shiftKey&&h.which==66){if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}else{RW.blogs.showBlogsPopup()}}else{if(h.which==65){if(RW.inAttachments){RW.hideAttachments()}else{window.scroll(0,0);RW.showAttachments()}}else{if((h.shiftKey==true&&h.which==55)||h.which==191){RW.showSearch()}else{if(h.which==78){f=false;RW.closeMainKeyNavigation()}}}}}}}}}if(h.which==27){RW.killPopupAndNavigationEvents()}}}})});var a=false;RW.startCategoryKeyNavigation=function(c){a=true;RW.scrollToElementWithOffset(b("#rw_category_menu"),100);RW.startKeyable(RW.category.object,"horizontal","category_menu",c);b(document).bind("click",function(d){RW.quitCategoryKeyNavigation();b(document).unbind(d)})};RW.quitCategoryKeyNavigation=function(){a=false;RW.quitKeyable()};RW.closePopups=function(){if(RW.inFavPageAndSpace==true){RW.hideFavourite()}if(RW.inTopMenu==true){RW.hideTopMenu()}if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}if(typeof RW.activity!="undefined"&&RW.activity.inActivityPopup){RW.hideActivitiyStream()}if(RW.inSearch){RW.hideSearch()}};RW.killPopupAndNavigationEvents=function(){if(RW.inFavPageAndSpace==true){RW.hideFavourite()}else{if(RW.inTopMenu==true){RW.hideTopMenu()}else{if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}else{if(typeof RW.activity!="undefined"&&RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{if(RW.inCategoryDropDown==true){RW.hideCategory()}else{if(RW.inAttachments==true){RW.hideAttachments()}else{if(RW.inFullscreen==true){RW.closeFullscreen()}else{if(RW.inStickyBar==true){RW.hideSearchStickyBar()}else{if(a){RW.quitCategoryKeyNavigation()}else{if(RW.inPageTree){RW.quitPageTreeNavigation()}else{if(RW.inMenuBarNavigation){RW.stopMenuKeyNavigation()}else{if(RW.sideMenu.isActive()){RW.sideMenu.close()}}}}}}}}}}}}if(RW.inSearch){RW.hideSearch()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/ui-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.ui==="undefined"){RW.ui={}}(function(b){var a;RW.ui.popup=function(g,f){var e=b(b("#rw_popup_template").html()).clone();e.attr("id",g);var d=b(".rw_popup_bottom a",e);var c=b(".rw_popup_content",e);b("#rw_main").append(e);b(".rw_popup_top h1",e).html(f);this.show=function(){e.show();b("#rw_popup_bg").show();window.scroll(0,0)};this.hide=function(){e.hide();b("#rw_popup_bg").hide()};this.showLoader=function(){b(".rw_popup_container",e).hide();b(".rw_popup_loader",e).show()};this.hideLoader=function(){b(".rw_popup_container",e).show();b(".rw_popup_loader",e).hide()};this.content=function(h){b(".rw_popup_container",e).show();b(".rw_popup_content",e).html(h)};this.clear=function(h){b(".rw_popup_content",e).html("")};this.obj=e;this.closeButton=d;this.container=c;return this};RW.getSideMenuTitle=function(c){if(a==undefined){a=b('<div class="rw_side_menu_title rw_corners_top"></div>')}var d=a.clone();d.html(c);return d}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/pagetree-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(f){var g;var c;var a;var e=null;var n;RW.inPageTree=false;var j="none";var m="default";var i="public";var l="rw_in_key_nav";AJS.toInit(function(){c=f(f("#rw_page_tree_wrapper_template").html());g=f(f("#rw_page_item_container_template").html());a=f(f("#rw_page_children_list_container").html());n=f(RW.Templates.loader({type:"circle",bg:"gray"})).clone();f("#main .rw_page_tree_wrapper").each(function(r){if(r===0){o(f(this),true)}else{o(f(this),false)}})});function o(r,B){if(B){r.attr("id","rw_page_tree_wrapper");e=r}var v=f(".rw_param_start_page_id",r).attr("data-value");var u=f(".rw_param_theme",r).attr("data-value");var C=f(".rw_param_search",r).attr("data-value");var x=f(".rw_param_expand_collapse",r).attr("data-value");var t=f(".rw_param_page_id",r).attr("data-value");var A=f(".rw_param_space_key",r).attr("data-value");var z=f(".rw_param_space_admin",r).attr("data-value");var w=f(".rw_param_space_shortcuts",r).attr("data-value");if(A==undefined||A==""){if(parent!=undefined){if(parent.parent!=undefined&&(parent.parent.RW.spaceLayoutKey!=undefined&&parent.parent.RW.spaceLayoutKey!="")){A=parent.parent.RW.spaceLayoutKey;t=""}else{if(parent.RW.spaceLayoutKey!=undefined&&parent.RW.spaceLayoutKey!=""){A=parent.RW.spaceLayoutKey;t=""}else{return}}}}var s={inLeftColumn:B,startPageId:v,theme:u,pageId:t,spaceKey:A};if(C==="true"){s.search=true}else{s.search=false}if(x==="false"){s.expandCollapse=false}else{s.expandCollapse=true}if(z==="true"){s.spaceAdmin=true}else{s.spaceAdmin=false}if(w==="true"){s.spaceShortcuts=true}else{s.spaceShortcuts=false}var y=f(".rw_pagetree",r);if(s.theme===j){}else{if(s.theme===i){y.addClass("rw_theme_"+i)}else{y.addClass("rw_theme_"+m)}}d(f(".rw_quick_links_container",r),s);if(s.search){f("#rw_pagetree_query",r).originalThemeSearch(false)}if(f("#sv-active-indicator").length>0){y.removeAttr("style")}else{p(y,r,s)}}function p(t,r,u){var s="";if(u.startPageId!=""&&u.startPageId!=undefined){s=contextPath+"/rest/originaltheme/1.0/space/"+u.spaceKey+"/pagetree?selected="+u.pageId+"&root="+u.startPageId}else{s=contextPath+"/rest/originaltheme/1.0/space/"+u.spaceKey+"/pagetree?selected="+u.pageId}r.append(n);f.ajax({type:"GET",url:s,dataType:"json",cache:false,success:function(y){var v=a.clone();v.addClass("rw_pagetree_list rw_toplevel rw_sidebar_content");if(y.pages.length>0){k(v,u.pageId,y.pages);f(".rw_page_tree_container",t).append(v);if(u.expandCollapse===false){f(".rw_expand_collapse",t).remove()}else{f(".rw_expand_all",t).click(function(){q(f(this).parent().parent());return false});f(".rw_collapse_all",t).click(function(){h(f(this).parent().parent());return false})}RW.inPageTree=true;if(u.inLeftColumn){var x={getContent:function(){var A=f('<div class="rw_pagetree rw_corners"><div class="rw_page_tree_container"></div></div>');var z={inleftColumn:false,startPageId:u.startPageId,theme:"none",expandCollapse:false,pageId:u.pageId,spaceKey:u.spaceKey};p(A,r,z);return A}};var w=RW.sidebar.createFlyout(f("#rw_sidebar_icon_pagetree",r),"rw_flyout_pagetree",x)}}n.remove();t.removeAttr("style")},error:function(v){if(v.status!=0){alert(v.status+" "+v.statusText)}}})}function d(t,v){if(RW.confluenceVersion>=5&&v.spaceShortcuts){var s=new RW.sidebar.quickLinksObject(t,v.spaceKey,v.spaceAdmin);s.getLinks();if(v.inLeftColumn){var u={getContent:function(){var x=f("<div></div>");var w=new RW.sidebar.quickLinksObject(x,v.spaceKey,false);w.getLinks();return x}};var r=RW.sidebar.createFlyout(f("#rw_sidebar_icon_quicklinks"),"rw_flyout_quicklinks",u)}}}function k(r,s,u,t){f.each(u,function(){var y=g.clone(),v=f(".rw_item_icon",y),x=f("a",y);x.html(this.title);x.attr("href",this.url);x.attr("title",RW.htmlDecode(this.title));v.attr("id",this.id);y.attr("id","rw_pagetree_item_"+this.id);if(this.hasChildren){v.children("span").attr("class","rw_icon rw_icon_plus")}if(s==this.id){x.addClass("rw_current_page_item")}if(this.children&&this.children!=undefined&&this.children!=[]&&this.children.length>0){v.children("span").attr("class","rw_icon rw_icon_minus");var w=a.clone();k(w,s,this.children,t);y.append(w)}r.append(y);if(this.hasChildren){v.bind("click",b);if(t){v.trigger("click",[true])}}})}function b(x,u){var s=f(this).closest("li");var w=f(this).children("span");var t=f(this).attr("id");var y=f(this).closest(".rw_page_tree_wrapper");var r=false;if(y.hasClass("rw_key_nav")){r=true}if(w.hasClass("rw_icon_plus")){if(w.closest("li").children("ul").size()>0){w.closest("li").children("ul").show();w.attr("class","rw_icon rw_icon_minus");if(r){RW.startKeyable(e.not("li ul:visible"),null,"page_tree",w.closest("li"))}return}s.append(n);f.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/page/"+t+"/children",dataType:"json",cache:false,success:function(A){n.remove();var z=a.clone();if(A.pages.length>0){k(z,t,A.pages,u);s.append(z);w.attr("class","rw_icon rw_icon_minus");if(r){RW.startKeyable(e.not("li ul:visible"),null,"page_tree",w.closest("li"))}}},error:function(z){if(z.status!=0){alert(z.status+" "+z.statusText)}}})}else{if(w.hasClass("rw_icon_minus")){var v=w.closest("li").children("ul");v.hide();w.attr("class","rw_icon rw_icon_plus");if(r){RW.startKeyable(e,null,"page_tree",w.closest("li"))}}}}function q(r){if(r.hasClass("rw_loaded")){f(".rw_pagetree_list",r).show();f(".rw_icon.rw_icon_plus",r).attr("class","rw_icon rw_icon_minus")}else{var s=f(".rw_icon.rw_icon_plus",r);f.each(s,function(){f(this).trigger("click",[true])});r.addClass("rw_loaded")}return false}function h(r){f(".rw_pagetree_list",r).hide();f(".rw_toplevel",r).show();f(".rw_icon.rw_icon_minus",r).attr("class","rw_icon rw_icon_plus")}RW.startPageTreeNavigation=function(){if(RW.leftColumnHidden){RW.showLeftColumn()}var r;if(f(".rw_current_page_item",e).length>0){r=f(".rw_current_page_item",e).closest("li")}else{r=e.find("li:first-child").first()}RW.startKeyable(e,null,"page_tree",r);RW.scrollToElementWithOffset(r,100)};RW.quitPageTreeNavigation=function(){RW.quitKeyable()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){AJS.toInit(function(){if(RW.confluenceVersion>=5){RW.leftColumnHidden=false;var f=false;var j=false;var x=0;var v;var m=a("#rw_page_container");var w=a("#rw_left_column",m);var e=a("#rw_main_column",m);var n=a("#rw_show_left_column",m);var u=a("#rw_hide_left_column",m);var z=a("#rw_splitter",m);var o=a(window);var y=a(document);var c=150;var b=48;var r=300;var s=10;var t="leftcolumn.width";var i="leftcolumn.state";var k="collapsed";var h="expanded";RW.hideLeftColumn=function(){if(!j){q();RW.storage.setValue(i,k)}};RW.showLeftColumn=function(){if(!j){var A=Math.round(x*0.23);p(A);RW.storage.setValue(i,h);RW.storage.setValue(t,A)}};RW.toggleLeftColumn=function(){if(RW.leftColumnHidden){RW.showLeftColumn()}else{RW.hideLeftColumn()}};function d(B,A){if(!a("#rw_main_column").hasClass("rw_has_left_column")){return}if(B<b){B=b}else{if(B>x-r){B=x-r}}v=B;if(B>c){RW.leftColumnHidden=false;w.removeClass("rw_collapsed").css({position:"static"});if(f){a("#rw_sidebar .acs-side-bar").removeClass("collapsed")}u.show();n.hide()}else{RW.leftColumnHidden=true;w.addClass("rw_collapsed");if(f){a("#rw_sidebar .acs-side-bar").addClass("collapsed");setTimeout(function(){a("#rw_sidebar .acs-side-bar").addClass("collapsed")},100)}u.hide();n.show()}if(A!=undefined&&A===true){if(z!=undefined){z.css("left",B+s)}}w.outerWidth(B);e.css({"margin-left":B})}function q(){RW.leftColumnHidden=true;d(48,true);z.attr("data-tooltip","Expand left column")}function p(A){RW.leftColumnHidden=false;d(A,true);z.attr("data-tooltip","Collapse left column")}function l(){if(RW.leftColumnHidden){var A=e.offset().top,B=o.scrollTop(),C=o.scrollLeft();if(B<0){return}if(B>(y.height()-o.height())){return}if(B>A-10){w.css({position:"fixed"})}else{w.css({position:"static"})}}}function g(){x=m.width();if(v!=undefined){if(v>x-r){d(v,true)}}}if(w.length>0){x=m.width();u.click(RW.hideLeftColumn);n.click(RW.showLeftColumn);if(a("#rw_sidebar").length>0){f=true;if(RW.storage.getValue(i)!=k){a("#rw_sidebar .acs-side-bar").removeClass("collapsed");setTimeout(function(){a("#rw_sidebar .acs-side-bar").removeClass("collapsed")},100)}}if(w.hasClass("rw_collapsed_locked")){j=true;q();if(f){a("#rw_sidebar .acs-side-bar").addClass("collapsed");setTimeout(function(){a("#rw_sidebar .acs-side-bar").addClass("collapsed")},100)}}if(z.length>0){console.log("RW: Initiate splitter functionality");z.draggable({containment:"parent",axis:"x",start:function(){z.attr("data-tooltip","");RW.removeTooltip()},drag:function(){d(parseInt(a(this).css("left"),10)-s)},stop:function(){if((parseInt(a(this).css("left"),10)-s)<=c){d(48,true);RW.storage.setValue(t,48);RW.storage.setValue(i,k);z.attr("data-tooltip","Expand left column")}else{RW.leftColumnHidden=false;var A=parseInt(e.css("margin-left"),10);a(this).css("left",A+s);RW.storage.setValue(t,A);RW.storage.setValue(i,h);z.attr("data-tooltip","Collapse left column")}}}).click(function(){RW.toggleLeftColumn()}).css({left:(parseInt(e.css("margin-left"),10)+s),height:e.parent().height()});if(RW.storage.getValue(i)!=k&&RW.storage.getValue(i)!=undefined){d(RW.storage.getValueAsInt(t),true)}a("#rw_splitter_handle",z).css("top",(z.height()/2)-10);if(RW.storage.getValue(i)==k){z.attr("data-tooltip","Expand left column")}else{z.attr("data-tooltip","Collapse left column")}a("#rw_splitter_handle",z).removeClass("rw_hidden");RW.applyTooltip(z)}if(RW.storage.getValue(i)==k){q()}RW.applyTooltip(".rw_sidebar_icon");o.scroll(l);o.resize(l,g);o.on("touchend",l)}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-flyout-min.js' */
(function(a){if(RW.sidebar==undefined){RW.sidebar={}}RW.sidebar.createFlyout=function(f,e,g){var i=f.attr("data-tooltip");var h=function(k,j,l){a(j).attr("data-tooltip","");RW.removeTooltip();a(k).html(g.getContent()).addClass("rw_flyout_content");l();a(j).one("click",function(m){if(a("#inline-dialog-"+e).is(":visible")){setTimeout(function(){d.hide()},0)}})};var d=AJS.InlineDialog(f,e,h,{getArrowPath:b,calculatePositions:c,hideDelay:null,hideCallback:function(){a(f).attr("data-tooltip",i)}});a(window).scroll(function(){d.hide()});return d};function c(e,h,m,d){var n=h.target.offset();var l=h.target.width();var i=h.target.height();var k={top:n.top+i/2-15,left:n.left+l+5,right:"auto"};var f=a(window);var j=20;k.maxHeight=f.height()+f.scrollTop()-k.top-j;if(a.browser.msie&&parseInt(a.browser.version,10)<=8){k.maxHeight-=40}var g={top:9,left:-7};return{displayAbove:false,popupCss:k,arrowCss:g}}function b(){return"M8,16 L0,8,8,0"}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/sidebar/sidebar-quicklinks-min.js' */
(function(a){if(RW.sidebar==undefined){RW.sidebar={}}RW.sidebar.quickLinksObject=function(o,i,d){var k=a(a("#rw_items_template").html());var r=a(a("#rw_icon_content_item_template").html());var c=k.clone();var p;var h;var g;var l=a("<h5>"+"Space shortcuts"+"</h5>");var s=a("#rw_sidebar_icon_quicklinks");var n=a(RW.Templates.loader({type:"circle",bg:"gray"})).clone();var m=contextPath+"/rest/ia/1.0/link/";var t=false;var b=false;o.bind("loaded",function(v,u){if(!b){b=true;if(u>0||d){o.prepend(l);o.append(n.hide());o.append(c.addClass("rw_quick_links").attr("id","rw_quick_links"));if(d){p=a('<a class="rw_configure_button rw_button_discrete"><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>');o.prepend(p);p.click(function(){e()})}}}});function q(v){var u=r.clone();u.addClass("acs-nav-item "+v.styleClass);a(".rw_item_icon",u).addClass("icon");a(".rw_item_content",u).html(RW.htmlEncode(v.title)).addClass("rw_has_icon");u.attr("data-id",v.id);if(t){var w=a('<span class="rw_delete" data-tooltip="'+"Remove link"+'"></span>');a("a",u).before('<span class="rw_move"></span>');a("a",u).before(w);w.click(function(){j.deleteLink(a(this).parent().attr("data-id"));a(this).attr("data-tooltip","");RW.removeTooltip()})}else{a("a",u).attr("href",v.url)}return u}function e(){p.hide();if(h==undefined){h=a('<button class="rw_done_button aui-button aui-button-primary ">'+"Done"+"</button>");o.append(h);h.click(function(){f()})}else{h.show()}if(g==undefined){g=a('<button class="rw_add_button aui-button">'+"Add link"+"</button>");o.append(g);g.click(function(){RW.sidebar.linkAdapter.hijackLinkBrowser();Confluence.Editor.LinkBrowser.open();a("#recentlyviewed-panel-id").click()})}else{g.show()}c.addClass("rw_configure");t=true;j.refreshLinks()}function f(){p.show();g.hide();h.hide();c.removeClass("rw_configure");t=false;j.refreshLinks()}this.getLinks=function(){n.show();a.ajax({type:"GET",url:m+"quick?spaceKey="+i,dataType:"json",cache:false,success:function(u){n.hide();if(u.length>0){a.each(u,function(){c.prepend(q(this))});s.removeClass("rw_hidden")}else{if(d){if(t){c.append('<span class="rw_help">'+"Click \"Add link\" to add links to the sidebar."+"</span>")}else{o.append('<span class="rw_help">'+AJS.format("Here you can add shortcut links to the most important content for your team or project. \u003ca href=\"{0}\" class=\"{1}\"\u003eConfigure sidebar\u003c/a\u003e.","","rw_configure_link")+"</span>");a(".rw_configure_link",o).click(function(v){e();v.preventDefault()})}}s.addClass("rw_hidden")}o.trigger("loaded",[u.length])},error:function(u){}}).done(function(){if(t){var v={},u;c.sortable({update:function(w,x){u=x.item.next();if(!u.length){v.position="first"}else{v.after=m+u.attr("data-id")}v.spaceKey=i;j.moveLink(x.item.attr("data-id"),v)}}).disableSelection();RW.applyTooltip("#rw_quick_links .rw_delete")}})};this.addLink=function(u){a.ajax({type:"POST",url:m,data:a.toJSON(u),dataType:"json",contentType:"application/json",success:function(v){j.refreshLinks()}})};this.deleteLink=function(v){var u={};u.spaceKey=i;a.ajax({type:"DELETE",url:m+v+"?spaceKey="+i,dataType:"json",contentType:"application/json",success:function(w){j.refreshLinks()}})};this.refreshLinks=function(){c.html("");a(".rw_help",o).remove();j.getLinks()};this.moveLink=function(v,u){a.ajax({type:"POST",url:m+v+"/move",dataType:"json",contentType:"application/json",data:JSON.stringify(u),complete:function(){},success:function(w){},error:function(w){}})};if(d){RW.sidebar.quickLinks=this}var j=this;return this};RW.sidebar.linkAdapter={setLink:function(d){var c=AJS.Meta.get("context-path");var e=Confluence.unescapeEntities(d.getHtml());var b={spaceKey:AJS.Meta.get("space-key"),pageId:d.attrs["data-linked-resource-id"],customTitle:e==d.getDefaultAlias()?"":e,url:d.attrs.href};RW.sidebar.quickLinks.addLink(b)},getLink:function(){return Confluence.Link.fromData({attrs:{},body:{isEditable:true,isImage:false,html:"",imgName:"",text:""}})},hijackedLinkBrowser:false,hijackLinkBrowser:function(){var b=RW.sidebar.linkAdapter;if(!b.hijackedLinkBrowser){b.storeBookmark=AJS.Rte.BookmarkManager.storeBookmark;b.restoreBookmark=AJS.Rte.BookmarkManager.restoreBookmark;AJS.Rte.BookmarkManager.storeBookmark=a.noop;AJS.Rte.BookmarkManager.restoreBookmark=a.noop;b.oldLinkAdapter=Confluence.Editor.LinkAdapter;Confluence.Editor.LinkAdapter=b;b.$oldTabItems=a("#link-browser-tab-items div");b.$oldTabItems.each(function(){var c=a(this).text();if(c!="search"&&c!="recentlyviewed"&&c!="weblink"){a(this).remove()}});b.hijackedLinkBrowser=true}},releaseLinkBrowser:function(){var b=RW.sidebar.linkAdapter;if(b.hijackedLinkBrowser){AJS.Rte.BookmarkManager.storeBookmark=b.storeBookmark;AJS.Rte.BookmarkManager.restoreBookmark=b.restoreBookmark;a("#link-browser-tab-items").empty().append(b.$oldTabItems);Confluence.Editor.LinkAdapter=b.oldLinkAdapter;b.hijackedLinkBrowser=false}}};AJS.bind("closed.link-browser",function(){if(RW.sidebar.linkAdapter.hijackedLinkBrowser){RW.sidebar.linkAdapter.releaseLinkBrowser()}});AJS.bind("updated.link-browser-recently-viewed",function(){var c=AJS.Meta.get("page-title"),b=AJS.Meta.get("space-name");if(c&&b){a("#insert-link-dialog .recently-viewed-panel .data-table tr").each(function(){var d=a(this);if(d.find(".title-field").text()==c&&d.find(".space-field").text()==b){d.click()}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/user-settings-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(b){var a;AJS.toInit(function(){if(b("#rw_personal_first_time").html()=="true"){RW.showUserSettingsPopup()}});RW.closeUserSettingsDialog=function(){a.remove();window.location.reload();return true};RW.closeUserSettingsDialogWithNoReload=function(){a.remove();return true};RW.showUserSettingsPopup=function(){a=RW.openIframeDialog(contextPath+"/originaltheme/dialog/users/edit-user-settings.action?","User Configuration","admin")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/im-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(f){var q=f('meta[name="rw-hipchat-base-api-url"]').prop("content");var a=f('meta[name="rw-hipchat-base-url"]').prop("content");var p=q+"/v1/users/show";var r=q+"/v1/users/list";var i=q+"/v1/rooms/list";var s=q+"/v1/rooms/show";var m;var o=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/";var k=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/";var b=contextPath+"/download/resources/com.refinedwiki.confluence.plugins.theme.original/images/macros/hipchat/icon_openroom_dark.png";var j;var h;var c=5;var e;AJS.toInit(function(){RW.initHipchatStatus();f(self).bind("hover-user.open",function(u,t){d(t)})});RW.initHipchatStatus=function(){RW._.each(f(".rw_hipchat_detail_wrapper"),function(t){l(t)})};function d(v){if(v==undefined){return false}var w=f(".confluence-userlink",v.target).attr("data-username");var t=v.target;var u="<a class='rw_user_dashboard_link' href='"+contextPath+"/users/view-user-dashboard.action?username="+w+"'>"+"User dashboard"+"</a>";f(".actions",t).before(u);f.ajax({url:contextPath+"/rest/originaltheme/1.0/setting/user/imaccount",data:{username:w},type:"GET",dataType:"json",cache:false,success:function(y){var z=y.skypeAccount;var B=y.hipchatAccount;var A;var x;if(y.isUsingExternHipChat){x=true;f.get(contextPath+"/rest/hipchatproxy/1/user/show?user_id="+encodeURIComponent(y.email),function(C){if(C.error!=undefined&&C.error.code==404){x=false}},"json").done(function(){n(z,t,x)})}else{if(B!=undefined&&B!=""){f.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/hipchat/user/show?user-id="+B,dataType:"json",cache:false,success:function(C){if(C.name!=null){x=true}else{x=false}g(B,C.name,C.status,C.statusMessage,t);n(z,t,x)},})}else{n(z,t,false)}}},})}function n(v,u,x){if(v!=undefined&&v!=""){var t="rw_vcard_im";if(x){t+=" rw_second"}var w='<a class="'+t+'" href="skype:'+v+'?chat" title="Skype"><img width="16" height="16" alt="" style="border: none;" src="http://mystatus.skype.com/smallicon/'+v+'"></a></div>';f(".vcard",u).prepend(w)}}function g(y,u,t,x,w){if(y!=undefined&&y!=""){var v='<span class="rw_vcard_im rw_icon_container_10 rw_icon_hipchat_'+t+'"';if(x!=null&&x!=""){v+=" title='HipChat - "+u+" : "+x+"'"}else{v+=" title='HipChat'"}v+="></span>";f(".vcard",w).prepend(v)}}function l(u){var v=f("#rw_hipchat_icon",u);if(v.length>0){var w=f("#rw_hipchat_username",u).html();var t=true;f.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/hipchat/user/show?user-id="+w,dataType:"json",cache:false,success:function(x){if(x.name!=null){v.append('<span class="rw_icon_container_10 rw_icon_hipchat_'+x.status+'" ></span>');if(x.statusMessage!=null&&x.statusMessage!=""){v.attr("title","HipChat - "+x.name+": "+x.statusMessage)}else{v.attr("title","HipChat - "+x.name)}if(x.userId!==undefined){f("#rw_go_to_hipchat_button",u).attr("href",f('meta[name="rw-hipchat-base-url"]').prop("content")+"/people/show/"+x.userId)}}}})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/legacy/twitter-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(f){var b="https://api.twitter.com/1/statuses/user_timeline.json?include_rts=true";var j="http://search.twitter.com/search.json";var l="http://twitter.com";var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var v;var c;var x;var h=null;var y;var o;var m;var n=f("<div class='rw_info_box'></div>");AJS.toInit(function(){RW.initTwitter()});RW.initTwitter=function(){var A=f("#main .rw_twitter_macro_container");if(A.length>0){c=f(f("#rw_twitter_wrapper_template").html());x=f(f("#rw_twitter_item").html());h=f(f("#rw_twitter_avatar").html());y=f(f("#rw_twitter_loader_template").html());v=f(f("#rw_twitter_wrapper_template").html());o=f(f("#rw_twitter_load_more_template").html());m=f(f("#rw_confluence_status_item_template").html());for(var z=0;z<A.length;++z){RW.initModule(A.eq(z))}}};RW.initModule=function(A){var E=f(A).find("#rw_twitter_max_id").html();var G=f(A).find("#rw_twitter_username").html();var F=f(A).find("#rw_twitter_count").html();var D=f(A).find("#rw_twitter_hashtag").html();var B=f(A).find("#rw_twitter_include_activitystream").html();var C=f(A).find("#rw_twitter_confluence_username").html();var z=y.clone();if(f(A).find("#rw_load_more_twitter_link").length>0){f(A).find("#rw_load_more_twitter_link").find(".rw_load_more_text").html("");f(A).find("#rw_load_more_twitter_link").find(".rw_loader_128_image").show()}else{f(A).append(z)}if(D){i(D,F,A,C,B,E,z)}else{w(G,F,A,C,B,E,z)}};function t(z){z="  "+z;z=z.replace(/http:\/\/\S+/g,'<a href="$&" target="_blank">$&</a>');z=z.replace(/https:\/\/\S+/g,'<a href="$&" target="_blank">$&</a>');z=z.replace(/(\s)+(#[A-Za-z������0-9\-\_]+)/g,' <a href="http://twitter.com/$2" target="_blank">$2</a>');z=z.replace(/(\s)+(@[A-Za-z�����0-9\-\_]+)/g,' <a href="http://twitter.com/$2" target="_blank">$2</a>');z=z.substring(1);return z}function g(A){var B=A.split(" ");var z=B[3].split(":");return(Date.UTC(B[5],e(B[1]),B[2],z[0],z[1],z[2],0))}function a(A){var B=A.split(" ");var z=B[4].split(":");return(Date.UTC(B[3],e(B[2].split(",")[0]),B[1],z[0],z[1],z[2],0))}function e(A){for(var z=0;z<p.length;++z){if(p[z]==A){return z}}return -1}function i(z,D,A,C,H,E,G){var I=D;I++;var B="";if(E>0){B="&max_id="+E}if(H=="true"){var F=new Array();q(D,C,F,A,G)}else{G.remove();A.append(n.clone().append("No status updates found."))}}function w(B,C,z,A,G,D,F){var E=new Array();var H=C;H++;if(B==""){if(G=="true"){var E=new Array();q(C,A,E,z,F)}else{F.remove();z.append(n.clone().append("No status updates found."))}}else{if(G=="true"){var E=new Array();q(C,A,E,z,F)}else{F.remove();z.append(n.clone().append("No status updates found."))}}}function q(G,E,L,A,M){var H="status";var D="";var F="";var I="";var K=E;var z="";var C="";var B=f(A).find("#rw_twitter_item_count").html();var J=G;f.ajax({url:contextPath+"/rest/originaltheme/1.0/activitystream/?types="+H+"&category-key="+D+"&labels="+F+"&spaces="+I+"&authors="+K+"&favourite="+z+"&network="+C+"&start-index="+B+"&max-results="+J,type:"GET",dataType:"json",cache:false,success:function(O){var P=new Array();var N=null;f.each(O.activitySets,function(){N=this.author;f.each(this.items,function(){var Q=this;Q.url=N.profilePic;Q.spaceName=N.username;Q.fullName=N.fullName;P.push(Q)})});d(s(L,P,G),A,G,M)},error:function(N){if(N.status!=0){alert(N.status+" "+N.statusText)}}})}function s(z,F,E){var D=0;var C=0;var B=new Array();for(var A=0;A<E;++A){if((z[D]&&!F[C])||(z[D]&&F[C]&&z[D].timestamp>F[C].timestamp)){B.push(z[D]);D++}else{if(F[C]){B.push(F[C]);C++}}}return B}function d(E,z,D,I){var F;if(f("ul",z).length>0){F=f("ul",z)}else{F=v.clone()}var G=o.clone();G.click(function(){RW.initModule(f(this).parent())});var B=0;var C=0;var J=z.find("#rw_twitter_item_count").html();var H=false;f.each(E,function(){if(B!=D){if(this.type=="user_tweet"||this.type=="search_tweet"){F.append(u(this));C=this.id}else{F.append(k(this));J++}H=true}B++});z.append(F);if(H){z.find("#rw_load_more_twitter_link").remove();z.find("#rw_twitter_max_id").html(C);z.find("#rw_twitter_item_count").html(J);z.append(G)}else{z.find("#rw_load_more_twitter_link").remove()}I.remove();try{Confluence.Binder.userHover()}catch(A){}if(J==0&&E.length==0){z.append(n.clone().append("No status updates found."))}f("li:first-child",z).addClass("rw_corners_top");Confluence.Binder.userHover()}function r(){var z={type:"",imageurl:"",text:"",timestamp:"",profileurl:"",id:"","isRetweet:":""};return z}function u(D){var A=x.clone(),B=f(".rw_twitter_profile_picture",A),C=f(".rw_twitter_content",A),z=f(".rw_date",A),E=f(".rw_twitter_profile_link",A);B.attr("src",D.imageurl);C.html(D.text);z.html(RW.getTimeString(D.timestamp));E.attr("href",D.profileurl);if(D.isRetweet=="true"){A.addClass("rw_retweet_item")}return A}function k(E){var A=m.clone(),z=f(".userLogoLink",A),F=f(".userLogo",A),D=f(".rw_content_holder",A),B=f(".rw_date",A);D.html(E.title);F.attr("src",E.url);if(E.timestamp==undefined&&E.date!=undefined){E.timestamp=E.date}B.html(RW.getTimeString(E.timestamp));z.attr("data-username",E.spaceName);var C=f("<span class='rw_small_text rw_author'>  <a href='"+contextPath+"/users/view-user-dashboard.action?username="+E.spaceName+"' class='rw_user_link url fn confluence-userlink' data-username='"+E.spaceName+"'>"+E.fullName+"</a></span>");B.after(C);z.attr("href",contextPath+"/display/~"+E.spaceName);return A}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/shortcuts/key-nav-popup-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(i){var s;var q;var p;var d;var t="categories";var x="pagetree";var y="menu";var e="favourite";var n="activitystream";var v="topmenu";var k="allblog";var r="allblogpost";var z="prevblog";var A="nextblog";var h="dashboardlink";var g="blogs";var c="search";var u="cancel";var b="empty";var l="sidebar";var j;var f=1000;var w=false;RW.openMainKeyNavigation=function(){w=false;j=new Date().getTime();RW.quitKeyable();if(typeof RW.blogs!="undefined"&&RW.blogs.inBlogsPopup==true){RW.blogs.hideBlogsPopup()}if(RW.inStickyBar==true){RW.hideSearchStickyBar()}s=i(i("#rw_keynavigation_item_template").html());q=i(i("#rw_keynavigation_empty_item_template").html());p=i(i("#rw_keynavigation_row_template").html());d=i(i("#rw_keynavigation_container_template").html()).clone();var H=new Array();if(i("#rw_blog_mode").length>0){if(i("#rw_blog_posts").length>0){var B=p.clone();B.addClass("rw_row_1");B.append(a(h));if(i(".rw_blog_info_icon").length==0){B.append(a(k))}if(i("#rw_side_menu").length>0){B.append(a(l))}d.append(B);H[0]=B;var G=p.clone();G.addClass("rw_row_2");G.append(a(b));G.append(a(u));G.append(a(b));d.append(G);H[1]=G}else{if("#blogpost_container"){var E=b;var D=b;if(i("#rw_blogpost_nav").find(".rw_prev").length>0){E=z}if(i("#rw_blogpost_nav").find(".rw_next").length>0){D=A}var B=p.clone();B.addClass("rw_row_1");B.append(a(h));B.append(a(r));if(i("#rw_side_menu").length>0){B.append(a(l))}d.append(B);H[0]=B;var G=p.clone();G.addClass("rw_row_2");G.append(a(E));G.append(a(u));G.append(a(D));d.append(G);H[1]=G}else{closeMainKeyNavigation()}}var C=p.clone();C.addClass("rw_row_3");if(RW.remoteUser!=undefined){C.append(a(e))}else{C.append(a(b))}C.append(a(c));C.append(a(n));d.append(C);H[2]=C;m(H,1,1)}else{var F=false;if(i("#rw_side_menu").length>0){F=true}var B=p.clone();B.addClass("rw_row_1");B.append(a(h));if(i("#rw_category_menu").length>0){B.append(a(t))}if(i("#rw_top_menu").length>0){B.append(a(v))}if(F){if(i("ul:visible","#rw_menu_bar").not("#rw_space_menu").length>0){B.append(a(y))}else{if(i("#rw_menu_bar_wrapper").hasClass("rw_closed")){B.append(a(y))}}}d.append(B);H[0]=B;var G=p.clone();G.addClass("rw_row_2");if(i("#rw_page_tree_wrapper").length>0){G.append(a(x))}else{G.append(a(b))}G.append(a(u));if(F){G.append(a(l))}else{if(i("ul:visible","#rw_menu_bar").not("#rw_space_menu").length>0){G.append(a(y))}else{if(i("#rw_menu_bar_wrapper").hasClass("rw_closed")){G.append(a(y))}else{G.append(a(b))}}}d.append(G);H[1]=G;var C=p.clone();C.addClass("rw_row_3");if(RW.remoteUser!=undefined){C.append(a(e))}C.append(a(n));C.append(a(c));C.append(a(g));d.append(C);H[2]=C;m(H,1,1)}i("#rw_main").append(d);d.show();i(".rw_keynavigation_item",d).bind("click",function(J){i(".rw_selected",d).removeClass("rw_selected");i(this).addClass("rw_selected");var I=i(this).parent().index();var K=i(this).index();i(document).unbind("keydown.bottomkeynav");m(H,I,K)})};RW.closeMainKeyNavigation=function(){i(document).unbind("keydown.bottomkeynav");var B=i(".rw_keynavigation_container").find(".rw_selected");if(B!=undefined){o(B)}i(".rw_keynavigation_container").remove()};RW.startMenuKeyNavigation=function(){RW.quitKeyable();var C=new Array();var E;if(parseInt(AJS.version)>=5&&i("#rw_content_menu").length>0){E=i("#rw_content_menu")}else{E=i(".rw_toolbar_menu")}var D=0;i.each(i(E).get().reverse(),function(){i.each(i(this).children("li:visible"),function(){C[D]=this;D++})});if(parseInt(AJS.version)<5){if(i("#notifications-anchor").length>0){C[D]=i("#notifications-anchor");D++}}var B=0;if(i(".rw_current",E).length>0){B=i(".rw_current",E).html();i(".rw_current",E).remove();i(C[B]).removeClass("dropdown_open")}if(C.length>0){i(C[B]).addClass("rw_selected")}i(".rw_current",E).remove();RW.inMenuBarNavigation=true;RW.scrollToElementWithOffset(i(C[B]),100);i("li",E).mouseenter(function(){RW.stopMenuKeyNavigation();i("li",E).unbind("mouseenter")});i(document).bind("keydown.menukeynav",function(H){if(H.keyCode===39){if(B<C.length-1){i(C[B]).removeClass("rw_selected");B++;i(C[B]).addClass("rw_selected")}}else{if(H.keyCode===37){if(B>0){i(C[B]).removeClass("rw_selected");B--;i(C[B]).addClass("rw_selected")}}else{if(H.keyCode===38){i("#rw_menu_bar").click();H.preventDefault()}else{if(H.keyCode===13||H.keyCode===40){if(i(C[B]).hasClass("toolbar-dropdown-menu-item")||(i(C[B]).hasClass("ajs-menu-item")||(parseInt(AJS.version)>=5&&i("#rw_content_menu").length>0))){RW.quitKeyable();i(C[B]).children("a").click();i(C[B]).append("<div style='display:none' class='rw_current'>"+B+"</div>");var F=i(C[B]).find("ul");RW.startKeyable(F,"single_column","menu_dropdown",i(F).children("li:first"))}else{if(i(C[B]).is("a")){i(C[B]).trigger("click")}else{var G=i(C[B]).children("a").data("events");if(G!=null&&typeof(G.click)!==undefined){if(G.click.length>1){i(C[B]).children("a").trigger("click")}else{if(H.keyCode===13){window.location.href=i(C[B]).children("a").attr("href")}}}else{window.location.href=i(C[B]).children("a").attr("href")}}}H.preventDefault()}}}}})};RW.startConf5MenuKeyNavigation=function(){RW.quitKeyable();var C=new Array();var E=i("ul:visible","#rw_menu_bar").not("#rw_space_menu");var D=0;i.each(i(E).get().reverse(),function(){i.each(i(this).children("li:visible"),function(){C[D]=this;D++})});var B=0;if(i(".rw_current",E).length>0){B=i(".rw_current",E).html();i(".rw_current",E).remove();i(C[B]).removeClass("dropdown_open")}if(C.length>0){i(C[B]).addClass("rw_selected")}i(".rw_current",E).remove();RW.inMenuBarNavigation=true;RW.scrollToElementWithOffset(i(C[B]),100);i("li",E).mouseenter(function(){RW.stopMenuKeyNavigation();i("li",E).unbind("mouseenter")});i(document).bind("keydown.menukeynav",function(H){if(H.keyCode===39){if(B<C.length-1){i(C[B]).removeClass("rw_selected");B++;i(C[B]).addClass("rw_selected")}}else{if(H.keyCode===37){if(B>0){i(C[B]).removeClass("rw_selected");B--;i(C[B]).addClass("rw_selected")}}else{if(H.keyCode===38){i("#rw_menu_bar").click();H.preventDefault()}else{if(H.keyCode===13||H.keyCode===40){if(i(C[B]).hasClass("toolbar-dropdown-menu-item")||(i(C[B]).hasClass("ajs-menu-item"))){RW.quitKeyable();var F=i("#action-menu").find("ul");i(C[B]).children("a").click();i(C[B]).append("<div style='display:none' class='rw_current'>"+B+"</div>");i(".assistive",F).hide();RW.startKeyable(F,"single_column","menu_dropdown",i(F).children("li:first"))}else{var G=i(C[B]).children("a").data("events");if(G!=null&&typeof(G.click)!==undefined){i(C[B]).children("a").trigger("click")}else{window.location.href=i(C[B]).children("a").attr("href")}}H.preventDefault()}}}}})};RW.stopMenuKeyNavigation=function(){i(document).unbind("keydown.menukeynav");i(".rw_toolbar_menu").find(".rw_selected").removeClass("rw_selected")};function o(C){var B=i(C).children(".rw_keynavigation_item_target").html();if(B==u){if(new Date().getTime()-j<f&&!w){if(i("#rw_menu_bar").length>0&&i("#rw_category_menu").length>0){B=t}}}if(B==t){if(RW.inCategoryKeyNavigation){RW.quitCategoryKeyNavigation()}else{RW.startCategoryKeyNavigation()}}else{if(B==y){if(i("#rw_menu_bar_button").length>0&&i("#rw_menu_bar_wrapper").hasClass("rw_closed")){i("#rw_menu_bar_button").click()}if(parseInt(AJS.version)>=5){RW.startConf5MenuKeyNavigation()}else{RW.startMenuKeyNavigation()}}else{if(B==x){if(RW.inPageTree){RW.startPageTreeNavigation()}}else{if(B==e){if(RW.inFavPageAndSpace){RW.hideFavourite()}else{RW.showFavourite()}}else{if(B==v){if(RW.inTopMenu){RW.hideTopMenu()}else{RW.showTopMenu(true)}}else{if(B==n){if(RW.activity.inActivityPopup){RW.hideActivitiyStream()}else{RW.showActivitiyStream()}}else{if(B==r){i("#rw_blogpost_nav").find(".rw_all").click()}else{if(B==A){i("#rw_blogpost_nav").find(".rw_next").click()}else{if(B==z){i("#rw_blogpost_nav").find(".rw_prev").click()}else{if(B==k){window.location.href=contextPath+"/blog"}else{if(B==h){window.location.href=contextPath+"/homepage.action"}else{if(B==g){window.location.href=contextPath+"/blog"}else{if(B==c){RW.showSearch()}else{if(B==l){RW.sideMenu.startKeyNav()}}}}}}}}}}}}}}}function a(B){var C;if(B==null||B==b){C=q.clone()}else{C=s.clone();i(C).children(".rw_keynavigation_item_target").html(B);i(C).children(".rw_item_content").html(AJS.I18n.getText("rw.keynav."+B));C.attr("id","rw_navigation_item_"+B)}return C}function m(D,F,H){var J=D[F];var E=i(".rw_keynavigation_item, .rw_keynavigation_empty_item",J);var I=i(".rw_keynavigation_item",J);var B=i(".rw_keynavigation_empty_item",J);var C;if(B.length==1&&i(B.get(0)).index()==2){C=0}else{C=E.length-I.length}H=H-C;if(H>=I.length){H=I.length-1}if(H<0){H=0}var G=I[H];i(G).addClass("rw_selected");i(document).bind("keydown.bottomkeynav",function(L){if(L.keyCode===78){return}if(L.keyCode===13){RW.closeMainKeyNavigation();return}i(".rw_selected",d).removeClass("rw_selected");if(L.keyCode===38){w=true;if(F==0){i(G).addClass("rw_selected")}else{var K;if(E.length>2&&i(E[0]).attr("id")==i(G).attr("id")){K=0}else{if(E.length>2&&i(E[E.length-1]).attr("id")==i(G).attr("id")){K=D[F-1].children("div").length-1}else{K=Math.floor(D[F-1].children("div").length/2)}}m(D,F-1,K)}L.preventDefault()}else{if(L.keyCode===39){w=true;if((H+1)<I.length){H=H+1;i(G).removeClass("rw_selected");G=I[H];i(G).addClass("rw_selected")}else{i(G).addClass("rw_selected")}}else{if(L.keyCode===37){w=true;if(H>0){H=H-1;i(G).removeClass("rw_selected");G=I[H];i(G).addClass("rw_selected")}else{i(G).addClass("rw_selected")}}else{if(L.keyCode===40){w=true;if(D.length>(F+1)){i(document).unbind("keydown.bottomkeynav");var K;if(E.length>2&&i(E[0]).attr("id")==i(G).attr("id")){K=0}else{if(E.length>2&&i(E[E.length-1]).attr("id")==i(G).attr("id")){K=D[F+1].children("div").length-1}else{K=Math.floor(D[F+1].children("div").length/2)}}m(D,F+1,K)}else{i(G).addClass("rw_selected")}L.preventDefault()}else{if(L.keyCode===13){RW.closeMainKeyNavigation()}}}}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/breadcrumbs-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Breadcrumbs==="undefined"){RW.Breadcrumbs={}}(function(f){var l=true;var g=true;var b;var n;var i=f('<span class="rw_css_arrow_right"></span><span class="rw_css_arrow_right_border"></span>');var p=f('<span class="rw_css_arrow_left"></span><span class="rw_css_arrow_left_border"></span>');var m=f('<span class="rw_pointer"><span></span></span>');var a;var j;AJS.toInit(function(){var q=f("#rw_main");var r=f("#rw_breadcrumbs_link",q);if(r.length>0){AJS.InlineDialog(r,"rw_breadcrumbs_dialog",function(t,s,u){j=undefined;n=f(f("#rw_icon_content_item_template").html());a=f(RW.Templates.loader({type:"circle",bg:"gray"}));t.html(a.clone());k(AJS.params.pageId,t);u()},{width:700,hideDelay:null})}});function k(r,q){f.ajax({url:contextPath+"/rest/originaltheme/1.0/page/"+r+"/breadcrumbs",type:"GET",cache:false,success:function(s){var u=f(f("#rw_section_template").html()).clone();u.addClass("rw_breadcrumb_list");q.html(u);h(u);if(s.categories!=null&&s.categories!=undefined){d(u,s.categories)}c(u,s.space);e(u,s.pages);var t=f("li",u).last();t.addClass("rw_active")},error:function(s){}})}function h(q){var r=n.clone();f("span.rw_item_content",r).html("Dashboard");f("span.rw_item_icon",r).addClass("rw_icon_container_20 rw_icon_dashboard");f("a",r).attr("href",contextPath+"/dashboard.action").append(i.clone()).attr("id","rw_breadcrumb_dashboard").attr("title","Dashboard");q.append(r.addClass("rw_first"))}function c(q,s){var r=n.clone();f("span.rw_item_content",r).html(s.name);f("span.rw_item_icon",r).addClass("rw_icon_container_20 rw_icon_space");f("a",r).attr("href",contextPath+"/display/"+s.key).append(i.clone()).attr("id","rw_breadcrumb_space_"+s.key).attr("title",RW.htmlDecode(s.name));q.append(r);o(r)}function d(q,r){var s=f("#rw_category_menu_parameters #rw_disable_subdashboards").html();f.each(r,function(u){var t=n.clone();f("span.rw_item_content",t).html(RW.htmlEncode(this.name));f("span.rw_item_icon",t).remove();if(u==0||s==="false"){f("a",t).attr("href",contextPath+"/category/"+this.nameKey).append(i.clone()).attr("id","rw_breadcrumb_category_"+this.nameKey).attr("title",this.name)}else{f("a",t).append(i.clone()).attr("id","rw_breadcrumb_category_"+this.nameKey).addClass("rw_no_link")}q.append(t);o(t)})}function e(r,q){f.each(q,function(){var s=n.clone();f("span.rw_item_content",s).html(this.name);f("span.rw_item_icon",s).remove();if(this.url!=undefined){f("a",s).attr("href",this.url).attr("title",RW.htmlDecode(this.name))}else{f("a",s).addClass("rw_no_link")}f("a",s).append(i.clone()).attr("id","rw_breadcrumb_page_"+this.id);r.append(s);o(s)})}function o(s){var q=s.offset().top;if(j!=undefined&&q!=j){s.addClass("rw_new_row");f("a",s).append(p.clone()).append(m.clone());var r=s.prev();r.addClass("rw_last");f("a",r).append(m.clone())}j=q}RW.Breadcrumbs.displayInSimpleMenu=function(){if(f("#rw_simple_menu_breadcrumbs").length>0){j=undefined;n=f(f("#rw_icon_content_item_template").html());a=f(RW.Templates.loader({type:"circle",bg:"gray"}));f("#rw_simple_menu_breadcrumbs").html(a.clone());k(AJS.params.pageId,f("#rw_simple_menu_breadcrumbs"))}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/pages/label-popup-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(g){var k=0;var h=10;var m=0;var n=10;var d;var l;var b;var f;function a(u,A,v){var t=RW.getPopupWidth();var y=RW.getPopupHeight();var B=70;if(t>1200){t=1200}var w=new AJS.Dialog({width:t,height:y,id:"rw_popup_dialog"});w.addButton("Classic Label View",function(){window.location=v},"rw_left");w.addButton("Close",function(){w.remove();RW.hideLoader()});var z="All content with label \u003cb\u003e{0}\u003c/b\u003e.".replace("{0}",A);z=z.replace("<b>","");z=z.replace("</b>","");w.addHeader(z,"");l=g(g("#rw_section_with_heading_template").html()).clone();var p=l.clone();p.addClass("rw_labels_section");g("h2",p).html("Pages");g("ul",p).addClass("rw_items rw_content_list");var s=l.clone();s.addClass("rw_labels_section");g("h2",s).html("Blog Posts");g("ul",s).addClass("rw_items rw_content_list");var o=g(g("#rw_board_template").html()).clone();var x=g(g("#rw_board_column_template").html());var r=x.clone();var q=x.clone();r.css("width","50%");q.css("width","50%");if(u){r.append(s);q.append(p)}else{r.append(p);q.append(s)}o.append(r);o.append(q);w.addPanel("",o,"");w.show();d=g(g("#rw_icon_content_item_template").html());b=g(RW.Templates.loader({type:"circle",bg:"gray"}));f=g(g("#rw_more_button_template").html());c(A,k,h,s,true,f.clone());i(A,m,n,p,true,f.clone())}function c(r,v,o,p,t,u){var s=g(".rw_items",p);var q=b.clone();s.append(q);g.ajax({url:contextPath+"/rest/originaltheme/1.0/label/blogpost",type:"GET",dataType:"json",data:{label:r,"start-index":v,"max-results":o},cache:false,success:function(w){q.remove();if(w.blogPosts!=undefined&&w.blogPosts.length>0){g.each(w.blogPosts,function(){e(this,s,"blogpost")});g("li:even",s).addClass("rw_alternating")}else{s.append("<div class='rw_info_box'>"+"No items found"+"</div>")}if(t&&w.blogPosts.length==o){p.append(u);j(r,p,u,c,v,o)}if(w.blogPosts.length==o){u.show()}},error:function(w){if(w.status!=0){navigationContainer.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}})}function i(q,v,o,s,t,u){var r=g(".rw_items",s);var p=b.clone();r.append(p);g.ajax({url:contextPath+"/rest/originaltheme/1.0/label/page",type:"GET",dataType:"json",data:{label:q,"start-index":v,"max-results":o},cache:false,success:function(w){p.remove();if(w.pages!=undefined&&w.pages.length>0){g.each(w.pages,function(){e(this,r,"page")});g("li:even",r).addClass("rw_alternating")}else{r.append("<div class='rw_info_box'>"+"No items found"+"</div>")}if(t&&w.pages.length==o){s.append(u);j(q,s,u,i,v,o)}if(w.pages.length==o){u.show()}},error:function(w){if(w.status!=0){navigationContainer.html("<div class='rw_warning_box'>"+w.status+" "+w.statusText+"</div>").show()}}})}function e(p,o,u){var t=d.clone(),q=g(".rw_item_icon",t),s=g(".rw_item_content",t),r=g("a",t);q.html('<span class="rw_icon_container_16 icon-'+u+'"></span>');s.html(p.title+" <span class='rw_small_text'>("+p.spaceName+")</span>");r.attr("href",p.url);o.append(t)}function j(r,q,s,p,u,o){var t=u;s.click(function(){s.hide();t=t+o;var v=p(r,t,o,q,false,s)})}RW.initLabelClickEvent=function(o,p){o.click(function(s){s.preventDefault();var r=s.target.parentNode.className;if(s.target.nodeName=="SPAN"&&(s.target.parentNode.className).indexOf("show-labels-editor")==-1&&(s.target.parentNode.className).indexOf("no-labels-message-container")==-1){var q=s.target.innerHTML;a(p,q,s.target.parentNode.href)}else{if(s.target.nodeName=="A"&&(s.target.parentNode.className).indexOf("show-labels-editor")==-1&&(s.target.parentNode.className).indexOf("no-labels-message-container")==-1){var q=s.target.innerHTML;a(p,q,s.target.href)}}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/refinedwiki/scripts/refinedwiki.utils-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(b){var c;var a=b('<div><iframe id="rw_popup_iframe_id" onload="RW.hideLoader()" allowTransparency="true" frameBorder="0" class="rw_popup_iframe"></iframe></div>');AJS.toInit(function(){});RW.validateAjaxResponse=function(d){if(d.substring(0,4)=="RWAR"){return d.substring(4)}else{return"<div class='rw_warning_box'><a href='"+contextPath+"/login.action?os_destination="+encodeURIComponent(window.location)+"'>"+"Not logged in"+"</a></div>"}};RW.showSmallLoader=function(d){b(d).after("<div style='padding-left:5px;' class='rw_loader_16_image'></div>");b(d).remove()};RW.showLoader=function(){if(b("#rw_top_loader").length===0){b("body").prepend('<div id="rw_top_loader"><div id="rw_top_loader_container"><div class="rw_loader_32_image"></div></div></div>')}else{b("#rw_top_loader").show()}};RW.hideLoader=function(){b("#rw_top_loader").hide()};RW.showDiv=function(d){b("#"+d).show();b("#"+d+"_show").hide();b("#"+d+"_hide").show()};RW.hideDiv=function(d){b("#"+d).hide();b("#"+d+"_show").show();b("#"+d+"_hide").hide()};RW.getPopupWidth=function(){var d=b(window).width();d=d*0.9;if(d<1020){d=1020}return d};RW.getPopupHeight=function(){var d=b(window).height();d=d*0.9;if(d<600){d=600}else{if(d>900){d=900}}return d};RW.scrollToElement=function(d){RW.scrollToElementWithOffset(d,0)};RW.scrollToElementWithOffset=function(f,i){if(f!=undefined&&f.length>0){var e=b(window).scrollTop();var g=e+b(window).height();var d=f.offset().top;var h=d+f.height();if(d<e||h>g){window.scroll(0,f.offset().top-i)}}};RW.scrollToElementWithOffsetAndDelay=function(f,j,i,k){if(f!=undefined&&f.length>0){var e=b(window).scrollTop();var g=e+b(window).height();var d=f.offset().top;var h=d+f.height();if(d<e||h>g){RW.isScrolling=true;if(k!=undefined){k.before.call()}b("html,body").animate({scrollTop:(f.offset().top-j)},{duration:i,complete:function(){RW.isScrolling=false;if(k!=undefined){k.complete.call()}},error:function(){RW.isScrolling=false;if(k!=undefined){k.error.call()}}})}}};RW.clearActiveMenuItems=function(d){b(".rw_active",d).removeClass("rw_active");b(".rw_active_dd",d).removeClass("rw_active_dd")};RW.setActiveMenuItem=function(d){d.addClass("rw_active")};RW.setActiveMenuItemDD=function(d){d.addClass("rw_active_dd")};RW.openIframeDialog=function(d,k,i,g){RW.showLoader();var l="rw_popup_dialog";if(i=="admin"){l="rw_popup_dialog_admin"}var h=RW.getPopupWidth();var j=RW.getPopupHeight();if(h>1200){h=1200}var e=new AJS.Dialog({width:h,height:j,id:l});if(k!=undefined||k!=""){e.addHeader(k)}e.popup.element.addClass("rw_has_iframe");var f=a.clone();b("iframe",f).attr("src",d);e.addPanel("",f,"");if(g==undefined||g==false){e.addLink("Close",function(){e.remove();RW.hideLoader()},"rw_right")}e.show();if(RW.confluenceVersion<5){e.popup.element.height(e.popup.element.height()-20)}b("iframe",f).attr("height",b(".dialog-panel-body",e.popup.element).height());return e};RW.openIframeDialogWithPanels=function(g,j,i){RW.showLoader();var e="rw_popup_dialog";if(i=="admin"){e="rw_popup_dialog_admin"}var h=RW.getPopupWidth();var f=RW.getPopupHeight();if(h>1200){h=1200}var d=new AJS.Dialog({width:h,height:f,id:e});if(j!=undefined||j!=""){d.addHeader(j)}d.popup.element.addClass("rw_has_iframe");d.addLink("Close",function(){d.remove();RW.hideLoader()},"rw_right");d.show();b.each(g,function(l){var k=a.clone();d.addPanel(this.title,k,"rw_dialog_panel",l+1);b("iframe",k).attr("src",this.url);b("iframe",k).attr("height",b(".dialog-panel-body",d.popup.element).height())});return d};RW.htmlEncode=function(d){return b("<div/>").text(d).html()};RW.htmlEncodeUrl=function(d){var e=b("<div/>").text(d).html();return e.replace("&amp;","&")};RW.htmlDecode=function(d){return b("<div/>").html(d).text()};RW.bindLink=function(f,e,g,d){if(g){f.attr("target","_blank")}f.attr("href",e).click(function(h){if(d.hasClass("rw_key_nav")){if(g){window.open(e)}else{window.location=e}h.stopPropagation();return false}else{return true}})};RW.launchUrlInBackground=function(d,e){AJS.safe.ajax({url:d,data:{},type:"POST",success:function(f){if(e){window.location.reload()}},error:function(f){}})};RW.openImage=function(d){if(c==undefined){c=new RW.ui.viewer()}var e=b("<img />");e.attr("src",d);c.content(e);e.bind("load",function(){var f=b(this).width()+30;if(f<100){f=100}var g=RW.getPopupWidth();if(f>g){f=g;b(this).width(f-30)}c.container.css("width",f);var h=RW.getPopupHeight();c.container.css("margin-top",(b(window).height()-h)/2-10)})};RW.playMovie=function(g){if(c==undefined){c=new RW.ui.viewer()}c.content('<iframe width="960" height="540" src="https://www.youtube.com/embed/'+g+'" frameborder="0" allowfullscreen></iframe>');var d=960+30;var e=RW.getPopupWidth();if(d>e){d=e;b(this).width(d-30)}c.container.css("width",d);var f=RW.getPopupHeight();c.container.css("margin-top",(b(window).height()-f)/2-10)};RW.getTimeString=function(f){if(typeof f=="string"){return f}var d=new Date();var g=d.getTime()-f;if(g<60*60*1000){var e=Math.floor(g/(60*1000));if(e==1){return "1 minute ago."}else{return AJS.format("{0} minutes ago.",["first_parameter"]).replace("first_parameter",e)}}else{if(g<24*60*60*1000){hours=Math.floor(g/(60*60*1000));if(hours==1||hours==0){return "1 hour ago."}else{return AJS.format("{0} hours ago.",["first_parameter"]).replace("first_parameter",hours)}}else{if(g<100*24*60*60*1000){days=Math.floor(g/(24*60*60*1000));if(days==1||days==0){return "1 day ago."}else{return AJS.format("{0} days ago.",["first_parameter"]).replace("first_parameter",days)}}else{return(new Date(f-0)).toLocaleDateString()}}}};RW.getDateString=function(g){if(typeof g=="string"){return g}var f=new Date(g);var e=new Date();var d=new Date();d.setDate(d.getDate()+1);var h=new Date();h.setDate(h.getDate()-1);if(e.toLocaleDateString()==f.toLocaleDateString()){return "rw.global.today"}else{if(d.toLocaleDateString()==f.toLocaleDateString()){return "rw.global.tomorrow"}else{if(h.toLocaleDateString()==f.toLocaleDateString()){return "rw.global.yesterday"}else{return(new Date(g-0)).toLocaleDateString()}}}};RW.renderStatusUpdate=function(d){var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;d=d.replace(e,"<a href='$1'>$1</a>");var f=/((^)#[A-Za-z0-9\-\_]+)/g;d=d.replace(f,"<a href='"+contextPath+"/label/$1'>$1</a>");var f=/((\s)#[A-Za-z0-9\-\_]+)/g;d=d.replace(f," <a href='"+contextPath+"/label/$1'>$1</a>");d=d.replace("/label/#","/label/");return d};RW.applyTooltip=function(d,f){var e={live:true,gravity:"w",title:"data-tooltip",delayIn:250,delayOut:0,offset:5};if(RW.confluenceVersion>=4.4){b(d).tooltip(f?b.extend(e,f):e)}};RW.applyTooltipToElement=function(d,f){var e={live:true,gravity:"w",title:"data-tooltip",delayIn:250,delayOut:0,offset:5};if(RW.confluenceVersion>=4.4){d.tooltip(f?b.extend(e,f):e)}};RW.removeTooltip=function(){b(".tipsy").remove();setTimeout(function(){b(".tipsy").remove()},250)};RW.adjustIconTextSpace=function(e){var d=b(".rw_item_icon",e).length;if(d>0&&d<b("li",e).length){b("li",e).each(function(){if(b(".rw_item_icon",this).length===0){b("a",this).prepend('<span class="rw_item_icon"></span>')}})}};RW.message=function(i,g){var h={delay:4000,type:"success"};var f=i?b.extend(h,i):h;if(b("#rw_message_container").length===0){b("body").prepend('<div id="rw_message_container"></div>')}var e=b("#rw_message_container");e.unbind().html("");var d=b('<div class="rw_message"></div>');d.html(g).addClass("rw_"+f.type);e.append(d);e.show();e.delay(f.delay).fadeOut(function(){d.remove()})};RW.initPubSub=function(){if(RW.PubSub===undefined){RW.PubSub=RW._.extend({},RW.Backbone.Events)}};RW.colorLuminance=function(g,d){g=String(g).replace(/[^0-9a-f]/gi,"");if(g.length<6){g=g[0]+g[0]+g[1]+g[1]+g[2]+g[2]}d=d||0;var e="",h,f;for(f=0;f<3;f++){h=parseInt(g.substr(f*2,2),16);h=Math.round(Math.min(Math.max(0,h+(h*d)),255)).toString(16);e+=("00"+h).substr(h.length)}return e};RW.getLuminanceValue=function(f){f=String(f).replace(/[^0-9a-f]/gi,"");if(f.length<6){f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]}var d;var e=0;for(d=0;d<3;d++){e+=parseInt(f.substr(d*2,2),16)}return e}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/refinedwiki/scripts/refinedwiki.ui-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.ui==="undefined"){RW.ui={}}(function(b){var a;RW.ui.viewer=function(g){var f=this;var e=b(b("#rw_viewer_template").html()).clone();e.attr("id",g);var d=b(".rw_viewer_close",e);var c=b(".rw_viewer_container",e);b("body").append(e);this.show=function(){f.isOpened=true;e.show()};this.hide=function(){f.isOpened=true;e.hide()};this.showLoader=function(){b(".rw_viewer_loader",e).show()};this.hideLoader=function(){b(".rw_viewer_loader",e).hide()};this.content=function(h){e.show();f.hideLoader();b(".rw_viewer_data",e).html(h)};this.clear=function(h){b(".rw_viewer_data",e).html("")};this.obj=e;this.closeButton=d;this.container=c;this.isOpened=false;e.bind("click",function(h){f.hide()});d.bind("click",function(h){f.hide()});c.bind("click",function(h){h.stopPropagation()});b(document).keyup(function(h){if(h.keyCode==27){if(f.isOpened==true){f.hide()}}});return this}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/footer/footer-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(h){if(typeof RW.Footer==="undefined"){RW.Footer={}}var o="footer-column-links";var f="footer-column-logo";var a="footer-column-blogs";var s="footer-column-custom";var j=300;var n=h('<li><a><span class="rw_item_icon rw_icon_container_20"></span><span class="rw_item_content"></span></a></li>');var l=h('<li><a><span class="rw_item_icon"></span><span class="rw_item_content"></span></a></li>');var k=h('<a class="rw_edit_button"></a>');var q;var c;var b;AJS.toInit(function(){if(h("#rw_footer_wrapper").length>0){v()}});function v(){q=h("#rw_footer_wrapper");c=h("#rw_footer_container");b=h("#rw_main");m();if(RW.isConfluenceAdministrator){var w=k.clone();w.attr("href",contextPath+"/admin/originaltheme/footer.action").attr("title","Edit");h("#rw_footer_container",q).append(w)}d()}function m(){var w=c.height()+80;b.css("padding-bottom",w+100);q.css("height",w)}function e(){var w=h("#rw_footer_columns",q);var x=h(".rw_column",w).length;h("#rw_footer_columns_container",q).css("max-width",x*j).show()}function d(){h.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/footer/",dataType:"json",contentType:"application/json",cache:false,success:function(w){if(w.columns!=undefined){h.each(w.columns,function(){if(this.type===o){u(this)}if(this.type===a){i(this)}})}if(w.cacheAbort){t()}},error:function(w){if(w.status!=0){console.log(w.status+" "+w.statusText)}}}).done(function(){t()})}function t(){e();m();r()}function r(){if((".rw_custom_content",q).length>0){setInterval(function(){m()},1000)}}function u(y){var x=h("#rw_footer_column_"+y.nameKey,q);var w=h("ul",x);if(x.length==0){return}var z=false;if(y.links!=undefined){h.each(y.links,function(){z=true;p(this,w)})}if(z){if(y.name!=undefined&&y.name!=""){h("h3",x).html(RW.htmlEncode(y.name))}else{h("h3",x).remove()}RW.adjustIconTextSpace(w)}else{x.remove()}}function i(x){var w=h("#rw_footer_column_"+x.nameKey,q);var z=h("ul",w);if(w.length==0){return}var y=false;w.unbind("blog-url:done");w.bind("blog-url:done",function(C,B){if(B!=true){B=false}var A="max-results=5&profile-pic=true&blog-mode="+B+"&keys="+x.name;h.ajax({type:"GET",url:contextPath+"/rest/originaltheme/1.0/blog/post?"+A,dataType:"json",contentType:"application/json",cache:false,success:function(D){h.each(D.blogPosts,function(){y=true;g(this,z)})},error:function(D){if(D.status!=0){console.log(D.status+" "+D.statusText)}}}).done(function(){if(y){if(x.title!=undefined&&x.title!=""){h("h3",w).html(RW.htmlEncode(x.title))}else{h("h3",w).remove()}RW.adjustIconTextSpace(z)}e();m()})});if(x.selectedMode!=undefined&&x.selectedMode=="blogMode"){w.trigger("blog-url:done",true)}else{w.trigger("blog-url:done")}}function g(A,B){if(A==undefined){return}var z=l.clone(),y=h(".rw_item_icon",z),x=h(".rw_item_content",z),w=h("a",z);x.html(A.title+"<br/><div class='rw_date'>"+A.date+"</div>");if(A.author==undefined||A.author.profilePic==undefined){y.remove()}else{y.html("<img src='"+A.author.profilePic+"' />")}w.attr("href",RW.htmlEncodeUrl(A.url));B.append(z)}function p(y,A){if(y==undefined){return}var B=n.clone(),z=h(".rw_item_icon",B),x=h(".rw_item_content",B),w=h("a",B);B.attr("id","rw_link_id_"+y.id);x.html(RW.htmlEncode(y.title));if(y.icon==undefined){z.remove()}else{z.addClass("rw_icon_"+y.icon)}if(y.target=="_blank"){w.prepend('<span class="rw_item_icon_right rw_icon_container_20 rw_icon_newwindow"></span>');w.attr("target","_blank");x.addClass("rw_icon_right")}w.attr("href",RW.htmlEncodeUrl(y.url));A.append(B)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/spacegroup-min.js' */
(function(a){AJS.toInit(function(){a("#rw_space_group_button").unbind("click");a("#rw_space_group_button").bind("click",function(){if(RW.confluenceVersion<5){var b=a(this);var d=a("#rw_space_group_dropdown");b.addClass("active");d.addClass("rw_open");var c=function(){b.removeClass("active");d.removeClass("rw_open");a(document).unbind("click",c)};setTimeout(function(){a(document).bind("click",c)},100)}a.ajax({url:contextPath+"/rest/originaltheme/1.0/category/"+AJS.Meta.get("abstract-category-key")+"/child",type:"GET",dataType:"json",success:function(e){for(var f in e.spaces){var g=e.spaces[f];g.url=contextPath+"/display/"+g.key}var h=RW.Templates.siblingList({ulClass:"aui-dropdown2-section",list:e});a("#rw_space_group_dropdown").html("");a("#rw_space_group_dropdown").append(h)},error:function(){}})})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/simple-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(e){var g;var i;var c=false;AJS.toInit(function(){g=e("#rw_simple_menu_button");if(g.length>0){i=e("#rw_simple_menu_dialog");g.click(function(j){e("#rw_wrapper").after(i);e("#rw_open_fullscreen, #rw_close_fullscreen").click(function(){a()});i.css("top",g.offset().top+30);i.css("right",e(window).width()-(g.offset().left+g.outerWidth()));f();if(!c){c=true;if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!=false){e(document).keyup(function(k){if(!e(k.target).is("input, textarea, select")){if(k.which===27){a()}}})}}j.stopPropagation()});b("#shareContentLink","#inline-dialog-shareContentPopup",83);b("#watch-content-button","#inline-dialog-confluence-watch",87);i.click(function(j){j.stopPropagation()})}if((typeof Confluence==="undefined")||Confluence.KeyboardShortcuts.enabled!==false){e("#rw_open_fullscreen").attr("title","Open page in fullscreen ( Type \'f\' )");e("#rw_close_fullscreen").attr("title",AJS.I18n.getText("rw.page.fullscreen.close.tooltip "));e("#rw_hide_left_column").attr("title","Collapse left column ( Type \'[\' )");e("#rw_show_left_column").attr("title","Expand left column ( Type \'[\' )");e("#rw_attachment_dialog_button").attr("title","Hide attachments ( Type \'esc\' )")}});function b(k,j,l){if(e(k).length>0){e(document).keyup(function(q){if(e(j).length>0&&e(j).is(":visible")){if(l!==87&&q.which===l&&Confluence.KeyboardShortcuts.enabled){if(!g.hasClass("active")){g.click()}var n=e(k).offset();var p=n.top+30;var o=n.left;var m=e(j);m.offset({top:p,left:o});m.addClass("rw_in_simple_menu")}}});e(k).on("click",function(n){var m=e(j);m.addClass("rw_in_simple_menu")})}}function f(){if(g.hasClass("active")){a()}else{h()}}function h(){g.addClass("active");i.show();RW.Breadcrumbs.displayInSimpleMenu();e(document).bind("click",d)}function d(j){var k=e(j.target).closest("#inline-dialog-shareContentPopup").length==1;if(!k){a()}}function a(){g.removeClass("active");i.hide();e(document).unbind("click",d)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-macro-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(a){AJS.toInit(function(){a(".rw_search_macro_wrapper").each(function(c){var b=a(".rw_param_space_key",this).attr("data-value");a("#rw_searchmacro_query",this).originalThemeSearch(RW._.isEmpty(b))})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/navigation/side-menu-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.sideMenu==="undefined"){RW.sideMenu={}}(function(h){var n,p,l,o=false,f,e=false,j="";SIDE_MENU_WIDTH_LIMIT=1100,MODE_RESPONSIVE="responsive",MODE_CLOSED="closed",MODE_OPEN="open";AJS.toInit(function(){n=h("#rw_side_menu");if(n.length>0){RW.sideMenu.bindDDEvents(h("a.rw_has_dd",n));j=n.data("mode");if(j===MODE_CLOSED){b()}else{if(j===MODE_OPEN){}else{f=h(window);f.resize(function(){if(f.width()>SIDE_MENU_WIDTH_LIMIT&&e){d()}else{if(f.width()<SIDE_MENU_WIDTH_LIMIT&&!e){b()}}});if(f.width()<SIDE_MENU_WIDTH_LIMIT&&!e){b()}}}k();h(".active",n).removeClass("active");h(".rw_item_"+n.data("active-item"),n).addClass("active")}});function k(){RW.PubSub.on("topmenu:loaded",m);RW.PubSub.on("favourite-popup:show",function(){c(h(".rw_item_favourite_content",n))});RW.PubSub.on("favourite-popup:hide",function(){m(h(".rw_item_favourite_content",n))});RW.PubSub.on("activity-popup:show",function(){c(h(".rw_item_activity_popup",n))});RW.PubSub.on("activity-popup:hide",function(){m(h(".rw_item_activity_popup",n))});RW.PubSub.on("search-popup:show",function(){c(h("#rw_search_popup_button",n))});RW.PubSub.on("search-popup:hide",function(){m(h("#rw_search_popup_button",n))});h("#notifications-anchor",n).click(function(){c(h(this));if(RW.confluenceVersion>=5.5){setTimeout(function(){h("#mw-deprecated-task-show-me",h("#notifications-miniview-iframe").contents()).unbind().click(function(){window.location=contextPath+"/plugins/inlinetasks/mytasks.action"})},1000)}})}function q(){if(n.hasClass("rw_mode_closed")&&!n.data("closed-events-bound")){n.data("closed-events-bound",true);h(".rw_handle, #rw_side_menu_container",n).hover(function(){n.addClass("rw_open")});h(".rw_done_cover",n).mousemove(function(){n.removeClass("rw_open");a();RW.quitKeyable()})}}function b(){e=true;h("#rw_wrapper").removeClass("rw_has_side_menu");n.addClass("rw_mode_closed");q()}function d(){e=false;h("#rw_wrapper").addClass("rw_has_side_menu");n.removeClass("rw_mode_closed")}function i(r,s){if(p!=undefined){p.hide()}var u;c(r);l=r;if(r.data("dd-bound")===undefined){r.data("dd-bound","true");var t=r.parent();u=h("nav",t);u.css("right",80);u.css("top",r.offset().top-n.offset().top+5);n.append(u.show());p=u}else{u=h("#"+r.data("dd"),n);u.show();p=u}u.click(function(v){v.stopPropagation()});if(s){setTimeout(function(){if(o===false){o=true;h(document).bind("click",a)}},100)}n.data("menu-state","active");g(r,u)}function g(r,s){if(r.attr("id")=="user-menu-link"&&RW.confluenceVersion>=5.6){h("#create-user-status-link").unbind("click");h("#create-user-status-link").bind("click",function(){a();var t=WRM.require("wr!confluence.userstatus:userstatus-resources",function(){h("#create-user-status-link").trigger("deferred.userstatus.click")});return false})}}function a(){if(p!=undefined){p.hide();m(l);n.data("menu-state","");o=false;h(document).unbind("click",a)}}function m(r){if(r!==undefined&&!r.hasClass("active")){return}h(".active",n).removeClass("active");h(".rw_item_"+n.data("active-item"),n).addClass("active")}function c(r){h(".active",n).removeClass("active");r.addClass("active")}RW.sideMenu.bindDDEvents=function(r){r.click(function(s){s.preventDefault();if(o===false){i(h(this),true)}}).hover(function(){if(n.data("menu-state")==="active"){i(h(this))}})};RW.sideMenu.startKeyNav=function(r){if(r!==undefined){}else{if(h("ul:nth-child(3) li:first-child",n).length>0){r=h("ul:nth-child(3) li:first-child",n)}else{if(h("ul:nth-child(2) li:first-child",n).length>0){r=h("ul:nth-child(2) li:first-child",n)}else{if(h("ul:first-child li:first-child",n).length>0){r=h("ul:first-child li:first-child",n)}}}}if(n.hasClass("rw_mode_closed")){n.addClass("rw_open")}RW.startKeyable(n,null,"sidebar",r)};RW.sideMenu.startDDKeyNav=function(r){var s=h("#"+r.data("dd"));RW.startKeyable(s,null,"sidebar_dd",h("div:first-child li:first-child",s))};RW.sideMenu.quitDDKeyNav=function(r){a();RW.sideMenu.startKeyNav(r)};RW.sideMenu.executeLink=function(s){RW.quitKeyable();var u=s.attr("id");var t=s.attr("href");if(u==="create-user-status-link"||u==="set-user-status-link"||u==="create-personal-space-link"||u==="keyboard-shortcuts-link"||u==="whats-new-menu-link"||u==="gadget-directory-link"||u==="confluence-about-link"||u==="view-user-history-link"){if(u==="create-user-status-link"&&RW.confluenceVersion>=5.6){a();var r=WRM.require("wr!confluence.userstatus:userstatus-resources",function(){s.trigger("deferred.userstatus.click")})}else{s.trigger("click")}}else{if(t!==undefined&&t!=="#"){if(s.attr("target")==="_blank"){window.open(t)}else{RW.showLoader();window.location=t}}else{s.trigger("click")}}if(s.hasClass("rw_has_dd")){RW.sideMenu.startDDKeyNav(s)}};RW.sideMenu.isActive=function(){if(n.length>0){if(o){return true}if(e&&n.hasClass("rw_open")){return true}if(n.hasClass("rw_key_nav")){return true}}return false};RW.sideMenu.close=function(){if(n.length>0){if(o){a()}if(e&&n.hasClass("rw_open")){n.removeClass("rw_open")}if(n.hasClass("rw_key_nav")){RW.quitKeyable()}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/search/search-popup-min.js' */
(function(b){var a;AJS.toInit(function(){if(b("#rw_search_popup_button").length>0){b("#rw_search_popup_button").click(RW.showSearch)}});RW.showSearch=function(){RW.closePopups();RW.inSearch=true;a=b(RW.Templates.searchPopup());b("#rw_main").append(a);b("#rw_popup_bg").show();a.click(function(c){c.stopPropagation()});b("#rw_search_popup_query",a).originalThemeSearch();b("#rw_search_popup_query",a).focus();setTimeout(function(){b(document).bind("click",RW.hideSearch)},100);RW.PubSub.trigger("search-popup:show")};RW.hideSearch=function(){b(document).unbind("click",RW.hideSearch);RW.inSearch=false;a.remove();b("#rw_popup_bg").hide();RW.PubSub.trigger("search-popup:hide")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/layoutboard.soy' */
// This file was automatically generated from layoutboard.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Layout == 'undefined') { RW.Templates.Layout = {}; }


RW.Templates.Layout.board = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board">');
  RW.Templates.Layout.toolBar(opt_data, output);
  var iLimit7 = opt_data.maxGroup;
  for (var i7 = 0; i7 < iLimit7; i7++) {
    output.append('<div class="rw_board"><div class="rw_board_row rw_board_group_', soy.$$escapeHtml(i7), '"></div></div>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceBoard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board">');
  RW.Templates.Layout.toolBar(opt_data, output);
  output.append('<div class="rw_board"><div class="rw_board_row rw_board_group_0"><div class="rw_menu_settings"><span class="rw_space_setting rw_spacelogo_setting" ><input data-key="spaceLogoVisible" id="rw_spacesettings_spacelogo" type="checkbox" ', (opt_data.model.spaceLogoVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Space logo"), '</span><span class="rw_space_setting"><input data-key="spaceGroupVisible" id="rw_spacesettings_spacegroup" type="checkbox" ', (opt_data.model.spaceGroupVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Space Siblings "), '</span><span class="rw_space_setting"><input data-key="menuLayoutType" id="rw_spacesettings_menubar" type="checkbox" ', (opt_data.model.menuLayoutType == 'simple') ? 'checked' : '', '> ', soy.$$escapeHtml("Concealed menu layout"), '</span></div><div id="rw_space_section_placeholder_0"></div><div id="rw_space_section_placeholder_1"></div><div class="rw_space_settings" style="text-align:right;"><span class="rw_space_setting rw_left"><input data-key="breadcrumbsVisible" id="rw_spacesettings_breadcrumbs" type="checkbox" ', (opt_data.model.breadcrumbsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Breadcrumbs "), '</span><span class="rw_space_setting"><input data-key="favouriteVisible" id="rw_spacesettings_favourite" type="checkbox" ', (opt_data.model.favouriteVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Favourite page button"), '</span><span class="rw_space_setting"><input data-key="watchVisible" id="rw_spacesettings_watch" type="checkbox" ', (opt_data.model.watchVisible) ? 'checked' : '', '>', soy.$$escapeHtml("Watch page button"), ' </span></div>');
  RW.Templates.Layout.spaceLayoutTitle(null, output);
  output.append('<div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="metaDataVisible" id="rw_spacesettings_metadata" type="checkbox" ', (opt_data.model.metaDataVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Meta data"), '</span></div><div id="rw_space_section_placeholder_2"></div>');
  RW.Templates.Layout.spaceLayoutText(null, output);
  output.append('<div id="rw_space_section_placeholder_3"></div><div class="rw_space_settings"><span class="rw_space_setting"><input data-key="likesVisible" id="rw_spacesettings_likes" type="checkbox" ', (opt_data.model.likesVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Likes"), '</span><span class="rw_space_setting"><input data-key="labelsVisible" id="rw_spacesettings_labels" type="checkbox" ', (opt_data.model.labelsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Labels"), '</span></div><div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="childrenVisible" id="rw_spacesettings_children" type="checkbox" ', (opt_data.model.childrenVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Children"), '</span></div><div class="rw_space_settings"><span class="rw_space_setting rw_block"><input data-key="commentsVisible" id="rw_spacesettings_comments" type="checkbox" ', (opt_data.model.commentsVisible) ? 'checked' : '', '> ', soy.$$escapeHtml("Comments"), '</span></div><div id="rw_space_section_placeholder_4"></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.toolBar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml(opt_data.title), '</h1><div class="aui-buttons">');
  if (opt_data.model.type != 'space' && opt_data.model.type != 'global_space') {
    RW.Templates.Button.button({cssClass: 'rw_layout_mode_button rw_tooltip', icon: 'layout', tooltip: soy.$$escapeHtml("Edit Board Layout"), content: soy.$$escapeHtml("Board Layout")}, output);
  }
  if (opt_data.model.type != 'space') {
    RW.Templates.Button.button({cssClass: 'rw_open_attachments_button rw_tooltip', tooltip: soy.$$escapeHtml("Edit attachments for this board"), content: soy.$$escapeHtml("Attachments "), icon: 'attachment'}, output);
  }
  RW.Templates.Button.button({cssClass: 'rw_versions_button rw_tooltip', icon: 'clock', tooltip: soy.$$escapeHtml("View History"), content: soy.$$escapeHtml("Version History")}, output);
  output.append('</div>');
  if (opt_data.model.type == 'space' || opt_data.model.type == 'global_space') {
    RW.Templates.Button.button({cssClass: 'rw_template_button rw_tooltip', tooltip: soy.$$escapeHtml("View space types"), content: soy.$$escapeHtml("View space types")}, output);
  } else {
    RW.Templates.Button.button({cssClass: 'rw_template_button rw_tooltip', tooltip: soy.$$escapeHtml("Start from template"), content: soy.$$escapeHtml("Start from template")}, output);
  }
  output.append((opt_data.model.layoutBoardInfo != undefined) ? (opt_data.model.layoutBoardInfo.level == opt_data.level) ? '<div class="rw_layout_board_mode ' + ((opt_data.model.layoutBoardInfo.spaceType != undefined) ? 'rw_space_type' : 'rw_custom') + '" ' + ((opt_data.model.layoutBoardInfo.spaceType != undefined) ? 'data-space-type="' + soy.$$escapeHtml(opt_data.model.layoutBoardInfo.spaceType) + '"' : '') + '>' + (((opt_data.model.layoutBoardInfo.type == 'space' || opt_data.model.layoutBoardInfo.type == 'global_space') && opt_data.model.layoutBoardInfo.spaceType != undefined) ? soy.$$escapeHtml(opt_data.model.layoutBoardInfo.spaceType) : soy.$$escapeHtml("Custom settings")) + '<span class="rw_delete_button rw_tooltip" data-confirm="' + soy.$$escapeHtml("Are you sure you want to revert to the default settings?") + '" data-tooltip="' + soy.$$escapeHtml("Revert back to the default settings ") + '">x</span></div>' : (opt_data.level == 'global') ? '<div class="rw_layout_board_mode">' + soy.$$escapeHtml("Default settings") + '</div>' : '<div class="rw_layout_board_mode">' + soy.$$escapeHtml("Global settings ") + '</div>' : '', '</div><div class="aui-toolbar2-secondary"><div class="rw_unsaved_changes">', soy.$$escapeHtml("Unsaved changes"), '</div>');
  RW.Templates.Button.button({cssClass: 'rw_preview_button', content: soy.$$escapeHtml("Preview")}, output);
  RW.Templates.Button.button({cssClass: 'rw_save_button aui-button-primary', content: soy.$$escapeHtml("Save")}, output);
  RW.Templates.Button.button({cssClass: 'rw_select_space_type_button rw_hidden aui-button-primary', content: soy.$$escapeHtml("Save space type")}, output);
  RW.Templates.Button.button({cssClass: 'rw_cancel_button aui-button-link', content: soy.$$escapeHtml("Cancel")}, output);
  output.append('</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.boardLayout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_layout_mode rw_edit_section_board rw_', soy.$$escapeHtml(opt_data.model.type), '_board" data-id="', soy.$$escapeHtml(opt_data.model.id), '"><div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml("Board Layout"), '</h1></div><div class="aui-toolbar2-secondary"><div class="rw_unsaved_changes">', soy.$$escapeHtml("Unsaved changes"), '</div>');
  RW.Templates.Button.button({cssClass: 'rw_layout_mode_done_button aui-button-primary', content: soy.$$escapeHtml("Done")}, output);
  RW.Templates.Button.button({cssClass: 'rw_layout_mode_cancel_button aui-button-link', content: soy.$$escapeHtml("Cancel")}, output);
  output.append('</div></div></div></div><div class="rw_layout_board_content"><div class="rw_layout_button_container">');
  RW.Templates.Button.add({cssClass: 'rw_add_top_section_button aui-button-link rw_tooltip', tooltip: soy.$$escapeHtml("Add section")}, output);
  output.append('</div>');
  var iLimit227 = opt_data.maxGroup;
  for (var i227 = 0; i227 < iLimit227; i227++) {
    output.append('<div class="rw_board"><div class="rw_board_group_', soy.$$escapeHtml(i227), '"></div></div>');
  }
  output.append('<div class="rw_layout_button_container">');
  RW.Templates.Button.add({cssClass: 'rw_add_bottom_section_button aui-button-link rw_tooltip', tooltip: soy.$$escapeHtml("Add section")}, output);
  output.append('<div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.boardVersions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_board rw_version_mode"><div class="rw_layout_board_toolbar"><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><h1>', soy.$$escapeHtml("Version History"), '</h1></div><div class="aui-toolbar2-secondary">');
  RW.Templates.Button.button({cssClass: 'rw_version_mode_done_button aui-button-primary', content: soy.$$escapeHtml("Done")}, output);
  output.append('</div></div></div></div><div class="rw_layout_board_content">', (opt_data.defaultBoard) ? '<div class="rw_info_box">' + soy.$$escapeHtml("A default board is currently in use. Below you can find previous versions of this board.") + '</div>' : '');
  if (opt_data.versionsModel.versions.length > 0) {
    output.append('<ul class="rw_items rw_versions"><li class="rw_heading" ><div class="rw_item_version">', soy.$$escapeHtml("Version"), '</div><div class="rw_item_date">', soy.$$escapeHtml("Date"), '</div><div class="rw_item_author">', soy.$$escapeHtml("Changed By"), '</div><div class="rw_item_operations">', soy.$$escapeHtml("Operations"), '</div><div class="rw_item_comment">', soy.$$escapeHtml("Comment"), '</div></li>');
    var versionList266 = opt_data.versionsModel.versions;
    var versionListLen266 = versionList266.length;
    for (var versionIndex266 = 0; versionIndex266 < versionListLen266; versionIndex266++) {
      var versionData266 = versionList266[versionIndex266];
      output.append('<li class="rw_item" data-id="', soy.$$escapeHtml(versionData266.versionNumber), '"><div class="rw_item_version">', soy.$$escapeHtml(versionData266.versionNumber), '</div><div class="rw_item_date">', (versionData266.date) ? soy.$$escapeHtml(versionData266.date) : '', '</div><div class="rw_item_author">', (versionData266.author) ? '<a class="confluence-userlink userlink-0" data-username="' + soy.$$escapeHtml(versionData266.author.username) + '" href="/display/~' + soy.$$escapeHtml(versionData266.author.username) + '" title="' + soy.$$escapeHtml(versionData266.author.fullName) + '">' + soy.$$escapeHtml(versionData266.author.fullName) + '</a>' : '', '</div><div class="rw_item_operations">');
      if (! (versionIndex266 == 0) || opt_data.defaultBoard) {
        RW.Templates.Button.button({cssClass: 'rw_layout_revert_button', content: soy.$$escapeHtml("Restore this version")}, output);
        RW.Templates.Button.button({cssClass: 'rw_layout_preview_button', content: soy.$$escapeHtml("Preview")}, output);
        RW.Templates.Button.button({cssClass: 'rw_layout_delete_button', content: soy.$$escapeHtml("Delete"), dataConfirm: soy.$$escapeHtml(AJS.format("This will delete version {0} of this board, are you sure?",versionData266.versionNumber))}, output);
        output.append('<div class="data_param_add_comment" style="display:none;">', soy.$$escapeHtml("Add comment"), '</div><div class="data_param_default_comment" style="display:none;">', soy.$$escapeHtml("Restored to version"), ' ', soy.$$escapeHtml(versionData266.versionNumber), '</div>');
      } else {
        output.append('<div class="aui-lozenge aui-lozenge-success">', soy.$$escapeHtml("Current version"), '</div>');
      }
      output.append('</div><div class="rw_item_comment">', soy.$$escapeHtml(versionData266.comment), '</div></li>');
    }
    output.append('</ul>');
  } else {
    output.append(soy.$$escapeHtml("There are no previous versions available."));
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.restoreVersion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="rw_restore_version_form" title="', soy.$$escapeHtml("Restore this version"), '"><p>', soy.$$escapeHtml("Are you sure you want to revert the content back to this previous version?"), '</p><form class="aui" onkeypress="return event.keyCode != 13;"><div class="field-group"><label for="comment">', soy.$$escapeHtml("Add comment"), '</label><input type="text" name="comment" class="text long-field" id="comment-field" class="" value="" maxlength="100"/></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_board_column" ', (opt_data.section.width) ? 'style="width:' + soy.$$escapeHtml(opt_data.section.width) + '%"' : '', '><ul class="rw_board_items rw_layout_section" id="rw_section_', soy.$$escapeHtml(opt_data.section.id), '" data-id="', soy.$$escapeHtml(opt_data.section.id), '" ><div class="rw_add_item_container">');
  RW.Templates.Button.button({cssClass: 'rw_add_item_button rw_tooltip', content: soy.$$escapeHtml("Add"), tooltip: soy.$$escapeHtml("Add new item")}, output);
  output.append('</div></ul></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.editableSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_layout_section rw_editable_section rw_middle_section" id="rw_section_', soy.$$escapeHtml(opt_data.section.id), '" data-id="', soy.$$escapeHtml(opt_data.section.id), '" style="width:', soy.$$escapeHtml(Math.round(opt_data.section.width)), '0px">', (opt_data.section.items.length > 0) ? '<span class="rw_section_has_content rw_tooltip" data-tooltip="' + soy.$$escapeHtml("This section contains content and can\x27t be deleted") + '">' + soy.$$escapeHtml("Has content") + '</span>' : '<span class="rw_remove_section_button rw_tooltip" data-tooltip="' + soy.$$escapeHtml("Remove section") + '">X</span>', '<h1>', soy.$$escapeHtml(Math.round(opt_data.section.width)), '%</h1></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li id="rw_item_', soy.$$escapeHtml(opt_data.item.id), '" data-id="', soy.$$escapeHtml(opt_data.item.id), '" class="rw_item rw_item_board">', (opt_data.content) ? '<ul class="rw_items rw_item_preview">' + opt_data.content + '</ul>' : '', '<div class="rw_item_operations">');
  RW.Templates.Button.button({cssClass: 'rw_open_editor rw_tooltip', content: soy.$$escapeHtml("Edit"), tooltip: soy.$$escapeHtml("Open in editor")}, output);
  RW.Templates.Button.button({cssClass: 'rw_remove_item rw_tooltip', content: soy.$$escapeHtml("Remove"), tooltip: soy.$$escapeHtml("Remove this item")}, output);
  output.append('</div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.addItemDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_layout_board_dialog"><div class="rw_board rw_primary"><div class="rw_board_column"><ul class="rw_items rw_quicklinks">');
  var macroList406 = opt_data.defaultMacros;
  var macroListLen406 = macroList406.length;
  for (var macroIndex406 = 0; macroIndex406 < macroListLen406; macroIndex406++) {
    var macroData406 = macroList406[macroIndex406];
    if (macroIndex406 % 2 == 0) {
      RW.Templates.Layout.macroItem({macro: macroData406}, output);
    }
  }
  output.append('</ul></div><div class="rw_board_column"><ul class="rw_items rw_quicklinks">');
  var macroList413 = opt_data.defaultMacros;
  var macroListLen413 = macroList413.length;
  for (var macroIndex413 = 0; macroIndex413 < macroListLen413; macroIndex413++) {
    var macroData413 = macroList413[macroIndex413];
    if (macroIndex413 % 2 != 0) {
      RW.Templates.Layout.macroItem({macro: macroData413}, output);
    }
  }
  output.append('</ul></div></div><div class="rw_board rw_secondary"><div class="rw_board_column"><button class="aui-button aui-button-primary"  id="rw_macrobrowser_button">', soy.$$escapeHtml("Add macro"), '</button></div><div class="rw_board_column"><p><strong>', soy.$$escapeHtml("OR"), '</strong></p></div><div class="rw_board_column"><button class="aui-button" id="rw_editor_button">', soy.$$escapeHtml("Open Editor"), '</button></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.macroItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li data-item="', soy.$$escapeHtml(opt_data.macro.key), '" class="rw_size_large rw_quicklink_button"><div class="rw_item_icon"></div><div class="rw_item_content rw_has_icon"></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_space_board_text rw_board_column"><strong>', soy.$$escapeHtml("Page body"), '</strong></br>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h1 class="rw_space_board_title rw_board_column">', soy.$$escapeHtml("Page Title"), '</h1>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.loader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_loader_container"><div class="rw_loader_32_image"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.spaceLayoutBlueprint = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_board"><div class="rw_board_column" style="width:500px; padding:0px;"><div id="rw_layout_template_chooser"><ul class="rw_items"><li><a data-template-key="global" class="rw_selected"><h4>', soy.$$escapeHtml("Global Space Layout"), '</h4><span>', soy.$$escapeHtml("Use the default space layout defined by your administrator. "), '</span></a></li>');
  var templateList446 = opt_data.model.templates;
  var templateListLen446 = templateList446.length;
  for (var templateIndex446 = 0; templateIndex446 < templateListLen446; templateIndex446++) {
    var templateData446 = templateList446[templateIndex446];
    output.append('<li><a data-template-key="', soy.$$escapeHtml(templateData446.key), '"><h4>', soy.$$escapeHtml(templateData446.name), '</h4><span>', soy.$$escapeHtml(templateData446.description), '</span></a></li>');
  }
  output.append('<li><a data-template-key="custom"><h4>', soy.$$escapeHtml("Custom Space Layout"), '</h4><span>', soy.$$escapeHtml("Create a custom space layout. You will be redirected to the space layout editor"), '</span></a></li></ul></div></div><div class="rw_board_column" style="padding:20px;" ><h3>', soy.$$escapeHtml("About Space Layouts"), '</h3><p>', soy.$$escapeHtml("The space layout defines the functionality which will be available on all pages in your space. Use the global, create a custom or choose one of the predefined."), '</p></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.templateList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="rw_layout_template_chooser"><ul class="rw_items">');
  var templateList466 = opt_data.model.templates;
  var templateListLen466 = templateList466.length;
  for (var templateIndex466 = 0; templateIndex466 < templateListLen466; templateIndex466++) {
    var templateData466 = templateList466[templateIndex466];
    output.append('<li><a id="rw_template_', soy.$$escapeHtml(templateData466.key), '" data-template-key="', soy.$$escapeHtml(templateData466.key), '"><h4>', soy.$$escapeHtml(templateData466.name), '</h4><span>', soy.$$escapeHtml(templateData466.description), '</span></a></li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.macroPreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li class="rw_macro_preview"><div class="rw_item_icon">', (opt_data.macro.icon) ? '<img src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.macro.icon.location) + '"/>' : '<span class="icon-' + soy.$$escapeHtml(opt_data.macro.name) + '"></span>', '</div>', (opt_data.macro.hasEdit) ? '<div class="rw_item_edit"><div class="rw_edit_macro rw_tooltip" data-tooltip="' + soy.$$escapeHtml("Edit macro") + '"></div></div>' : '', '<div class="rw_item_content ', (opt_data.macro.hasEdit) ? 'rw_has_edit' : '', '">', (opt_data.macro.title) ? soy.$$escapeHtml(opt_data.macro.title) : soy.$$escapeHtml(opt_data.macro.name), '</div>', (opt_data.macro.body) ? '<div class="rw_item_body"><span>' + soy.$$escapeHtml("This macro has a body") + '</span></div>' : '', (opt_data.macro.paramDesc) ? '<div class="rw_item_parameters">' + opt_data.macro.paramDesc + '</div>' : '', '</li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.itemPreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="rw_content_preview">', opt_data.content, '</li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.imagePreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="rw_image_preview"><div>', opt_data.image, '</div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Layout.customLayoutBoardList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  if (opt_data.type == 'spaces') {
    output.append('<p>', soy.$$escapeHtml("Here you will find all spaces with custom space layouts"), '</p><ul class="rw_items">');
    var spaceList536 = opt_data.list;
    var spaceListLen536 = spaceList536.length;
    for (var spaceIndex536 = 0; spaceIndex536 < spaceListLen536; spaceIndex536++) {
      var spaceData536 = spaceList536[spaceIndex536];
      output.append('<li data-key="', soy.$$escapeHtml(spaceData536.key), '" data-name="', soy.$$escapeHtml(spaceData536.name), '"><div>', soy.$$escapeHtml(spaceData536.name), ' <span class="rw_small_text">(', soy.$$escapeHtml(spaceData536.key), ')</span>', (spaceData536.type == 'space') ? '<div class="rw_layout_board_mode rw_custom">' + soy.$$escapeHtml("Custom Space Layout") + '</div>' : '<div class="rw_layout_board_mode rw_space_type">' + soy.$$escapeHtml(spaceData536.type) + '</div>', '<a href="', soy.$$escapeHtml(""), '/spaces/refinedwiki/edit-space-layout.action?key=', soy.$$escapeHtml(spaceData536.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("Edit"), '</a><a href="', soy.$$escapeHtml(""), '/display/', soy.$$escapeHtml(spaceData536.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("View"), '</a></div></li>');
    }
    output.append((opt_data.list.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No items found") + '</div>' : '', '</ul>');
  } else if (opt_data.type == 'users') {
    output.append('<p>', soy.$$escapeHtml("Here you will find all users with custom user dashboards. "), '</p><ul class="rw_items">');
    var userList579 = opt_data.list;
    var userListLen579 = userList579.length;
    for (var userIndex579 = 0; userIndex579 < userListLen579; userIndex579++) {
      var userData579 = userList579[userIndex579];
      output.append('<li data-key="', soy.$$escapeHtml(userData579.key), '"><div>', soy.$$escapeHtml(userData579.key), '<div class="rw_layout_board_mode rw_custom">', soy.$$escapeHtml("Custom settings"), '</div><a href="', soy.$$escapeHtml(""), '/users/edit-user-dashboard.action?username=', soy.$$escapeHtml(userData579.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("Edit"), '</a><a href="', soy.$$escapeHtml(""), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(userData579.key), '" target="_blank" class="aui-button">', soy.$$escapeHtml("View"), '</a></div></li>');
    }
    output.append((opt_data.list.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No items found") + '</div>' : '', '</ul>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/buttons.soy' */
// This file was automatically generated from buttons.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Button == 'undefined') { RW.Templates.Button = {}; }


RW.Templates.Button.button = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<button ', (opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' class="aui-button ', (opt_data.cssClass) ? soy.$$escapeHtml(opt_data.cssClass) : '', '" ', (opt_data.href) ? 'href="' + soy.$$escapeHtml(opt_data.href) + '"' : '', ' ', (opt_data.confirm) ? 'onclick="return confirm(\'' + soy.$$escapeHtml(opt_data.confirm) + '\');"' : '', ' ', (opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', ' ', (opt_data.dataConfirm) ? 'data-confirm="' + soy.$$escapeHtml(opt_data.dataConfirm) + '"' : '', '>', (opt_data.icon) ? '<span class="icon rw_icon_' + soy.$$escapeHtml(opt_data.icon) + '_16"></span>' : '', '<span>', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</span></button>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Button.add = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="rw_button ', soy.$$escapeHtml(opt_data.cssClass), '" href="#" data-id="', soy.$$escapeHtml(opt_data.data), '" ', (opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '><span class="rw_add_gray rw_only_icon"></span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/global.soy' */
// This file was automatically generated from global.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }


RW.Templates.loader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="', (opt_data.bg == 'gray') ? 'rw_bg_gray' : (opt_data.bg == 'dark_gray') ? 'rw_bg_dark_gray' : '', ' rw_loader_box rw_padding rw_corners ">', (opt_data.type == 'circle') ? '<div class="rw_loader_32_image"></div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.ddLoader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_popup_loader" style="display:none; padding:10px 0px;"><div class="rw_popup_loader_image"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.pageTreeErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t', (opt_data.type == 'nospacelayout') ? '<span>' + soy.$$escapeHtml("Must be in context of a space. Please set the \x27space\x27 parameter to the space you want to show the pagetree for.") + '</span>' : '');
  return opt_sb ? '' : output.toString();
};


RW.Templates.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.contentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a><span class="rw_item_favourite rw_icon_container_20 rw_item_icon_right rw_loader_16_11_image"></span><span class="rw_item_content"></span></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.list = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul ', (opt_data.ulClass != 'undefined') ? 'class="' + soy.$$escapeHtml(opt_data.ulClass) + '"' : '', ' >');
  var elList36 = opt_data.list;
  var elListLen36 = elList36.length;
  for (var elIndex36 = 0; elIndex36 < elListLen36; elIndex36++) {
    var elData36 = elList36[elIndex36];
    output.append('<li><a title="', soy.$$escapeHtml(elData36.name), '" href="', soy.$$escapeHtml(elData36.url), '"><span>', soy.$$escapeHtml(elData36.name), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.siblingList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul ', (opt_data.ulClass != 'undefined') ? 'class="' + soy.$$escapeHtml(opt_data.ulClass) + '"' : '', ' >');
  var elList54 = opt_data.list;
  var elListLen54 = elList54.length;
  for (var elIndex54 = 0; elIndex54 < elListLen54; elIndex54++) {
    var elData54 = elList54[elIndex54];
    output.append('<li><a title="', soy.$$escapeHtml(elData54.title), '" href="', soy.$$escapeHtml(""), '/spaces/viewspace.action?key=', soy.$$escapeHtml(elData54.key), '"><span>', soy.$$escapeHtml(elData54.title), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.searchPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div id="rw_popup_search" class="rw_popup_search rw_popup"><div class="rw_search"><form style="width:0px; height:0px; overflow:hidden; "><input type="text" name="hack" onfocus="this.blur()" /></form><form class="rw_search_form" method="get" action="', soy.$$escapeHtml(""), '/dosearchsite.action"><div class="rw_search_style rw_corners"><input class="rw_search_query rw_corners" id="rw_search_popup_query" type="text" value="', soy.$$escapeHtml("Search"), '" accessKey="', soy.$$escapeHtml("search-pages-action.accesskey"), '" autocomplete="off" name="queryString" size="25" /></div><div style="clear:both;"></div><div id="rw_search_result_container" class="rw_search_result_container rw_corners" style="display:none;"></div></form></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.moreRecentlyViewed = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul><li><a href=\'#\' id=\'rw_more_recently_viewed\'><span class="rw_icon rw_iconfont_activity"></span><span class="rw_search_item_title" title=\'', soy.$$escapeHtml("More recently viewed pages..."), '\'>', soy.$$escapeHtml("More recently viewed pages..."), '</span></a></li></ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.infoBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_info_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.warningBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_warning_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.errorBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_error_box">', (opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.popup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_error_box"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/activity.soy' */
// This file was automatically generated from activity.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Activity == 'undefined') { RW.Templates.Activity = {}; }


RW.Templates.Activity.set = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_activity_set"><div class="rw_activity_set_pic"><div class="rw_profile_pic"><a class="userLogoLink"><img class="userLogo logo"></a></div></div><div class="rw_activity_set_content rw_corners"><div class="rw_author"><a class="confluence-userlink"></a></div><ul class="rw_items rw_activity_items"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><div class="rw_item_icon"><span class="rw_activity_item_icon rw_icon_container_16 "></span></div><div class="rw_item_content rw_has_icon"><div class="rw_ellipsis"><a class="rw_activity_link"></a><span class="rw_activity_space_name rw_small_text"></span></div><div class="rw_summary"></div><div class="rw_date"></div><div class="rw_thumbnail"></div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.popularSet = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_activity_set rw_activity_set_popular"><div class="rw_activity_set_pic"><div class="rw_profile_pic"><a class="userLogoLink"><img class="userLogo logo"></a></div></div><div class="rw_activity_set_content rw_corners"><ul class="rw_items rw_activity_items"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.popularItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><div class="rw_item_icon"><span class="rw_activity_item_icon rw_icon_container_16 "></span></div><div class="rw_item_content"><span class="rw_popularity_data"></span><a class="rw_activity_link"></a><div class="rw_date"></div><div class="rw_author"><a class="confluence-userlink"></a></div><div style="clear:both;"></div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.loadMoreButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="rw_load_more_activity_link" class="rw_load_more_link rw_corners" ><span class="rw_load_more_text">', soy.$$escapeHtml("More"), '</span><span style="display:none;" class="rw_loader_128_image"></span></a>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_no_items rw_activity rw_corners">', soy.$$escapeHtml("No recently updated content found."), '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Activity.replyButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a onclick="RW.showSmallLoader(this)" class="rw_button_small"></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/spaces.soy' */
// This file was automatically generated from spaces.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Spaces == 'undefined') { RW.Templates.Spaces = {}; }


RW.Templates.Spaces.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_box"><ul class="rw_content_list"></ul></div><div style="clear:both;"></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categorySection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_box"><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categoryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_category"><div class="rw_spaces_category_title"><span>', (opt_data.category && opt_data.category.name) ? soy.$$escapeHtml(opt_data.category.name) : '', '</span></div><div class="rw_spaces_category_content" ><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories">');
  if (opt_data.category && opt_data.category.subCategories) {
    var catList14 = opt_data.category.subCategories;
    var catListLen14 = catList14.length;
    for (var catIndex14 = 0; catIndex14 < catListLen14; catIndex14++) {
      var catData14 = catList14[catIndex14];
      RW.Templates.Spaces.categoryItem({category: catData14}, output);
    }
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.categoryItemWithDashboard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_category"><a class="rw_item_expand"><span></span></a><div class="rw_spaces_category_title rw_has_expand"><span>', (opt_data.category && opt_data.category.name) ? soy.$$escapeHtml(opt_data.category.name) : '', '</span></div><div class="rw_spaces_category_content" ><ul class="rw_content_list"></ul><div style="clear:both"></div><div class="rw_spaces_subcategories">');
  if (opt_data.category && opt_data.category.subCategories) {
    var catList27 = opt_data.category.subCategories;
    var catListLen27 = catList27.length;
    for (var catIndex27 = 0; catIndex27 < catListLen27; catIndex27++) {
      var catData27 = catList27[catIndex27];
      RW.Templates.Spaces.categoryItem({category: catData27}, output);
    }
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Spaces.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_spaces rw_corners">', soy.$$escapeHtml("There are no spaces at the moment."), '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/news.soy' */
// This file was automatically generated from news.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.News == 'undefined') { RW.Templates.News = {}; }


RW.Templates.News.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_news_item"><div class="rw_news_item_btn" onClick="RW.news.toggleNewsItem(this);return false;" href="#" title="', soy.$$escapeHtml("Show this news"), '" ><div class="rw_news_add_subtract"><div class="rw_item_icon"><a class="userLogoLink"><img class="userLogo logo"></a></div><div class="rw_item_content" style=""><a class="rw_caption rw_ellipsis"></a><span class="rw_date rw_rounded_3px"></span><span class="rw_space_name rw_margin_left_5px rw_rounded_3px"></span></div></div></div><div style="clear:both;"></div><div class="rw_news_item_content"><div class="rw_box_section"><span class="rw_small_text rw_author">', soy.$$escapeHtml("Written by: "), ' <a class="rw_user_link url fn confluence-userlink"></a></span><br/><div class="wiki-content"></div><div style="clear:both;"></div><a class="rw_button rw_right rw_read_more_popup rw_button_group_right rw_margin_top" title="', soy.$$escapeHtml("View in popup"), '"><span class="rw_open_popup rw_only_icon"></span></a><a class="rw_button rw_right rw_read_more_page rw_button_group_left rw_margin_top" title="', soy.$$escapeHtml("Read more"), '"><span class="rw_no_icon">', soy.$$escapeHtml("Read more"), '</span></a><a class="rw_comments_link rw_left rw_button rw_margin_top"><span class="rw_comment_gray"></span></a><div style="clear:both;"></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.itemSimple = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_news_item"><a class="rw_caption rw_ellipsis"></a><span class="rw_date rw_rounded_3px"></span><span class="rw_space_name rw_margin_left_5px rw_rounded_3px"></span><div class="wiki-content"></div><div class="rw_item_footer"><div class="rw_section"><div class="rw_read_more"><a class="rw_button rw_right rw_read_more_popup rw_button_group_right" title="', soy.$$escapeHtml("View in popup"), '"><span class="rw_open_popup rw_only_icon"></span></a><a class="rw_button rw_right rw_read_more_page rw_button_group_left" title="', soy.$$escapeHtml("Read more"), '"><span class="rw_no_icon">', soy.$$escapeHtml("Read more"), '</span></a></div><a class="url fn confluence-userlink rw_user_link"><img class="userLogo logo"><span></span></a></div></div><div style="clear:both;"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.loadMoreButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="rw_load_more_news_link" class="rw_load_more_link rw_corners_bottom" href="#" ><span class="rw_load_more_text">', soy.$$escapeHtml("More"), '</span><span style="display:none;" class="rw_loader_128_image"></span></a>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_news rw_corners">', soy.$$escapeHtml("No blog posts found."), '</div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.News.popupButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="rw_news_in_popup rw_icon_button_24 rw_right"><span class="rw_icon_container_20 rw_open_popup_small"></span></a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/admin-message.soy' */
// This file was automatically generated from admin-message.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.AdminMessage == 'undefined') { RW.Templates.AdminMessage = {}; }


RW.Templates.AdminMessage.messageList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item', (opt_data.activeTab == 'undone') ? ' active-tab' : '', '" data-key="undone"><a id="tab_button_undone" href="#tabs-messages-undone"><strong>', soy.$$escapeHtml("Unread"), '</strong></a></li><li class="menu-item', (opt_data.activeTab == 'completed') ? ' active-tab' : '', '" data-key="completed"><a id="tab_button_completed" href="#tabs-messages-completed"><strong>', soy.$$escapeHtml("Read"), '</strong></a></li></ul><div class="tabs-pane', (opt_data.activeTab == 'undone') ? ' active-pane' : '', '" id="tabs-messages-undone">');
  RW.Templates.Button.button({cssClass: 'rw_mark_all_button', content: soy.$$escapeHtml("Mark all as read")}, output);
  output.append('<ul class="rw_items rw_admin_messages">');
  var messageList26 = opt_data.messageList;
  var messageListLen26 = messageList26.length;
  for (var messageIndex26 = 0; messageIndex26 < messageListLen26; messageIndex26++) {
    var messageData26 = messageList26[messageIndex26];
    output.append((messageData26.visible == true) ? '<li data-key="' + soy.$$escapeHtml(messageData26.id) + '" class="rw_' + soy.$$escapeHtml(messageData26.type) + '"><div class="rw_item_icon"><input type="checkbox" class="markRead" ></div><div class="rw_item_content rw_has_icon"><h3>' + soy.$$escapeHtml(messageData26.title) + '</h3><span class="rw_small_text rw_date" data-date="' + soy.$$escapeHtml(messageData26.date) + '"></span><p>' + messageData26.content + '</p>' + ((messageData26.link) ? '<a target="_blank" href="' + soy.$$escapeHtml(messageData26.link) + '" class="aui-button">' + soy.$$escapeHtml("Documentation") + '</a>' : '') + '</div></li>' : '');
  }
  output.append('</ul></div><div class="tabs-pane', (opt_data.activeTab == 'completed') ? ' active-pane' : '', '" id="tabs-messages-completed"><ul class="rw_items rw_admin_messages">');
  var messageList55 = opt_data.messageList;
  var messageListLen55 = messageList55.length;
  for (var messageIndex55 = 0; messageIndex55 < messageListLen55; messageIndex55++) {
    var messageData55 = messageList55[messageIndex55];
    output.append((messageData55.visible == false) ? '<li data-key="' + soy.$$escapeHtml(messageData55.id) + '"><div class="rw_item_icon"><input type="checkbox" class="markRead" checked="checked" ></div><div class="rw_item_content rw_has_icon"><h3>' + soy.$$escapeHtml(messageData55.title) + '</h3><span class="rw_small_text rw_date" data-date="' + soy.$$escapeHtml(messageData55.date) + '"></span><p>' + messageData55.content + '</p>' + ((messageData55.link) ? '<a target="_blank" href="' + soy.$$escapeHtml(messageData55.link) + '" class="aui-button">' + soy.$$escapeHtml("Documentation") + '</a>' : '') + '</div></li>' : '');
  }
  output.append((opt_data.hasMore == true) ? '<a id="rw_load_more_messages_link" class="rw_load_more_link rw_corners"><span class="rw_load_more_text">' + soy.$$escapeHtml("More") + '</span><span class="rw_loader_128_image" style="display:none;"></span></a>' : '', '</ul></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.AdminMessage.notification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<span id="rw_notification_badge">', soy.$$escapeHtml(opt_data.count), '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/categories.soy' */
// This file was automatically generated from categories.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }


RW.Templates.categoryBlueprint = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_board"><div class="rw_board_column" style="width:500px; padding:0px;"><div id="rw_category_chooser">', (opt_data.model.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No categories found") + '</div>' : '');
  RW.Templates.abstractCategoriesList({abstractCategories: opt_data.model}, output);
  output.append('</div></div><div class="rw_board_column" style="padding:20px;"><h3>', soy.$$escapeHtml("About organizing spaces"), '</h3><p>', soy.$$escapeHtml("Spaces can be organized into categories and subcategories. The main navigation feature is based on this structure."), '</p></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.abstractCategoriesList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var abstractCategoryList18 = opt_data.abstractCategories;
  var abstractCategoryListLen18 = abstractCategoryList18.length;
  for (var abstractCategoryIndex18 = 0; abstractCategoryIndex18 < abstractCategoryListLen18; abstractCategoryIndex18++) {
    var abstractCategoryData18 = abstractCategoryList18[abstractCategoryIndex18];
    output.append('<li><a id="rw_category_item_', soy.$$escapeHtml(abstractCategoryData18.nameKey), '" data-category-key="', soy.$$escapeHtml(abstractCategoryData18.nameKey), '">', soy.$$escapeHtml(abstractCategoryData18.name), '</a>');
    if (abstractCategoryData18.subCategories != undefined) {
      RW.Templates.abstractCategoriesList({abstractCategories: abstractCategoryData18.subCategories}, output);
    }
    output.append('</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/users.soy' */
// This file was automatically generated from users.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.Users == 'undefined') { RW.Templates.Users = {}; }


RW.Templates.Users.list = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var users__soy4 = opt_data.model.users;
  var title__soy5 = opt_data.model.title;
  var layout__soy6 = opt_data.model.layout;
  var remoteUser__soy7 = opt_data.model.remoteUser;
  var description__soy8 = opt_data.model.description;
  var canSeePersonalSpace__soy9 = opt_data.model.canSeePersonalSpace;
  output.append('<div class="rw_users_container ', (layout__soy6 != undefined) ? 'rw_layout_' + soy.$$escapeHtml(layout__soy6) : '', '">', (title__soy5 != undefined) ? '<h3>' + soy.$$escapeHtml(title__soy5) + '</h3>' : '', (description__soy8 != undefined && description__soy8 != '') ? '<div class="rw_description">' + soy.$$escapeHtml(description__soy8) + '</div>' : '');
  if (layout__soy6 == 'avatar' || opt_data.columns < 2) {
    output.append('<ul class="rw_items rw_users_list">');
    var userList29 = users__soy4;
    var userListLen29 = userList29.length;
    for (var userIndex29 = 0; userIndex29 < userListLen29; userIndex29++) {
      var userData29 = userList29[userIndex29];
      output.append('<li>');
      RW.Templates.Users.userDetails({user: userData29, layout: layout__soy6, remoteUser: remoteUser__soy7, following: userData29.following, canSeePersonalSpace: canSeePersonalSpace__soy9, hipChatBaseUrl: opt_data.hipChatBaseUrl}, output);
      output.append('</li>');
    }
    output.append((users__soy4.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No users found") + '</div>' : '', '</ul>');
  } else {
    var count__soy47 = 0;
    output.append('<div class="rw_table rw_users_list"><div class="rw_table_row">');
    var userList49 = users__soy4;
    var userListLen49 = userList49.length;
    for (var userIndex49 = 0; userIndex49 < userListLen49; userIndex49++) {
      var userData49 = userList49[userIndex49];
      output.append('<div class="rw_table_cell">');
      RW.Templates.Users.userDetails({user: userData49, layout: layout__soy6, remoteUser: remoteUser__soy7, following: userData49.following, canSeePersonalSpace: canSeePersonalSpace__soy9, hipChatBaseUrl: opt_data.hipChatBaseUrl}, output);
      output.append('</div>', ((userIndex49 + 1) % opt_data.columns == 0) ? '</div><div class="rw_table_row">' : '');
    }
    output.append((users__soy4.length == 0) ? '<div class="rw_info_box">' + soy.$$escapeHtml("No users found") + '</div>' : '', '</div></div>');
  }
  output.append('</div><div style="clear:both;"></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userDetails = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  if (opt_data.user) {
    var isRemoteUser__soy74 = opt_data.user.username == opt_data.remoteUser;
    output.append('<div class="rw_user_details rw_macro ', (isRemoteUser__soy74) ? 'rw_is_remote_user' : '', '  ', (opt_data.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.layout) : '', '" data-username="', soy.$$escapeHtml(opt_data.user.username), '">', (opt_data.title != undefined) ? '<h3>' + soy.$$escapeHtml(opt_data.title) + '</h3>' : '', (isRemoteUser__soy74 && opt_data.layout != 'avatar') ? '<a class="rw_button_discrete rw_right" onclick="RW.showUserSettingsPopup();" ><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>' : '', (opt_data.user.profilePic != undefined) ? (isRemoteUser__soy74 && opt_data.user.profilePic == '/images/icons/profilepics/default.png') ? '<a class="confluence-userlink rw_profile_picture" href="' + soy.$$escapeHtml("") + '/users/editmyprofilepicture.action" data-username="' + soy.$$escapeHtml(opt_data.user.username) + '" title="" ><img class="userLogo logo" title="" alt="User icon: ' + soy.$$escapeHtml(opt_data.user.username) + '" src="' + soy.$$escapeHtml("") + '/images/icons/profilepics/add_profile_pic.png"></a>' : '<a class="confluence-userlink rw_profile_picture" href="' + soy.$$escapeHtml("") + '/users/view-user-dashboard.action?username=' + soy.$$escapeHtml(opt_data.user.username) + '" data-username="' + soy.$$escapeHtml(opt_data.user.username) + '" title="" ><img class="userLogo logo" title="" alt="User icon: ' + soy.$$escapeHtml(opt_data.user.username) + '" src="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.user.profilePic) + '"></a>' : '');
    if (opt_data.layout != 'avatar') {
      output.append('<ul class="rw_items rw_user_info_list"><li><div class="rw_item_content"><h2 class="rw_user_link"><a href="', soy.$$escapeHtml(""), '/users/view-user-dashboard.action?username=', soy.$$escapeUri(opt_data.user.username), '" title="" class="confluence-userlink rw_ellipsis" data-username="', soy.$$escapeHtml(opt_data.user.username), '">', opt_data.user.fullName, '</a></h2></div></li>', (opt_data.layout != 'simple') ? '<li><div class="rw_item_content">' + ((opt_data.user.statusText != undefined) ? '<div class="rw_status_box"><div class="rw_status_box_talk"></div><span class="status-text rw_block">' + opt_data.user.statusText + '</span>' + ((isRemoteUser__soy74) ? '<div style="float:right;">' + ((opt_data.canUpdateStatus) ? '<a class="rw_small_text rw_clear rw_update_status_button rw_padding_right_10px" style="float:none;">' + "Update Status\u2026" + '</a>' : '') + '<a class="rw_small_text rw_clear" onclick="RW.launchUrlInBackground(\'' + soy.$$escapeHtml("") + '/status/clear.action?username=' + soy.$$escapeHtml(opt_data.user.username) + '\',true)" style="float:none;">' + soy.$$escapeHtml("Clear") + '</a></div>' : '') + '<span class="rw_date rw_small_text">' + soy.$$escapeHtml(opt_data.user.statusDate) + '</span><div style="clear:both"></div></div>' : (isRemoteUser__soy74 && opt_data.canUpdateStatus) ? '<a class="rw_button rw_update_status_button"><span class="rw_no_icon">' + "Update Status\u2026" + '</span></a>' : '') + '</div></li>' : '', (opt_data.user.email) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_mail" title=\'' + soy.$$escapeHtml("Email") + '\'></div></div><div class="rw_item_content rw_has_icon"><a class="rw_email" title="' + soy.$$escapeHtml(AJS.format("Send email to {0}",opt_data.user.fullName)) + '" href="mailto:' + soy.$$escapeHtml(opt_data.user.email) + '"><span class="rw_email rw_ellipsis">' + soy.$$escapeHtml(opt_data.user.email) + '</span></a></div></li>' : '', (opt_data.user.skypeAccount != undefined && opt_data.user.skypeAccount != '') ? '<li><div class="rw_item_icon"><script type="text/javascript" src="http://download.skype.com/share/skypebuttons/js/skypeCheck.js"><\/script><a href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?call" title="Skype"><img src="http://mystatus.skype.com/mediumicon/' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '" style="border: none;" alt="" /></a></div><div class="rw_item_content rw_has_icon"><span class="rw_im_title">Skype:</span><a class="rw_button rw_im_action" href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?call" title=\'' + soy.$$escapeHtml(AJS.format("Call {0}",[opt_data.user.fullName])) + '\'><span class="rw_only_icon rw_phone"></span></a><a class="rw_button rw_im_action rw_margin_left_5px" href="skype:' + soy.$$escapeHtml(opt_data.user.skypeAccount) + '?chat" title=\'' + soy.$$escapeHtml(AJS.format("Chat with {0}",[opt_data.user.fullName])) + '\' ><span class="rw_only_icon rw_chat"></span></a></div></li>' : (opt_data.user.skypeAccount != undefined && isRemoteUser__soy74) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_skype"></div></div><div class="rw_item_content rw_has_icon"><a class="rw_button rw_im_action" onclick="RW.showUserSettingsPopup();" title=\'' + soy.$$escapeHtml("Configure") + '\' ><span class="rw_no_icon">' + soy.$$escapeHtml("Configure") + '</span></a></div></li>' : '', (opt_data.user.hipchatAccount != undefined && opt_data.user.hipchatAccount != '') ? '<li class="rw_hipchat_detail_wrapper"><div id="rw_hipchat_username" style="display:none;">' + soy.$$escapeHtml(opt_data.user.hipchatAccount) + '</div><div class="rw_item_icon"><div id="rw_hipchat_icon" class="rw_icon_container_24 rw_icon_hipchat"></div></div><div class="rw_item_content rw_has_icon"><span class="rw_im_title">HipChat:</span><a id="rw_go_to_hipchat_button" class="rw_button rw_im_action" href="' + soy.$$escapeHtml(opt_data.hipChatBaseUrl) + '/sign_in" title=\'' + soy.$$escapeHtml(AJS.format("Go to {0}",['HipChat'])) + '\' target="_blank"><span class="rw_no_icon">' + soy.$$escapeHtml(AJS.format("Go to {0}",['HipChat'])) + '</span></a></div></li>' : (opt_data.user.hipchatAccount != undefined && isRemoteUser__soy74) ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_hipchat"></div></div><div class="rw_item_content rw_has_icon"><a class="rw_button rw_im_action" onclick="RW.showUserSettingsPopup();" title=\'' + soy.$$escapeHtml("Configure") + '\' ><span class="rw_no_icon">' + soy.$$escapeHtml("Configure") + '</span></a></div></li>' : '');
      var keyList217 = soy.$$getMapKeys(opt_data.user.personalValues);
      var keyListLen217 = keyList217.length;
      for (var keyIndex217 = 0; keyIndex217 < keyListLen217; keyIndex217++) {
        var keyData217 = keyList217[keyIndex217];
        var value__soy218 = opt_data.user.personalValues[keyData217];
        output.append((value__soy218 != undefined && value__soy218 != '') ? (opt_data.layout == 'simple' && (keyData217 == 'im' || keyData217 == 'website')) ? '' : '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_' + soy.$$escapeHtml(keyData217) + '" title=\'' + soy.$$escapeHtml("confluence.user.profile.$key") + '\'></div></div><div class="rw_item_content rw_has_icon rw_ellipsis">' + ((keyData217 == 'website') ? '<a href="' + soy.$$escapeHtml(value__soy218) + '" class="rw_ellipsis" target="_blank" title="' + soy.$$escapeHtml(value__soy218) + '">' + soy.$$escapeHtml(value__soy218) + '</a>' : soy.$$escapeHtml(value__soy218)) + '</div></li>' : '');
      }
      if (opt_data.layout == 'full') {
        if (opt_data.user.uCategories && opt_data.user.uCategories.length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', (opt_data.user.uCategories.length == 1) ? soy.$$escapeHtml("Member of category:") : soy.$$escapeHtml("Member of categories:"), '</h3></div></li><li><ul class="rw_user_categories rw_category">');
          var userCategoryList253 = opt_data.user.uCategories;
          var userCategoryListLen253 = userCategoryList253.length;
          for (var userCategoryIndex253 = 0; userCategoryIndex253 < userCategoryListLen253; userCategoryIndex253++) {
            var userCategoryData253 = userCategoryList253[userCategoryIndex253];
            RW.Templates.Users.userMember({userCategory: userCategoryData253}, output);
          }
          output.append('</ul></li>');
        }
        if (opt_data.user.uSpaces && opt_data.user.uSpaces.length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', (opt_data.user.uSpaces.length == 1) ? soy.$$escapeHtml("Member of space:") : soy.$$escapeHtml("Member of spaces:"), '</h3></div></li><li><ul class="rw_user_categories rw_space">');
          var userCategoryList267 = opt_data.user.uSpaces;
          var userCategoryListLen267 = userCategoryList267.length;
          for (var userCategoryIndex267 = 0; userCategoryIndex267 < userCategoryListLen267; userCategoryIndex267++) {
            var userCategoryData267 = userCategoryList267[userCategoryIndex267];
            RW.Templates.Users.userMember({userCategory: userCategoryData267}, output);
          }
          output.append('</ul></li>');
        }
        if (opt_data.user.companyValues != undefined && soy.$$getMapKeys(opt_data.user.companyValues).length > 0) {
          output.append('<li><div class="rw_item_content rw_padding_top"><h3 class="rw_caption">', soy.$$escapeHtml("Company"), '</h3></div></li>');
          var keyList277 = soy.$$getMapKeys(opt_data.user.companyValues);
          var keyListLen277 = keyList277.length;
          for (var keyIndex277 = 0; keyIndex277 < keyListLen277; keyIndex277++) {
            var keyData277 = keyList277[keyIndex277];
            var value__soy278 = opt_data.user.companyValues[keyData277];
            output.append((value__soy278 != undefined && value__soy278 != '') ? '<li><div class="rw_item_icon"><div class="rw_icon_container_24 rw_icon_' + soy.$$escapeHtml(keyData277) + '" title=\'' + soy.$$escapeHtml("confluence.user.profile.$key") + '\'></div></div><div class="rw_item_content rw_has_icon rw_ellipsis">' + soy.$$escapeHtml(value__soy278) + '</div></li>' : '');
          }
        }
        output.append((opt_data.following == true) ? '<li><div class="rw_item_content rw_padding_top rw_unfollow" data-username="' + soy.$$escapeUri(opt_data.user.username) + '"><a class="rw_button"><span class="rw_no_icon">' + soy.$$escapeHtml("Stop Following") + '</span></a></div></li>' : (! opt_data.following) ? '<li><div class="rw_item_content rw_padding_top rw_follow" data-username="' + soy.$$escapeUri(opt_data.user.username) + '"><a class="rw_button"><span class="rw_no_icon">' + soy.$$escapeHtml("Follow") + '</span></a></div></li>' : '', (opt_data.canSeePersonalSpace) ? '<li><div class="rw_item_content rw_padding_top"><a class="rw_button" href="' + soy.$$escapeHtml("") + '/spaces/viewspace.action?key=~' + soy.$$escapeUri(opt_data.user.username) + '" title="' + soy.$$escapeHtml("View personal space ") + '"><span class="rw_space">' + soy.$$escapeHtml("Personal Space") + '</span></a></div></li>' : '');
      }
      output.append('</ul>');
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userSearch = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form class="rw_user_search_form"><div id="rw_category_attributes_container" class="rw_admin_section"><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml(opt_data.title), ':</label></div><div class="rw_input_content rw_has_input_desc rw_has_input_help"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Search to add"), '" id="rw_input_search_users"><br><div id="rw_user_search_result_container" class="rw_results_container" style="display: none;"></div><span class="rw_small_text">', soy.$$escapeHtml(opt_data.description), '</span><br><div class="rw_result_tags"><ul id="rw_users_result_container" class="rw_tag_list rw_search_result_users">');
  if (opt_data.users) {
    var userList328 = opt_data.users;
    var userListLen328 = userList328.length;
    for (var userIndex328 = 0; userIndex328 < userListLen328; userIndex328++) {
      var userData328 = userList328[userIndex328];
      if (userData328.username) {
        if (userData328.name) {
          RW.Templates.Users.resultTag({name: userData328.name, key: userData328.username}, output);
        } else if (userData328.fullName) {
          RW.Templates.Users.resultTag({name: userData328.fullName, key: userData328.username}, output);
        }
      }
    }
  }
  output.append('</ul></div></div></div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.groupSearch = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form class="rw_user_search_form"><div class="rw_input_container">', (opt_data.title) ? '<div class="rw_input_desc"><label for="groups">' + soy.$$escapeHtml(opt_data.title) + ':</label></div>' : '', '<div class="rw_input_content rw_has_input_desc"><input type="text" name="groups" placeholder="', soy.$$escapeHtml("Search to add"), '" id="rw_input_search_groups"><br><div class="rw_search_group rw_results_container" style="display: none;"></div>', (opt_data.description) ? '<span class="rw_small_text">' + soy.$$escapeHtml(opt_data.description) + '</span><br>' : '', '<div class="rw_result_tags"><ul class="rw_tag_list rw_search_result_groups">');
  if (opt_data.groups) {
    var groupList360 = opt_data.groups;
    var groupListLen360 = groupList360.length;
    for (var groupIndex360 = 0; groupIndex360 < groupListLen360; groupIndex360++) {
      var groupData360 = groupList360[groupIndex360];
      RW.Templates.Users.resultTag({name: groupData360, key: groupData360}, output);
    }
  }
  output.append('</ul></div></div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.searchResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var itemList368 = opt_data.results;
  var itemListLen368 = itemList368.length;
  for (var itemIndex368 = 0; itemIndex368 < itemListLen368; itemIndex368++) {
    var itemData368 = itemList368[itemIndex368];
    output.append('<li data-name="', (itemData368.type == 'user') ? soy.$$escapeHtml(itemData368.username) : soy.$$escapeHtml(itemData368.name), '">', (itemData368.type == 'user') ? '<img src="' + soy.$$escapeHtml(itemData368.thumbnailLink.href) + '" height="16px">' : '', '<a class="content-type-userinfo" ><span class="rw_search_item_title">', (itemData368.type == 'user') ? soy.$$escapeHtml(itemData368.title) : soy.$$escapeHtml(itemData368.name), '</span></a></li>');
  }
  output.append((opt_data.results.length == 0) ? '<span class="rw_padding">' + soy.$$escapeHtml("No search results found.") + '</span>' : '', '</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.resultTag = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li ', (opt_data.key) ? 'data-key="' + soy.$$escapeHtml(opt_data.key) + '"' : '', ' data-name="', soy.$$escapeHtml(opt_data.name), '"><span title="', soy.$$escapeHtml("Remove"), '">', opt_data.name, '<span class=\'rw_delete_button\'>X</span></span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.userMember = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li>', (opt_data.userCategory.linkingAllowed) ? (opt_data.userCategory.type == 'space') ? '<a href="' + soy.$$escapeHtml("") + '/display/' + soy.$$escapeHtml(opt_data.userCategory.key) + '" title="' + soy.$$escapeHtml(opt_data.userCategory.name) + '">' : (opt_data.userCategory.type == 'category') ? '<a href="' + soy.$$escapeHtml("") + '/category/' + soy.$$escapeHtml(opt_data.userCategory.key) + '" title="' + soy.$$escapeHtml(opt_data.userCategory.name) + '">' : '' : '<a class="rw_disabled_link">', '<span class="rw_item_name">', soy.$$escapeHtml(opt_data.userCategory.name), '</span><span class="rw_item_role">');
  if (opt_data.userCategory.roles && opt_data.userCategory.roles.length) {
    var roleList438 = opt_data.userCategory.roles;
    var roleListLen438 = roleList438.length;
    for (var roleIndex438 = 0; roleIndex438 < roleListLen438; roleIndex438++) {
      var roleData438 = roleList438[roleIndex438];
      output.append(soy.$$escapeHtml(roleData438), (roleIndex438 != opt_data.userCategory.roles.length - 1) ? ', ' : '');
    }
  }
  output.append('</span></a></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.Users.empty = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_no_items rw_users rw_corners">', soy.$$escapeHtml("No users found"), '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = '/originaltheme/templates/soy/user-categories.soy' */
// This file was automatically generated from user-categories.soy.
// Please don't edit this file by hand.

if (typeof RW == 'undefined') { var RW = {}; }
if (typeof RW.Templates == 'undefined') { RW.Templates = {}; }
if (typeof RW.Templates.UserCategory == 'undefined') { RW.Templates.UserCategory = {}; }


RW.Templates.UserCategory.addDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><form style="width:0px; height:0px; overflow:hidden; "><input type="text" name="hack" onfocus="this.blur()" /></form><form id="rw_user_category_form" class="rw_user_search_form" style=""><div id="rw_main_category_section"><div id="rw_select_category_container" class="rw_admin_section"><div class="rw_input_container"><div class="rw_input_desc" style="line-height: 34px;"><label for="groups">', soy.$$escapeHtml("Category"), ':</label></div><div class="rw_input_content rw_has_input_desc"><span class="rw_item_name">', soy.$$escapeHtml(opt_data.model.name), ' <span class="rw_small_text">(', soy.$$escapeHtml(opt_data.model.key), ')</span></span><a class="rw_change_category_button aui-button"><span>', soy.$$escapeHtml("Change category"), '</span></a></div></div><div class="rw_input_container rw_category_chooser"  style="display:none;" ><div class="rw_input_content rw_has_input_desc"><ul></ul><a class="rw_cancel_category_button aui-button"><span>', soy.$$escapeHtml("Cancel"), '</span></a></div></div></div></div><div id="rw_main_dialog_section"><div class="rw_admin_section rw_padding_bottom_10px"><div id="rw_add_role_button_wrapper"><div class="rw_input_desc" style="line-height: 34px;"><label for="groups">', soy.$$escapeHtml("Roles"), ':</label></div><div class="rw_input_content rw_has_input_desc"><a class="rw_add_role_button rw_button rw_margin_bottom_10px" href="#"><span class="rw_no_icon">', soy.$$escapeHtml("Add"), '</span></a></div></div>');
  RW.Templates.UserCategory.addRoleDialog(null, output);
  output.append('<ul id="rw_user_category_role_list" class="rw_items">');
  if (opt_data.model.roles) {
    var roleList22 = opt_data.model.roles;
    var roleListLen22 = roleList22.length;
    for (var roleIndex22 = 0; roleIndex22 < roleListLen22; roleIndex22++) {
      var roleData22 = roleList22[roleIndex22];
      RW.Templates.UserCategory.role({role: roleData22}, output);
    }
  }
  output.append('</ul></div><div id="rw_role_user_group_section" class="rw_admin_section rw_padding_top_10px">', (opt_data.model.type != 'space') ? '<div class="rw_input_container"><div class="rw_input_desc"><label for="visible">' + soy.$$escapeHtml("Category Dropdown") + ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="checkbox" name="visible" class="rw_check_visibility" ' + ((opt_data.model.visible != false) ? 'checked="checked"' : '') + '><span> ' + soy.$$escapeHtml("Visible") + '</span><br><span class="rw_small_text">' + soy.$$escapeHtml("Show users in category dropdown menu") + '</span><br><input type="checkbox" name="rolesOnly" class="rw_check_rolesonly" ' + ((opt_data.model.rolesOnly == true) ? 'checked="checked"' : '') + '><span class="rw_check_rolesonly_text"> ' + soy.$$escapeHtml("Only display roles") + '</span><br><span class="rw_small_text">' + soy.$$escapeHtml("Only display users with roles in category dropdown menu") + '</span></div></div>' : '', '</div></div></form></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.addRoleDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="rw_add_role_wrapper" style="display:none;"><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml("User"), ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Search"), '" id="rw_form_roles"><br><div id="rw_role_search_result_container" class="rw_results_container" style="display: none;"></div><div class="rw_error_text">', soy.$$escapeHtml("No user specified"), '</div><span class="rw_small_text">', soy.$$escapeHtml("Select user to assign to this role."), '</span><br><div class="rw_result_tags"><ul id="rw_role_user_result_container" class="rw_items"></ul></div></div></div><div class="rw_input_container"><div class="rw_input_desc"><label for="users">', soy.$$escapeHtml("Role"), ':</label></div><div class="rw_input_content rw_has_input_desc"><input type="text" name="users" placeholder="', soy.$$escapeHtml("Enter role name"), '" id="rw_form_role_name"><br><div class="rw_error_text">', soy.$$escapeHtml("No role name specified"), '</div><span class="rw_small_text">', soy.$$escapeHtml("Define the name of the role, or select one of the suggestions below."), '</span><br><div class="rw_result_tags"><ul id="rw_role_suggestions_container" class="rw_tag_list rw_items"></ul></div></div></div><div class="rw_input_container"><div class="rw_input_content rw_has_input_desc"><a class="rw_save_role_button aui-button aui-button-primary" href="#"><span>', soy.$$escapeHtml("Save role"), '</span></a><a class="rw_cancel_role_button aui-link rw_margin_left" href="#"><span>', soy.$$escapeHtml("Cancel"), '</span></a></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.role = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var user__soy73 = opt_data.role.user;
  output.append('<li class="rw_user_role" data-username="', soy.$$escapeHtml(user__soy73.username), '" data-role-key="', soy.$$escapeHtml(opt_data.role.id), '"><div class="rw_user_role_wrapper"><div class="rw_item_icon"><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy73.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy73.username), '" title="', soy.$$escapeHtml(user__soy73.fullName), '"><img class="userLogo logo" ', (user__soy73.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy73.profilePic) + '"' : (opt_data.fullProfilePicUrl) ? 'src="' + soy.$$escapeHtml(opt_data.fullProfilePicUrl) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy73.username), '" title=""></a></div><div class="rw_item_content rw_has_icon"><div class="rw_ellipsis"><span ', (user__soy73 && user__soy73.fullName) ? 'title="' + user__soy73.fullName + '"' : '', '>', (user__soy73 && user__soy73.fullName) ? user__soy73.fullName : '', '</span><div style="clear:both;"></div><span ', (opt_data.role && opt_data.role.name) ? 'title="' + soy.$$escapeHtml(opt_data.role.name) + '"' : '', ' class="rw_small_text rw_user_category_role">', (opt_data.role && opt_data.role.name) ? soy.$$escapeHtml(opt_data.role.name) : '', '</span></div></div></div><span class="rw_delete_button">X</span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.searchResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<ul>');
  var itemList126 = opt_data.results;
  var itemListLen126 = itemList126.length;
  for (var itemIndex126 = 0; itemIndex126 < itemListLen126; itemIndex126++) {
    var itemData126 = itemList126[itemIndex126];
    output.append('<li data-name=', (itemData126.type == 'user') ? soy.$$escapeHtml(itemData126.username) : soy.$$escapeHtml(itemData126.name), '>', (itemData126.type == 'user') ? '<img src="' + soy.$$escapeHtml(itemData126.thumbnailLink.href) + '" height="16px">' : '', '<a class="content-type-userinfo" ><span class="rw_search_item_title">', (itemData126.type == 'user') ? soy.$$escapeHtml(itemData126.title) : soy.$$escapeHtml(itemData126.name), '</span></a></li>');
  }
  output.append((opt_data.results.length == 0) ? '<span class="rw_padding">' + soy.$$escapeHtml("No search results found.") + '</span>' : '', '</ul>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.resultTag = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<li ', (opt_data.key) ? 'data-key="' + soy.$$escapeHtml(opt_data.key) + '"' : '', ' data-name="', soy.$$escapeHtml(opt_data.name), '"><span title="', soy.$$escapeHtml("Remove"), '">', soy.$$escapeHtml(opt_data.name), '<span class=\'rw_delete_button\'>X</span></span></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.button = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><a class="rw_item_icon rw_people_directory rw_user_category_link" data-tooltip="', soy.$$escapeHtml(opt_data.tooltip), '"></a></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.view = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category rw_in_popup">');
  if (opt_data.model.visible) {
    if ((opt_data.model.userSize == undefined || opt_data.model.userSize == 0) && (opt_data.model.roles == undefined || opt_data.model.roles.length == 0)) {
      output.append('<div class="rw_title">', soy.$$escapeHtml("No users found"), '</div>');
    } else {
      if (opt_data.model.roles && opt_data.model.roles.length > 0) {
        output.append('<ul class="rw_items rw_roles ', (opt_data.model.allUsers && opt_data.model.allUsers.length > 0) ? 'rw_separator' : '', '">');
        var roleList188 = opt_data.model.roles;
        var roleListLen188 = roleList188.length;
        for (var roleIndex188 = 0; roleIndex188 < roleListLen188; roleIndex188++) {
          var roleData188 = roleList188[roleIndex188];
          var user__soy189 = roleData188.user;
          output.append('<li><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy189.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy189.username), '" title="', soy.$$escapeHtml(user__soy189.fullName), '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy189.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy189.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy189.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy189.fullName, '">', user__soy189.fullName, '</span><span title="', soy.$$escapeHtml(roleData188.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData188.name), '</span></span></a></li>');
        }
        output.append('</ul>');
      }
      if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && opt_data.model.rolesOnly != true) {
        output.append('<ul class="rw_items rw_category_members">');
        RW.Templates.UserCategory.userList({model: opt_data.model.allUsers}, output);
        output.append('</ul>');
      }
    }
  } else {
    output.append((opt_data.model.userSize == undefined || opt_data.model.userSize == 0) ? '<div class="rw_title">' + soy.$$escapeHtml("No users found") + '</div>' : '<div class="rw_title">' + soy.$$escapeHtml("Users not visible") + '</div>');
  }
  output.append((opt_data.model.canEdit) ? '<ul class="rw_items rw_category_admin"><li><a class="rw_edit_button"><span class="rw_item_icon"></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis">' + soy.$$escapeHtml("Edit") + '</span></span></a></li></ul>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.inline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category_inline">', (opt_data.categoryName) ? '<div class="rw_title rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.categoryName) + '">' + soy.$$escapeHtml(opt_data.categoryName) + '</div>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.dropDown = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div><div class="rw_user_category_dd"></div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.userList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  var userList258 = opt_data.model;
  var userListLen258 = userList258.length;
  for (var userIndex258 = 0; userIndex258 < userListLen258; userIndex258++) {
    var userData258 = userList258[userIndex258];
    output.append('<li ', (opt_data.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(userData258.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(userData258.username), '" title="', userData258.fullName, '">', (opt_data.layout == 'avatar') ? '<img class="userLogo logo" ' + ((userData258.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(userData258.profilePic) + '"' : '') + ' alt="' + soy.$$escapeHtml("User icon") + ': ' + soy.$$escapeHtml(userData258.username) + '" title="">' : '<span class="rw_item_icon"><img class="userLogo logo" ' + ((userData258.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(userData258.profilePic) + '"' : '') + ' alt="' + soy.$$escapeHtml("User icon") + ': ' + soy.$$escapeHtml(userData258.username) + '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis">' + userData258.fullName + '</span></span>', '</a></li>');
  }
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a data-category-key="', soy.$$escapeHtml(opt_data.category.nameKey), '" id="rw_category_item_', soy.$$escapeHtml(opt_data.category.nameKey), '" class="rw_ellipsis">', soy.$$escapeHtml(opt_data.category.name), '</a>');
  if (opt_data.category && opt_data.category.subCategories) {
    output.append('<ul>');
    var catList316 = opt_data.category.subCategories;
    var catListLen316 = catList316.length;
    for (var catIndex316 = 0; catIndex316 < catListLen316; catIndex316++) {
      var catData316 = catList316[catIndex316];
      RW.Templates.UserCategory.categoryItem({category: catData316}, output);
    }
    output.append('</ul>');
  }
  output.append('</div></div></li>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.spaceMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><div class="rw_user_category rw_in_macro ', (opt_data.macroParam.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.macroParam.layout) : '', '">', (opt_data.macroParam.hideTitle != true) ? (opt_data.macroParam.title != undefined && opt_data.macroParam.title != '') ? '<h3 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.macroParam.title) + '">' + soy.$$escapeHtml(opt_data.macroParam.title) + '</h3>' : '<h3 class="rw_ellipsis" title="' + soy.$$escapeHtml("Space Users") + '">' + soy.$$escapeHtml("Space Users") + '</h3>' : '', (opt_data.macroParam.description != undefined && opt_data.macroParam.description != '') ? '<div class="rw_description">' + soy.$$escapeHtml(opt_data.macroParam.description) + '</div>' : '');
  if (opt_data.model.roles && opt_data.model.roles.length > 0) {
    output.append('<ul class="rw_items rw_roles">');
    var roleList352 = opt_data.model.roles;
    var roleListLen352 = roleList352.length;
    for (var roleIndex352 = 0; roleIndex352 < roleListLen352; roleIndex352++) {
      var roleData352 = roleList352[roleIndex352];
      var user__soy353 = roleData352.user;
      output.append('<li ', (opt_data.macroParam.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy353.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy353.username), '" title="', user__soy353.fullName, '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy353.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy353.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy353.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy353.fullName, '">', user__soy353.fullName, '</span><span title="', soy.$$escapeHtml(roleData352.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData352.name), '</span></span></a></li>');
    }
    output.append('</ul>');
  }
  if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && ! opt_data.macroParam.rolesOnly) {
    output.append('<ul class="rw_items rw_category_members ', (opt_data.model.roles && opt_data.model.roles.length > 0) ? 'rw_separator' : '', '">');
    RW.Templates.UserCategory.userList({model: opt_data.model.allUsers, layout: opt_data.macroParam.layout, size: opt_data.macroParam.size}, output);
    output.append('</ul>');
  }
  output.append((opt_data.model.userSize == 0) ? '<div class="rw_help">' + soy.$$escapeHtml("Here you can add team members and define user roles. ") + '</div>' : '', (opt_data.macroParam.canEdit == true) ? '<a class="rw_configure_button rw_button_discrete" ><span class="rw_icon_container_16 rw_icon_edit_gray"></span></a>' : '', '</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><div class="rw_user_category rw_in_macro ', (opt_data.macroParam.layout != undefined) ? 'rw_layout_' + soy.$$escapeHtml(opt_data.macroParam.layout) : '', '"><div class="rw_macro_title"><div class="rw_icon rw_iconfont_users"></div>', (opt_data.macroParam.title != undefined && opt_data.macroParam.title != '') ? '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.macroParam.title) + '">' + soy.$$escapeHtml(opt_data.macroParam.title) + '</h2>' : (opt_data.model.name) ? '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml(opt_data.model.name) + '">' + soy.$$escapeHtml(opt_data.model.name) + '</h2>' : '<h2 class="rw_ellipsis" title="' + soy.$$escapeHtml("Users") + '">' + soy.$$escapeHtml("Users") + '</h2>', '</div>', (opt_data.macroParam.description != undefined && opt_data.macroParam.description != '') ? '<div class="rw_description">' + soy.$$escapeHtml(opt_data.macroParam.description) + '</div>' : '');
  if (opt_data.model.userSize > 0 || opt_data.model.children && opt_data.model.children.length > 0) {
    RW.Templates.UserCategory.categoryMacroUsers(opt_data, output);
  } else {
    RW.Templates.Users.empty(null, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


RW.Templates.UserCategory.categoryMacroUsers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="rw_tree_view ', (opt_data.macroParam.hierarchy == 'tree_view_closed') ? 'rw_closed' : '', '">', (opt_data.treeMode) ? '<div class="rw_item_link"><span>' + soy.$$escapeHtml(opt_data.model.name) + '</span></div><div class="rw_item_section">' : '');
  if (opt_data.model.roles && opt_data.model.roles.length > 0) {
    output.append('<ul class="rw_items rw_roles">');
    var roleList466 = opt_data.model.roles;
    var roleListLen466 = roleList466.length;
    for (var roleIndex466 = 0; roleIndex466 < roleListLen466; roleIndex466++) {
      var roleData466 = roleList466[roleIndex466];
      var user__soy467 = roleData466.user;
      output.append('<li ', (opt_data.macroParam.size == 'large') ? 'class="rw_size_large"' : '', '><a class="userLogoLink" data-username="', soy.$$escapeHtml(user__soy467.username), '" href="', soy.$$escapeHtml(contextPath), '/users/view-user-dashboard.action?username=', soy.$$escapeHtml(user__soy467.username), '" title="', soy.$$escapeHtml(user__soy467.fullName), '"><span class="rw_item_icon"><img class="userLogo logo" ', (user__soy467.profilePic) ? 'src="' + soy.$$escapeHtml(contextPath) + soy.$$escapeHtml(user__soy467.profilePic) + '"' : '', ' alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(user__soy467.username), '" title=""></span><span class="rw_item_content rw_has_icon"><span class="rw_ellipsis" title="', user__soy467.fullName, '">', user__soy467.fullName, '</span><span title="', soy.$$escapeHtml(roleData466.name), '" class="rw_small_text rw_user_category_role rw_ellipsis">', soy.$$escapeHtml(roleData466.name), '</span></span></a></li>');
    }
    output.append('</ul>');
  }
  if (opt_data.model.allUsers && opt_data.model.allUsers.length > 0 && ! opt_data.macroParam.rolesOnly) {
    output.append('<ul class="rw_items rw_category_members ', (opt_data.model.roles && opt_data.model.roles.length > 0) ? 'rw_separator' : '', '">');
    RW.Templates.UserCategory.userList({model: opt_data.model.allUsers, layout: opt_data.macroParam.layout, size: opt_data.macroParam.size}, output);
    output.append('</ul>');
  }
  if (opt_data.model.children && opt_data.model.children.length > 0) {
    var childList518 = opt_data.model.children;
    var childListLen518 = childList518.length;
    for (var childIndex518 = 0; childIndex518 < childListLen518; childIndex518++) {
      var childData518 = childList518[childIndex518];
      RW.Templates.UserCategory.categoryMacroUsers({macroParam: opt_data.macroParam, model: childData518, treeMode: true}, output);
    }
  }
  output.append((opt_data.treeMode) ? '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Models.Layout==="undefined"){RW.Models.Layout={}}(function(a){RW.Models.Layout.Sections=RW.Brace.Collection.extend({comparator:function(b){return b.get("group")+""+b.get("position")}});RW.Models.Layout.Items=RW.Brace.Collection.extend({comparator:function(b){return b.getPosition()}});RW.Models.Layout.Boards=RW.Brace.Collection.extend();RW.Models.Layout.VersionListItems=RW.Brace.Collection.extend();RW.Models.Layout.Templates=RW.Brace.Collection.extend();RW.Models.Layout.QuickLinkMacros=RW.Brace.Collection.extend({initialize:function(){this.url=contextPath+"/rest/originaltheme/1.0/layoutboard/RW_TYPE_PLACEHOLDER/suggested-macros";this.model=RW.Models.Layout.QuickLinkMacro}});RW.Models.Layout.Board=RW.Brace.Model.extend({namedAttributes:{sections:RW.Models.Layout.Sections,type:"string",contentKey:"string",layoutBoardInfo:RW.Models.Layout.LayoutBoardInfo},parse:function(b){if(b==undefined){b={id:this.get("type")+"_"+this.get("contentKey")}}else{b.id=b.type+"_"+b.contentKey}return b},initialize:function(b){RW.Models.Layout.Sections.model=RW.Models.Layout.Section;RW.Models.Layout.Items.model=RW.Models.Layout.Item;if(!b.sections){this.setSections(new RW.Models.Layout.Sections())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.getType()+"/"+this.get("contentKey")},addSection:function(c,d){if(c==undefined){c=100}var b=new RW.Models.Layout.Section({position:this.getSectionsInGroup(d).length,width:c,group:d});var f=this.get("contentKey")+"_"+this.get("type")+"-section-"+d+"-"+this.getSectionsInGroup(d).length;var e=RW._.pluck(this.get("sections").models,"id");while(RW._.contains(e,f)){f=f+Math.floor((Math.random()*100)+1)}b.set("id",f);this.get("sections").add(b);return b},removeSection:function(e){var b=e.get("items");var d=true;for(var c=0;c<b.length;c++){if(b.models[c].get("locked")){d=false}}if(d){e.destroy()}},getSectionsInGroup:function(b){var c=RW._.filter(this.get("sections").models,function(d){return d.get("group")==b});return c},getMaxGroup:function(){if(this.get("sections").length>0){var b=this.get("sections").max(function(c){return c.get("group")});return b.get("group")}},getGroupList:function(){var b=[];this.get("sections").each(function(c){var d=c.get("group");if(RW._.isUndefined(b[d])){b[d]=new Array()}b[d].push(c)});return b},sortLayoutBoard:function(){var b=this.get("sections");if(b!=undefined){b.each(function(d){var c=d.get("items");if(c!=undefined){d.set("items",c.sortBy(function(e){return e.get("position")}))}});this.set("sections",b.sortBy(function(c){return c.get("position")}))}}});RW.Models.Layout.Section=RW.Brace.Model.extend({namedAttributes:{id:"string",position:"number",items:RW.Models.Layout.Items,width:"number",group:"number"},initialize:function(b){if(!b.items){this.setItems(new RW.Models.Layout.Items())}},addItem:function(d){if(d==undefined){var e=this.get("id")+"-";var b=0;if(this.get("items")!=undefined&&this.get("items").length!=undefined){b=this.get("items").length}var c=new RW.Models.Layout.Item({position:b,content:"",locked:false});c.setId(e+c.cid);this.get("items").add(c);return c}else{this.get("items").add(d);return d}},removeItem:function(b){this.get("items").remove(b)},destroy:function(){while(this.get("items").length>0){this.get("items").last().destroy()}this.trigger("destroy",this)}});RW.Models.Layout.Item=RW.Brace.Model.extend({namedAttributes:{id:"string",position:"number",content:"string",locked:"boolean",params:"object",defaultParameterValue:"object",macroName:"string"},setContentAsMacro:function(b,i,d){var h=b.callback;var g=b.params;var e={name:g.name,params:g.params,boardType:d};if(g.defaultParameterValue){e.defaultParameterValue=g.defaultParameterValue}if(g.bodyHTML){e.body=g.bodyHTML}var c=new RW.Models.Layout.Macro(e);var f={contentKey:i,type:c.get("boardType"),name:c.get("name"),params:JSON.stringify(c.get("params"))};if(!RW._.isEmpty(c.getBody)){f.body=c.getBody}if(!RW._.isEmpty(c.getDefaultParameterValue())){f.defaultParameterValue=c.getDefaultParameterValue()}c.fetch({cache:false,data:a.param(f),success:RW._.bind(function(j){if(!RW._.isEmpty(c.getParams())){this.setParams(c.getParams());this.setMacroName(c.getName())}if(!RW._.isEmpty(c.getDefaultParameterValue())){this.setDefaultParameterValue(c.getDefaultParameterValue())}else{delete this.attributes.defaultParameterValue}if(j.get("storageFormat")!=undefined){this.setContent(j.get("storageFormat"))}else{this.setContent("")}h(c)},this),failure:function(j){console.log("failed to fetch content")}})},destroy:function(){if(!this.get("locked")){this.trigger("destroy",this)}else{console.log("Cannot destroy item "+this.get("id")+" - it's locked.")}}});RW.Models.Layout.SpaceLayoutBoard=RW.Models.Layout.Board.extend({namedAttributes:RW._.extend({},RW.Models.Layout.Board.namedAttributes,{spaceGroupVisible:"boolean",menuLayoutType:"string",metaDataVisible:"boolean",commentsVisible:"boolean",labelsVisible:"boolean",likesVisible:"boolean",favouriteVisible:"boolean",watchVisible:"boolean",spaceLogoVisible:"boolean",childrenVisible:"boolean",breadcrumbsVisible:"boolean"})});RW.Models.Layout.VersionList=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",versions:RW.Models.Layout.VersionListItems},parse:function(b){b.id=b.type+"_"+b.contentKey;return b},initialize:function(b){RW.Models.Layout.VersionListItems.model=RW.Models.Layout.Version;if(!b.versions){this.setVersions(new RW.Models.Layout.VersionListItems())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.get("type")+"/"+this.get("contentKey")+"/version"},deleteVersion:function(c){var b=this.get("versions").filter(function(d){return d.get("versionNumber")==c});this.trigger("destroy",this)}});RW.Models.Layout.Version=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",versionNumber:"number",date:"string",author:"object",comment:"string",layoutBoard:"object"},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.get("type")+"/"+this.get("contentKey")+"/version/"+this.get("versionNumber").toString()}});RW.Models.Layout.Macro=RW.Brace.Model.extend({namedAttributes:{name:"string",params:"object",boardType:"string",body:"string",storageFormat:"string",defaultParameterValue:null},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/macro"}});RW.Models.Layout.QuickLinkMacro=RW.Brace.Model.extend({namedAttributes:{key:"string",name:"string",icon:"string"}});RW.Models.Layout.LayoutBoardInfo=RW.Brace.Model.extend({namedAttributes:{type:"string",spaceType:"string",level:"string"}});RW.Models.Layout.TemplateList=RW.Brace.Model.extend({namedAttributes:{contentKey:"string",type:"string",templates:RW.Models.Layout.Templates},initialize:function(b){RW.Models.Layout.Templates.model=RW.Models.Layout.Template;this.set("id",this.get("type")+"_"+this.get("contentKey"));if(!b.templates){this.setTemplates(new RW.Models.Layout.Templates())}},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.getType()+"/template-board?contentKey="+this.get("contentKey")}});RW.Models.Layout.Template=RW.Brace.Model.extend({namedAttributes:{name:"string",key:"string",description:"string",source:"string"}});RW.Models.Layout.LayoutSpaceKey=RW.Backbone.Model.extend({initialize:function(c,b){b||(b={});this.init&&this.init(attributes,b);this.bind("error",this.defaultErrorHandler)},defaultErrorHandler:function(c,b){if(b.status==401||b.status==403){}},url:contextPath+"/rest/originaltheme/1.0/layoutboard/layout-space-key"})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/categories/category-models-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}(function(a){RW.Models.AbstractCategories=RW.Brace.Collection.extend();RW.Models.CategoryList=RW.Models.AbstractCategories.extend({namedAttributes:{categories:RW.Models.AbstractCategories},url:function(){return contextPath+"/rest/originaltheme/1.0/category"}});RW.Models.AbstractCategory=RW.Backbone.Model.extend({namedAttributes:{subCategories:RW.Models.AbstractCategories},initialize:function(b){RW.Models.AbstractCategories.model=RW.Models.AbstractCategory;if(!b||!b.subCategories){this.set("subCategories",new RW.Models.AbstractCategories())}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-views-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.Layout==="undefined"){RW.Views.Layout={}}(function(b){RW.initPubSub();var a=10;RW.Views.Layout.MainView=RW.Backbone.View.extend({events:{"click .rw_save_button":"saveModel","click .rw_cancel_button":"cancel","click .rw_template_button":"showTemplates","click .rw_layout_mode_button":"openLayoutMode","click .rw_layout_mode_done_button":"openBoardView","click .rw_layout_mode_cancel_button":"cancelLayoutMode","click .rw_delete_button":"deleteModel","click .rw_versions_button":"openVersionsView","click .rw_version_mode_done_button":"openBoardView","click .rw_preview_button":"showPreview","click .rw_select_template_button":"selectTemplate","click .rw_select_space_type_button":"selectTemplate","click .rw_open_attachments_button":"openAttachments"},currentView:null,previewsView:null,unsavedChanges:false,previewsUnsavedChanges:false,title:"",level:"",$toolbarMenu:null,antiXSS:true,view:"",mainView:"",cancelButtonTemplate:null,initialize:function(c){if(c.title!==undefined){this.title=c.title}if(c.level!==undefined){this.level=c.level}if(c.antiXSS!==undefined){this.antiXSS=c.antiXSS}mainView=this;if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){this.currentView=new RW.Views.Layout.SpaceBoardView({model:this.model,title:this.title,level:this.level})}else{this.currentView=new RW.Views.Layout.BoardView({model:this.model,title:this.title,level:this.level})}this.initSubscriptions();RW.applyTooltip("#rw_layout_board_container .rw_tooltip",{gravity:"n"});b(window).resize(function(){mainView.responsiveLayoutEditor()})},initSubscriptions:function(){RW.PubSub.on("layoutboard:editor-view-ready",RW._.bind(function(c){var d=c.item.model;if(this.antiXSS){b("input[name=formattedBodyString]","#rw_board_editor_form").attr("value",encodeURIComponent(d.get("content")))}else{b("input[name=formattedBodyString]","#rw_board_editor_form").attr("value",d.get("content"))}b("input[name=contentKey]","#rw_board_editor_form").attr("value",mainView.model.get("contentKey"));b("input[name=type]","#rw_board_editor_form").attr("value",mainView.model.get("type"));b("input[name=itemId]","#rw_board_editor_form").attr("value",d.get("id"));var e=RW.openEditorIframeDialog();e.show();b("#rw_board_editor_form").submit();c.item.bindFrame(e)},this));RW.PubSub.on("layoutboard:editor-loaded",function(d){var c=d.form;c.append("<input type='hidden' name='type' value='"+mainView.model.get("type")+"' />");c.append("<input type='hidden' name='contentKey' value='"+mainView.model.get("contentKey")+"' />")});RW.PubSub.on("layoutboard:popup-loaded",function(c){var e=c.itemView;var d=new RW.Models.Layout.QuickLinkMacros();d.url=d.url.replace("RW_TYPE_PLACEHOLDER",mainView.model.get("type"));d.url+="?contentKey="+mainView.model.get("contentKey");d.fetch({cache:false,success:function(g){e.popup.show();var f=b(RW.Templates.Layout.addItemDialog({item:e.model.toJSON(),defaultMacros:d.toJSON()}));b("li",f).each(function(){var i=b(this);var h=AJS.MacroBrowser.getMacroMetadata(i.data("item"));b(".rw_item_content",i).html(h.title);i.attr("title",h.title);if(h.icon!==undefined&&h.icon!==null){b(".rw_item_icon",i).html('<img src="'+contextPath+h.icon.location+'" />')}});e.popup.addPanel("",f,"");b(e.el).html(b(".dialog-page-body","#rw_layoutboard_popup_frame").html())},failure:function(f){console.log("failed to fetch content")}})});RW.PubSub.on("layoutboard:macro-browser-ready",function(c){var d=c.view;var f=RW.Util.XHTMLparser.parse(d.model);if(f.length==1){var e=f[0]}tinymce.confluence.macrobrowser.macroBrowserComplete=function(j){var g=AJS.MacroBrowser.getMacroMetadata(j.name);var h=j;try{var h=AJS.MacroBrowser.getMacroDefinitionFromForm(g)}catch(i){}d.model.setContentAsMacro({params:h,callback:function(k){if(g.formDetails==undefined){g=AJS.MacroBrowser.dialog.activeMetadata}if(!RW._.isEmpty(g.formDetails.body)&&g.formDetails.body.bodyType!="NONE"){d.openEditor(null,true)}RW.PubSub.trigger("layoutboard:unsaved-changes")}},mainView.model.get("contentKey"),mainView.model.get("type"))};tinymce.confluence.macrobrowser.openMacro(e)});RW.PubSub.on("layoutboard:quick-links-ready",function(d){var c=d.view;var e=c.macro;tinymce.confluence.macrobrowser.macroBrowserComplete=function(f){c.model.setContentAsMacro({params:f,callback:function(){}},mainView.model.get("contentKey"),mainView.model.get("type"))};tinymce.confluence.macrobrowser.openMacro(e)});RW.PubSub.on("layoutboard:editor-clicked",function(c){RW.showLoader();b(".rw_save_button",mainView.$el).prop("disabled","disabled")});RW.PubSub.on("layoutboard:selected-space-type",function(c){b(".rw_save_button",mainView.$el).prop("disabled","disabled");b(".rw_save_button",mainView.$el).hide();b(".rw_select_space_type_button",mainView.$el).data("space-type",c);b(".rw_select_space_type_button",mainView.$el).removeProp("disabled");b(".rw_select_space_type_button",mainView.$el).removeClass("rw_hidden")});RW.PubSub.on("layoutboard:unsaved-changes",function(c){mainView.unsavedChanges=true;mainView.currentView.showUnsavedChangesBadge();RW.hideLoader();b(".rw_save_button",mainView.$el).removeProp("disabled");b(".rw_save_button",mainView.$el).show();b(".rw_select_space_type_button",mainView.$el).prop("disabled","disabled");if(!b(".rw_select_space_type_button",mainView.$el).hasClass("rw_hidden")){b(".rw_select_space_type_button",mainView.$el).addClass("rw_hidden")}});RW.PubSub.on("layoutboard:refresh",function(c){mainView.unsavedChanges=false;mainView.openBoardView()});RW.PubSub.on("layoutboard:update-column-height",function(c){if(mainView.model.get("type")!="space"&&mainView.model.get("type")!="global_space"){mainView.$(".rw_layout_board > .rw_board").each(function(){b(".rw_layout_section",this).css("min-height","inherit");b(".rw_layout_section",this).css("min-height",b(this).height()-64)})}});AJS.$(document).unbind("hideLayer");AJS.$(document).bind("hideLayer",function(f,d,c){if(d==="popup"&&(c.element[0].id==="rw_popup_preview_dialog"||c.element[0].id==="rw_popup_editor_dialog")){c.remove()}});this.model.on("sync",function(c,d){if(d==undefined){RW.hideLoader();mainView.unsavedChanges=false;mainView.openBoardView();mainView.responsiveLayoutEditor();RW.PubSub.trigger("layoutboard:saved")}});this.model.on("error",function(){RW.hideLoader();alert("An error occured while saving data.")})},render:function(){this.$el.html(this.currentView.render());RW.removeTooltip();this.responsiveLayoutEditor();return this.$el},saveModel:function(d){d.preventDefault();RW.showLoader();var f=this.model.get("contentKey");var c=this.model.get("type");this.model.get("sections").each(function(g){var e=f+"_"+c+"-section-"+g.get("group")+"-"+g.get("position");g.setId(e);if(g.get("items").comparator){g.get("items").sort()}g.get("items").each(function(h){var j=h.get("id");var k=e+"-"+h.get("position");h.setId(k)})});delete this.model.attributes.layoutBoardInfo;delete this.model.attributes.id;delete this.model.id;this.model.save({},{cache:false})},deleteModel:function(c){c.preventDefault();if(confirm(b(c.currentTarget).data("confirm"))){this.model.id="-";this.model.destroy({success:function(e,d){RW.PubSub.trigger("layoutboard:deleted")}})}},cancel:function(c){c.preventDefault();RW.PubSub.trigger("layoutboard:canceled")},showTemplates:function(f){f.preventDefault();var c=new RW.Models.Layout.TemplateList({type:this.model.getType(),contentKey:this.model.get("contentKey")});RW.showLoader();var d=this.model.get("type");c.fetch({cache:false,success:function(g){RW.hideLoader();var e=new RW.Views.Layout.TemplatesView({model:c,boardType:d})},error:function(e){RW.hideLoader()}})},loadTemplate:function(c){this.model.fetch({cache:false,data:b.param({template:c}),reset:true,success:RW._.bind(function(d){if(this.model.getType()=="space"||this.model.getType()=="global_space"){this.currentView.hideUnsavedChangesBadge();RW.PubSub.trigger("layoutboard:selected-space-type",c)}else{this.currentView.showUnsavedChangesBadge()}this.responsiveLayoutEditor()},this),error:function(){console.log("Something went wrong while fetching model with id "+c)}})},selectTemplate:function(d){var c=b(d.currentTarget).data("space-type");b.ajax({url:contextPath+"/rest/originaltheme/1.0/layoutboard/"+this.model.get("type")+"/template-board/"+this.model.get("contentKey")+"?template="+c,type:"PUT",dataType:"json",success:function(e){RW.PubSub.trigger("layoutboard:space-type-selected")},error:function(e){}})},openLayoutMode:function(c){this.currentView.destroy();this.previewsView=new RW.Models.Layout.Board(this.model.toJSON());this.previewsUnsavedChanges=this.unsavedChanges;this.currentView=new RW.Views.Layout.SectionLayoutView({model:this.model,unsavedChanges:this.unsavedChanges});this.render()},openBoardView:function(c){this.currentView.destroy();if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){this.currentView=new RW.Views.Layout.SpaceBoardView({model:this.model,unsavedChanges:this.unsavedChanges,title:this.title,level:this.level})}else{this.currentView=new RW.Views.Layout.BoardView({model:this.model,unsavedChanges:this.unsavedChanges,title:this.title,level:this.level})}this.render();RW.PubSub.trigger("layoutboard:update-column-height")},openVersionsView:function(f){f.preventDefault();RW.showLoader();var d=new RW.Models.Layout.VersionList({contentKey:this.model.get("contentKey"),type:this.model.get("type")});var c=this;var g=true;if((c.model.get("type")===c.model.get("layoutBoardInfo").type)&&c.model.get("layoutBoardInfo").spaceType==undefined){g=false}d.fetch({cache:false,success:function(e){c.currentView.destroy();c.currentView=new RW.Views.Layout.VersionsView({model:d,defaultBoard:g});c.render();Confluence.Binder.userHover();RW.hideLoader()},failure:function(e){RW.hideLoader()}})},showPreview:function(d){d.stopPropagation();d.preventDefault();var c=this.model.toJSON();c=RW._.omit(c,"id");c=JSON.stringify(c);b("input[name=type]","#rw_board_preview_form").attr("value",this.model.get("type"));b("input[name=contentKey]","#rw_board_preview_form").attr("value",this.model.get("contentKey"));b("input[name=boardAsJSON]","#rw_board_preview_form").attr("value",c);var f=RW.openPreviewDialog();f.show();b("#rw_board_preview_form").submit()},openAttachments:function(d){d.stopPropagation();d.preventDefault();var c=RW.openIframeDialog(contextPath+"/pages/view-attachments.action?pageId="+AJS.params.pageId,"Attachments ","",true);c.addButton("Done",function(){c.remove();RW.hideLoader()},"rw_editor_done_button");c.show()},cancelLayoutMode:function(c){this.model=this.previewsView;this.unsavedChanges=this.previewsUnsavedChanges;this.openBoardView()},responsiveLayoutEditor:function(){if(b(".rw_layout_board_toolbar",this.$el).width()<1180){b(".rw_layout_board_toolbar",this.$el).addClass("rw_collapsed")}else{b(".rw_layout_board_toolbar",this.$el).removeClass("rw_collapsed")}}});RW.Views.Layout.SectionLayoutView=RW.Backbone.View.extend({events:{"click .rw_add_section_button":"createSection","click .rw_add_top_section_button":"createTopSection","click .rw_add_bottom_section_button":"createBottomSection","click .rw_remove_section_button":"removeSection"},template:null,views:[],minWidth:100,maxTotalWidth:1000,unsavedChanges:false,initialize:function(c){var d=this.model.get("sections");this.template=RW.Templates.Layout.boardLayout({model:this.model.toJSON()});this.setElement(this.template);if(c.unsavedChanges!==undefined){this.unsavedChanges=c.unsavedChanges}},render:function(){var c=this;this.views=[];this.template=RW.Templates.Layout.boardLayout({model:this.model.toJSON(),maxGroup:this.model.getMaxGroup()+1});b(this.el).html(b(this.template).html());this.addAll();for(var e=0;e<this.model.getGroupList().length;e++){if(this.model.getGroupList()[e]){if(this.model.getGroupList()[e].length<a){var d=RW.Templates.Button.add({cssClass:"rw_add_section_button rw_tooltip",data:e,tooltip:"Add section"});b(".rw_board_group_"+e,this.$el).append(b(d))}}else{b(".rw_board_group_"+e,this.$el).remove()}}RW._.each(this.model.getGroupList(),RW._.bind(function(g){var h=RW._.filter(this.views,function(i){return i.model.get("group")==g[0].getGroup()});var f=0;if(h.length>0){f=44}RW.disarm=h[0].$el;RW.Util.ResizableUtil.resizeColumns(h,".rw_board_group_"+g[0].getGroup(),1000-(h.length)*f,100-(h.length-1)*4,true,function(){RW._.each(h,function(i,j){i.model.set("width",parseInt(i.$el.find("h1").text()));RW.PubSub.trigger("layoutboard:unsaved-changes")})});RW._.each(h,function(i,j){i.$el.width(parseInt(i.$el.width())-f)})},this));b(".ui-resizable-handle",this.el).attr("data-tooltip","Resize sections");RW.applyTooltip("#rw_layout_board_container .ui-resizable-handle");if(this.unsavedChanges){this.showUnsavedChangesBadge()}RW.removeTooltip();return b(this.el)},addOne:function(d){var c=new RW.Views.Layout.EditableSectionView({model:d});var e=".rw_board_group_"+d.get("group");b(e,this.$el).append(b(c.render()));this.views.push(c)},addAll:function(){this.model.get("sections").forEach(RW._.bind(function(c){this.addOne(c)},this))},createSection:function(g){g.preventDefault();g.stopPropagation();var f=parseInt(b(g.currentTarget).attr("data-id"));var j=this.model.getSectionsInGroup(f);var i=j.length;if(i<a){var h=Math.floor(100/(i+1));var c=0;RW._.each(j,function(k,e){c+=h;k.set("width",h)});var d=this.model.addSection(100-c,f);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()}},createTopSection:function(c){c.preventDefault();c.stopPropagation();this.model.get("sections").each(function(d){var e=d.getGroup();d.setGroup(e+1)});this.model.addSection(100,0);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},createBottomSection:function(c){c.preventDefault();c.stopPropagation();this.model.addSection(100,this.model.getGroupList().length);RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},removeSection:function(f){var e=b(f.target).parent().data("id");var g=this.model.get("sections").get(e);var d=this.model;this.model.removeSection(g);var j=this.model.getSectionsInGroup(g.getGroup());var i=j.length;if(i===0){this.model.get("sections").each(function(k){if(k.getGroup()>g.getGroup()){k.setGroup(k.getGroup()-1)}})}var h=Math.floor(100/(i));var c=0;RW._.each(j,function(l,k){if(i===(k+1)){l.set("width",100-c)}else{l.set("width",h)}c+=h});b("#rw_section_"+e).trigger("destroy");RW.PubSub.trigger("layoutboard:unsaved-changes");this.render()},showUnsavedChangesBadge:function(){b(this.el).addClass("rw_has_unsaved_changes")},hideUnsavedChangesBadge:function(){b(this.el).removeClass("rw_has_unsaved_changes")},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.BoardView=RW.Backbone.View.extend({unsavedChanges:false,title:"",level:"",initialize:function(c){if(c.unsavedChanges!==undefined){this.unsavedChanges=c.unsavedChanges}if(c.title!==undefined){this.title=c.title}if(c.level!==undefined){this.level=c.level}var d=RW.Templates.Layout.board({model:this.model.toJSON(),title:this.title,level:this.level});this.setElement(d);if(this.model.get("type")=="space"){RW.spaceLayoutKey=this.model.get("contentKey")}this.model.unbind("change");this.model.bind("change",this.render,this)},render:function(){var c=RW.Templates.Layout.board({model:this.model.toJSON(),maxGroup:this.model.getMaxGroup()+1,title:this.title,level:this.level});b(this.el).html(b(c).html());this.addAll();if(this.unsavedChanges){this.showUnsavedChangesBadge()}return b(this.el)},addOne:function(e){var c=new RW.Views.Layout.SectionView({model:e});if(this.model.get("type")=="space"||this.model.get("type")=="global_space"){var d=b(c.render().el);d.addClass("rw_space_board_position_"+e.get("position"));if(e.get("position")==0){d.addClass("rw_left_column_board")}else{d.addClass("rw_right_column_board")}b("#rw_space_section_placeholder_"+e.get("position"),b(this.el)).after(d);b("#rw_space_section_placeholder_"+e.get("position"),b(this.el)).remove()}else{var f=".rw_board_group_"+e.get("group");b(f,b(this.el)).append(b(c.render().el))}c.makeSortable()},addAll:function(){var d=0;var c=this;this.model.get("sections").forEach(RW._.bind(function(e){this.addOne(e);d++},this))},showUnsavedChangesBadge:function(){b(this.el).addClass("rw_has_unsaved_changes")},hideUnsavedChangesBadge:function(){b(this.el).removeClass("rw_has_unsaved_changes")},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.SpaceBoardView=RW.Views.Layout.BoardView.extend({events:function(){return RW._.extend({},RW.Views.Layout.BoardView.prototype.events,{"click .rw_space_setting>input":"checkBoxEvent"})},render:function(){var c=RW.Templates.Layout.spaceBoard({model:this.model.toJSON(),title:this.title,level:this.level});b(this.el).html(b(c).html());this.addAll();if(this.unsavedChanges){this.showUnsavedChangesBadge()}return b(this.el)},checkBoxEvent:function(c){var d=b(c.currentTarget).data("key");if(d==="menuLayoutType"){if(b(c.currentTarget).is(":checked")){this.model.set(d,"simple",{silent:true})}else{this.model.set(d,"",{silent:true})}}else{this.model.set(d,b(c.currentTarget).is(":checked"),{silent:true})}RW.PubSub.trigger("layoutboard:unsaved-changes")}});RW.Views.Layout.VersionsView=RW.Backbone.View.extend({events:{"click .rw_layout_preview_button":"previewVersion","click .rw_layout_revert_button":"revertToVersion","click .rw_layout_delete_button":"deleteVersion"},defaultBoard:false,initialize:function(c){if(c.defaultBoard!==undefined){this.defaultBoard=c.defaultBoard}this.template=RW.Templates.Layout.boardVersions({versionsModel:this.model.toJSON(),defaultBoard:this.defaultBoard});this.setElement(this.template);this.model.unbind("change");this.model.bind("change",this.updateTemplate,this)},render:function(){b(this.el).html(b(this.template).html());return b(this.el)},updateTemplate:function(){this.template=RW.Templates.Layout.boardVersions({versionsModel:this.model.toJSON(),defaultBoard:this.defaultBoard});this.render()},previewVersion:function(d){d.preventDefault();var c=b(d.currentTarget).closest(".rw_item").attr("data-id");b("input[name=versionNumber]","#rw_board_preview_form").attr("value",c);b("input[name=type]","#rw_board_preview_form").attr("value",mainView.model.get("type"));b("input[name=contentKey]","#rw_board_preview_form").attr("value",mainView.model.get("contentKey"));var f=RW.openPreviewDialog();f.show();b("#rw_board_preview_form").submit();d.stopPropagation();d.preventDefault()},revertToVersion:function(h){h.preventDefault();var f=parseInt(b(h.currentTarget).closest(".rw_item").attr("data-id"));var g=this.model.get("type");var i=this.model.get("contentKey");var d=new AJS.Dialog({id:"rw_layoutboard_restore_version",closeOnOutsideClick:true,width:500,height:300});d.addHeader("Restore this version");var c=b(RW.Templates.Layout.restoreVersion());d.addPanel("",c,"");d.addButton("Restore this version",function(){var e=new RW.Models.Layout.Version({versionNumber:f,contentKey:i,type:g,comment:b("#comment-field",c).val()});e.save({},{cache:false,success:function(k,j){RW.PubSub.trigger("layoutboard:version-restored")}});d.remove()});d.addCancel("Cancel",function(){d.remove()});b("input",c).val("Restored to version"+" "+f);d.show()},deleteVersion:function(g){g.preventDefault();var d=this;var f=b(g.currentTarget).closest(".rw_item").attr("data-id");var c=this.model.get("versions").filter(function(e){return e.getVersionNumber()==f});if(c&&confirm(b(g.currentTarget).data("confirm"))){c[0].id="";c[0].destroy({success:function(){d.model.fetch({cache:false,success:function(){d.updateTemplate();d.render()}})}});this.model.trigger("change")}},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.EditableSectionView=RW.Backbone.View.extend({initialize:function(){var c=RW.Templates.Layout.editableSection({section:this.model.toJSON()});this.setElement(c)},render:function(){var c=RW.Templates.Layout.editableSection({section:this.model.toJSON()});b(this.el).html(b(c).html());return b(this.el)},destroy:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.SectionView=RW.Backbone.View.extend({events:{"click .rw_open_editor":"openEditorDirectly","click .rw_edit_macro":"editMacro","click .rw_add_item_button":"createItem",updatePositions:"updatePositions","click .rw_remove_item":"deleteItem",},initialize:function(){var c=RW.Templates.Layout.section({section:this.model.toJSON()});this.setElement(c);this.views=[];this.initSubscriptions()},render:function(){var c=RW.Templates.Layout.section({section:this.model.toJSON()});b(this.el).html(b(c).html());this.addAll();return this},initSubscriptions:function(){var c=this;RW.PubSub.on("layoutboard:create-dialog-cancel",function(d){RW._.each(c.views,function(e){if(d.view.model.id===e.model.id){c.removeItem(e.model.id)}})})},addOne:function(d){var c=new RW.Views.Layout.ItemView({model:d});b(".rw_add_item_container",this.el).before(b(c.render().el));this.views.push(c)},addAll:function(){this.model.get("items").forEach(RW._.bind(function(c){this.addOne(c)},this))},removeItem:function(d){var c=this.model.get("items").get(d);this.model.removeItem(c);b("#rw_item_"+d.replace(/\~/g,"\\~")).trigger("destroy");this.updatePositions();RW.removeTooltip()},addItem:function(d){var c=this.model.addItem(d);this.addOne(c);this.updatePositions()},makeSortable:function(){var d=this;var c=this.views;this.$(".rw_layout_section").sortable({items:"li.rw_item_board",helper:"original",connectWith:".ui-sortable",dropOnEmpty:true,tolerance:"pointer",over:function(e,f){b("#rw_layout_board_container .rw_selected").removeClass("rw_selected");b(this).addClass("rw_selected")},stop:function(e,f){b("#rw_layout_board_container .rw_selected").removeClass("rw_selected");RW.removeTooltip()},update:function(f,l){var n=d.model.id;if(l.sender!=undefined){var h=b(l.sender).data("id");if(n!=h){b(this).append(b(".rw_add_item_container",this));var g=d.model.collection;var e=g.get(n);var k=b(l.item).data("id");var m=g.get(h);var o=m.get("items").get(k);m.removeItem(o);e.addItem(o);b("#rw_section_"+h.replace(/\~/g,"\\~")).trigger("updatePositions");b("#rw_section_"+n.replace(/\~/g,"\\~")).trigger("updatePositions")}else{}}else{var g=d.model.collection;var j=g.get(n);var i=j.get("items");i.comparator=function(q,p){return q.getPosition()-p.getPosition()};i.sort()}b("#rw_section_"+n.replace(/\~/g,"\\~")).trigger("updatePositions");RW.PubSub.trigger("layoutboard:update-column-height")},})},openEditor:function(f){var d=this.model.get("items").get(b(f.currentTarget).closest(".rw_item").data("id"));f.stopPropagation();f.preventDefault();var c=new RW.Views.Layout.Popup({model:d})},openEditorDirectly:function(f){f.stopPropagation();f.preventDefault();var d=this.model.get("items").get(b(f.currentTarget).closest(".rw_item").data("id"));var c=new RW.Views.Layout.Popup({model:d,skipPopup:true})},editMacro:function(f){f.stopPropagation();f.preventDefault();var d=this.model.get("items").get(b(f.currentTarget).closest(".rw_item").data("id"));var c=new RW.Views.Layout.Popup({model:d,editMacro:true})},createItem:function(f){f.preventDefault();f.stopPropagation();var d;d=this.model.addItem();this.addOne(d);this.updatePositions();var c=new RW.Views.Layout.Popup({model:d})},deleteItem:function(c){this.removeItem(b(c.currentTarget).closest(".rw_item").data("id"));c.stopPropagation();c.preventDefault()},updatePositions:function(){for(var d=0;d<this.model.get("items").models.length;d++){var e=this.model.get("items").models[d];var c=b("#rw_item_"+e.get("id").replace(/\~/g,"\\~"),"#rw_section_"+this.model.get("id").replace(/\~/g,"\\~")).index();e.set("position",c)}RW.PubSub.trigger("layoutboard:unsaved-changes")}});RW.Views.Layout.ItemView=RW.Backbone.View.extend({events:{destroy:"destroyItem",},initialize:function(){var c=RW.Templates.Layout.item({item:this.model});this.setElement(c);this.model.unbind("change");this.model.bind("change",this.render,this)},render:function(){if(this.model.get("content")!=undefined&&this.model.get("content").length>0){var e=RW.Util.XHTMLparser.parse(this.model);var d=RW.Util.XHTMLparser.getAsHTML(e);var c="";for(var g in d){c+=d[g]}}var f=RW.Templates.Layout.item({item:this.model,content:c});b(this.el).html(b(f).html());return this},destroyItem:function(){this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.Popup=RW.Backbone.View.extend({popup:null,skipPopup:false,editMacro:false,itemView:null,events:{"click #rw_macrobrowser_button":"openMacroBrowser","click #rw_editor_button":"openEditor","click .rw_quicklink_button":"macroItemLinkHandler"},initialize:function(c){if(b("#rw_layoutboard_popup_frame").length>0){b("#rw_layoutboard_popup_frame").remove()}else{}if(c.skipPopup){this.openEditor()}else{if(c.editMacro){this.openMacroBrowser()}else{this.render()}}this.setElement(b(".dialog-page-body","#rw_layoutboard_popup_frame"))},render:function(){var c=this;this.popup=new AJS.Dialog({id:"rw_layoutboard_popup_frame",closeOnOutsideClick:true});this.popup.addHeader("Add new item");this.popup.addButton("Cancel",function(){c.popup.remove();RW.PubSub.trigger("layoutboard:create-dialog-cancel",{view:c})});RW.PubSub.trigger("layoutboard:popup-loaded",{itemView:c})},macroItemLinkHandler:function(e){var c=this;var d={name:b(e.currentTarget).data("item")};c.macro=d;RW.PubSub.trigger("layoutboard:quick-links-ready",{view:c});this.destroy()},openMacroBrowser:function(d){var c=this;RW.PubSub.trigger("layoutboard:macro-browser-ready",{view:c});this.destroy()},openEditor:function(d,e){if(d){d.stopPropagation()}var c=new RW.Views.Layout.EditFrame({model:this.model});if(!e){this.destroy()}},destroy:function(c){if(this.popup!=undefined){this.popup.remove()}else{b("#rw_layoutboard_popup_frame").remove()}this.undelegateEvents();this.$el.removeData().unbind();this.remove();RW.Backbone.View.prototype.remove.call(this)}});RW.Views.Layout.EditFrame=RW.Backbone.View.extend({initialize:function(){this.render()},render:function(){var c=this;RW.PubSub.trigger("layoutboard:editor-view-ready",{item:c})},bindFrame:function(e){var d=this.model;var c;b("#rw_popup_iframe_id").bind("editorIframeHasLoaded",function(){RW.PubSub.trigger("layoutboard:editor-loaded",{form:b("#rw_popup_iframe_id").contents().find("#editpageform")});if(b("#rw_popup_iframe_id").contents().find("#rw_saved_content").length>0){var i="";var h=b("#rw_popup_iframe_id").contents().find("#rw_saved_content");if(h.data("anti-xss")){i=h.text()}else{i=RW.htmlDecode(h.html())}d.set("content",i);var g=[];var f=[];b.each(b(".rw_macro_param_data",b("#rw_popup_iframe_id").contents().find("#rw_saved_macro_params")),function(j,k){var l=b(k).data();if(RW._.isEmpty(l.macroDefaultParameter)){f.push("")}else{f.push(l.macroDefaultParameter);delete l.macroDefaultParameter}g.push(l)});if(g.length>0){d.set("params",g)}if(f.length>0){d.set("defaultParameterValue",f)}else{d.set("defaultParameterValue",null)}e.remove();RW.hideLoader();RW.PubSub.trigger("layoutboard:unsaved-changes")}else{b("#rw_popup_iframe_id").contents().find("body").addClass("rw_layout_board_confluence_editor");b("#rw_popup_iframe_id").contents().find("#editor-precursor").remove();b("#rw_popup_iframe_id").contents().find("#header-precursor").remove();b("#rw_popup_iframe_id").contents().find("#rte-button-toolbartoggle").remove();b("#rw_popup_iframe_id").css("visibility","visible");RW.hideLoader();b(".rw_editor_done_button","#rw_popup_editor_dialog").bind("click",function(){b("#rw_popup_iframe_id").contents().find("#rte-savebar").show();b("#rw_popup_iframe_id").contents().find("#rte-button-publish").click();b("#rw_popup_editor_dialog").hide();b(".aui-blanket","body").hide();RW.PubSub.trigger("layoutboard:editor-clicked")})}})}});RW.Views.Layout.TemplatesView=RW.Backbone.View.extend({boardType:"",events:{"click a":"selectTemplate"},initialize:function(c){if(c.boardType!==undefined){this.boardType=c.boardType}this.render()},render:function(){var d=0;var c=b("#rw_layout_board_container .rw_layout_board_mode").data("space-type");var g=new AJS.Dialog({id:"rw_layout_template_popup",closeOnOutsideClick:true});var f=0;var e=b(RW.Templates.Layout.templateList({model:this.model.toJSON()}));g.addPanel("",e,"");if(c!=undefined){b("#rw_template_"+c).addClass("rw_selected")}if(this.boardType==="space"||this.boardType==="global_space"){g.addHeader("Choose a space type");g.addSubmit("Select space type",function(h){if(b("a.rw_selected",e).data("template-key")!==undefined){mainView.loadTemplate(b("a.rw_selected",e).data("template-key"))}g.remove()})}else{g.addHeader("Choose a template");g.addSubmit("Select template",function(h){if(b("a.rw_selected",e).data("template-key")!==undefined){mainView.loadTemplate(b("a.rw_selected",e).data("template-key"))}g.remove()})}g.addCancel("Cancel",function(){g.remove()});g.show();g.gotoPanel(d);this.setElement(e);return this.$el},selectTemplate:function(c){b("a.rw_selected",this.$el).removeClass("rw_selected");b(c.currentTarget).addClass("rw_selected")}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/layoutboard-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(c){var e=false;var b;var d;AJS.toInit(function(){if(c("#rw_layout_board_container").length>0){c("#rw_layout_board_container").html(RW.Templates.Layout.loader())}c(document).ajaxSuccess(function(l,m,k){if(k.url.indexOf(AJS.params.contextPath+"/plugins/macrobrowser/browse-macros.action")==0){if(c("#rw_global_dashboard_editor_oa").length>0){var i=new RW.Models.Layout.Board({contentKey:"dashboard",type:"dashboard"});a(i,c("#rw_dashboard_link").text().trim(),"content",c("#rw_global_dashboard_editor_oa").data("anti-xss"));var h=function(n){f(n,contextPath+"/dashboard.action")};RW.PubSub.on("layoutboard:saved",function(){h(true)});RW.PubSub.on("layoutboard:deleted",h);RW.PubSub.on("layoutboard:canceled",h);RW.PubSub.on("layoutboard:version-restored",function(){h(true)})}else{if(c("#rw_global_dashboard_editor_category").length>0){var j=c("#rw_global_dashboard_editor_category");var i=new RW.Models.Layout.Board({contentKey:j.data("category-key"),type:"category"});a(i,j.data("category-name")+" "+"Dashboard","content",c("#rw_global_dashboard_editor_category").data("anti-xss"));var h=function(n){f(n,contextPath+"/category/"+j.data("category-key"))};RW.PubSub.on("layoutboard:saved",function(){h(true)});RW.PubSub.on("layoutboard:deleted",h);RW.PubSub.on("layoutboard:canceled",h);RW.PubSub.on("layoutboard:version-restored",function(){h(true)})}else{if(c("#rw_edit_space_layout_board").length>0){var i=new RW.Models.Layout.SpaceLayoutBoard({contentKey:c("#rw_space_key").html(),type:"space"});a(i,"Space Layout","content",c("#rw_edit_space_layout_board").data("anti-xss"));var h=function(n){f(n,contextPath+"/spaces/viewspace.action?key="+c("#rw_space_key").html())};RW.PubSub.on("layoutboard:saved",function(){h(true)});RW.PubSub.on("layoutboard:deleted",h);RW.PubSub.on("layoutboard:canceled",h);RW.PubSub.on("layoutboard:version-restored",function(){h(true)});RW.PubSub.on("layoutboard:space-type-selected",function(){h(true)})}else{if(c("#rw_edit_user_dashboard_layout").length>0){var i=new RW.Models.Layout.Board({contentKey:c("#rw_user_key").html(),type:"user"});a(i,"User dashboard","content",c("#rw_edit_user_dashboard_layout").data("anti-xss"));var h=function(n){f(n,contextPath+"/users/view-user-dashboard.action?username="+c("#rw_user_key").html())};RW.PubSub.on("layoutboard:saved",function(){h(true)});RW.PubSub.on("layoutboard:deleted",h);RW.PubSub.on("layoutboard:canceled",h);RW.PubSub.on("layoutboard:version-restored",function(){h(true)})}else{if(c("#rw_edit_global_user_dashboard_layout").length>0){var g=c("#rw_custom_user_dashboard_list").length>0;var i=new RW.Models.Layout.Board({contentKey:c("#rw_user_key").html(),type:"global_user"});a(i,"User dashboard","global",c("#rw_edit_global_user_dashboard_layout").data("anti-xss"));RW.PubSub.on("layoutboard:saved",function(){RW.message({type:"success"},"Your changes have been saved");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});if(g){RW.PubSub.trigger("layoutboard:add-custom-users")}});RW.PubSub.on("layoutboard:deleted",function(){RW.message({type:"success"},"You have successfully reverted back to the default settings");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});if(g){RW.PubSub.trigger("layoutboard:add-custom-users");i=new RW.Models.Layout.Board({contentKey:c("#rw_user_key").html(),type:"global_user"});a(i,"User dashboard","global")}});RW.PubSub.on("layoutboard:canceled",function(){RW.message({type:"info"},"Editing canceled ");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:version-restored",function(){RW.message({type:"success"},"You have successfully restored a previous version");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});if(g){RW.PubSub.on("layoutboard:change-to-custom",function(n){i=new RW.Models.Layout.SpaceLayoutBoard({contentKey:n.key,type:"user"});a(i,n.key,"content")});RW.PubSub.trigger("layoutboard:add-custom-users")}}else{if(c("#rw_edit_global_space_layout_board").length>0){var i=new RW.Models.Layout.SpaceLayoutBoard({contentKey:"global_space",type:"global_space"});a(i,"Space Layout","global",c("#rw_edit_global_space_layout_board").data("anti-xss"));RW.PubSub.on("layoutboard:saved",function(){RW.message({type:"success"},"Your changes have been saved");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces")});RW.PubSub.on("layoutboard:deleted",function(){RW.message({type:"success"},"You have successfully reverted back to the default settings");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces");i=new RW.Models.Layout.SpaceLayoutBoard({contentKey:"global_space",type:"global_space"});a(i,"Space Layout","global")});RW.PubSub.on("layoutboard:canceled",function(){RW.message({type:"info"},"Editing canceled ");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:space-type-selected",function(){RW.message({type:"success"},"You have successfully selected a space type");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:add-custom-spaces")});RW.PubSub.on("layoutboard:version-restored",function(){RW.message({type:"success"},"You have successfully restored a previous version");i.fetch({cache:false,success:function(){RW.mainView.responsiveLayoutEditor()}});RW.PubSub.trigger("layoutboard:refresh")});RW.PubSub.on("layoutboard:change-to-custom",function(n){i=new RW.Models.Layout.SpaceLayoutBoard({contentKey:n.key,type:"space"});a(i,n.name,"content")});RW.PubSub.trigger("layoutboard:add-custom-spaces")}}}}}}}});var f=function(i,h){d=i;if(c.browser.msie&&!i){window.onbeforeunload=function(){};var g=RW.backEventHandler();if(g!=undefined&&g.length>0){if(confirm(g)){window.location=h;return}}else{window.location=h}}else{window.location=h}window.onbeforeunload=RW.backEventHandler}});function a(f,h,i,g){if(!e){window.onbeforeunload=RW.backEventHandler;e=true}f.fetch({cache:false,reset:true,success:function(j){f.sortLayoutBoard();RW.mainView=new RW.Views.Layout.MainView({model:f,title:h,level:i,antiXSS:g});b=RW.mainView;c("#rw_layout_board_container").html(RW.mainView.render());RW.mainView.responsiveLayoutEditor();RW.PubSub.trigger("layoutboard:update-column-height")},failure:function(j){console.log("failed to fetch content")}});RW.openEditorIframeDialog=function(m,q){RW.showLoader();var k="rw_popup_editor_dialog";var p=RW.getPopupWidth();var l=RW.getPopupHeight();var j=new AJS.Dialog({width:p,height:l,id:k});var n="jQuery(this).trigger('editorIframeHasLoaded')";var o=c('<div><iframe id="rw_popup_iframe_id" name="rw_popup_iframe_id" style="visibility:hidden;" onload="'+n+' " allowTransparency="true" frameBorder="0" class="rw_popup_iframe" style="width:100%;" ></iframe></div>');j.addPanel("",o,"");j.addButton("Done",function(){},"aui-button aui-button-primary rw_editor_done_button");j.addCancel("Cancel",function(){j.remove();RW.hideLoader()});j.show();if(RW.confluenceVersion<5){j.popup.element.height(j.popup.element.height()-20)}c("iframe",o).attr("height",c(".dialog-panel-body",j.popup.element).height());return j};RW.openPreviewDialog=function(){var k="rw_popup_preview_dialog";var p=RW.getPopupWidth();var l=RW.getPopupHeight();var m=55;var j=new AJS.Dialog({width:p,height:l,id:k});var p=RW.getPopupWidth();var l=RW.getPopupHeight();var j=new AJS.Dialog({width:p,height:l,id:k});var n="jQuery(this).trigger('editorIframeHasLoaded')";var o=c('<div><iframe id="rw_preview_popup_iframe_id" name="rw_preview_popup_iframe_id" onload="RW.hideLoader(); '+n+' " allowTransparency="true" frameBorder="0" class="rw_popup_iframe" style="width:100%;" ></iframe></div>');j.addPanel("",o,"");j.addButton("Done",function(){j.remove();RW.hideLoader()},"aui-button aui-button-primary rw_editor_done_button");j.show();if(RW.confluenceVersion<5){j.popup.element.height(j.popup.element.height()-20)}c("iframe",o).attr("height",c(".dialog-panel-body",j.popup.element).height());return j}}RW.backEventHandler=function(f){if(b&&b.unsavedChanges&&!d){return "The board still has unsaved changes, are you sure you want to leave?"}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/layoutboard/custom-layout-board-list-min.js' */
if(typeof RW==="undefined"){var RW={}}(function(g){var a=false;AJS.toInit(function(){RW.PubSub.on("layoutboard:add-custom-spaces",function(){f("Spaces with custom space layouts","spaces")});RW.PubSub.on("layoutboard:add-custom-users",function(){f("User with custom user dashboards","users")})});function f(j,h){var i=g(RW.Templates.Button.button({content:j,cssClass:"rw_custom_layout_board_button"}));if(RW.confluenceVersion>=5){i.css("margin-top","-50px")}else{i.css("margin-bottom","15px")}if(!a){g("#rw_layout_board_container").parent().prepend(i);a=true}i.click(function(){var k=null;if(h==="spaces"){k=new c()}else{k=new d()}k.fetch({cache:false,success:function(n){var l=new b({model:k});var m=new AJS.Dialog({id:"rw_layout_board_list_dialog",closeOnOutsideClick:false,width:840});m.addHeader(j);m.addPanel("",l.render(h),"");m.show();m.addCancel("Cancel",function(){m.remove()});m.addButton("Refresh",function(){l.refresh()},"rw_left")},failure:function(l){console.log("failed to fetch content")}})})}var c=RW.Brace.Model.extend({namedAttributes:{spaces:e},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/custom-spaces"}});var d=RW.Brace.Model.extend({namedAttributes:{users:e},url:function(){return contextPath+"/rest/originaltheme/1.0/layoutboard/custom-users"}});var e=RW.Brace.Model.extend({});var b=RW.Backbone.View.extend({type:"",events:{"click .rw_refresh":"refresh"},initialize:function(){},render:function(i){this.type=i;var j;if(i=="spaces"){j=this.model.get("spaces")}else{if(i=="users"){j=this.model.get("users")}}var h=RW.Templates.Layout.customLayoutBoardList({list:j,type:i});this.$el.html(h);return this.$el},refresh:function(){var h=this;this.model.fetch({cache:false,success:function(i){h.render(h.type)}})},loadBoard:function(j){var i=g(j.currentTarget).closest("li").data("key");var h=g(j.currentTarget).closest("li").data("name");RW.PubSub.trigger("layoutboard:change-to-custom",{key:i,name:h})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/xhtml-parser-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Util==="undefined"){RW.Util={}}(function(i){var o="AC:MACRO";var b="AC:STRUCTURED-MACRO";var n="structured-macro";var p="macro";var c="ac:name";var j="AC:PARAMETER";var d="parameter";var q="AC:DEFAULT-PARAMETER";var m="default-parameter";var g="AC:RICH-TEXT-BODY";var h="rich-text-body";var f="AC:PLAIN-TEXT-BODY";var e="plain-text-body";var l=50;var k="AC:IMAGE";var a="image";RW.Util.XHTMLparser={parse:function(v){var u=v.get("content");var x=[];var r=[];var w=[];var t=false;var z=0;var y=0;if(i.browser.msie&&parseInt(i.browser.version,10)===8&&u.indexOf("</ac:structured-macro>")===-1){u=u.replace(/(<ac:structured-macro.*?)\/>/g,"$1></ac:structured-macro>")}u=u.replace(/<!\[CDATA\[([\s\S]*?)\]\]>/g,"");s(u);if(t){w.push({more:true})}return w;function s(A){i.each(i(A),function(){var E=i(this).prop("tagName");if(E==o||E==b||E==p||E==n){var G={};G.name=i(this).attr(c);var B;B=AJS.MacroBrowser.getMacroMetadata(G.name);if(B){G.icon=B.icon;if(B.title){G.title=B.title}}i.each(this.childNodes,function(){var J=i(this).prop("tagName");var L=this.innerHTML;switch(J){case d:case j:if(!G.params){G.params={}}var K=i(this).attr(c);if(RW._.isEmpty(K)){G.defaultParameterValue=L}else{G.params[K]=L}break;case m:case q:G.defaultParameterValue=L;break;case h:case g:G.body=this;break;case e:case f:G.body=this;break;default:console.log("Found an unknown macro property while generating preview html: "+J);break}});var I;var D;if(RW._.isArray(v.get("params"))){I=v.get("params")[z];z++}else{I=v.get("params")}if(RW._.isArray(v.get("defaultParameterValue"))){D=v.get("defaultParameterValue")[y];y++}else{D=v.get("defaultParameterValue")}if(!RW._.isEmpty(I)){G.params=I}if(!RW._.isEmpty(D)){G.defaultParameterValue=D}if(w.length<3){w.push(G)}else{t=true;return}}else{if(E=="P"){s(this.childNodes)}else{if(w.length<3){if(E==k||E==a){var C={};C.isImage=true;C.content="<div>"+"Unable to preview item"+"</div>";if(i(":first",this).attr("ri:filename")!=undefined){}C.content='<img src="'+contextPath+"/download/attachments/"+AJS.Meta.get("page-id")+"/"+i(":first",this).attr("ri:filename")+'" />';w.push(C)}else{var H;if(this.textContent!=undefined){H=this.textContent}else{if(this.innerText!=undefined){H=this.innerText}else{if(E==undefined&&this.nodeName=="#text"){H=this.data}}}if(H!=undefined){var F=H.replace(/\W|\n/g,"");if(F.length>0){w.push(this)}}else{}}}else{t=true;return}}}})}},getAsHTML:function(u){var t=u;var v=false;if(t.length==1&&t[0].name&&!t[0].body){v=true}var r=[];if(t.length==0){var w=i("<div>"+"Unable to preview item"+"</div>");t.push(w)}for(var s=0;s<t.length;s++){var z=t[s];if(z.name){var A="";if(z.defaultParameterValue){A+="<li><b>"+z.defaultParameterValue+"</b></li>"}if(z.params){if(A===undefined){var A="<ul>"}for(var x in z.params){A+="<li>"+x+": <b>";A+=RW.htmlEncode(z.params[x]);A+="</b></li>"}}if(A!==""){z.paramDesc="<ul>"+A+"</ul>"}if(v){z.hasEdit=true}r.push(RW.Templates.Layout.macroPreview({macro:z}))}else{if(z.isImage){r.push(RW.Templates.Layout.imagePreview({image:z.content}))}else{if(z.more){r.push('<li class="rw_more_preview" data-tooltip="">...</li>')}else{var y=i("<div></div>");y.append(z);r.push(RW.Templates.Layout.itemPreview({content:y.html()}))}}}}return r}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/resize-util-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Util==="undefined"){RW.Util={}}(function(a){RW.Util.ResizableUtil={totalSize:0,resizeColumns:function(j,b,g,d,h,i){var e=this;var f=0;var c=RW._.pluck(j,"model");RW._.each(RW._.initial(j),function(k,l){a(k.$el,a(b)).resizable({handles:"e",containment:"parent",grid:[1,0],maxWidth:g-(j.length-1)*d,minWidth:d,start:function(m,n){a("#rw_layout_board_container .ui-resizable-handle").attr("data-tooltip","");RW.removeTooltip();f=n.originalSize.width;e.setCurrentMaxWidth(n.element,c,g,d);n.element.parent().addClass("rw_resizing")},stop:function(m,n){n.element.parent().removeClass("rw_resizing");a("#rw_layout_board_container .ui-resizable-handle").attr("data-tooltip","Resize sections");i()},resize:function(o,q){var r=f-q.size.width;e.sumOfCalculatedWidthRate=0;var n=0;var p=[];var m=0;RW._.each(c,function(t,s){if(t.id!=a(q.element).data("id")){n+=parseInt(a("#rw_section_"+t.id).width())}else{m=s}});if(q.position.left==q.originalPosition.left){p=RW._.rest(c,(m+1));p=p.concat(RW._.first(c,(m)).reverse())}RW._.each(p,function(t,s){if(t.id!=a(q.element).data("id")){var v=parseInt(a("#rw_section_"+t.id).width());var u=Math.max(d,g-a(q.element).width()-(n-v));a("#rw_section_"+t.id).width(u);n-=(v-u);a("#rw_section_"+t.id).find("h1").html(Math.round(Math.max(10,(u/g)*100))+"%");e.sumOfCalculatedWidthRate+=Math.round(Math.max(10,(u/g)*100));r=r-(v-a("#rw_section_"+t.id).width())}});f=f-r;a(q.element).find("h1").html(Math.round(100-e.sumOfCalculatedWidthRate)+"%")}})})},setCurrentMaxWidth:function(e,i,h,d){var g=a(e).data("id");var b=0;var c=0;RW._.each(i,function(k,j){if(k.id!=g){c+=parseInt(a("#rw_section_"+k.id).width())}else{b=c}});var f=RW._.pluck(i,"id");a(e).resizable({maxWidth:h-b-RW._.rest(f,RW._.indexOf(f,g)+1).length*d})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/utils/dialog-util-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}if(typeof RW.Views.SpaceOrganizer==="undefined"){RW.Views.SpaceOrganizer={}}(function(a){AJS.toInit(function(){});RW.Views.Dialog=RW.Brace.View.extend({dialog:null,template:null,clickedDone:false,initialize:function(b){this.template=RW.Templates.popup();this.setElement(a(this.template))},render:function(){this.template=RW.Templates.popup();this.setElement(a(this.template));return this.$el},open:function(f,e,d,g,c){var b=true;if(c==true){b=false}this.render();var h=this;this.dialog=new AJS.Dialog({id:"rw_popup_dialog_admin",width:800,height:600,closeOnOutsideClick:b});this.dialog.hide();this.dialog.addHeader(e);this.dialog.addPanel();this.dialog.addButton("Save",function(){h.clickedDone=true;var i=a(h.dialog.popup.element).clone();if(d&&d(i)){h.dialog.remove()}},"aui-button aui-button-primary rw_margin_right");a(".button-panel-button",this.dialog.popup.element).removeClass("button-panel-button");this.dialog.addLink("Cancel",function(){h.dialog.remove()});AJS.$(document).bind("hideLayer",function(k,j,i){if(!h.clickedDone){if(j==="popup"&&i===h.dialog.popup){if(g){g()}}}else{h.clickedDone=false}});if(f!=undefined&&f.render!=undefined){a(".dialog-panel-body",this.dialog.popup.element).html(f.render());this.dialog.show()}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/space-layout-dialog-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(c){var d=false;AJS.toInit(function(){RW.PubSub.on("space-layout-blueprint:show",function(e){if(AJS.Meta.get("show-space-layout-dialog")==true){a(e.contentKey)}else{location.reload()}})});function a(f){var e=new RW.Models.Layout.TemplateList({type:"space",contentKey:f});RW.showLoader();e.fetch({cache:false,success:function(l){RW.hideLoader();var i=new b({model:e});var j=new AJS.Dialog({id:"rw_space_layout_dialog",closeOnOutsideClick:false,width:840});j.addHeader("Choose a Space Layout");var h=i.render();j.addPanel("",h,"");j.show();j.addCancel("Cancel",function(){j.remove()});var g=c("#rw_space_layout_dialog .dialog-button-panel");var k=c(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Done"}));k.css("margin-right","10px").click(function(){var m=c("a.rw_selected",h).data("template-key");if(m==="global"||m===undefined){j.remove();location.reload()}else{if(m==="custom"){RW.showLoader();window.location=contextPath+"/spaces/refinedwiki/edit-space-layout.action?key="+AJS.Meta.get("space-key")}else{RW.showLoader();c.ajax({url:contextPath+"/rest/originaltheme/1.0/layoutboard/space/template-board/"+AJS.Meta.get("space-key")+"?template="+m,type:"PUT",dataType:"json",success:function(n){location.reload()},error:function(n){}})}}});g.prepend(k);j.show()},error:function(g){RW.hideLoader()}})}var b=RW.Backbone.View.extend({events:{"click a":"selectTemplate"},initialize:function(){},render:function(){var e=RW.Templates.Layout.spaceLayoutBlueprint({model:this.model.toJSON()});this.setElement(e);return this.$el},selectTemplate:function(f){c("a.rw_selected",this.$el).removeClass("rw_selected");c(f.currentTarget).addClass("rw_selected")}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/spaces/space-category-dialog-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(c){var d=false;AJS.toInit(function(){if(AJS.Meta.get("space-just-created")){if(AJS.Meta.get("show-move-space-dialog")){d=true;b()}else{if(AJS.Meta.get("show-space-layout-dialog")){RW.PubSub.trigger("space-layout-blueprint:show",{contentKey:AJS.Meta.get("space-key")})}}}if(c("#rw_space_category_btn, #rw_space_category_btn-tab").length>0){c("#rw_space_category_btn, #rw_space_category_btn-tab").click(function(){b();return false})}});function b(){var f=new RW.Models.CategoryList();RW.showLoader();f.fetch({cache:false,data:{recursive:"true"},success:function(k){RW.hideLoader();var n=new e({model:f});var p=new AJS.Dialog({id:"rw_space_category_dialog",closeOnOutsideClick:false,width:840});p.addHeader("Choose a category");var i=n.render();p.addPanel("",i,"");p.show();var q="_uncategorized";p.addCancel("Cancel",function(){p.remove()});var m=c("#rw_space_category_dialog .dialog-button-panel");if(d){var l=c(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Next"}))}else{var l=c(RW.Templates.Button.button({cssClass:"aui-button aui-button-primary",content:"Done"}))}l.css("margin-right","10px").click(function(){var r=new a();r.setKey(q);r.setContentType("space");r.setId(AJS.Meta.get("space-key"));if(c("a.rw_selected",i).length>0){r.setNewCategoryKey(c("a.rw_selected",i).data("category-key"))}else{r.setNewCategoryKey("")}RW.showLoader();r.save({},{success:function(s){if(d){RW.hideLoader();RW.PubSub.trigger("space-layout-blueprint:show",{contentKey:AJS.Meta.get("space-key")});p.remove()}else{location.reload()}},error:function(s,t){RW.hideLoader();if(t.status==401){alert("You don\'t have the right permissions to move this space to another category")}location.reload()}})});m.prepend(l);if(AJS.Meta.get("abstract-category-key")!==""){q=AJS.Meta.get("abstract-category-key");var g=c("#rw_category_item_"+q,i);g.addClass("rw_selected");var j=g.closest("#rw_category_chooser");if(g!=undefined&&g.length>0){var h=g.offset().top;var o=h+g.height();if(o>j.height()){j.scrollTop(o-j.height())}}}p.show()},error:function(g){}})}var a=RW.Brace.Model.extend({namedAttributes:{key:"string",id:"string",newCategoryKey:"string",contentType:"string"},url:function(){return contextPath+"/rest/originaltheme/1.0/category/"+this.get("key")+"/child/"+this.get("id")+"/move"},});var e=RW.Backbone.View.extend({events:{"click a":"selectCategory"},initialize:function(f){},render:function(){var f=RW.Templates.categoryBlueprint({model:this.model.toJSON()});this.setElement(f);return this.$el},selectCategory:function(f){if(c(f.target).hasClass("rw_selected")){c("a.rw_selected",this.$el).removeClass("rw_selected")}else{c("a.rw_selected",this.$el).removeClass("rw_selected");c(f.target).addClass("rw_selected")}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/users-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(b){var a=250;RW.Models.Users=RW.Brace.Collection.extend({initialize:function(c){}});RW.Models.User=RW.Brace.Model.extend({saveAsCategoryAdmin:function(d,c){if(d==undefined){d={}}d.url=contextPath+"/rest/originaltheme/1.0/category/"+c+"/admin?username="+this.get("username");this.id=1;return RW.Backbone.Model.prototype.save.call(this,{},d)}});RW.Models.Users.model=RW.Models.User;RW.Models.UsersModel=RW.Brace.Model.extend({namedAttributes:{usersParam:"string",groupsParam:"string",layout:"string",title:"string",remoteUser:"string",description:"string",excludeUserCategories:"boolean",following:"boolean",canSeePersonalSpace:"boolean",users:RW.Models.Users},initialize:function(c){this.users=new RW.Models.Users()},url:function(){return contextPath+"/rest/originaltheme/1.0/user?users="+encodeURIComponent(this.get("usersParam"))+"&groups="+encodeURIComponent(this.get("groupsParam"))+"&layout="+encodeURIComponent(this.get("layout"))+"&excludeUserCategories="+encodeURIComponent(this.get("excludeUserCategories"))}});RW.Models.UserSearchData=RW.Brace.Model.extend({namedAttributes:{title:"string",description:"string",groups:"object",type:"string",users:RW.Models.Users,searchWrapper:RW.Models.UserSearchWrapper}});RW.Models.UserSearchWrapper=RW.Brace.Model.extend({title:"",namedAttributes:{totalSize:"number",result:RW.Models.UserSearchResults,group:"object",query:"string",type:"string"},initialize:function(c){if(c){if(c.type){this.type=c.type}if(c.title){this.title=c.title}}},url:function(){return contextPath+"/rest/prototype/1/search/"+this.type+"?query="+this.get("query")},fetchGroups:function(c){if(c==undefined){c={}}if(RW.confluenceVersion<5.1){c.url=contextPath+"/rest/originaltheme/1.0/search/group?query="+this.get("query")}else{c.url=contextPath+"/rest/prototype/1/search/group?query="+this.get("query")}return RW.Backbone.Model.prototype.fetch.call(this,c)},legacyUrl:function(){return contextPath+"/rest/originaltheme/1.0/search/group?query="+this.get("query")}});RW.Models.UserSearchResults=RW.Brace.Collection.extend({initialize:function(c){this.model=RW.Models.UserSearchResult}});RW.Models.UserSearchResult=RW.Brace.Model.extend({});RW.Views.UsersView=RW.Backbone.View.extend({width:0,events:{},initialize:function(c){if(c.width!=undefined){this.width=c.width}},render:function(){var d=this.model.toJSON();RW._.each(d.users,function(e){e.uCategories=[];e.uSpaces=[];RW._.each(e.userCategories,function(f){if(f.type=="category"){e.uCategories.push(f)}else{if(f.type=="space"){e.uSpaces.push(f)}}})});var c=RW.Templates.Users.list({model:d,columns:Math.floor(this.width/a),hipChatBaseUrl:b('meta[name="rw-hipchat-base-url"]').prop("content")});this.setElement(c);return this.$el}});RW.Views.UserView=RW.Backbone.View.extend({title:undefined,canUpdateStatus:undefined,initialize:function(c){if(c&&c.title){this.title=c.title}if(c&&c.canUpdateStatus){this.canUpdateStatus=c.canUpdateStatus}},render:function(){var e=this.model.get("users");if(e&&e.at(0)!=undefined){var c=e.at(0).toJSON()}if(c){c.uCategories=[];c.uSpaces=[];RW._.each(c.userCategories,function(f){if(f.type=="category"){c.uCategories.push(f)}else{if(f.type=="space"){c.uSpaces.push(f)}}})}c.username=RW.htmlDecode(c.username);var d=RW.Templates.Users.userDetails({user:c,layout:this.model.get("layout"),remoteUser:this.model.get("remoteUser"),following:c.following,canSeePersonalSpace:this.model.get("canSeePersonalSpace"),title:this.title,canUpdateStatus:this.canUpdateStatus,hipChatBaseUrl:b('meta[name="rw-hipchat-base-url"]').prop("content")});this.setElement(d);return this.$el}});RW.Views.UserSearchView=RW.Brace.View.extend({searchWrapperModel:null,title:null,description:null,lastQuery:"",events:{"keyup #rw_input_search_groups":"search","keyup #rw_input_search_users":"search",keydown:"handleKeyDown","click .rw_results_container li":"addTag","click .rw_tag_list .rw_delete_button":"removeTag"},initialize:function(c){if(c&&c.searchWrapperModel){this.searchWrapperModel=c.searchWrapperModel}else{this.searchWrapperModel=this.model.get("searchWrapper")}if(c&&c.title){this.title=c.title}else{this.title=this.model.get("title")}if(c&&c.description){this.description=c.description}else{this.description=this.model.get("description")}if(this.searchWrapperModel.get("type")=="user"){var d;if(this.model.get("users").toJSON!==undefined){d=this.model.get("users").toJSON()}else{d=this.model.get("users")}this.template=RW.Templates.Users.userSearch({users:d,title:this.title,description:this.description})}else{this.template=RW.Templates.Users.groupSearch({groups:this.model.get("groups"),title:this.title,description:this.description})}this.setElement(b(this.template))},render:function(){if(this.searchWrapperModel.get("type")=="user"){var c;if(this.model.get("users").toJSON!==undefined){c=this.model.get("users").toJSON()}else{c=this.model.get("users")}this.template=RW.Templates.Users.userSearch({users:c,title:this.title,description:this.description})}else{this.template=RW.Templates.Users.groupSearch({groups:this.model.get("groups"),title:this.title,description:this.description})}this.$el.html(b(this.template).html());return this.$el},handleKeyDown:function(c){if(c.which==27&&(this.$(".rw_results_container").is(":visible"))){this.$(".rw_results_container").hide();return false}},search:function(f){f.stopPropagation();var d=b(f.currentTarget).val();if(d!=""&&d!=this.lastQuery){this.lastQuery=d;var c=this;this.searchWrapperModel.set("query",d);if(this.searchWrapperModel.get("type")=="user"){this.searchWrapperModel.fetch({cache:false,success:function(){var e=b(RW.Templates.Users.searchResult({results:c.searchWrapperModel.toJSON().result}));c.$(".rw_results_container").html(e);c.$(".rw_results_container").show();RW.startKeyable(c.$(".rw_results_container"),null,"search")}})}else{this.searchWrapperModel.fetchGroups({success:function(){var e=b(RW.Templates.Users.searchResult({results:c.searchWrapperModel.toJSON().result}));c.$(".rw_results_container").html(e);c.$(".rw_results_container").show();RW.startKeyable(c.$(".rw_results_container"),null,"search")}})}}else{if(d==""){this.$(".rw_results_container").html("");this.$(".rw_results_container").hide()}}},addTag:function(c){if(this.searchWrapperModel.get("type")=="user"){this.addUser(c)}else{if(this.searchWrapperModel.get("type")=="group"){this.addGroup(c)}}},addUser:function(j){var f=b(j.currentTarget).data("name");var c=b(".rw_search_item_title",j.currentTarget).html();this.$("#rw_input_search_users").val("");var m=false;var l=this;if(this.model.get("users") instanceof RW.Backbone.Collection){RW._.each(this.model.get("users").models,function(e){if(e.get("username")==f){m=true}})}else{for(var g=0;g<this.model.get("users").length;g++){var d=this.model.get("users")[g];var k=d.username!=undefined?d.username:d.get("username");if(k==f){m=true;break}}}if(!m){var d=new RW.Models.User({name:c,username:f});if(this.model.get("users").add!=undefined){this.model.get("users").add(d)}else{this.model.get("users").push(d)}var h=b(RW.Templates.Users.resultTag({name:c,key:f}));this.$(".rw_search_result_users").append(h)}this.$(".rw_results_container").html("");this.$(".rw_results_container").hide();this.lastQuery=""},addGroup:function(h){var f=b(h.currentTarget).data("name");this.$("#rw_input_search_groups").val("");var g=false;var c=this;RW._.each(this.model.get("groups"),function(e){if(e==f){g=true}});if(!g){if(this.model.get("groups")==undefined){this.model.set("groups",[])}this.model.get("groups").push(f);var d=b(RW.Templates.Users.resultTag({name:f,key:f}));this.$(".rw_search_result_groups").append(d)}this.$(".rw_results_container").html("");this.$(".rw_results_container").hide();this.lastQuery=""},removeTag:function(c){if(this.searchWrapperModel.get("type")=="user"){this.removeUser(c)}else{if(this.searchWrapperModel.get("type")=="group"){this.removeGroup(c)}}},removeUser:function(d){var c=b(d.currentTarget).closest("li");var g=c.data("key");if(this.model.get("users").models!=undefined){this.model.get("users").models=RW._.filter(this.model.get("users").models,function(e){return e.get("username")!=g})}else{var f=this.model.get("users");f=RW._.filter(f,function(e){return e.username!=g});this.model.set("users",f)}c.remove()},removeGroup:function(g){var d=b(g.currentTarget).closest("li");var c=d.data("key");var f=RW._.filter(this.model.get("groups"),function(e){return e!=c});this.model.set("groups",f);d.remove()}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:batch', location = 'originaltheme/js/users/users-controller-min.js' */
if(typeof RW==="undefined"){var RW={}}if(typeof RW.Models==="undefined"){RW.Models={}}if(typeof RW.Views==="undefined"){RW.Views={}}(function(c){AJS.toInit(function(){RW.registerUserClickEvents();var d=c(".rw_users_macro");if(d.length>0){RW._.each(d,function(f){b(c(f))})}var e=c(".rw_user_details_macro");if(e.length>0){RW._.each(e,function(f){a(c(f))})}});var b=function(k){var d=c(".rw_users_macro_params",k).data("users");var e=c(".rw_users_macro_params",k).data("groups");var i=c(".rw_users_macro_params",k).data("title");var h=c(".rw_users_macro_params",k).data("layout");var j=c(".rw_users_macro_params",k).data("description");var l=c(".rw_users_macro_params",k).data("excludeUserCategories");var f=new RW.Models.UsersModel({usersParam:d,groupsParam:e,title:i,layout:h,description:j,excludeUserCategories:l,remoteUser:AJS.Meta.get("remote-user")});var g=c(RW.Templates.loader({type:"circle",bg:"gray"}));k.append(g);f.fetch({cache:false,success:function(){var m=new RW.Views.UsersView({model:f,width:k.width()});g.remove();k.append(m.render());RW.initHipchatStatus();Confluence.Binder.userHover();RW.registerUserClickEvents()},error:function(){g.remove()}})};var a=function(k){var f=k.data("username");var j=k.data("title");var g=k.data("layout");var h=k.data("can-update-status");var i=k.data("canSeePersonalSpace");if(RW._.isEmpty(g)){g="full"}var l=k.data("excludeUserCategories");var d=new RW.Models.UsersModel({usersParam:f,title:j,layout:g,excludeUserCategories:l,canSeePersonalSpace:i,remoteUser:AJS.Meta.get("remote-user")});var e=c(RW.Templates.loader({type:"circle",bg:"gray"}));k.append(e);d.fetch({cache:false,data:{showDeactive:true},success:function(){var m=new RW.Views.UserView({model:d,title:j,canUpdateStatus:h});e.remove();k.append(m.render());RW.initHipchatStatus();Confluence.Binder.userHover();RW.registerUserClickEvents()},error:function(){e.remove()}})};RW.registerUserClickEvents=function(){RW._.each(c(".rw_user_details .rw_follow"),function(d){c("a",d).unbind("click");c("a",d).bind("click",function(f){f.stopPropagation();c("span",d).removeClass("rw_no_icon").addClass("rw_loading");c.ajax({url:contextPath+"/rest/originaltheme/1.0/user/"+c(d).data("username")+"/follow",type:"POST",cache:false,success:function(e){var g=e;c("span",d).addClass("rw_no_icon").removeClass("rw_loading");if(g){c(d).removeClass("rw_follow");c(d).addClass("rw_unfollow");c("span",d).html("Stop Following")}RW.registerUserClickEvents()},error:function(e){if(e.status!=0){alert(e.status+" "+e.statusText)}}})})});RW._.each(c(".rw_user_details .rw_unfollow"),function(d){c("a",d).unbind("click");c("a",d).bind("click",function(f){f.stopPropagation();c("span",d).removeClass("rw_no_icon").addClass("rw_loading");c.ajax({url:contextPath+"/rest/originaltheme/1.0/user/"+c(d).data("username")+"/unfollow",type:"POST",cache:false,success:function(e){var g=e;c("span",d).addClass("rw_no_icon").removeClass("rw_loading");if(!g){c(d).removeClass("rw_unfollow");c(d).addClass("rw_follow");c("span",d).html("Follow")}RW.registerUserClickEvents()},error:function(e){if(e.status!=0){alert(e.status+" "+e.statusText)}}});RW.registerUserClickEvents()})});RW._.each(c(".rw_user_details .rw_update_status_button"),function(d){c(d).unbind("click");c(d).bind("click",function(f){f.stopPropagation();if(RW.confluenceVersion&&RW.confluenceVersion<5){c("#set-user-status-link").click()}else{c("#create-user-status-link").click()}c(".status-update-button","#update-user-status-dialog").bind("click",function(g){c(document).ajaxSuccess(function(i,j,h){if(h.url.indexOf("status/update.action")!=-1){location.href=location.href}})})})})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
